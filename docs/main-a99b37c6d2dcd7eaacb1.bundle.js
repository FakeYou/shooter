!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/shooter/",n(n.s=73)}([function(e,t,n){"use strict";e.exports=n(62)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"WebGLRenderTargetCube",function(){return sn}),n.d(t,"WebGLRenderTarget",function(){return an}),n.d(t,"WebGLRenderer",function(){return Ii}),n.d(t,"ShaderLib",function(){return xn}),n.d(t,"UniformsLib",function(){return _n}),n.d(t,"UniformsUtils",function(){return mn}),n.d(t,"ShaderChunk",function(){return fn}),n.d(t,"FogExp2",function(){return Ni}),n.d(t,"Fog",function(){return Di}),n.d(t,"Scene",function(){return Ui}),n.d(t,"Sprite",function(){return Bi}),n.d(t,"LOD",function(){return Fi}),n.d(t,"SkinnedMesh",function(){return Gi}),n.d(t,"Skeleton",function(){return zi}),n.d(t,"Bone",function(){return Hi}),n.d(t,"Mesh",function(){return fr}),n.d(t,"LineSegments",function(){return Wi}),n.d(t,"LineLoop",function(){return qi}),n.d(t,"Line",function(){return Vi}),n.d(t,"Points",function(){return Yi}),n.d(t,"Group",function(){return Ki}),n.d(t,"VideoTexture",function(){return Zi}),n.d(t,"DataTexture",function(){return cn}),n.d(t,"CompressedTexture",function(){return Ji}),n.d(t,"CubeTexture",function(){return vr}),n.d(t,"CanvasTexture",function(){return Ai}),n.d(t,"DepthTexture",function(){return $i}),n.d(t,"Texture",function(){return rn}),n.d(t,"CompressedTextureLoader",function(){return Sa}),n.d(t,"DataTextureLoader",function(){return Aa}),n.d(t,"CubeTextureLoader",function(){return La}),n.d(t,"TextureLoader",function(){return Ca}),n.d(t,"ObjectLoader",function(){return Ns}),n.d(t,"MaterialLoader",function(){return Ms}),n.d(t,"BufferGeometryLoader",function(){return Ts}),n.d(t,"DefaultLoadingManager",function(){return Ea}),n.d(t,"LoadingManager",function(){return wa}),n.d(t,"JSONLoader",function(){return Is}),n.d(t,"ImageLoader",function(){return Ra}),n.d(t,"ImageBitmapLoader",function(){return Fs}),n.d(t,"FontLoader",function(){return js}),n.d(t,"FileLoader",function(){return Ta}),n.d(t,"Loader",function(){return Ps}),n.d(t,"LoaderUtils",function(){return Os}),n.d(t,"Cache",function(){return ba}),n.d(t,"AudioLoader",function(){return fc}),n.d(t,"SpotLightShadow",function(){return rs}),n.d(t,"SpotLight",function(){return is}),n.d(t,"PointLight",function(){return os}),n.d(t,"RectAreaLight",function(){return us}),n.d(t,"HemisphereLight",function(){return ts}),n.d(t,"DirectionalLightShadow",function(){return as}),n.d(t,"DirectionalLight",function(){return ss}),n.d(t,"AmbientLight",function(){return cs}),n.d(t,"LightShadow",function(){return ns}),n.d(t,"Light",function(){return es}),n.d(t,"StereoCamera",function(){return mc}),n.d(t,"PerspectiveCamera",function(){return Ci}),n.d(t,"OrthographicCamera",function(){return Cn}),n.d(t,"CubeCamera",function(){return vc}),n.d(t,"ArrayCamera",function(){return Pi}),n.d(t,"Camera",function(){return Ln}),n.d(t,"AudioListener",function(){return gc}),n.d(t,"PositionalAudio",function(){return _c}),n.d(t,"AudioContext",function(){return dc}),n.d(t,"AudioAnalyser",function(){return xc}),n.d(t,"Audio",function(){return yc}),n.d(t,"VectorKeyframeTrack",function(){return ws}),n.d(t,"StringKeyframeTrack",function(){return ls}),n.d(t,"QuaternionKeyframeTrack",function(){return fs}),n.d(t,"NumberKeyframeTrack",function(){return vs}),n.d(t,"ColorKeyframeTrack",function(){return ms}),n.d(t,"BooleanKeyframeTrack",function(){return hs}),n.d(t,"PropertyMixer",function(){return bc}),n.d(t,"PropertyBinding",function(){return Ec}),n.d(t,"KeyframeTrack",function(){return bs}),n.d(t,"AnimationUtils",function(){return xs}),n.d(t,"AnimationObjectGroup",function(){return Mc}),n.d(t,"AnimationMixer",function(){return Sc}),n.d(t,"AnimationClip",function(){return Es}),n.d(t,"Uniform",function(){return Ac}),n.d(t,"InstancedBufferGeometry",function(){return Rc}),n.d(t,"BufferGeometry",function(){return Kn}),n.d(t,"Geometry",function(){return Dn}),n.d(t,"InterleavedBufferAttribute",function(){return Lc}),n.d(t,"InstancedInterleavedBuffer",function(){return Pc}),n.d(t,"InterleavedBuffer",function(){return Cc}),n.d(t,"InstancedBufferAttribute",function(){return Oc}),n.d(t,"Face3",function(){return Pn}),n.d(t,"Object3D",function(){return Rn}),n.d(t,"Raycaster",function(){return Ic}),n.d(t,"Layers",function(){return wn}),n.d(t,"EventDispatcher",function(){return r}),n.d(t,"Clock",function(){return Uc}),n.d(t,"QuaternionLinearInterpolant",function(){return ds}),n.d(t,"LinearInterpolant",function(){return ys}),n.d(t,"DiscreteInterpolant",function(){return _s}),n.d(t,"CubicInterpolant",function(){return gs}),n.d(t,"Interpolant",function(){return ps}),n.d(t,"Triangle",function(){return dr}),n.d(t,"Math",function(){return Vt}),n.d(t,"Spherical",function(){return kc}),n.d(t,"Cylindrical",function(){return Bc}),n.d(t,"Plane",function(){return hn}),n.d(t,"Frustum",function(){return pn}),n.d(t,"Sphere",function(){return ln}),n.d(t,"Ray",function(){return hr}),n.d(t,"Matrix4",function(){return qt}),n.d(t,"Matrix3",function(){return Kt}),n.d(t,"Box3",function(){return un}),n.d(t,"Box2",function(){return Fc}),n.d(t,"Line3",function(){return pr}),n.d(t,"Euler",function(){return bn}),n.d(t,"Vector4",function(){return on}),n.d(t,"Vector3",function(){return Yt}),n.d(t,"Vector2",function(){return Wt}),n.d(t,"Quaternion",function(){return Xt}),n.d(t,"Color",function(){return gn}),n.d(t,"ImmediateRenderObject",function(){return zc}),n.d(t,"VertexNormalsHelper",function(){return Hc}),n.d(t,"SpotLightHelper",function(){return Gc}),n.d(t,"SkeletonHelper",function(){return jc}),n.d(t,"PointLightHelper",function(){return Vc}),n.d(t,"RectAreaLightHelper",function(){return Wc}),n.d(t,"HemisphereLightHelper",function(){return qc}),n.d(t,"GridHelper",function(){return Xc}),n.d(t,"PolarGridHelper",function(){return Yc}),n.d(t,"FaceNormalsHelper",function(){return Kc}),n.d(t,"DirectionalLightHelper",function(){return Zc}),n.d(t,"CameraHelper",function(){return Jc}),n.d(t,"BoxHelper",function(){return $c}),n.d(t,"Box3Helper",function(){return Qc}),n.d(t,"PlaneHelper",function(){return eu}),n.d(t,"ArrowHelper",function(){return tu}),n.d(t,"AxesHelper",function(){return nu}),n.d(t,"Shape",function(){return Qa}),n.d(t,"Path",function(){return $a}),n.d(t,"ShapePath",function(){return zs}),n.d(t,"Font",function(){return Hs}),n.d(t,"CurvePath",function(){return Ja}),n.d(t,"Curve",function(){return Pa}),n.d(t,"ShapeUtils",function(){return zo}),n.d(t,"WebGLUtils",function(){return Li}),n.d(t,"WireframeGeometry",function(){return Qi}),n.d(t,"ParametricGeometry",function(){return eo}),n.d(t,"ParametricBufferGeometry",function(){return to}),n.d(t,"TetrahedronGeometry",function(){return io}),n.d(t,"TetrahedronBufferGeometry",function(){return oo}),n.d(t,"OctahedronGeometry",function(){return ao}),n.d(t,"OctahedronBufferGeometry",function(){return so}),n.d(t,"IcosahedronGeometry",function(){return co}),n.d(t,"IcosahedronBufferGeometry",function(){return uo}),n.d(t,"DodecahedronGeometry",function(){return lo}),n.d(t,"DodecahedronBufferGeometry",function(){return ho}),n.d(t,"PolyhedronGeometry",function(){return no}),n.d(t,"PolyhedronBufferGeometry",function(){return ro}),n.d(t,"TubeGeometry",function(){return po}),n.d(t,"TubeBufferGeometry",function(){return fo}),n.d(t,"TorusKnotGeometry",function(){return mo}),n.d(t,"TorusKnotBufferGeometry",function(){return vo}),n.d(t,"TorusGeometry",function(){return go}),n.d(t,"TorusBufferGeometry",function(){return yo}),n.d(t,"TextGeometry",function(){return qo}),n.d(t,"TextBufferGeometry",function(){return Xo}),n.d(t,"SphereGeometry",function(){return Yo}),n.d(t,"SphereBufferGeometry",function(){return Ko}),n.d(t,"RingGeometry",function(){return Zo}),n.d(t,"RingBufferGeometry",function(){return Jo}),n.d(t,"PlaneGeometry",function(){return $n}),n.d(t,"PlaneBufferGeometry",function(){return Qn}),n.d(t,"LatheGeometry",function(){return $o}),n.d(t,"LatheBufferGeometry",function(){return Qo}),n.d(t,"ShapeGeometry",function(){return ea}),n.d(t,"ShapeBufferGeometry",function(){return ta}),n.d(t,"ExtrudeGeometry",function(){return jo}),n.d(t,"ExtrudeBufferGeometry",function(){return Vo}),n.d(t,"EdgesGeometry",function(){return ra}),n.d(t,"ConeGeometry",function(){return aa}),n.d(t,"ConeBufferGeometry",function(){return sa}),n.d(t,"CylinderGeometry",function(){return ia}),n.d(t,"CylinderBufferGeometry",function(){return oa}),n.d(t,"CircleGeometry",function(){return ca}),n.d(t,"CircleBufferGeometry",function(){return ua}),n.d(t,"BoxGeometry",function(){return Zn}),n.d(t,"BoxBufferGeometry",function(){return Jn}),n.d(t,"ShadowMaterial",function(){return ha}),n.d(t,"SpriteMaterial",function(){return ki}),n.d(t,"RawShaderMaterial",function(){return pa}),n.d(t,"ShaderMaterial",function(){return lr}),n.d(t,"PointsMaterial",function(){return Xi}),n.d(t,"MeshPhysicalMaterial",function(){return fa}),n.d(t,"MeshStandardMaterial",function(){return da}),n.d(t,"MeshPhongMaterial",function(){return ma}),n.d(t,"MeshToonMaterial",function(){return va}),n.d(t,"MeshNormalMaterial",function(){return ga}),n.d(t,"MeshLambertMaterial",function(){return ya}),n.d(t,"MeshDepthMaterial",function(){return Mi}),n.d(t,"MeshDistanceMaterial",function(){return Ti}),n.d(t,"MeshBasicMaterial",function(){return ur}),n.d(t,"LineDashedMaterial",function(){return _a}),n.d(t,"LineBasicMaterial",function(){return ji}),n.d(t,"Material",function(){return cr}),n.d(t,"Float64BufferAttribute",function(){return Wn}),n.d(t,"Float32BufferAttribute",function(){return Vn}),n.d(t,"Uint32BufferAttribute",function(){return jn}),n.d(t,"Int32BufferAttribute",function(){return Gn}),n.d(t,"Uint16BufferAttribute",function(){return Hn}),n.d(t,"Int16BufferAttribute",function(){return zn}),n.d(t,"Uint8ClampedBufferAttribute",function(){return Fn}),n.d(t,"Uint8BufferAttribute",function(){return Bn}),n.d(t,"Int8BufferAttribute",function(){return kn}),n.d(t,"BufferAttribute",function(){return Un}),n.d(t,"ArcCurve",function(){return Ia}),n.d(t,"CatmullRomCurve3",function(){return Fa}),n.d(t,"CubicBezierCurve",function(){return ja}),n.d(t,"CubicBezierCurve3",function(){return Va}),n.d(t,"EllipseCurve",function(){return Oa}),n.d(t,"LineCurve",function(){return Wa}),n.d(t,"LineCurve3",function(){return qa}),n.d(t,"QuadraticBezierCurve",function(){return Xa}),n.d(t,"QuadraticBezierCurve3",function(){return Ya}),n.d(t,"SplineCurve",function(){return Ka}),n.d(t,"REVISION",function(){return d}),n.d(t,"MOUSE",function(){return f}),n.d(t,"CullFaceNone",function(){return m}),n.d(t,"CullFaceBack",function(){return v}),n.d(t,"CullFaceFront",function(){return g}),n.d(t,"CullFaceFrontBack",function(){return y}),n.d(t,"FrontFaceDirectionCW",function(){return _}),n.d(t,"FrontFaceDirectionCCW",function(){return x}),n.d(t,"BasicShadowMap",function(){return b}),n.d(t,"PCFShadowMap",function(){return w}),n.d(t,"PCFSoftShadowMap",function(){return E}),n.d(t,"FrontSide",function(){return M}),n.d(t,"BackSide",function(){return T}),n.d(t,"DoubleSide",function(){return S}),n.d(t,"FlatShading",function(){return A}),n.d(t,"SmoothShading",function(){return R}),n.d(t,"NoColors",function(){return L}),n.d(t,"FaceColors",function(){return C}),n.d(t,"VertexColors",function(){return P}),n.d(t,"NoBlending",function(){return O}),n.d(t,"NormalBlending",function(){return I}),n.d(t,"AdditiveBlending",function(){return N}),n.d(t,"SubtractiveBlending",function(){return D}),n.d(t,"MultiplyBlending",function(){return U}),n.d(t,"CustomBlending",function(){return k}),n.d(t,"AddEquation",function(){return B}),n.d(t,"SubtractEquation",function(){return F}),n.d(t,"ReverseSubtractEquation",function(){return z}),n.d(t,"MinEquation",function(){return H}),n.d(t,"MaxEquation",function(){return G}),n.d(t,"ZeroFactor",function(){return j}),n.d(t,"OneFactor",function(){return V}),n.d(t,"SrcColorFactor",function(){return W}),n.d(t,"OneMinusSrcColorFactor",function(){return q}),n.d(t,"SrcAlphaFactor",function(){return X}),n.d(t,"OneMinusSrcAlphaFactor",function(){return Y}),n.d(t,"DstAlphaFactor",function(){return K}),n.d(t,"OneMinusDstAlphaFactor",function(){return Z}),n.d(t,"DstColorFactor",function(){return J}),n.d(t,"OneMinusDstColorFactor",function(){return $}),n.d(t,"SrcAlphaSaturateFactor",function(){return Q}),n.d(t,"NeverDepth",function(){return ee}),n.d(t,"AlwaysDepth",function(){return te}),n.d(t,"LessDepth",function(){return ne}),n.d(t,"LessEqualDepth",function(){return re}),n.d(t,"EqualDepth",function(){return ie}),n.d(t,"GreaterEqualDepth",function(){return oe}),n.d(t,"GreaterDepth",function(){return ae}),n.d(t,"NotEqualDepth",function(){return se}),n.d(t,"MultiplyOperation",function(){return ce}),n.d(t,"MixOperation",function(){return ue}),n.d(t,"AddOperation",function(){return le}),n.d(t,"NoToneMapping",function(){return he}),n.d(t,"LinearToneMapping",function(){return pe}),n.d(t,"ReinhardToneMapping",function(){return de}),n.d(t,"Uncharted2ToneMapping",function(){return fe}),n.d(t,"CineonToneMapping",function(){return me}),n.d(t,"UVMapping",function(){return ve}),n.d(t,"CubeReflectionMapping",function(){return ge}),n.d(t,"CubeRefractionMapping",function(){return ye}),n.d(t,"EquirectangularReflectionMapping",function(){return _e}),n.d(t,"EquirectangularRefractionMapping",function(){return xe}),n.d(t,"SphericalReflectionMapping",function(){return be}),n.d(t,"CubeUVReflectionMapping",function(){return we}),n.d(t,"CubeUVRefractionMapping",function(){return Ee}),n.d(t,"RepeatWrapping",function(){return Me}),n.d(t,"ClampToEdgeWrapping",function(){return Te}),n.d(t,"MirroredRepeatWrapping",function(){return Se}),n.d(t,"NearestFilter",function(){return Ae}),n.d(t,"NearestMipMapNearestFilter",function(){return Re}),n.d(t,"NearestMipMapLinearFilter",function(){return Le}),n.d(t,"LinearFilter",function(){return Ce}),n.d(t,"LinearMipMapNearestFilter",function(){return Pe}),n.d(t,"LinearMipMapLinearFilter",function(){return Oe}),n.d(t,"UnsignedByteType",function(){return Ie}),n.d(t,"ByteType",function(){return Ne}),n.d(t,"ShortType",function(){return De}),n.d(t,"UnsignedShortType",function(){return Ue}),n.d(t,"IntType",function(){return ke}),n.d(t,"UnsignedIntType",function(){return Be}),n.d(t,"FloatType",function(){return Fe}),n.d(t,"HalfFloatType",function(){return ze}),n.d(t,"UnsignedShort4444Type",function(){return He}),n.d(t,"UnsignedShort5551Type",function(){return Ge}),n.d(t,"UnsignedShort565Type",function(){return je}),n.d(t,"UnsignedInt248Type",function(){return Ve}),n.d(t,"AlphaFormat",function(){return We}),n.d(t,"RGBFormat",function(){return qe}),n.d(t,"RGBAFormat",function(){return Xe}),n.d(t,"LuminanceFormat",function(){return Ye}),n.d(t,"LuminanceAlphaFormat",function(){return Ke}),n.d(t,"RGBEFormat",function(){return Ze}),n.d(t,"DepthFormat",function(){return Je}),n.d(t,"DepthStencilFormat",function(){return $e}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return Qe}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return et}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return tt}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return nt}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return rt}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return it}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return ot}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return at}),n.d(t,"RGB_ETC1_Format",function(){return st}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return ct}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return ut}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return lt}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return ht}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return pt}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return dt}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return ft}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return mt}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return vt}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return gt}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return yt}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return _t}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return xt}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return bt}),n.d(t,"LoopOnce",function(){return wt}),n.d(t,"LoopRepeat",function(){return Et}),n.d(t,"LoopPingPong",function(){return Mt}),n.d(t,"InterpolateDiscrete",function(){return Tt}),n.d(t,"InterpolateLinear",function(){return St}),n.d(t,"InterpolateSmooth",function(){return At}),n.d(t,"ZeroCurvatureEnding",function(){return Rt}),n.d(t,"ZeroSlopeEnding",function(){return Lt}),n.d(t,"WrapAroundEnding",function(){return Ct}),n.d(t,"TrianglesDrawMode",function(){return Pt}),n.d(t,"TriangleStripDrawMode",function(){return Ot}),n.d(t,"TriangleFanDrawMode",function(){return It}),n.d(t,"LinearEncoding",function(){return Nt}),n.d(t,"sRGBEncoding",function(){return Dt}),n.d(t,"GammaEncoding",function(){return Ut}),n.d(t,"RGBEEncoding",function(){return kt}),n.d(t,"LogLuvEncoding",function(){return Bt}),n.d(t,"RGBM7Encoding",function(){return Ft}),n.d(t,"RGBM16Encoding",function(){return zt}),n.d(t,"RGBDEncoding",function(){return Ht}),n.d(t,"BasicDepthPacking",function(){return Gt}),n.d(t,"RGBADepthPacking",function(){return jt}),n.d(t,"CubeGeometry",function(){return Zn}),n.d(t,"Face4",function(){return ru}),n.d(t,"LineStrip",function(){return iu}),n.d(t,"LinePieces",function(){return ou}),n.d(t,"MeshFaceMaterial",function(){return au}),n.d(t,"MultiMaterial",function(){return su}),n.d(t,"PointCloud",function(){return cu}),n.d(t,"Particle",function(){return uu}),n.d(t,"ParticleSystem",function(){return lu}),n.d(t,"PointCloudMaterial",function(){return hu}),n.d(t,"ParticleBasicMaterial",function(){return pu}),n.d(t,"ParticleSystemMaterial",function(){return du}),n.d(t,"Vertex",function(){return fu}),n.d(t,"DynamicBufferAttribute",function(){return mu}),n.d(t,"Int8Attribute",function(){return vu}),n.d(t,"Uint8Attribute",function(){return gu}),n.d(t,"Uint8ClampedAttribute",function(){return yu}),n.d(t,"Int16Attribute",function(){return _u}),n.d(t,"Uint16Attribute",function(){return xu}),n.d(t,"Int32Attribute",function(){return bu}),n.d(t,"Uint32Attribute",function(){return wu}),n.d(t,"Float32Attribute",function(){return Eu}),n.d(t,"Float64Attribute",function(){return Mu}),n.d(t,"ClosedSplineCurve3",function(){return Tu}),n.d(t,"SplineCurve3",function(){return Su}),n.d(t,"Spline",function(){return Au}),n.d(t,"AxisHelper",function(){return Ru}),n.d(t,"BoundingBoxHelper",function(){return Lu}),n.d(t,"EdgesHelper",function(){return Cu}),n.d(t,"WireframeHelper",function(){return Pu}),n.d(t,"XHRLoader",function(){return Ou}),n.d(t,"BinaryTextureLoader",function(){return Iu}),n.d(t,"GeometryUtils",function(){return Nu}),n.d(t,"ImageUtils",function(){return Du}),n.d(t,"Projector",function(){return Uu}),n.d(t,"CanvasRenderer",function(){return ku}),n.d(t,"SceneUtils",function(){return Bu}),n.d(t,"LensFlare",function(){return Fu}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(r.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var i,o,a,s,c,u,l,h,p,d="92",f={LEFT:0,MIDDLE:1,RIGHT:2},m=0,v=1,g=2,y=3,_=0,x=1,b=0,w=1,E=2,M=0,T=1,S=2,A=1,R=2,L=0,C=1,P=2,O=0,I=1,N=2,D=3,U=4,k=5,B=100,F=101,z=102,H=103,G=104,j=200,V=201,W=202,q=203,X=204,Y=205,K=206,Z=207,J=208,$=209,Q=210,ee=0,te=1,ne=2,re=3,ie=4,oe=5,ae=6,se=7,ce=0,ue=1,le=2,he=0,pe=1,de=2,fe=3,me=4,ve=300,ge=301,ye=302,_e=303,xe=304,be=305,we=306,Ee=307,Me=1e3,Te=1001,Se=1002,Ae=1003,Re=1004,Le=1005,Ce=1006,Pe=1007,Oe=1008,Ie=1009,Ne=1010,De=1011,Ue=1012,ke=1013,Be=1014,Fe=1015,ze=1016,He=1017,Ge=1018,je=1019,Ve=1020,We=1021,qe=1022,Xe=1023,Ye=1024,Ke=1025,Ze=Xe,Je=1026,$e=1027,Qe=33776,et=33777,tt=33778,nt=33779,rt=35840,it=35841,ot=35842,at=35843,st=36196,ct=37808,ut=37809,lt=37810,ht=37811,pt=37812,dt=37813,ft=37814,mt=37815,vt=37816,gt=37817,yt=37818,_t=37819,xt=37820,bt=37821,wt=2200,Et=2201,Mt=2202,Tt=2300,St=2301,At=2302,Rt=2400,Lt=2401,Ct=2402,Pt=0,Ot=1,It=2,Nt=3e3,Dt=3001,Ut=3007,kt=3002,Bt=3003,Ft=3004,zt=3005,Ht=3006,Gt=3200,jt=3201,Vt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Vt.DEG2RAD},radToDeg:function(e){return e*Vt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Wt(e,t){this.x=e||0,this.y=t||0}function qt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Xt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function Yt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Kt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Wt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Wt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(i=new Wt,o=new Wt,function(e,t){return i.set(e,e),o.set(t,t),this.clamp(i,o)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(qt.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,c,u,l,h,p,d,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=u,v[10]=l,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new qt).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(h=new Yt,function(e){var t=this.elements,n=e.elements,r=1/h.setFromMatrixColumn(e,0).length(),i=1/h.setFromMatrixColumn(e,1).length(),o=1/h.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),c=Math.sin(r),u=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=o*u,p=o*l,d=a*u,f=a*l;t[0]=s*u,t[4]=-s*l,t[8]=c,t[1]=p+d*c,t[5]=h-f*c,t[9]=-a*s,t[2]=f-h*c,t[6]=d+p*c,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*c,t[1]=o*l,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order)m=s*u,v=s*l,g=c*u,y=c*l,t[0]=m-y*a,t[4]=-o*l,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*c,t[6]=a,t[10]=o*s;else if("ZYX"===e.order)h=o*u,p=o*l,d=a*u,f=a*l,t[0]=s*u,t[4]=d*c-p,t[8]=h*c+f,t[1]=s*l,t[5]=f*c+h,t[9]=p*c-d,t[2]=-c,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var _=o*s,x=o*c,b=a*s,w=a*c;t[0]=s*u,t[4]=w-_*l,t[8]=b*l+x,t[1]=l,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=x*l+b,t[10]=_-w*l}else"XZY"===e.order&&(_=o*s,x=o*c,b=a*s,w=a*c,t[0]=s*u,t[4]=-l,t[8]=c*u,t[1]=_*l+w,t[5]=o*u,t[9]=x*l-b,t[2]=b*l-x,t[6]=a*u,t[10]=w*l+_);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,r=e._y,i=e._z,o=e._w,a=n+n,s=r+r,c=i+i,u=n*a,l=n*s,h=n*c,p=r*s,d=r*c,f=i*c,m=o*a,v=o*s,g=o*c;return t[0]=1-(p+f),t[4]=l-g,t[8]=h+v,t[1]=l+g,t[5]=1-(u+f),t[9]=d-m,t[2]=h-v,t[6]=d+m,t[10]=1-(u+p),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:(c=new Yt,u=new Yt,l=new Yt,function(e,t,n){var r=this.elements;return l.subVectors(e,t),0===l.lengthSq()&&(l.z=1),l.normalize(),c.crossVectors(n,l),0===c.lengthSq()&&(1===Math.abs(n.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),c.crossVectors(n,l)),c.normalize(),u.crossVectors(l,c),r[0]=c.x,r[4]=u.x,r[8]=l.x,r[1]=c.y,r[5]=u.y,r[9]=l.y,r[2]=c.z,r[6]=u.z,r[10]=l.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],u=n[1],l=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],x=n[15],b=r[0],w=r[4],E=r[8],M=r[12],T=r[1],S=r[5],A=r[9],R=r[13],L=r[2],C=r[6],P=r[10],O=r[14],I=r[3],N=r[7],D=r[11],U=r[15];return i[0]=o*b+a*T+s*L+c*I,i[4]=o*w+a*S+s*C+c*N,i[8]=o*E+a*A+s*P+c*D,i[12]=o*M+a*R+s*O+c*U,i[1]=u*b+l*T+h*L+p*I,i[5]=u*w+l*S+h*C+p*N,i[9]=u*E+l*A+h*P+p*D,i[13]=u*M+l*R+h*O+p*U,i[2]=d*b+f*T+m*L+v*I,i[6]=d*w+f*S+m*C+v*N,i[10]=d*E+f*A+m*P+v*D,i[14]=d*M+f*R+m*O+v*U,i[3]=g*b+y*T+_*L+x*I,i[7]=g*w+y*S+_*C+x*N,i[11]=g*E+y*A+_*P+x*D,i[15]=g*M+y*R+_*O+x*U,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Yt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],u=e[2],l=e[6],h=e[10],p=e[14];return e[3]*(+i*s*l-r*c*l-i*a*h+n*c*h+r*a*p-n*s*p)+e[7]*(+t*s*p-t*c*h+i*o*h-r*o*p+r*c*u-i*s*u)+e[11]*(+t*c*l-t*a*p-i*o*l+n*o*p+i*a*u-n*c*u)+e[15]*(-r*a*u-t*s*l+t*a*h+r*o*l-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],u=r[5],l=r[6],h=r[7],p=r[8],d=r[9],f=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],x=d*y*h-g*f*h+g*l*m-u*y*m-d*l*_+u*f*_,b=v*f*h-p*y*h-v*l*m+c*y*m+p*l*_-c*f*_,w=p*g*h-v*d*h+v*u*m-c*g*m-p*u*_+c*d*_,E=v*d*l-p*g*l-v*u*f+c*g*f+p*u*y-c*d*y,M=i*x+o*b+a*w+s*E;if(0===M){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var S=1/M;return n[0]=x*S,n[1]=(g*f*s-d*y*s-g*a*m+o*y*m+d*a*_-o*f*_)*S,n[2]=(u*y*s-g*l*s+g*a*h-o*y*h-u*a*_+o*l*_)*S,n[3]=(d*l*s-u*f*s-d*a*h+o*f*h+u*a*m-o*l*m)*S,n[4]=b*S,n[5]=(p*y*s-v*f*s+v*a*m-i*y*m-p*a*_+i*f*_)*S,n[6]=(v*l*s-c*y*s-v*a*h+i*y*h+c*a*_-i*l*_)*S,n[7]=(c*f*s-p*l*s+p*a*h-i*f*h-c*a*m+i*l*m)*S,n[8]=w*S,n[9]=(v*d*s-p*g*s-v*o*m+i*g*m+p*o*_-i*d*_)*S,n[10]=(c*g*s-v*u*s+v*o*h-i*g*h-c*o*_+i*u*_)*S,n[11]=(p*u*s-c*d*s-p*o*h+i*d*h+c*o*m-i*u*m)*S,n[12]=E*S,n[13]=(p*g*a-v*d*a+v*o*f-i*g*f-p*o*y+i*d*y)*S,n[14]=(v*u*a-c*g*a-v*o*l+i*g*l+c*o*y-i*u*y)*S,n[15]=(c*d*a-p*u*a+p*o*l-i*d*l-c*o*f+i*u*f)*S,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,c=i*o,u=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,u*a+n,u*s-r*o,0,c*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:(a=new Yt,s=new qt,function(e,t,n){var r=this.elements,i=a.set(r[0],r[1],r[2]).length(),o=a.set(r[4],r[5],r[6]).length(),c=a.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],s.copy(this);var u=1/i,l=1/o,h=1/c;return s.elements[0]*=u,s.elements[1]*=u,s.elements[2]*=u,s.elements[4]*=l,s.elements[5]*=l,s.elements[6]*=l,s.elements[8]*=h,s.elements[9]*=h,s.elements[10]*=h,t.setFromRotationMatrix(s),n.x=i,n.y=o,n.z=c,this}),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),h=-(o+i)/(o-i),p=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),c=1/(n-r),u=1/(o-i),l=(t+e)*s,h=(n+r)*c,p=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(Xt,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],c=n[r+1],u=n[r+2],l=n[r+3],h=i[o+0],p=i[o+1],d=i[o+2],f=i[o+3];if(l!==f||s!==h||c!==p||u!==d){var m=1-a,v=s*h+c*p+u*d+l*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,v*g);m=Math.sin(m*x)/_,a=Math.sin(a*x)/_}var b=a*g;if(s=s*m+h*b,c=c*m+p*b,u=u*m+d*b,l=l*m+f*b,m===1-a){var w=1/Math.sqrt(s*s+c*c+u*u+l*l);s*=w,c*=w,u*=w,l*=w}}e[t]=s,e[t+1]=c,e[t+2]=u,e[t+3]=l}}),Object.defineProperties(Xt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Xt.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,c=a(n/2),u=a(r/2),l=a(i/2),h=s(n/2),p=s(r/2),d=s(i/2);return"XYZ"===o?(this._x=h*u*l+c*p*d,this._y=c*p*l-h*u*d,this._z=c*u*d+h*p*l,this._w=c*u*l-h*p*d):"YXZ"===o?(this._x=h*u*l+c*p*d,this._y=c*p*l-h*u*d,this._z=c*u*d-h*p*l,this._w=c*u*l+h*p*d):"ZXY"===o?(this._x=h*u*l-c*p*d,this._y=c*p*l+h*u*d,this._z=c*u*d+h*p*l,this._w=c*u*l-h*p*d):"ZYX"===o?(this._x=h*u*l-c*p*d,this._y=c*p*l+h*u*d,this._z=c*u*d-h*p*l,this._w=c*u*l+h*p*d):"YZX"===o?(this._x=h*u*l+c*p*d,this._y=c*p*l+h*u*d,this._z=c*u*d-h*p*l,this._w=c*u*l-h*p*d):"XZY"===o&&(this._x=h*u*l-c*p*d,this._y=c*p*l-h*u*d,this._z=c*u*d+h*p*l,this._w=c*u*l+h*p*d),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],c=n[9],u=n[2],l=n[6],h=n[10],p=r+s+h;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(l-c)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(l-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+l)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(c+l)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new Yt;return function(n,r){return void 0===t&&(t=new Yt),(e=n.dot(r)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-i*s,this._y=r*u+o*s+i*a-n*c,this._z=i*u+o*c+n*s-r*a,this._w=o*u-n*a-r*s-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var c=Math.atan2(s,a),u=Math.sin((1-t)*c)/s,l=Math.sin(t*c)/s;return this._w=o*u+this._w*l,this._x=n*u+this._x*l,this._y=r*u+this._y*l,this._z=i*u+this._z*l,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Yt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(p=new Xt,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(p.setFromEuler(e))}),applyAxisAngle:function(){var e=new Xt;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*n,u=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=c*s+h*-i+u*-a-l*-o,this.y=u*s+h*-o+l*-i-c*-a,this.z=l*s+h*-a+c*-o-u*-i,this},project:function(){var e=new qt;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new qt;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Yt,t=new Yt;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Yt;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Yt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Vt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Kt.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,c){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Yt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],u=n[4],l=n[7],h=n[2],p=n[5],d=n[8],f=r[0],m=r[3],v=r[6],g=r[1],y=r[4],_=r[7],x=r[2],b=r[5],w=r[8];return i[0]=o*f+a*g+s*x,i[3]=o*m+a*y+s*b,i[6]=o*v+a*_+s*w,i[1]=c*f+u*g+l*x,i[4]=c*m+u*y+l*b,i[7]=c*v+u*_+l*w,i[2]=h*f+p*g+d*x,i[5]=h*m+p*y+d*b,i[8]=h*v+p*_+d*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*i*u+n*a*s+r*i*c-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7],p=n[8],d=p*c-u*h,f=u*l-p*s,m=h*s-c*l,v=i*d+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=d*y,r[1]=(a*h-p*o)*y,r[2]=(u*o-a*c)*y,r[3]=f*y,r[4]=(p*i-a*l)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*l-h*i)*y,r[8]=(c*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),c=Math.sin(i);this.set(n*s,n*c,-n*(s*o+c*a)+o+e,-r*c,r*s,-r*(-c*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],c=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*c,r[6]=t*a+n*u,r[1]=-n*i+t*s,r[4]=-n*o+t*c,r[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Zt,Jt,$t,Qt,en,tn,nn=0;function rn(e,t,n,r,i,o,a,s,c,u){Object.defineProperty(this,"id",{value:nn++}),this.uuid=Vt.generateUUID(),this.name="",this.image=void 0!==e?e:rn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:rn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Te,this.wrapT=void 0!==r?r:Te,this.magFilter=void 0!==i?i:Ce,this.minFilter=void 0!==o?o:Oe,this.anisotropy=void 0!==c?c:1,this.format=void 0!==a?a:Xe,this.type=void 0!==s?s:Ie,this.offset=new Wt(0,0),this.repeat=new Wt(1,1),this.center=new Wt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Nt,this.version=0,this.onUpdate=null}function on(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function an(e,t,n){this.width=e,this.height=t,this.scissor=new on(0,0,e,t),this.scissorTest=!1,this.viewport=new on(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=Ce),this.texture=new rn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function sn(e,t,n){an.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function cn(e,t,n,r,i,o,a,s,c,u,l,h){rn.call(this,null,o,a,s,c,u,r,i,l,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:Ae,this.minFilter=void 0!==u?u:Ae,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function un(e,t){this.min=void 0!==e?e:new Yt(1/0,1/0,1/0),this.max=void 0!==t?t:new Yt(-1/0,-1/0,-1/0)}function ln(e,t){this.center=void 0!==e?e:new Yt,this.radius=void 0!==t?t:0}function hn(e,t){this.normal=void 0!==e?e:new Yt(1,0,0),this.constant=void 0!==t?t:0}function pn(e,t,n,r,i,o){this.planes=[void 0!==e?e:new hn,void 0!==t?t:new hn,void 0!==n?n:new hn,void 0!==r?r:new hn,void 0!==i?i:new hn,void 0!==o?o:new hn]}rn.DEFAULT_IMAGE=void 0,rn.DEFAULT_MAPPING=ve,rn.prototype=Object.assign(Object.create(r.prototype),{constructor:rn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=Vt.generateUUID()),t||void 0!==e.images[r.uuid]||(e.images[r.uuid]={uuid:r.uuid,url:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(r)}),n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===ve){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Me:e.x=e.x-Math.floor(e.x);break;case Te:e.x=e.x<0?0:1;break;case Se:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Me:e.y=e.y-Math.floor(e.y);break;case Te:e.y=e.y<0?0:1;break;case Se:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(rn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(on.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],c=o[8],u=o[1],l=o[5],h=o[9],p=o[2],d=o[6],f=o[10];if(Math.abs(s-u)<.01&&Math.abs(c-p)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+u)<.1&&Math.abs(c+p)<.1&&Math.abs(h+d)<.1&&Math.abs(a+l+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(l+1)/2,g=(f+1)/2,y=(s+u)/4,_=(c+p)/4,x=(h+d)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=_/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=x/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(g)),r=x/i),this.set(n,r,i,t),this}var b=Math.sqrt((d-h)*(d-h)+(c-p)*(c-p)+(u-s)*(u-s));return Math.abs(b)<.001&&(b=1),this.x=(d-h)/b,this.y=(c-p)/b,this.z=(u-s)/b,this.w=Math.acos((a+l+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new on,t=new on),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),an.prototype=Object.assign(Object.create(r.prototype),{constructor:an,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),sn.prototype=Object.create(an.prototype),sn.prototype.constructor=sn,sn.prototype.isWebGLRenderTargetCube=!0,cn.prototype=Object.create(rn.prototype),cn.prototype.constructor=cn,cn.prototype.isDataTexture=!0,Object.assign(un.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var u=e[s],l=e[s+1],h=e[s+2];u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var u=e.getX(s),l=e.getY(s),h=e.getZ(s);u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Yt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Yt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Yt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new Yt;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)r.copy(a[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Yt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Jt=new Yt,function(e){return this.clampPoint(e.center,Jt),Jt.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new Yt,t=new Yt,n=new Yt,r=new Yt,i=new Yt,o=new Yt,a=new Yt,s=new Yt,c=new Yt,u=new Yt;function l(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=c.x*Math.abs(a.x)+c.y*Math.abs(a.y)+c.z*Math.abs(a.z),u=e.dot(a),l=t.dot(a),h=n.dot(a);if(Math.max(-Math.max(u,l,h),Math.min(u,l,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),c.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(t,e),i.subVectors(n,t),o.subVectors(e,n);var h=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!l(h)&&!!l(h=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(r,i),l(h=[u.x,u.y,u.z]))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Yt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Yt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Yt;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new ln),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Zt=[new Yt,new Yt,new Yt,new Yt,new Yt,new Yt,new Yt,new Yt],function(e){return this.isEmpty()?this:(Zt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zt),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(ln.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:($t=new un,function(e,t){var n=this.center;void 0!==t?n.copy(t):$t.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Yt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new un),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(hn.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Yt,t=new Yt;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Yt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Yt;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Yt);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Yt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Yt,t=new Kt;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(pn.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],l=n[7],h=n[8],p=n[9],d=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,l-s,f-h,y-m).normalize(),t[1].setComponents(a+r,l+s,f+h,y+m).normalize(),t[2].setComponents(a+i,l+c,f+p,y+v).normalize(),t[3].setComponents(a-i,l-c,f-p,y-v).normalize(),t[4].setComponents(a-o,l-u,f-d,y-g).normalize(),t[5].setComponents(a+o,l+u,f+d,y+g).normalize(),this},intersectsObject:(tn=new ln,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),tn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(tn)}),intersectsSprite:function(){var e=new ln;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(Qt=new Yt,en=new Yt,function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];Qt.x=r.normal.x>0?e.min.x:e.max.x,en.x=r.normal.x>0?e.max.x:e.min.x,Qt.y=r.normal.y>0?e.min.y:e.max.y,en.y=r.normal.y>0?e.max.y:e.min.y,Qt.z=r.normal.z>0?e.min.z:e.max.z,en.z=r.normal.z>0?e.max.z:e.min.z;var i=r.distanceToPoint(Qt),o=r.distanceToPoint(en);if(i<0&&o<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var dn,fn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\t\tscale *= float( gl_FrontFacing ) * 2.0 - 1.0;\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},mn={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}},vn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function gn(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(gn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Vt.euclideanModulo(t,1),n=Vt.clamp(n,0,1),r=Vt.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,l=(u=n[1]).length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(u=vn[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),c=(s+a)/2;if(s===a)t=0,n=0;else{var u=a-s;switch(n=c<=.5?u/(a+s):u/(2-a-s),a){case r:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-r)/u+2;break;case o:t=(r-i)/u+4}t/=6}return e.h=t,e.s=n,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(dn={},function(e,t,n){return this.getHSL(dn),dn.h+=e,dn.s+=t,dn.l+=n,this.setHSL(dn.h,dn.s,dn.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var yn,_n={common:{diffuse:{value:new gn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Kt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Wt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gn(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new gn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Kt}}},xn={basic:{uniforms:mn.merge([_n.common,_n.specularmap,_n.envmap,_n.aomap,_n.lightmap,_n.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:mn.merge([_n.common,_n.specularmap,_n.envmap,_n.aomap,_n.lightmap,_n.emissivemap,_n.fog,_n.lights,{emissive:{value:new gn(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:mn.merge([_n.common,_n.specularmap,_n.envmap,_n.aomap,_n.lightmap,_n.emissivemap,_n.bumpmap,_n.normalmap,_n.displacementmap,_n.gradientmap,_n.fog,_n.lights,{emissive:{value:new gn(0)},specular:{value:new gn(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:mn.merge([_n.common,_n.envmap,_n.aomap,_n.lightmap,_n.emissivemap,_n.bumpmap,_n.normalmap,_n.displacementmap,_n.roughnessmap,_n.metalnessmap,_n.fog,_n.lights,{emissive:{value:new gn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},points:{uniforms:mn.merge([_n.points,_n.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:mn.merge([_n.common,_n.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:mn.merge([_n.common,_n.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:mn.merge([_n.common,_n.bumpmap,_n.normalmap,_n.displacementmap,{opacity:{value:1}}]),vertexShader:fn.normal_vert,fragmentShader:fn.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:mn.merge([_n.common,_n.displacementmap,{referencePosition:{value:new Yt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:mn.merge([_n.lights,_n.fog,{color:{value:new gn(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};function bn(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||bn.DefaultOrder}function wn(){this.mask=1}xn.physical={uniforms:mn.merge([xn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},bn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],bn.DefaultOrder="XYZ",Object.defineProperties(bn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(bn.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Vt.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],c=i[1],u=i[5],l=i[9],h=i[2],p=i[6],d=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new qt;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(yn=new Xt,function(e){return yn.setFromEuler(this),this.setFromQuaternion(yn,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Yt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(wn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var En,Mn,Tn,Sn,An=0;function Rn(){Object.defineProperty(this,"id",{value:An++}),this.uuid=Vt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rn.DefaultUp.clone();var e=new Yt,t=new bn,n=new Xt,r=new Yt(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new qt},normalMatrix:{value:new Kt}}),this.matrix=new qt,this.matrixWorld=new qt,this.matrixAutoUpdate=Rn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new wn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Ln(){Rn.call(this),this.type="Camera",this.matrixWorldInverse=new qt,this.projectionMatrix=new qt}function Cn(e,t,n,r,i,o){Ln.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Pn(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Yt,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new gn,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Rn.DefaultUp=new Yt(0,1,0),Rn.DefaultMatrixAutoUpdate=!0,Rn.prototype=Object.assign(Object.create(r.prototype),{constructor:Rn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(Sn=new Xt,function(e,t){return Sn.setFromAxisAngle(e,t),this.quaternion.multiply(Sn),this}),rotateOnWorldAxis:function(){var e=new Xt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Yt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Yt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Yt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Yt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Yt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Yt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Yt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Tn=new qt,function(e){return e.applyMatrix4(Tn.getInverse(this.matrixWorld))}),lookAt:function(){var e=new qt,t=new Yt;return function(n,r,i){n.isVector3?t.copy(n):t.set(n,r,i),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Yt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(En=new Yt,Mn=new Yt,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Xt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(En,e,Mn),e}),getWorldScale:function(){var e=new Yt,t=new Xt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Yt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new Xt;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Yt),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),void 0!==this.geometry){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,c=a.length;s<c;s++){var u=a[s];i(e.shapes,u)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,c=this.material.length;s<c;s++)l.push(i(e.materials,this.material[s]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0)for(r.children=[],s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object);if(t){var h=m(e.geometries),p=m(e.materials),d=m(e.textures),f=m(e.images);a=m(e.shapes),h.length>0&&(n.geometries=h),p.length>0&&(n.materials=p),d.length>0&&(n.textures=d),f.length>0&&(n.images=f),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),Ln.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Ln,isCamera:!0,copy:function(e,t){return Rn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Xt;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Yt),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){Rn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Cn.prototype=Object.assign(Object.create(Ln.prototype),{constructor:Cn,isOrthographicCamera:!0,copy:function(e,t){return Ln.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=l*(this.view.offsetX/c))+l*(this.view.width/c),s=(a-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=Rn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(Pn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var On,In,Nn=0;function Dn(){Object.defineProperty(this,"id",{value:Nn+=2}),this.uuid=Vt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Un(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function kn(e,t,n){Un.call(this,new Int8Array(e),t,n)}function Bn(e,t,n){Un.call(this,new Uint8Array(e),t,n)}function Fn(e,t,n){Un.call(this,new Uint8ClampedArray(e),t,n)}function zn(e,t,n){Un.call(this,new Int16Array(e),t,n)}function Hn(e,t,n){Un.call(this,new Uint16Array(e),t,n)}function Gn(e,t,n){Un.call(this,new Int32Array(e),t,n)}function jn(e,t,n){Un.call(this,new Uint32Array(e),t,n)}function Vn(e,t,n){Un.call(this,new Float32Array(e),t,n)}function Wn(e,t,n){Un.call(this,new Float64Array(e),t,n)}function qn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Xn(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Dn.prototype=Object.assign(Object.create(r.prototype),{constructor:Dn,isGeometry:!0,applyMatrix:function(e){for(var t=(new Kt).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new qt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new qt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new qt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new qt;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new qt;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:(In=new Rn,function(e){In.lookAt(e),In.updateMatrix(),this.applyMatrix(In.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,c=void 0!==r.uv2?r.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var u=[],l=[],h=[],p=0,d=0;p<i.length;p+=3,d+=2)t.vertices.push(new Yt(i[p],i[p+1],i[p+2])),void 0!==o&&u.push(new Yt(o[p],o[p+1],o[p+2])),void 0!==a&&t.colors.push(new gn(a[p],a[p+1],a[p+2])),void 0!==s&&l.push(new Wt(s[d],s[d+1])),void 0!==c&&h.push(new Wt(c[d],c[d+1]));function f(e,n,r,i){var p=new Pn(e,n,r,void 0!==o?[u[e].clone(),u[n].clone(),u[r].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(p),void 0!==s&&t.faceVertexUvs[0].push([l[e].clone(),l[n].clone(),l[r].clone()]),void 0!==c&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[r].clone()])}var m=e.groups;if(m.length>0)for(p=0;p<m.length;p++)for(var v=m[p],g=v.start,y=(d=g,g+v.count);d<y;d+=3)void 0!==n?f(n[d],n[d+1],n[d+2],v.materialIndex):f(d,d+1,d+2,v.materialIndex);else if(void 0!==n)for(p=0;p<n.length;p+=3)f(n[p],n[p+1],n[p+2]);else for(p=0;p<i.length/3;p+=3)f(p,p+1,p+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(On=new Yt,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(On).negate(),this.translate(On.x,On.y,On.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new qt;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Yt,t=new Yt,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Yt;if(e){var s,c,u,l=new Yt,h=new Yt;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],c=this.vertices[o.b],u=this.vertices[o.c],l.subVectors(u,c),h.subVectors(s,c),l.cross(h),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var p=(o=this.faces[r]).vertexNormals;3===p.length?(p[0].copy(a[o.a]),p[1].copy(a[o.b]),p[2].copy(a[o.c])):(p[0]=a[o.a].clone(),p[1]=a[o.b].clone(),p[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Dn;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)c=new Yt,u={a:new Yt,b:new Yt,c:new Yt},a.push(c),s.push(u)}var c,u,l=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],c=l.faceNormals[n],u=l.vertexNormals[n],c.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new un),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ln),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,u=this.faceVertexUvs[0],l=e.faceVertexUvs[0],h=this.colors,p=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new Kt).getNormalMatrix(t));for(var d=0,f=a.length;d<f;d++){var m=a[d].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(d=0,f=p.length;d<f;d++)h.push(p[d].clone());for(d=0,f=c.length;d<f;d++){var v,g,y,_=c[d],x=_.vertexNormals,b=_.vertexColors;(v=new Pn(_.a+i,_.b+i,_.c+i)).normal.copy(_.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var w=0,E=x.length;w<E;w++)g=x[w].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);for(v.color.copy(_.color),w=0,E=b.length;w<E;w++)y=b[w],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+n,s.push(v)}for(d=0,f=l.length;d<f;d++){var M=l[d],T=[];if(void 0!==M){for(w=0,E=M.length;w<E;w++)T.push(M[w].clone());u.push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,c={},u=[],l=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===c[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(c[t]=n,u.push(this.vertices[n]),l[n]=u.length-1):l[n]=l[c[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var f=p[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Yt(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],c={},u=[],l={},h=[],p={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,_=0;if(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_,0,0),1,!0),2,!1),3,f),4,m),5,v),6,g),7,y),a.push(_),a.push(d.a,d.b,d.c),a.push(d.materialIndex),f){var x=this.faceVertexUvs[0][i];a.push(S(x[0]),S(x[1]),S(x[2]))}if(m&&a.push(M(d.normal)),v){var b=d.vertexNormals;a.push(M(b[0]),M(b[1]),M(b[2]))}if(g&&a.push(T(d.color)),y){var w=d.vertexColors;a.push(T(w[0]),T(w[1]),T(w[2]))}}function E(e,t,n){return n?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]?l[t]:(l[t]=u.length,u.push(e.getHex()),l[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]?p[t]:(p[t]=h.length/2,h.push(e.x,e.y),p[t])}return e.data={},e.data.vertices=r,e.data.normals=s,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new Dn).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=l.length;r<i;r++){var h=l[r],p=[];for(o=0,a=h.length;o<a;o++){var d=h[o];p.push(d.clone())}this.faceVertexUvs[t].push(p)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],r=0,i=f[t].vertices.length;r<i;r++)m.vertices.push(f[t].vertices[r].clone());if(void 0!==f[t].normals)for(m.normals=[],r=0,i=f[t].normals.length;r<i;r++)m.normals.push(f[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),g.vertexNormals.push(_)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var b=e.skinIndices;for(t=0,n=b.length;t<n;t++)this.skinIndices.push(b[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Un.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Un.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new gn),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Wt),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Yt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new on),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),kn.prototype=Object.create(Un.prototype),kn.prototype.constructor=kn,Bn.prototype=Object.create(Un.prototype),Bn.prototype.constructor=Bn,Fn.prototype=Object.create(Un.prototype),Fn.prototype.constructor=Fn,zn.prototype=Object.create(Un.prototype),zn.prototype.constructor=zn,Hn.prototype=Object.create(Un.prototype),Hn.prototype.constructor=Hn,Gn.prototype=Object.create(Un.prototype),Gn.prototype.constructor=Gn,jn.prototype=Object.create(Un.prototype),jn.prototype.constructor=jn,Vn.prototype=Object.create(Un.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Object.create(Un.prototype),Wn.prototype.constructor=Wn,Object.assign(qn.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var u=0;u<c;u++)t[u]=[];this.morphTargets.position=t}var l,h=e.morphNormals,p=h.length;if(p>0){for(l=[],u=0;u<p;u++)l[u]=[];this.morphTargets.normal=l}var d=e.skinIndices,f=e.skinWeights,m=d.length===r.length,v=f.length===r.length;for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var x,b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var w=g.color;this.colors.push(w,w,w)}!0===o&&(void 0!==(x=i[0][u])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new Wt,new Wt,new Wt))),!0===a&&(void 0!==(x=i[1][u])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new Wt,new Wt,new Wt)));for(var E=0;E<c;E++){var M=s[E].vertices;t[E].push(M[g.a],M[g.b],M[g.c])}for(E=0;E<p;E++){var T=h[E].vertexNormals[u];l[E].push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Yn=1;function Kn(){Object.defineProperty(this,"id",{value:Yn+=2}),this.uuid=Vt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Zn(e,t,n,r,i,o){Dn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Jn(e,t,n,r,i,o)),this.mergeVertices()}function Jn(e,t,n,r,i,o){Kn.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var s=[],c=[],u=[],l=[],h=0,p=0;function d(e,t,n,r,i,o,d,f,m,v,g){var y,_,x=o/m,b=d/v,w=o/2,E=d/2,M=f/2,T=m+1,S=v+1,A=0,R=0,L=new Yt;for(_=0;_<S;_++){var C=_*b-E;for(y=0;y<T;y++){var P=y*x-w;L[e]=P*r,L[t]=C*i,L[n]=M,c.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[n]=f>0?1:-1,u.push(L.x,L.y,L.z),l.push(y/m),l.push(1-_/v),A+=1}}for(_=0;_<v;_++)for(y=0;y<m;y++){var O=h+y+T*_,I=h+y+T*(_+1),N=h+(y+1)+T*(_+1),D=h+(y+1)+T*_;s.push(O,I,D),s.push(I,N,D),R+=6}a.addGroup(p,R,g),p+=R,h+=A}d("z","y","x",-1,-1,n,t,e,o=Math.floor(o)||1,i,0),d("z","y","x",1,-1,n,t,-e,o,i,1),d("x","z","y",1,1,e,n,t,r,o,2),d("x","z","y",1,-1,e,n,-t,r,o,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new Vn(c,3)),this.addAttribute("normal",new Vn(u,3)),this.addAttribute("uv",new Vn(l,2))}function $n(e,t,n,r){Dn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Qn(e,t,n,r)),this.mergeVertices()}function Qn(e,t,n,r){Kn.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,c=Math.floor(n)||1,u=Math.floor(r)||1,l=c+1,h=u+1,p=e/c,d=t/u,f=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*d-s;for(i=0;i<l;i++){var _=i*p-a;m.push(_,-y,0),v.push(0,0,1),g.push(i/c),g.push(1-o/u)}}for(o=0;o<u;o++)for(i=0;i<c;i++){var x=i+l*o,b=i+l*(o+1),w=i+1+l*(o+1),E=i+1+l*o;f.push(x,b,E),f.push(b,w,E)}this.setIndex(f),this.addAttribute("position",new Vn(m,3)),this.addAttribute("normal",new Vn(v,3)),this.addAttribute("uv",new Vn(g,2))}Kn.prototype=Object.assign(Object.create(r.prototype),{constructor:Kn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Xn(e)>65535?jn:Hn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new Un(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new Kt).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new qt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new qt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new qt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new qt;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new qt;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Rn;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Yt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Vn(3*t.vertices.length,3),r=new Vn(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Vn(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new Vn(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new qn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Un(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Un(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new Un(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Un(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Un(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[a],u=0,l=c.length;u<l;u++){var h=c[u],p=new Vn(3*h.length,3);s.push(p.copyVector3sArray(h))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var d=new Vn(4*e.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new Vn(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new un);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new un,t=new Yt;return function(){null===this.boundingSphere&&(this.boundingSphere=new ln);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Un(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,c,u,l=t.normal.array,h=new Yt,p=new Yt,d=new Yt,f=new Yt,m=new Yt;if(e){var v=e.array;0===n.length&&this.addGroup(0,v.length);for(var g=0,y=n.length;g<y;++g){var _=n[g],x=_.start;for(o=x,a=x+_.count;o<a;o+=3)s=3*v[o+0],c=3*v[o+1],u=3*v[o+2],h.fromArray(r,s),p.fromArray(r,c),d.fromArray(r,u),f.subVectors(d,p),m.subVectors(h,p),f.cross(m),l[s]+=f.x,l[s+1]+=f.y,l[s+2]+=f.z,l[c]+=f.x,l[c+1]+=f.y,l[c+2]+=f.z,l[u]+=f.x,l[u+1]+=f.y,l[u+2]+=f.z}}else for(o=0,a=r.length;o<a;o+=9)h.fromArray(r,o),p.fromArray(r,o+3),d.fromArray(r,o+6),f.subVectors(d,p),m.subVectors(h,p),f.cross(m),l[o]=f.x,l[o+1]=f.y,l[o+2]=f.z,l[o+3]=f.x,l[o+4]=f.y,l[o+5]=f.z,l[o+6]=f.x,l[o+7]=f.y,l[o+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,c=o.itemSize*t;s<a.length;s++,c++)i[c]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Yt;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Kn,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),c=0,u=0,l=0,h=t.length;l<h;l++){c=t[l]*a;for(var p=0;p<a;p++)s[u++]=o[c++]}e.addAttribute(r,new Un(s,a))}var d=this.groups;for(l=0,h=d.length;l<h;l++){var f=d[l];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array),e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new Kn).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var c=[],u=s[t];for(n=0,r=u.length;n<r;n++)c.push(u[n].clone());this.morphAttributes[t]=c}var l=e.groups;for(n=0,r=l.length;n<r;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Zn.prototype=Object.create(Dn.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(Kn.prototype),Jn.prototype.constructor=Jn,$n.prototype=Object.create(Dn.prototype),$n.prototype.constructor=$n,Qn.prototype=Object.create(Kn.prototype),Qn.prototype.constructor=Qn;var er,tr,nr,rr,ir,or,ar,sr=0;function cr(){Object.defineProperty(this,"id",{value:sr++}),this.uuid=Vt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=I,this.side=M,this.flatShading=!1,this.vertexColors=L,this.opacity=1,this.transparent=!1,this.blendSrc=X,this.blendDst=Y,this.blendEquation=B,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=re,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function ur(e){cr.call(this),this.type="MeshBasicMaterial",this.color=new gn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function lr(e){cr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function hr(e,t){this.origin=void 0!==e?e:new Yt,this.direction=void 0!==t?t:new Yt}function pr(e,t){this.start=void 0!==e?e:new Yt,this.end=void 0!==t?t:new Yt}function dr(e,t,n){this.a=void 0!==e?e:new Yt,this.b=void 0!==t?t:new Yt,this.c=void 0!==n?n:new Yt}function fr(e,t){Rn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Kn,this.material=void 0!==t?t:new ur({color:16777215*Math.random()}),this.drawMode=Pt,this.updateMorphTargets()}function mr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function vr(e,t,n,r,i,o,a,s,c,u){e=void 0!==e?e:[],t=void 0!==t?t:ge,rn.call(this,e,t,n,r,i,o,a,s,c,u),this.flipY=!1}cr.prototype=Object.assign(Object.create(r.prototype),{constructor:cr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===A;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==I&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==M&&(n.side=this.side),this.vertexColors!==L&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ur.prototype=Object.create(cr.prototype),ur.prototype.constructor=ur,ur.prototype.isMeshBasicMaterial=!0,ur.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},lr.prototype=Object.create(cr.prototype),lr.prototype.constructor=lr,lr.prototype.isShaderMaterial=!0,lr.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mn.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},lr.prototype.toJSON=function(e){var t=cr.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(hr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Yt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Yt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Yt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Yt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(tr=new Yt,nr=new Yt,rr=new Yt,function(e,t,n,r){tr.copy(e).add(t).multiplyScalar(.5),nr.copy(t).sub(e).normalize(),rr.copy(this.origin).sub(tr);var i,o,a,s,c=.5*e.distanceTo(t),u=-this.direction.dot(nr),l=rr.dot(this.direction),h=-rr.dot(nr),p=rr.lengthSq(),d=Math.abs(1-u*u);if(d>0)if(o=u*l-h,s=c*d,(i=u*h-l)>=0)if(o>=-s)if(o<=s){var f=1/d;a=(i*=f)*(i+u*(o*=f)+2*l)+o*(u*i+o+2*h)+p}else o=c,a=-(i=Math.max(0,-(u*o+l)))*i+o*(o+2*h)+p;else o=-c,a=-(i=Math.max(0,-(u*o+l)))*i+o*(o+2*h)+p;else o<=-s?a=-(i=Math.max(0,-(-u*c+l)))*i+(o=i>0?-c:Math.min(Math.max(-c,-h),c))*(o+2*h)+p:o<=s?(i=0,a=(o=Math.min(Math.max(-c,-h),c))*(o+2*h)+p):a=-(i=Math.max(0,-(u*c+l)))*i+(o=i>0?c:Math.min(Math.max(-c,-h),c))*(o+2*h)+p;else o=u>0?-c:c,a=-(i=Math.max(0,-(u*o+l)))*i+o*(o+2*h)+p;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(nr).multiplyScalar(o).add(tr),a}),intersectSphere:function(){var e=new Yt;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,c=r+a;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),l>=0?(a=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(a=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:(er=new Yt,function(e){return null!==this.intersectBox(e,er)}),intersectTriangle:function(){var e=new Yt,t=new Yt,n=new Yt,r=new Yt;return function(i,o,a,s,c){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var u,l=this.direction.dot(r);if(l>0){if(s)return null;u=1}else{if(!(l<0))return null;u=-1,l=-l}e.subVectors(this.origin,i);var h=u*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var p=u*this.direction.dot(t.cross(e));if(p<0)return null;if(h+p>l)return null;var d=-u*e.dot(r);return d<0?null:this.at(d/l,c)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(pr.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Yt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Yt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Yt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(ir=new Yt,or=new Yt,function(e,t){ir.subVectors(e,this.start),or.subVectors(this.end,this.start);var n=or.dot(or),r=or.dot(ir)/n;return t&&(r=Vt.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Yt),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(dr,{getNormal:(ar=new Yt,function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Yt),r.subVectors(n,t),ar.subVectors(e,t),r.cross(ar);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}),getBarycoord:function(){var e=new Yt,t=new Yt,n=new Yt;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var c=e.dot(e),u=e.dot(t),l=e.dot(n),h=t.dot(t),p=t.dot(n),d=c*h-u*u;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Yt),0===d)return s.set(-2,-1,-1);var f=1/d,m=(h*l-u*p)*f,v=(c*p-u*l)*f;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new Yt;return function(t,n,r,i){return dr.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(dr.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Yt,t=new Yt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Yt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return dr.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Yt),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return dr.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return dr.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new hn,t=[new pr,new pr,new pr],n=new Yt,r=new Yt;return function(i,o){void 0===o&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new Yt);var a=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,n),!0===this.containsPoint(n))o.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var s=0;s<t.length;s++){t[s].closestPointToPoint(n,!0,r);var c=n.distanceToSquared(r);c<a&&(a=c,o.copy(r))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),fr.prototype=Object.assign(Object.create(Rn.prototype),{constructor:fr,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Rn.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new qt,t=new hr,n=new ln,r=new Yt,i=new Yt,o=new Yt,a=new Yt,s=new Yt,c=new Yt,u=new Wt,l=new Wt,h=new Wt,p=new Yt,d=new Yt,f=new Yt;function m(e,t,n,r,i,o,a){return dr.getBarycoord(e,t,n,r,p),i.multiplyScalar(p.x),o.multiplyScalar(p.y),a.multiplyScalar(p.z),i.add(o).add(a),i.clone()}function v(e,t,n,r,i,o,a,s){if(null===(t.side===T?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==S,s)))return null;f.copy(s),f.applyMatrix4(e.matrixWorld);var c=n.ray.origin.distanceTo(f);return c<n.near||c>n.far?null:{distance:c,point:f.clone(),object:e}}function g(e,t,n,a,s,c,p,f){r.fromBufferAttribute(a,c),i.fromBufferAttribute(a,p),o.fromBufferAttribute(a,f);var g=v(e,e.material,t,n,r,i,o,d);if(g){s&&(u.fromBufferAttribute(s,c),l.fromBufferAttribute(s,p),h.fromBufferAttribute(s,f),g.uv=m(d,r,i,o,u,l,h));var y=new Pn(c,p,f);dr.getNormal(r,i,o,y.normal),g.face=y,g.faceIndex=c}return g}return function(p,f){var y,_=this.geometry,x=this.material,b=this.matrixWorld;if(void 0!==x&&(null===_.boundingSphere&&_.computeBoundingSphere(),n.copy(_.boundingSphere),n.applyMatrix4(b),!1!==p.ray.intersectsSphere(n)&&(e.getInverse(b),t.copy(p.ray).applyMatrix4(e),null===_.boundingBox||!1!==t.intersectsBox(_.boundingBox))))if(_.isBufferGeometry){var w,E,M,T,S,A=_.index,R=_.attributes.position,L=_.attributes.uv;if(null!==A)for(T=0,S=A.count;T<S;T+=3)w=A.getX(T),E=A.getX(T+1),M=A.getX(T+2),(y=g(this,p,t,R,L,w,E,M))&&(y.faceIndex=Math.floor(T/3),f.push(y));else if(void 0!==R)for(T=0,S=R.count;T<S;T+=3)(y=g(this,p,t,R,L,w=T,E=T+1,M=T+2))&&f.push(y)}else if(_.isGeometry){var C,P,O,I,N=Array.isArray(x),D=_.vertices,U=_.faces,k=_.faceVertexUvs[0];k.length>0&&(I=k);for(var B=0,F=U.length;B<F;B++){var z=U[B],H=N?x[z.materialIndex]:x;if(void 0!==H){if(C=D[z.a],P=D[z.b],O=D[z.c],!0===H.morphTargets){var G=_.morphTargets,j=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var V=0,W=G.length;V<W;V++){var q=j[V];if(0!==q){var X=G[V].vertices;r.addScaledVector(a.subVectors(X[z.a],C),q),i.addScaledVector(s.subVectors(X[z.b],P),q),o.addScaledVector(c.subVectors(X[z.c],O),q)}}r.add(C),i.add(P),o.add(O),C=r,P=i,O=o}if(y=v(this,H,p,t,C,P,O,d)){if(I&&I[B]){var Y=I[B];u.copy(Y[0]),l.copy(Y[1]),h.copy(Y[2]),y.uv=m(d,C,P,O,u,l,h)}y.face=z,y.faceIndex=B,f.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),vr.prototype=Object.create(rn.prototype),vr.prototype.constructor=vr,vr.prototype.isCubeTexture=!0,Object.defineProperty(vr.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var gr=new rn,yr=new vr;function _r(){this.seq=[],this.map={}}var xr=[],br=[],wr=new Float32Array(16),Er=new Float32Array(9);function Mr(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=xr[i];if(void 0===o&&(o=new Float32Array(i),xr[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Tr(e,t){var n=br[t];void 0===n&&(n=new Int32Array(t),br[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function Sr(e,t){e.uniform1f(this.addr,t)}function Ar(e,t){e.uniform1i(this.addr,t)}function Rr(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function Lr(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function Cr(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function Pr(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function Or(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Er.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Er))}function Ir(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(wr.set(t.elements),e.uniformMatrix4fv(this.addr,!1,wr))}function Nr(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||gr,r)}function Dr(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||yr,r)}function Ur(e,t){e.uniform2iv(this.addr,t)}function kr(e,t){e.uniform3iv(this.addr,t)}function Br(e,t){e.uniform4iv(this.addr,t)}function Fr(e,t){e.uniform1fv(this.addr,t)}function zr(e,t){e.uniform1iv(this.addr,t)}function Hr(e,t){e.uniform2fv(this.addr,Mr(t,this.size,2))}function Gr(e,t){e.uniform3fv(this.addr,Mr(t,this.size,3))}function jr(e,t){e.uniform4fv(this.addr,Mr(t,this.size,4))}function Vr(e,t){e.uniformMatrix2fv(this.addr,!1,Mr(t,this.size,4))}function Wr(e,t){e.uniformMatrix3fv(this.addr,!1,Mr(t,this.size,9))}function qr(e,t){e.uniformMatrix4fv(this.addr,!1,Mr(t,this.size,16))}function Xr(e,t,n){var r=t.length,i=Tr(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(t[o]||gr,i[o])}function Yr(e,t,n){var r=t.length,i=Tr(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(t[o]||yr,i[o])}function Kr(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(t.type){case 5126:return Sr;case 35664:return Rr;case 35665:return Lr;case 35666:return Cr;case 35674:return Pr;case 35675:return Or;case 35676:return Ir;case 35678:case 36198:return Nr;case 35680:return Dr;case 5124:case 35670:return Ar;case 35667:case 35671:return Ur;case 35668:case 35672:return kr;case 35669:case 35673:return Br}}()}function Zr(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(t.type){case 5126:return Fr;case 35664:return Hr;case 35665:return Gr;case 35666:return jr;case 35674:return Vr;case 35675:return Wr;case 35676:return qr;case 35678:return Xr;case 35680:return Yr;case 5124:case 35670:return zr;case 35667:case 35671:return Ur;case 35668:case 35672:return kr;case 35669:case 35673:return Br}}()}function Jr(e){this.id=e,_r.call(this)}Jr.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(e,t[o.id])}};var $r=/([\w\d_]+)(\])?(\[|\.)?/g;function Qr(e,t){e.seq.push(t),e.map[t.id]=t}function ei(e,t,n){var r=e.name,i=r.length;for($r.lastIndex=0;;){var o=$r.exec(r),a=$r.lastIndex,s=o[1],c="]"===o[2],u=o[3];if(c&&(s|=0),void 0===u||"["===u&&a+2===i){Qr(n,void 0===u?new Kr(s,e,t):new Zr(s,e,t));break}var l=n.map[s];void 0===l&&Qr(n,l=new Jr(s)),n=l}}function ti(e,t,n){_r.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);ei(o,e.getUniformLocation(t,o.name),this)}}function ni(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}ti.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},ti.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},ti.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},ti.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var ri=0;function ii(e){switch(e){case Nt:return["Linear","( value )"];case Dt:return["sRGB","( value )"];case kt:return["RGBE","( value )"];case Ft:return["RGBM","( value, 7.0 )"];case zt:return["RGBM","( value, 16.0 )"];case Ht:return["RGBD","( value, 256.0 )"];case Ut:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function oi(e,t){var n=ii(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function ai(e){return""!==e}function si(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function ci(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function ui(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var n=fn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ui(n)})}function li(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function hi(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Nt,n===Nt&&t&&(n=Ut),n}this.getParameters=function(t,r,o,s,c,u,l){var h=i[t.type],p=l.isSkinnedMesh?function(e){var t=l.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}():0,d=n.precision;null!==t.precision&&(d=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead.");var f=e.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:a(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===we||t.envMap.mapping===Ee),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:c,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===S,flipSided:t.side===T,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(n,i,o,a){for(var s,c=0,u=r.length;c<u;c++){var l=r[c];if(l.code===a){++(s=l).usedTimes;break}}return void 0===s&&(s=new function(e,t,n,r,i,o){var a=e.context,s=r.defines,c=i.vertexShader,u=i.fragmentShader,l="SHADOWMAP_TYPE_BASIC";o.shadowMapType===w?l="SHADOWMAP_TYPE_PCF":o.shadowMapType===E&&(l="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case ge:case ye:h="ENVMAP_TYPE_CUBE";break;case we:case Ee:h="ENVMAP_TYPE_CUBE_UV";break;case _e:case xe:h="ENVMAP_TYPE_EQUIREC";break;case be:h="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case ye:case xe:p="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ce:d="ENVMAP_BLENDING_MULTIPLY";break;case ue:d="ENVMAP_BLENDING_MIX";break;case le:d="ENVMAP_BLENDING_ADD"}}var f,m,v,g,y,_=e.gammaFactor>0?e.gammaFactor:1,x=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ai).join("\n")}(r.extensions,o,t),b=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),M=a.createProgram();r.isRawShaderMaterial?((f=[b].filter(ai).join("\n")).length>0&&(f+="\n"),(m=[x,b].filter(ai).join("\n")).length>0&&(m+="\n")):(f=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ai).join("\n"),m=[x,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+_,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==he?"#define TONE_MAPPING":"",o.toneMapping!==he?fn.tonemapping_pars_fragment:"",o.toneMapping!==he?function(e,t){var n;switch(t){case pe:n="Linear";break;case de:n="Reinhard";break;case fe:n="Uncharted2";break;case me:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 toneMapping( vec3 color ) { return "+n+"ToneMapping( color ); }"}(0,o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?fn.encodings_pars_fragment:"",o.mapEncoding?oi("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?oi("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?oi("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(v="linearToOutputTexel",g=o.outputEncoding,y=ii(g),"vec4 "+v+"( vec4 value ) { return LinearTo"+y[0]+y[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(ai).join("\n")),c=ci(c=si(c=ui(c),o),o),u=ci(u=si(u=ui(u),o),o);var T=f+(c=li(c)),S=m+(u=li(u)),A=ni(a,a.VERTEX_SHADER,T),R=ni(a,a.FRAGMENT_SHADER,S);a.attachShader(M,A),a.attachShader(M,R),void 0!==r.index0AttributeName?a.bindAttribLocation(M,0,r.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(M,0,"position"),a.linkProgram(M);var L,C,P=a.getProgramInfoLog(M).trim(),O=a.getShaderInfoLog(A).trim(),I=a.getShaderInfoLog(R).trim(),N=!0,D=!0;return!1===a.getProgramParameter(M,a.LINK_STATUS)?(N=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(M,a.VALIDATE_STATUS),"gl.getProgramInfoLog",P,O,I)):""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==O&&""!==I||(D=!1),D&&(this.diagnostics={runnable:N,material:r,programLog:P,vertexShader:{log:O,prefix:f},fragmentShader:{log:I,prefix:m}}),a.deleteShader(A),a.deleteShader(R),this.getUniforms=function(){return void 0===L&&(L=new ti(a,M,e)),L},this.getAttributes=function(){return void 0===C&&(C=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(a,M)),C},this.destroy=function(){a.deleteProgram(M),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=ri++,this.code=n,this.usedTimes=1,this.program=M,this.vertexShader=A,this.fragmentShader=R,this}(e,t,a,n,i,o),r.push(s)),s},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function pi(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function di(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}var fi,mi,vi,gi,yi,_i,xi,bi,wi=0;function Ei(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new function(){var e=new function(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Yt,color:new gn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Wt};break;case"SpotLight":n={position:new Yt,direction:new Yt,color:new gn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Wt};break;case"PointLight":n={position:new Yt,color:new gn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Wt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Yt,skyColor:new gn,groundColor:new gn};break;case"RectAreaLight":n={color:new gn,position:new Yt,halfWidth:new Yt,halfHeight:new Yt}}return e[t.id]=n,n}}},t={id:wi++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Yt,r=new qt,i=new qt;return{setup:function(o,a,s){for(var c=0,u=0,l=0,h=0,p=0,d=0,f=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var _=o[g],x=_.color,b=_.intensity,w=_.distance,E=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)c+=x.r*b,u+=x.g*b,l+=x.b*b;else if(_.isDirectionalLight){if((T=e.get(_)).color.copy(_.color).multiplyScalar(_.intensity),T.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.shadow=_.castShadow,_.castShadow){var M=_.shadow;T.shadowBias=M.bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize}t.directionalShadowMap[h]=E,t.directionalShadowMatrix[h]=_.shadow.matrix,t.directional[h]=T,h++}else if(_.isSpotLight)(T=e.get(_)).position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),T.color.copy(x).multiplyScalar(b),T.distance=w,T.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.coneCos=Math.cos(_.angle),T.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),T.decay=0===_.distance?0:_.decay,T.shadow=_.castShadow,_.castShadow&&(M=_.shadow,T.shadowBias=M.bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize),t.spotShadowMap[d]=E,t.spotShadowMatrix[d]=_.shadow.matrix,t.spot[d]=T,d++;else if(_.isRectAreaLight)(T=e.get(_)).color.copy(x).multiplyScalar(b),T.position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),i.identity(),r.copy(_.matrixWorld),r.premultiply(v),i.extractRotation(r),T.halfWidth.set(.5*_.width,0,0),T.halfHeight.set(0,.5*_.height,0),T.halfWidth.applyMatrix4(i),T.halfHeight.applyMatrix4(i),t.rectArea[f]=T,f++;else if(_.isPointLight)(T=e.get(_)).position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),T.color.copy(_.color).multiplyScalar(_.intensity),T.distance=_.distance,T.decay=0===_.distance?0:_.decay,T.shadow=_.castShadow,_.castShadow&&(M=_.shadow,T.shadowBias=M.bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize,T.shadowCameraNear=M.camera.near,T.shadowCameraFar=M.camera.far),t.pointShadowMap[p]=E,t.pointShadowMatrix[p]=_.shadow.matrix,t.point[p]=T,p++;else if(_.isHemisphereLight){var T;(T=e.get(_)).direction.setFromMatrixPosition(_.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),T.skyColor.copy(_.color).multiplyScalar(b),T.groundColor.copy(_.groundColor).multiplyScalar(b),t.hemi[m]=T,m++}}t.ambient[0]=c,t.ambient[1]=u,t.ambient[2]=l,t.directional.length=h,t.spot.length=d,t.rectArea.length=f,t.point.length=p,t.hemi.length=m,t.hash=t.id+","+h+","+p+","+d+","+f+","+m+","+a.length},state:t}},t=[],n=[],r=[];return{init:function(){t.length=0,n.length=0,r.length=0},state:{lightsArray:t,shadowsArray:n,spritesArray:r,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)},pushSprite:function(e){r.push(e)}}},e[r]=i),i},dispose:function(){e={}}}}function Mi(e){cr.call(this),this.type="MeshDepthMaterial",this.depthPacking=Gt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Ti(e){cr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Yt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Si(e,t,n){for(var r=new pn,i=new qt,o=new Wt,a=new Wt(n,n),s=new Yt,c=new Yt,u=1,l=2,h=1+(u|l),p=new Array(h),d=new Array(h),f={},m={0:T,1:M,2:S},v=[new Yt(1,0,0),new Yt(-1,0,0),new Yt(0,0,1),new Yt(0,0,-1),new Yt(0,1,0),new Yt(0,-1,0)],g=[new Yt(0,1,0),new Yt(0,1,0),new Yt(0,1,0),new Yt(0,1,0),new Yt(0,0,1),new Yt(0,0,-1)],y=[new on,new on,new on,new on,new on,new on],_=0;_!==h;++_){var x=0!=(_&u),b=0!=(_&l),E=new Mi({depthPacking:jt,morphTargets:x,skinning:b});p[_]=E;var A=new Ti({morphTargets:x,skinning:b});d[_]=A}var R=this;function L(t,n,r,i,o,a){var s=t.geometry,c=null,h=p,v=t.customDepthMaterial;if(r&&(h=d,v=t.customDistanceMaterial),v)c=v;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=t.isSkinnedMesh&&n.skinning,_=0;g&&(_|=u),y&&(_|=l),c=h[_]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var x=c.uuid,b=n.uuid,w=f[x];void 0===w&&(w={},f[x]=w);var E=w[b];void 0===E&&(E=c.clone(),w[b]=E),c=E}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:m[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,r&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(i),c.nearDistance=o,c.farDistance=a),c}function C(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),u=n.material;if(Array.isArray(u))for(var l=s.groups,h=0,p=l.length;h<p;h++){var d=l[h],f=u[d.materialIndex];if(f&&f.visible){var m=L(n,f,a,c,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,d)}}else u.visible&&(m=L(n,u,a,c,o.near,o.far),e.renderBufferDirect(o,null,s,m,n,null))}for(var v=n.children,g=0,y=v.length;g<y;g++)C(v[g],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=w,this.render=function(t,n,u){if(!1!==R.enabled&&(!1!==R.autoUpdate||!1!==R.needsUpdate)&&0!==t.length){var l,h=e.context,p=e.state;p.disable(h.BLEND),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var d=0,f=t.length;d<f;d++){var m=t[d],_=m.shadow,x=m&&m.isPointLight;if(void 0!==_){var b=_.camera;if(o.copy(_.mapSize),o.min(a),x){var w=o.x,E=o.y;y[0].set(2*w,E,w,E),y[1].set(0,E,w,E),y[2].set(3*w,E,w,E),y[3].set(w,E,w,E),y[4].set(3*w,0,w,E),y[5].set(w,0,w,E),o.x*=4,o.y*=2}if(null===_.map){var M={minFilter:Ae,magFilter:Ae,format:Xe};_.map=new an(o.x,o.y,M),_.map.texture.name=m.name+".shadowMap",b.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(m);var T=_.map,S=_.matrix;c.setFromMatrixPosition(m.matrixWorld),b.position.copy(c),x?(l=6,S.makeTranslation(-c.x,-c.y,-c.z)):(l=1,s.setFromMatrixPosition(m.target.matrixWorld),b.lookAt(s),b.updateMatrixWorld(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(b.projectionMatrix),S.multiply(b.matrixWorldInverse)),e.setRenderTarget(T),e.clear();for(var A=0;A<l;A++){if(x){s.copy(b.position),s.add(v[A]),b.up.copy(g[A]),b.lookAt(s),b.updateMatrixWorld();var L=y[A];p.viewport(L)}i.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),r.setFromMatrix(i),C(n,u,b,x)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}R.needsUpdate=!1}}}function Ai(e,t,n,r,i,o,a,s,c){rn.call(this,e,t,n,r,i,o,a,s,c),this.needsUpdate=!0}function Ri(e,t,n,r,i,o,a){var s,c="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,u={};function l(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function h(e){return Vt.isPowerOfTwo(e.width)&&Vt.isPowerOfTwo(e.height)}function p(e,t){return e.generateMipmaps&&t&&e.minFilter!==Ae&&e.minFilter!==Ce}function d(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function f(t){return t===Ae||t===Re||t===Le?e.NEAREST:e.LINEAR}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),n.isVideoTexture&&delete u[n.id],a.memory.textures--}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}(n),a.memory.textures--}function g(t,f){var v=r.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=a.render.frame;u[t]!==n&&(u[t]=n,e.update())}(t),t.version>0&&v.__version!==t.version){var g=t.image;if(void 0===g)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==g.complete)return void function(t,r,u){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+u),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var f=l(r.image,i.maxTextureSize);(function(e){return e.wrapS!==Te||e.wrapT!==Te||e.minFilter!==Ae&&e.minFilter!==Ce})(r)&&!1===h(f)&&(f=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Vt.floorPowerOfTwo(e.width),s.height=Vt.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height,e),s):e}(f));var v=h(f),g=o.convert(r.format),_=o.convert(r.type);y(e.TEXTURE_2D,r,v);var x,b=r.mipmaps;if(r.isDepthTexture){var w=e.DEPTH_COMPONENT;if(r.type===Fe){if(!c)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else c&&(w=e.DEPTH_COMPONENT16);r.format===Je&&w===e.DEPTH_COMPONENT&&r.type!==Ue&&r.type!==Be&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ue,_=o.convert(r.type)),r.format===$e&&(w=e.DEPTH_STENCIL,r.type!==Ve&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ve,_=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,w,f.width,f.height,0,g,_,null)}else if(r.isDataTexture)if(b.length>0&&v){for(var E=0,M=b.length;E<M;E++)x=b[E],n.texImage2D(e.TEXTURE_2D,E,g,x.width,x.height,0,g,_,x.data);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,f.width,f.height,0,g,_,f.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(E=0,M=b.length;E<M;E++)x=b[E],r.format!==Xe&&r.format!==qe?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(e.TEXTURE_2D,E,g,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,E,g,x.width,x.height,0,g,_,x.data);t.__maxMipLevel=b.length-1}else if(b.length>0&&v){for(E=0,M=b.length;E<M;E++)x=b[E],n.texImage2D(e.TEXTURE_2D,E,g,g,_,x);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,g,_,f),t.__maxMipLevel=0;p(r,v)&&d(e.TEXTURE_2D,r,f.width,f.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(v,t,f);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+f),n.bindTexture(e.TEXTURE_2D,v.__webglTexture)}function y(n,a,s){var c;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===Te&&a.wrapT===Te||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,f(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,f(a.minFilter)),a.minFilter!==Ae&&a.minFilter!==Ce&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),c=t.get("EXT_texture_filter_anisotropic")){if(a.type===Fe&&null===t.get("OES_texture_float_linear"))return;if(a.type===ze&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function _(t,i,a,s){var c=o.convert(i.texture.format),u=o.convert(i.texture.type);n.texImage2D(s,0,c,i.width,i.height,0,c,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function x(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.setTexture2D=g,this.setTextureCube=function(t,s){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",m),c.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var u=t&&t.isCompressedTexture,f=t.image[0]&&t.image[0].isDataTexture,v=[],g=0;g<6;g++)v[g]=u||f?f?t.image[g].image:t.image[g]:l(t.image[g],i.maxCubemapSize);var _=v[0],x=h(_),b=o.convert(t.format),w=o.convert(t.type);for(y(e.TEXTURE_CUBE_MAP,t,x),g=0;g<6;g++)if(u)for(var E,M=v[g].mipmaps,T=0,S=M.length;T<S;T++)E=M[T],t.format!==Xe&&t.format!==qe?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,T,b,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,T,b,E.width,E.height,0,b,w,E.data);else f?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,b,v[g].width,v[g].height,0,b,w,v[g].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,b,b,w,v[g]);c.__maxMipLevel=u?M.length-1:0,p(t,x)&&d(e.TEXTURE_CUBE_MAP,t,_.width,_.height),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",v),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,c=h(t);if(s){i.__webglFramebuffer=[];for(var u=0;u<6;u++)i.__webglFramebuffer[u]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),y(e.TEXTURE_CUBE_MAP,t.texture,c),u=0;u<6;u++)_(i.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);p(t.texture,c)&&d(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),y(e.TEXTURE_2D,t.texture,c),_(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),p(t.texture,c)&&d(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&function(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Je)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==$e)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),x(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),x(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(p(i,h(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),d(o,i,t.width,t.height),n.bindTexture(o,null)}}}function Li(e,t){return{convert:function(n){var r;if(n===Me)return e.REPEAT;if(n===Te)return e.CLAMP_TO_EDGE;if(n===Se)return e.MIRRORED_REPEAT;if(n===Ae)return e.NEAREST;if(n===Re)return e.NEAREST_MIPMAP_NEAREST;if(n===Le)return e.NEAREST_MIPMAP_LINEAR;if(n===Ce)return e.LINEAR;if(n===Pe)return e.LINEAR_MIPMAP_NEAREST;if(n===Oe)return e.LINEAR_MIPMAP_LINEAR;if(n===Ie)return e.UNSIGNED_BYTE;if(n===He)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ge)return e.UNSIGNED_SHORT_5_5_5_1;if(n===je)return e.UNSIGNED_SHORT_5_6_5;if(n===Ne)return e.BYTE;if(n===De)return e.SHORT;if(n===Ue)return e.UNSIGNED_SHORT;if(n===ke)return e.INT;if(n===Be)return e.UNSIGNED_INT;if(n===Fe)return e.FLOAT;if(n===ze&&null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES;if(n===We)return e.ALPHA;if(n===qe)return e.RGB;if(n===Xe)return e.RGBA;if(n===Ye)return e.LUMINANCE;if(n===Ke)return e.LUMINANCE_ALPHA;if(n===Je)return e.DEPTH_COMPONENT;if(n===$e)return e.DEPTH_STENCIL;if(n===B)return e.FUNC_ADD;if(n===F)return e.FUNC_SUBTRACT;if(n===z)return e.FUNC_REVERSE_SUBTRACT;if(n===j)return e.ZERO;if(n===V)return e.ONE;if(n===W)return e.SRC_COLOR;if(n===q)return e.ONE_MINUS_SRC_COLOR;if(n===X)return e.SRC_ALPHA;if(n===Y)return e.ONE_MINUS_SRC_ALPHA;if(n===K)return e.DST_ALPHA;if(n===Z)return e.ONE_MINUS_DST_ALPHA;if(n===J)return e.DST_COLOR;if(n===$)return e.ONE_MINUS_DST_COLOR;if(n===Q)return e.SRC_ALPHA_SATURATE;if((n===Qe||n===et||n===tt||n===nt)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(n===Qe)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===et)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===tt)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===nt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===rt||n===it||n===ot||n===at)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===rt)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===it)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ot)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===at)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===st&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===ct||n===ut||n===lt||n===ht||n===pt||n===dt||n===ft||n===mt||n===vt||n===gt||n===yt||n===_t||n===xt||n===bt)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return n;if((n===H||n===G)&&null!==(r=t.get("EXT_blend_minmax"))){if(n===H)return r.MIN_EXT;if(n===G)return r.MAX_EXT}return n===Ve&&null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:0}}}function Ci(e,t,n,r){Ln.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Pi(e){Ci.call(this),this.cameras=e||[]}function Oi(e){var t=this,n=null,r=null,i=null,o=new qt,a=new qt;"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",v,!1));var s=new qt,c=new Xt,u=new Yt,l=new Ci;l.bounds=new on(0,0,.5,1),l.layers.enable(1);var h=new Ci;h.bounds=new on(.5,0,.5,1),h.layers.enable(2);var p,d,f=new Pi([l,h]);function m(){return null!==n&&!0===n.isPresenting}function v(){if(m()){var r=n.getEyeParameters("left"),i=r.renderWidth,o=r.renderHeight;d=e.getPixelRatio(),p=e.getSize(),e.setDrawingBufferSize(2*i,o,1)}else t.enabled&&e.setDrawingBufferSize(p.width,p.height,d)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e)},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){if(null===n)return e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r);var p=n.stageParameters;p?o.fromArray(p.sittingToStandingTransform):o.makeTranslation(0,t.userHeight,0);var d=r.pose,m=null!==i?i:e;if(m.matrix.copy(o),m.matrix.decompose(m.position,m.quaternion,m.scale),null!==d.orientation&&(c.fromArray(d.orientation),m.quaternion.multiply(c)),null!==d.position&&(c.setFromRotationMatrix(o),u.fromArray(d.position),u.applyQuaternion(c),m.position.add(u)),m.updateMatrixWorld(),!1===n.isPresenting)return e;l.near=e.near,h.near=e.near,l.far=e.far,h.far=e.far,f.matrixWorld.copy(e.matrixWorld),f.matrixWorldInverse.copy(e.matrixWorldInverse),l.matrixWorldInverse.fromArray(r.leftViewMatrix),h.matrixWorldInverse.fromArray(r.rightViewMatrix),a.getInverse(o),l.matrixWorldInverse.multiply(a),h.matrixWorldInverse.multiply(a);var v=m.parent;null!==v&&(s.getInverse(v.matrixWorld),l.matrixWorldInverse.multiply(s),h.matrixWorldInverse.multiply(s)),l.matrixWorld.getInverse(l.matrixWorldInverse),h.matrixWorld.getInverse(h.matrixWorldInverse),l.projectionMatrix.fromArray(r.leftProjectionMatrix),h.projectionMatrix.fromArray(r.rightProjectionMatrix),f.projectionMatrix.copy(l.projectionMatrix);var g=n.getLayers();if(g.length){var y=g[0];null!==y.leftBounds&&4===y.leftBounds.length&&l.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&h.bounds.fromArray(y.rightBounds)}return f},this.getStandingMatrix=function(){return o},this.submitFrame=function(){m()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",v)}}function Ii(e){console.log("THREE.WebGLRenderer",d);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",l=null,h=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=pe,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,f,y,_,x,b,w,E,M,A,R,C,P,B,F,z,H,G,j,V=this,W=!1,q=null,X=null,Y=-1,K="",Z=null,J=null,$=new on,Q=new on,ce=null,ue=0,le=t.width,he=t.height,de=1,fe=new on(0,0,le,he),me=new on(0,0,le,he),ve=!1,ge=new pn,ye=new function(){var e=this,t=null,n=0,r=!1,i=!1,o=new hn,a=new Kt,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,r,i){var c=null!==t?t.length:0,u=null;if(0!==c){if(u=s.value,!0!==i||null===u){var l=r+4*c,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===u||u.length<l)&&(u=new Float32Array(l));for(var p=0,d=r;p!==c;++p,d+=4)o.copy(t[p]).applyMatrix4(h,a),o.normal.toArray(u,d),u[d+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=c,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=u(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,c()},this.setState=function(e,o,a,l,h,p){if(!r||null===e||0===e.length||i&&!a)i?u(null):c();else{var d=i?0:n,f=4*d,m=h.clippingState||null;s.value=m,m=u(e,l,f,p);for(var v=0;v!==f;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}},_e=!1,xe=!1,be=new qt,we=new Yt;function Ee(){return null===q?de:1}try{var Me={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:u};if(t.addEventListener("webglcontextlost",Re,!1),t.addEventListener("webglcontextrestored",Le,!1),null===(p=n||t.getContext("webgl",Me)||t.getContext("experimental-webgl",Me)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function Te(){(f=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}(p)).get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_float_linear"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays"),j=new Li(p,f),y=new function(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==n.precision?n.precision:"highp",a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),d=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),f=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=u>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:s,maxTextures:c,maxVertexTextures:u,maxTextureSize:l,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:d,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g}}(p,f,e),(_=new function(e,t,n){var r=new function(){var t=!1,n=new on,r=null,i=new on(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},i=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?X(e.DEPTH_TEST):Y(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case ee:e.depthFunc(e.NEVER);break;case te:e.depthFunc(e.ALWAYS);break;case ne:e.depthFunc(e.LESS);break;case re:e.depthFunc(e.LEQUAL);break;case ie:e.depthFunc(e.EQUAL);break;case oe:e.depthFunc(e.GEQUAL);break;case ae:e.depthFunc(e.GREATER);break;case se:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null;return{setTest:function(t){t?X(e.STENCIL_TEST):Y(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&c===r||(e.stencilOp(t,n,r),a=t,s=n,c=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null}}},a=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(a),c=new Uint8Array(a),u=new Uint8Array(a),l={},h=null,p=null,d=null,f=null,y=null,_=null,x=null,b=null,w=null,E=!1,M=null,A=null,R=null,L=null,C=null,P=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),B=!1,F=0,z=e.getParameter(e.VERSION);-1!==z.indexOf("WebGL")?(F=parseFloat(/^WebGL\ ([0-9])/.exec(z)[1]),B=F>=1):-1!==z.indexOf("OpenGL ES")&&(F=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(z)[1]),B=F>=2);var H=null,G={},j=new on,V=new on;function W(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var q={};function X(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function Y(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}function K(t,r,i,o,a,s,c,u){if(t!==O?X(e.BLEND):Y(e.BLEND),t!==k){if(t!==d||u!==E)switch(t){case N:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case D:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case U:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}f=null,y=null,_=null,x=null,b=null,w=null}else a=a||r,s=s||i,c=c||o,r===f&&a===x||(e.blendEquationSeparate(n.convert(r),n.convert(a)),f=r,x=a),i===y&&o===_&&s===b&&c===w||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(c)),y=i,_=o,b=s,w=c);d=t,E=u}function Z(t){M!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),M=t)}function J(t){t!==m?(X(e.CULL_FACE),t!==A&&(t===v?e.cullFace(e.BACK):t===g?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Y(e.CULL_FACE),A=t}function $(t,n,r){t?(X(e.POLYGON_OFFSET_FILL),L===n&&C===r||(e.polygonOffset(n,r),L=n,C=r)):Y(e.POLYGON_OFFSET_FILL)}function Q(t){void 0===t&&(t=e.TEXTURE0+P-1),H!==t&&(e.activeTexture(t),H=t)}return q[e.TEXTURE_2D]=W(e.TEXTURE_2D,e.TEXTURE_2D,1),q[e.TEXTURE_CUBE_MAP]=W(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r.setClear(0,0,0,1),i.setClear(1),o.setClear(0),X(e.DEPTH_TEST),i.setFunc(re),Z(!1),J(v),X(e.CULL_FACE),X(e.BLEND),K(I),{buffers:{color:r,depth:i,stencil:o},initAttributes:function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function(n){s[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),0!==u[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),u[n]=0)},enableAttributeAndDivisor:function(n,r){s[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),u[n]!==r&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,r),u[n]=r)},disableUnusedAttributes:function(){for(var t=0,n=c.length;t!==n;++t)c[t]!==s[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:X,disable:Y,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)h.push(n[r]);return h},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:K,setMaterial:function(t,n){t.side===S?Y(e.CULL_FACE):X(e.CULL_FACE);var o=t.side===T;n&&(o=!o),Z(o),!0===t.transparent?K(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):K(O),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),r.setMask(t.colorWrite),$(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:Z,setCullFace:J,setLineWidth:function(t){t!==R&&(B&&e.lineWidth(t),R=t)},setPolygonOffset:$,setScissorTest:function(t){t?X(e.SCISSOR_TEST):Y(e.SCISSOR_TEST)},activeTexture:Q,bindTexture:function(t,n){null===H&&Q();var r=G[H];void 0===r&&(r={type:void 0,texture:void 0},G[H]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||q[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===j.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),j.copy(t))},viewport:function(t){!1===V.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),V.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);l={},h=null,H=null,G={},p=null,d=null,M=null,A=null,r.reset(),i.reset(),o.reset()}}}(p,f,j)).scissor(Q.copy(me).multiplyScalar(de)),_.viewport($.copy(fe).multiplyScalar(de)),x=new function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(i=i||1,t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=i*(n-2);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}(p),b=new function(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}},w=new Ri(p,f,_,b,y,j,x),E=new function(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,e.STATIC_DRAW):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}(p),M=new function(e,t,n){var r={},i={};function o(e){var a=e.target,s=r[a.id];for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);a.removeEventListener("dispose",o),delete r[a.id];var u=i[a.id];u&&(t.remove(u),delete i[a.id]),(u=i[s.id])&&(t.remove(u),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Kn).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(n){var r=n.index,i=n.attributes;for(var o in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),i)t.update(i[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],c=0,u=s.length;c<u;c++)t.update(s[c],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=i[n.id];if(r)return r;var o,a=[],s=n.index,c=n.attributes;if(null!==s)for(var u=0,l=(o=s.array).length;u<l;u+=3){var h=o[u+0],p=o[u+1],d=o[u+2];a.push(h,p,p,d,d,h)}else for(u=0,l=(o=c.position.array).length/3-1;u<l;u+=3)h=u+0,p=u+1,d=u+2,a.push(h,p,p,d,d,h);return r=new(Xn(a)>65535?jn:Hn)(a,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}}}(p,E,x),A=new function(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}(M,x),F=new function(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,c=s.length,u=t[i.id];if(void 0===u){u=[];for(var l=0;l<c;l++)u[l]=[l,0];t[i.id]=u}var h=o.morphTargets&&i.morphAttributes.position,p=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<c;l++)0!==(d=u[l])[1]&&(h&&i.removeAttribute("morphTarget"+l),p&&i.removeAttribute("morphNormal"+l));for(l=0;l<c;l++)(d=u[l])[0]=l,d[1]=s[l];for(u.sort(mr),l=0;l<8;l++){var d;if(d=u[l]){var f=d[0],m=d[1];if(m){h&&i.addAttribute("morphTarget"+l,h[f]),p&&i.addAttribute("morphNormal"+l,p[f]),n[l]=m;continue}}n[l]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}(p),R=new hi(V,f,y),C=new function(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new function(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,o,a,s,c){var u=e[t];void 0===u?(u={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:c},e[t]=u):(u.id=i.id,u.object=i,u.geometry=o,u.material=a,u.program=a.program,u.renderOrder=i.renderOrder,u.z=s,u.group=c),(!0===a.transparent?r:n).push(u),t++},sort:function(){n.length>1&&n.sort(pi),r.length>1&&r.sort(di)}}},e[r]=i),i},dispose:function(){e={}}}},P=new Ei,B=new function(e,t,n,r){var i,o,a,s=new gn(0),c=0;function u(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),u(s,c=void 0!==t?t:1)},getClearAlpha:function(){return c},setClearAlpha:function(e){u(s,c=e)},render:function(t,r,l,h){var p=r.background;null===p?u(s,c):p&&p.isColor&&(u(p,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&p.isCubeTexture?(void 0===a&&((a=new fr(new Jn(1,1,1),new lr({uniforms:xn.cube.uniforms,vertexShader:xn.cube.vertexShader,fragmentShader:xn.cube.fragmentShader,side:T,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a.geometry)),a.material.uniforms.tCube.value=p,t.push(a,a.geometry,a.material,0,null)):p&&p.isTexture&&(void 0===i&&(i=new Cn(-1,1,1,-1,0,1),o=new fr(new Qn(2,2),new ur({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o.geometry)),o.material.map=p,e.renderBufferDirect(i,null,o.geometry,o.material,o,null))}}}(V,_,M,s),z=new function(e,t,n){var r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r)},this.renderInstances=function(e,i,o){var a=t.get("ANGLE_instanced_arrays");if(null!==a){var s=e.attributes.position;s.isInterleavedBufferAttribute?(o=s.data.count,a.drawArraysInstancedANGLE(r,0,o,e.maxInstancedCount)):a.drawArraysInstancedANGLE(r,i,o,e.maxInstancedCount),n.update(o,r,e.maxInstancedCount)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(p,f,x),H=new function(e,t,n){var r,i,o;this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(r,a,i,t*o),n.update(a,r)},this.renderInstances=function(e,a,s){var c=t.get("ANGLE_instanced_arrays");null!==c?(c.drawElementsInstancedANGLE(r,s,i,a*o,e.maxInstancedCount),n.update(s,r,e.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(p,f,x),G=new function(e,t,n,r,i){var o,a,s,c,u,l,h=new Yt,p=new Xt,d=new Yt;function f(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);o=t.createBuffer(),a=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),s=function(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(r,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(r),t.attachShader(e,n),t.attachShader(e,r),t.linkProgram(e),e}(),c={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")},u={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),center:t.getUniformLocation(s,"center"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),fogDepth:t.getUniformLocation(s,"fogDepth"),alphaTest:t.getUniformLocation(s,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var h=r.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),l=new Ai(r)}function m(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(i,v,g){if(0!==i.length){void 0===s&&f(),n.useProgram(s),n.initAttributes(),n.enableAttribute(c.position),n.enableAttribute(c.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(c.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(c.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.uniformMatrix4fv(u.projectionMatrix,!1,g.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(u.map,0);var y=0,_=0,x=v.fog;x?(t.uniform3f(u.fogColor,x.color.r,x.color.g,x.color.b),x.isFog?(t.uniform1f(u.fogNear,x.near),t.uniform1f(u.fogFar,x.far),t.uniform1i(u.fogType,1),y=1,_=1):x.isFogExp2&&(t.uniform1f(u.fogDensity,x.density),t.uniform1i(u.fogType,2),y=2,_=2)):(t.uniform1i(u.fogType,0),y=0,_=0);for(var b=0,w=i.length;b<w;b++)(T=i[b]).modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,T.matrixWorld),T.z=-T.modelViewMatrix.elements[14];i.sort(m);var E=[],M=[];for(b=0,w=i.length;b<w;b++){var T,S=(T=i[b]).material;if(!1!==S.visible){T.onBeforeRender(e,v,g,void 0,S,void 0),t.uniform1f(u.alphaTest,S.alphaTest),t.uniformMatrix4fv(u.modelViewMatrix,!1,T.modelViewMatrix.elements),T.matrixWorld.decompose(h,p,d),E[0]=d.x,E[1]=d.y,M[0]=T.center.x-.5,M[1]=T.center.y-.5;var A=0;v.fog&&S.fog&&(A=_),y!==A&&(t.uniform1i(u.fogType,A),y=A),null!==S.map?(t.uniform2f(u.uvOffset,S.map.offset.x,S.map.offset.y),t.uniform2f(u.uvScale,S.map.repeat.x,S.map.repeat.y)):(t.uniform2f(u.uvOffset,0,0),t.uniform2f(u.uvScale,1,1)),t.uniform1f(u.opacity,S.opacity),t.uniform3f(u.color,S.color.r,S.color.g,S.color.b),t.uniform1f(u.rotation,S.rotation),t.uniform2fv(u.center,M),t.uniform2fv(u.scale,E),n.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha),n.buffers.depth.setTest(S.depthTest),n.buffers.depth.setMask(S.depthWrite),n.buffers.color.setMask(S.colorWrite),r.setTexture2D(S.map||l,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),T.onAfterRender(e,v,g,void 0,S,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}(V,p,_,w,y),x.programs=R.programs,V.context=p,V.capabilities=y,V.extensions=f,V.properties=b,V.renderLists=C,V.state=_,V.info=x}Te();var Se=new Oi(V);this.vr=Se;var Ae=new Si(V,A,y.maxTextureSize);function Re(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function Le(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1,Te()}function Ce(e){var t=e.target;t.removeEventListener("dispose",Ce),function(e){Pe(e),b.remove(e)}(t)}function Pe(e){var t=b.get(e).program;e.program=void 0,void 0!==t&&R.releaseProgram(t)}this.shadowMap=Ae,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=f.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=f.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(e){void 0!==e&&(de=e,this.setSize(le,he,!1))},this.getSize=function(){return{width:le,height:he}},this.setSize=function(e,n,r){var i=Se.getDevice();i&&i.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(le=e,he=n,t.width=e*de,t.height=n*de,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:le*de,height:he*de}},this.setDrawingBufferSize=function(e,n,r){le=e,he=n,de=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return $},this.setViewport=function(e,t,n,r){fe.set(e,he-t-r,n,r),_.viewport($.copy(fe).multiplyScalar(de))},this.setScissor=function(e,t,n,r){me.set(e,he-t-r,n,r),_.scissor(Q.copy(me).multiplyScalar(de))},this.setScissorTest=function(e){_.setScissorTest(ve=e)},this.getClearColor=function(){return B.getClearColor()},this.setClearColor=function(){B.setClearColor.apply(B,arguments)},this.getClearAlpha=function(){return B.getClearAlpha()},this.setClearAlpha=function(){B.setClearAlpha.apply(B,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=p.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=p.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=p.STENCIL_BUFFER_BIT),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){t.removeEventListener("webglcontextlost",Re,!1),t.removeEventListener("webglcontextrestored",Le,!1),C.dispose(),P.dispose(),b.dispose(),A.dispose(),Se.dispose(),Ue()},this.renderBufferImmediate=function(e,t,n){_.initAttributes();var r=b.get(e);e.hasPositions&&!r.position&&(r.position=p.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=p.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=p.createBuffer()),e.hasColors&&!r.color&&(r.color=p.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(p.bindBuffer(p.ARRAY_BUFFER,r.position),p.bufferData(p.ARRAY_BUFFER,e.positionArray,p.DYNAMIC_DRAW),_.enableAttribute(i.position),p.vertexAttribPointer(i.position,3,p.FLOAT,!1,0,0)),e.hasNormals){if(p.bindBuffer(p.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,c=(s[o+0]+s[o+3]+s[o+6])/3,u=(s[o+1]+s[o+4]+s[o+7])/3,l=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=c,s[o+1]=u,s[o+2]=l,s[o+3]=c,s[o+4]=u,s[o+5]=l,s[o+6]=c,s[o+7]=u,s[o+8]=l}p.bufferData(p.ARRAY_BUFFER,e.normalArray,p.DYNAMIC_DRAW),_.enableAttribute(i.normal),p.vertexAttribPointer(i.normal,3,p.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(p.bindBuffer(p.ARRAY_BUFFER,r.uv),p.bufferData(p.ARRAY_BUFFER,e.uvArray,p.DYNAMIC_DRAW),_.enableAttribute(i.uv),p.vertexAttribPointer(i.uv,2,p.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==L&&(p.bindBuffer(p.ARRAY_BUFFER,r.color),p.bufferData(p.ARRAY_BUFFER,e.colorArray,p.DYNAMIC_DRAW),_.enableAttribute(i.color),p.vertexAttribPointer(i.color,3,p.FLOAT,!1,0,0)),_.disableUnusedAttributes(),p.drawArrays(p.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.matrixWorld.determinant()<0;_.setMaterial(r,a);var s=Ve(e,t,r,i),c=n.id+"_"+s.id+"_"+(!0===r.wireframe),u=!1;c!==K&&(K=c,u=!0),i.morphTargetInfluences&&(F.update(i,n,r,s),u=!0);var l,h=n.index,d=n.attributes.position,m=1;!0===r.wireframe&&(h=M.getWireframeAttribute(n),m=2);var v=z;null!==h&&(l=E.get(h),(v=H).setIndex(l)),u&&(function(e,t,n){if(n&&n.isInstancedBufferGeometry&&null===f.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{_.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var c=r[a];if(void 0!==c){var u=c.normalized,l=c.itemSize,h=E.get(c);if(void 0===h)continue;var d=h.buffer,m=h.type,v=h.bytesPerElement;if(c.isInterleavedBufferAttribute){var g=c.data,y=g.stride,x=c.offset;g&&g.isInstancedInterleavedBuffer?(_.enableAttributeAndDivisor(s,g.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=g.meshPerAttribute*g.count)):_.enableAttribute(s),p.bindBuffer(p.ARRAY_BUFFER,d),p.vertexAttribPointer(s,l,m,u,y*v,x*v)}else c.isInstancedBufferAttribute?(_.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):_.enableAttribute(s),p.bindBuffer(p.ARRAY_BUFFER,d),p.vertexAttribPointer(s,l,m,u,0,0)}else if(void 0!==o){var b=o[a];if(void 0!==b)switch(b.length){case 2:p.vertexAttrib2fv(s,b);break;case 3:p.vertexAttrib3fv(s,b);break;case 4:p.vertexAttrib4fv(s,b);break;default:p.vertexAttrib1fv(s,b)}}}}_.disableUnusedAttributes()}}(r,s,n),null!==h&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l.buffer));var g=1/0;null!==h?g=h.count:void 0!==d&&(g=d.count);var y=n.drawRange.start*m,x=n.drawRange.count*m,b=null!==o?o.start*m:0,w=null!==o?o.count*m:1/0,T=Math.max(y,b),S=Math.min(g,y+x,b+w)-1,A=Math.max(0,S-T+1);if(0!==A){if(i.isMesh)if(!0===r.wireframe)_.setLineWidth(r.wireframeLinewidth*Ee()),v.setMode(p.LINES);else switch(i.drawMode){case Pt:v.setMode(p.TRIANGLES);break;case Ot:v.setMode(p.TRIANGLE_STRIP);break;case It:v.setMode(p.TRIANGLE_FAN)}else if(i.isLine){var R=r.linewidth;void 0===R&&(R=1),_.setLineWidth(R*Ee()),i.isLineSegments?v.setMode(p.LINES):i.isLineLoop?v.setMode(p.LINE_LOOP):v.setMode(p.LINE_STRIP)}else i.isPoints&&v.setMode(p.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&v.renderInstances(n,T,A):v.render(T,A)}},this.compile=function(e,t){(h=P.get(e,t)).init(),e.traverse(function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))}),h.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)je(t.material[n],e.fog,t);else je(t.material,e.fog,t)})};var Oe,Ne=!1,De=null;function Ue(){Ne=!1}function ke(){var e=Se.getDevice();e&&e.isPresenting?e.requestAnimationFrame(Be):window.requestAnimationFrame(Be)}function Be(e){!1!==Ne&&(De(e),ke())}function He(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,u=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){J=n;for(var h=n.cameras,p=0,d=h.length;p<d;p++){var f=h[p];if(s.layers.test(f.layers)){var m=f.bounds,v=m.x*le,g=m.y*he,y=m.z*le,x=m.w*he;_.viewport($.set(v,g,y,x).multiplyScalar(de)),Ge(s,t,f,c,u,l)}}}else J=null,Ge(s,t,n,c,u,l)}}function Ge(e,t,n,r,i,o){if(e.onBeforeRender(V,t,n,r,i,o),h=P.get(t,J||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=e.isMesh&&e.matrixWorld.determinant()<0;_.setMaterial(i,a);var s=Ve(n,t.fog,i,e);K="",function(e,t,n){e.render(function(e){V.renderBufferImmediate(e,t,n)})}(e,s,i)}else V.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(V,t,n,r,i,o),h=P.get(t,J||n)}function je(e,t,n){var r=b.get(e),i=h.state.lights,o=h.state.shadowsArray,a=R.getParameters(e,i.state,o,t,ye.numPlanes,ye.numIntersection,n),s=R.getProgramCode(e,a),c=r.program,u=!0;if(void 0===c)e.addEventListener("dispose",Ce);else if(c.code!==s)Pe(e);else if(r.lightsHash!==i.state.hash)b.update(e,"lightsHash",i.state.hash),u=!1;else{if(void 0!==a.shaderID)return;u=!1}if(u){if(a.shaderID){var l=xn[a.shaderID];r.shader={name:e.type,uniforms:mn.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,V),c=R.acquireProgram(e,r.shader,a,s),r.program=c,e.program=c}var p=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<V.maxMorphTargets;d++)p["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,d=0;d<V.maxMorphNormals;d++)p["morphNormal"+d]>=0&&e.numSupportedMorphNormals++;var f=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ye.numPlanes,r.numIntersection=ye.numIntersection,f.clippingPlanes=ye.uniform),r.fog=t,r.lightsHash=i.state.hash,e.lights&&(f.ambientLightColor.value=i.state.ambient,f.directionalLights.value=i.state.directional,f.spotLights.value=i.state.spot,f.rectAreaLights.value=i.state.rectArea,f.pointLights.value=i.state.point,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=r.program.getUniforms(),v=ti.seqWithValue(m.seq,f);r.uniformsList=v}function Ve(e,t,n,r){ue=0;var i=b.get(n),o=h.state.lights;if(_e&&(xe||e!==Z)){var a=e===Z&&n.id===Y;ye.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,a)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===ye.numPlanes&&i.numIntersection===ye.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(je(n,t,r),n.needsUpdate=!1);var s,c,u=!1,l=!1,d=!1,f=i.program,m=f.getUniforms(),v=i.shader.uniforms;if(_.useProgram(f.program)&&(u=!0,l=!0,d=!0),n.id!==Y&&(Y=n.id,l=!0),u||e!==Z){if(m.setValue(p,"projectionMatrix",e.projectionMatrix),y.logarithmicDepthBuffer&&m.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),Z!==(J||e)&&(Z=J||e,l=!0,d=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var g=m.map.cameraPosition;void 0!==g&&g.setValue(p,we.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&m.setValue(p,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){m.setOptional(p,r,"bindMatrix"),m.setOptional(p,r,"bindMatrixInverse");var x=r.skeleton;if(x){var w=x.bones;if(y.floatVertexTextures){if(void 0===x.boneTexture){var E=Math.sqrt(4*w.length);E=Vt.ceilPowerOfTwo(E),E=Math.max(E,4);var M=new Float32Array(E*E*4);M.set(x.boneMatrices);var T=new cn(M,E,E,Xe,Fe);T.needsUpdate=!0,x.boneMatrices=M,x.boneTexture=T,x.boneTextureSize=E}m.setValue(p,"boneTexture",x.boneTexture),m.setValue(p,"boneTextureSize",x.boneTextureSize)}else m.setOptional(p,x,"boneMatrices")}}return l&&(m.setValue(p,"toneMappingExposure",V.toneMappingExposure),m.setValue(p,"toneMappingWhitePoint",V.toneMappingWhitePoint),n.lights&&(c=d,(s=v).ambientLightColor.needsUpdate=c,s.directionalLights.needsUpdate=c,s.pointLights.needsUpdate=c,s.spotLights.needsUpdate=c,s.rectAreaLights.needsUpdate=c,s.hemisphereLights.needsUpdate=c),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(v,t),n.isMeshBasicMaterial?We(v,n):n.isMeshLambertMaterial?(We(v,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(v,n)):n.isMeshPhongMaterial?(We(v,n),n.isMeshToonMaterial?function(e,t){qe(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(v,n):qe(v,n)):n.isMeshStandardMaterial?(We(v,n),n.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,Ye(e,t)}(v,n):Ye(v,n)):n.isMeshDepthMaterial?(We(v,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(v,n)):n.isMeshDistanceMaterial?(We(v,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(v,n)):n.isMeshNormalMaterial?(We(v,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(v,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(v,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(v,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*de,e.scale.value=.5*he,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(v,n):n.isShadowMaterial&&(v.color.value=n.color,v.opacity.value=n.opacity),void 0!==v.ltc_1&&(v.ltc_1.value=_n.LTC_1),void 0!==v.ltc_2&&(v.ltc_2.value=_n.LTC_2),ti.upload(p,i.uniformsList,v,V)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ti.upload(p,i.uniformsList,v,V),n.uniformsNeedUpdate=!1),m.setValue(p,"modelViewMatrix",r.modelViewMatrix),m.setValue(p,"normalMatrix",r.normalMatrix),m.setValue(p,"modelMatrix",r.matrixWorld),f}function We(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=b.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function qe(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ye(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}this.animate=function(e){null!==(De=e)?Ne||(ke(),Ne=!0):Ue()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!W){K="",Y=-1,Z=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Se.enabled&&(t=Se.getCamera(t)),(h=P.get(e,t)).init(),e.onBeforeRender(V,e,t,n),be.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ge.setFromMatrix(be),xe=this.localClippingEnabled,_e=ye.init(this.clippingPlanes,xe,t),(l=C.get(e,t)).init(),function e(t,n,r){if(!1!==t.visible){if(t.layers.test(n.layers))if(t.isLight)h.pushLight(t),t.castShadow&&h.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!ge.intersectsSprite(t)||h.pushSprite(t);else if(t.isImmediateRenderObject)r&&we.setFromMatrixPosition(t.matrixWorld).applyMatrix4(be),l.push(t,null,t.material,we.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ge.intersectsObject(t))){r&&we.setFromMatrixPosition(t.matrixWorld).applyMatrix4(be);var i=A.update(t),o=t.material;if(Array.isArray(o))for(var a=i.groups,s=0,c=a.length;s<c;s++){var u=a[s],p=o[u.materialIndex];p&&p.visible&&l.push(t,i,p,we.z,u)}else o.visible&&l.push(t,i,o,we.z,null)}var d=t.children;for(s=0,c=d.length;s<c;s++)e(d[s],n,r)}}(e,t,V.sortObjects),!0===V.sortObjects&&l.sort(),_e&&ye.beginShadows();var i=h.state.shadowsArray;Ae.render(i,e,t),h.setupLights(t),_e&&ye.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),B.render(l,e,t,r);var o=l.opaque,a=l.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&He(o,e,t,s),a.length&&He(a,e,t,s)}else o.length&&He(o,e,t),a.length&&He(a,e,t);var c=h.state.spritesArray;G.render(c,e,t),n&&w.updateRenderTargetMipmap(n),_.buffers.depth.setTest(!0),_.buffers.depth.setMask(!0),_.buffers.color.setMask(!0),_.setPolygonOffset(!1),e.onAfterRender(V,e,t),Se.enabled&&Se.submitFrame(),l=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=ue;return e>=y.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+y.maxTextures),ue+=1,e},this.setTexture2D=(Oe=!1,function(e,t){e&&e.isWebGLRenderTarget&&(Oe||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Oe=!0),e=e.texture),w.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),w.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?w.setTextureCube(t,n):w.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return q},this.setRenderTarget=function(e){q=e,e&&void 0===b.get(e).__webglFramebuffer&&w.setupRenderTarget(e);var t=null,n=!1;if(e){var r=b.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,$.copy(e.viewport),Q.copy(e.scissor),ce=e.scissorTest}else $.copy(fe).multiplyScalar(de),Q.copy(me).multiplyScalar(de),ce=ve;if(X!==t&&(p.bindFramebuffer(p.FRAMEBUFFER,t),X=t),_.viewport($),_.scissor(Q),_.setScissorTest(ce),n){var i=b.get(e.texture);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=b.get(e).__webglFramebuffer;if(a){var s=!1;a!==X&&(p.bindFramebuffer(p.FRAMEBUFFER,a),s=!0);try{var c=e.texture,u=c.format,l=c.type;if(u!==Xe&&j.convert(u)!==p.getParameter(p.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===Ie||j.convert(l)===p.getParameter(p.IMPLEMENTATION_COLOR_READ_TYPE)||l===Fe&&(f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float"))||l===ze&&f.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");p.checkFramebufferStatus(p.FRAMEBUFFER)===p.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&p.readPixels(t,n,r,i,j.convert(u),j.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&p.bindFramebuffer(p.FRAMEBUFFER,X)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=j.convert(t.format);this.setTexture2D(t,0),p.copyTexImage2D(p.TEXTURE_2D,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=j.convert(n.format),s=j.convert(n.type),c=t.isDataTexture?t.image.data:t.image;this.setTexture2D(n,0),p.texSubImage2D(p.TEXTURE_2D,r||0,e.x,e.y,i,o,a,s,c)}}function Ni(e,t){this.name="",this.color=new gn(e),this.density=void 0!==t?t:25e-5}function Di(e,t,n){this.name="",this.color=new gn(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Ui(){Rn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ki(e){cr.call(this),this.type="SpriteMaterial",this.color=new gn(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Bi(e){Rn.call(this),this.type="Sprite",this.material=void 0!==e?e:new ki,this.center=new Wt(.5,.5)}function Fi(){Rn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function zi(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new qt)}}function Hi(){Rn.call(this),this.type="Bone"}function Gi(e,t){fr.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new qt,this.bindMatrixInverse=new qt;var n=new zi(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function ji(e){cr.call(this),this.type="LineBasicMaterial",this.color=new gn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Vi(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Wi(e,t);Rn.call(this),this.type="Line",this.geometry=void 0!==e?e:new Kn,this.material=void 0!==t?t:new ji({color:16777215*Math.random()})}function Wi(e,t){Vi.call(this,e,t),this.type="LineSegments"}function qi(e,t){Vi.call(this,e,t),this.type="LineLoop"}function Xi(e){cr.call(this),this.type="PointsMaterial",this.color=new gn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Yi(e,t){Rn.call(this),this.type="Points",this.geometry=void 0!==e?e:new Kn,this.material=void 0!==t?t:new Xi({color:16777215*Math.random()})}function Ki(){Rn.call(this),this.type="Group"}function Zi(e,t,n,r,i,o,a,s,c){rn.call(this,e,t,n,r,i,o,a,s,c),this.generateMipmaps=!1}function Ji(e,t,n,r,i,o,a,s,c,u,l,h){rn.call(this,null,o,a,s,c,u,r,i,l,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function $i(e,t,n,r,i,o,a,s,c,u){if((u=void 0!==u?u:Je)!==Je&&u!==$e)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Je&&(n=Ue),void 0===n&&u===$e&&(n=Ve),rn.call(this,null,r,i,o,a,s,u,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Ae,this.minFilter=void 0!==s?s:Ae,this.flipY=!1,this.generateMipmaps=!1}function Qi(e){Kn.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,c,u,l,h=[],p=[0,0],d={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(n=0;n<3;n++)s=v[f[n]],c=v[f[(n+1)%3]],p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[u=p[0]+","+p[1]]&&(d[u]={index1:p[0],index2:p[1]})}for(u in d)a=d[u],l=e.vertices[a.index1],h.push(l.x,l.y,l.z),l=e.vertices[a.index2],h.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry){var g,y,_,x,b,w,E;if(l=new Yt,null!==e.index){for(g=e.attributes.position,y=e.index,0===(_=e.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),i=0,o=_.length;i<o;++i)for(t=b=(x=_[i]).start,r=b+x.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),c=y.getX(t+(n+1)%3),p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[u=p[0]+","+p[1]]&&(d[u]={index1:p[0],index2:p[1]});for(u in d)a=d[u],l.fromBufferAttribute(g,a.index1),h.push(l.x,l.y,l.z),l.fromBufferAttribute(g,a.index2),h.push(l.x,l.y,l.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)w=3*t+n,l.fromBufferAttribute(g,w),h.push(l.x,l.y,l.z),E=3*t+(n+1)%3,l.fromBufferAttribute(g,E),h.push(l.x,l.y,l.z)}this.addAttribute("position",new Vn(h,3))}function eo(e,t,n){Dn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new to(e,t,n)),this.mergeVertices()}function to(e,t,n){Kn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],c=[],u=new Yt,l=new Yt,h=new Yt,p=new Yt,d=new Yt,f=t+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=t;i++){var v=i/t;e(v,m,l),a.push(l.x,l.y,l.z),v-1e-5>=0?(e(v-1e-5,m,h),p.subVectors(l,h)):(e(v+1e-5,m,h),p.subVectors(h,l)),m-1e-5>=0?(e(v,m-1e-5,h),d.subVectors(l,h)):(e(v,m+1e-5,h),d.subVectors(h,l)),u.crossVectors(p,d).normalize(),s.push(u.x,u.y,u.z),c.push(v,m)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var g=r*f+i,y=r*f+i+1,_=(r+1)*f+i+1,x=(r+1)*f+i;o.push(g,y,x),o.push(y,_,x)}this.setIndex(o),this.addAttribute("position",new Vn(a,3)),this.addAttribute("normal",new Vn(s,3)),this.addAttribute("uv",new Vn(c,2))}function no(e,t,n,r){Dn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new ro(e,t,n,r)),this.mergeVertices()}function ro(e,t,n,r){Kn.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),c=[];for(i=0;i<=a;i++){c[i]=[];var u=e.clone().lerp(n,i/a),l=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)c[i][o]=0===o&&i===a?u:u.clone().lerp(l,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var p=Math.floor(o/2);o%2==0?(s(c[i][p+1]),s(c[i+1][p]),s(c[i][p])):(s(c[i][p+1]),s(c[i+1][p+1]),s(c[i+1][p]))}}function s(e){i.push(e.x,e.y,e.z)}function c(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function l(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new Yt,r=new Yt,i=new Yt,o=0;o<t.length;o+=3)c(t[o+0],n),c(t[o+1],r),c(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new Yt,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new Yt,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=l(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new Yt,t=new Yt,n=new Yt,r=new Yt,a=new Wt,s=new Wt,c=new Wt,h=0,p=0;h<i.length;h+=9,p+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[p+0],o[p+1]),s.set(o[p+2],o[p+3]),c.set(o[p+4],o[p+5]),r.copy(e).add(t).add(n).divideScalar(3);var d=l(r);u(a,p+0,e,d),u(s,p+2,t,d),u(c,p+4,n,d)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new Vn(i,3)),this.addAttribute("normal",new Vn(i.slice(),3)),this.addAttribute("uv",new Vn(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function io(e,t){Dn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new oo(e,t)),this.mergeVertices()}function oo(e,t){ro.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ao(e,t){Dn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new so(e,t)),this.mergeVertices()}function so(e,t){ro.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function co(e,t){Dn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new uo(e,t)),this.mergeVertices()}function uo(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];ro.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function lo(e,t){Dn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ho(e,t)),this.mergeVertices()}function ho(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];ro.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function po(e,t,n,r,i,o){Dn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new fo(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function fo(e,t,n,r,i){Kn.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,c=new Yt,u=new Yt,l=new Wt,h=new Yt,p=[],d=[],f=[],m=[];function v(i){h=e.getPointAt(i/t,h);var a=o.normals[i],l=o.binormals[i];for(s=0;s<=r;s++){var f=s/r*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);u.x=v*a.x+m*l.x,u.y=v*a.y+m*l.y,u.z=v*a.z+m*l.z,u.normalize(),d.push(u.x,u.y,u.z),c.x=h.x+n*u.x,c.y=h.y+n*u.y,c.z=h.z+n*u.z,p.push(c.x,c.y,c.z)}}!function(){for(a=0;a<t;a++)v(a);v(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)l.x=a/t,l.y=s/r,f.push(l.x,l.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(e,n,o),m.push(n,i,o)}}()}(),this.setIndex(m),this.addAttribute("position",new Vn(p,3)),this.addAttribute("normal",new Vn(d,3)),this.addAttribute("uv",new Vn(f,2))}function mo(e,t,n,r,i,o,a){Dn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new vo(e,t,n,r,i,o)),this.mergeVertices()}function vo(e,t,n,r,i,o){Kn.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,c=[],u=[],l=[],h=[],p=new Yt,d=new Yt,f=new Yt,m=new Yt,v=new Yt,g=new Yt,y=new Yt;for(a=0;a<=n;++a){var _=a/n*i*Math.PI*2;for(A(_,i,o,e,f),A(_+.01,i,o,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var x=s/r*Math.PI*2,b=-t*Math.cos(x),w=t*Math.sin(x);p.x=f.x+(b*y.x+w*v.x),p.y=f.y+(b*y.y+w*v.y),p.z=f.z+(b*y.z+w*v.z),u.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),l.push(d.x,d.y,d.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*(s-1)+(a-1),M=(r+1)*s+(a-1),T=(r+1)*s+a,S=(r+1)*(s-1)+a;c.push(E,M,S),c.push(M,T,S)}function A(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",new Vn(u,3)),this.addAttribute("normal",new Vn(l,3)),this.addAttribute("uv",new Vn(h,2))}function go(e,t,n,r,i){Dn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new yo(e,t,n,r,i)),this.mergeVertices()}function yo(e,t,n,r,i){Kn.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],c=[],u=[],l=[],h=new Yt,p=new Yt,d=new Yt;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var f=a/r*i,m=o/n*Math.PI*2;p.x=(e+t*Math.cos(m))*Math.cos(f),p.y=(e+t*Math.cos(m))*Math.sin(f),p.z=t*Math.sin(m),c.push(p.x,p.y,p.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),d.subVectors(p,h).normalize(),u.push(d.x,d.y,d.z),l.push(a/r),l.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,_=(r+1)*o+a;s.push(v,g,_),s.push(g,y,_)}this.setIndex(s),this.addAttribute("position",new Vn(c,3)),this.addAttribute("normal",new Vn(u,3)),this.addAttribute("uv",new Vn(l,2))}Mi.prototype=Object.create(cr.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isMeshDepthMaterial=!0,Mi.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Ti.prototype=Object.create(cr.prototype),Ti.prototype.constructor=Ti,Ti.prototype.isMeshDistanceMaterial=!0,Ti.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Ai.prototype=Object.create(rn.prototype),Ai.prototype.constructor=Ai,Ci.prototype=Object.assign(Object.create(Ln.prototype),{constructor:Ci,isPerspectiveCamera:!0,copy:function(e,t){return Ln.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Vt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Vt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Vt.RAD2DEG*Math.atan(Math.tan(.5*Vt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Vt.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=Rn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Pi.prototype=Object.assign(Object.create(Ci.prototype),{constructor:Pi,isArrayCamera:!0}),Ni.prototype.isFogExp2=!0,Ni.prototype.clone=function(){return new Ni(this.color.getHex(),this.density)},Ni.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Di.prototype.isFog=!0,Di.prototype.clone=function(){return new Di(this.color.getHex(),this.near,this.far)},Di.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Ui.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Ui,copy:function(e,t){return Rn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Rn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),ki.prototype=Object.create(cr.prototype),ki.prototype.constructor=ki,ki.prototype.isSpriteMaterial=!0,ki.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Bi.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Bi,isSprite:!0,raycast:(fi=new Yt,mi=new Yt,vi=new Yt,function(e,t){mi.setFromMatrixPosition(this.matrixWorld),e.ray.closestPointToPoint(mi,fi),vi.setFromMatrixScale(this.matrixWorld);var n=vi.x*vi.y/4;if(!(mi.distanceToSquared(fi)>n)){var r=e.ray.origin.distanceTo(fi);r<e.near||r>e.far||t.push({distance:r,point:fi.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Rn.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Fi.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Fi,copy:function(e){Rn.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(gi=new Yt,function(e,t){gi.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(gi);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new Yt,t=new Yt;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=Rn.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(zi.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new qt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(yi=new qt,_i=new qt,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:_i;yi.multiplyMatrices(a,t[i]),yi.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new zi(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Hi.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Hi,isBone:!0}),Gi.prototype=Object.assign(Object.create(fr.prototype),{constructor:Gi,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],e=new Hi,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!=1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new on,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),(e=1/r.manhattanLength())!=1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){fr.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ji.prototype=Object.create(cr.prototype),ji.prototype.constructor=ji,ji.prototype.isLineBasicMaterial=!0,ji.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Vi.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Vi,isLine:!0,computeLineDistances:(xi=new Yt,bi=new Yt,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)xi.fromBufferAttribute(t,r-1),bi.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=xi.distanceTo(bi);e.addAttribute("lineDistance",new Vn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for((n=e.lineDistances)[0]=0,r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this}),raycast:function(){var e=new qt,t=new hr,n=new ln;return function(r,i){var o=r.linePrecision,a=o*o,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(c),!1!==r.ray.intersectsSphere(n)){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var u=new Yt,l=new Yt,h=new Yt,p=new Yt,d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var f=s.index,m=s.attributes.position.array;if(null!==f)for(var v=f.array,g=0,y=v.length-1;g<y;g+=d){var _=v[g],x=v[g+1];u.fromArray(m,3*_),l.fromArray(m,3*x),t.distanceSqToSegment(u,l,p,h)>a||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,y=m.length/3-1;g<y;g+=d)u.fromArray(m,3*g),l.fromArray(m,3*g+3),t.distanceSqToSegment(u,l,p,h)>a||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var b=s.vertices,w=b.length;for(g=0;g<w-1;g+=d){var E;t.distanceSqToSegment(b[g],b[g+1],p,h)>a||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Wi.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Wi,isLineSegments:!0,computeLineDistances:function(){var e=new Yt,t=new Yt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new Vn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),qi.prototype=Object.assign(Object.create(Vi.prototype),{constructor:qi,isLineLoop:!0}),Xi.prototype=Object.create(cr.prototype),Xi.prototype.constructor=Xi,Xi.prototype.isPointsMaterial=!0,Xi.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Yi.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Yi,isPoints:!0,raycast:function(){var e=new qt,t=new hr,n=new ln;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,c=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=c,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var u=c/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,h=new Yt,p=new Yt;if(a.isBufferGeometry){var d=a.index,f=a.attributes.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(f,3*y),b(h,y)}else{v=0;for(var _=f.length/3;v<_;v++)h.fromArray(f,3*v),b(h,v)}}else{var x=a.vertices;for(v=0,_=x.length;v<_;v++)b(x[v],v)}}function b(e,n){var a=t.distanceSqToPoint(e);if(a<l){t.closestPointToPoint(e,p),p.applyMatrix4(s);var c=r.ray.origin.distanceTo(p);if(c<r.near||c>r.far)return;i.push({distance:c,distanceToRay:Math.sqrt(a),point:p.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ki.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Ki,isGroup:!0}),Zi.prototype=Object.assign(Object.create(rn.prototype),{constructor:Zi,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ji.prototype=Object.create(rn.prototype),Ji.prototype.constructor=Ji,Ji.prototype.isCompressedTexture=!0,$i.prototype=Object.create(rn.prototype),$i.prototype.constructor=$i,$i.prototype.isDepthTexture=!0,Qi.prototype=Object.create(Kn.prototype),Qi.prototype.constructor=Qi,eo.prototype=Object.create(Dn.prototype),eo.prototype.constructor=eo,to.prototype=Object.create(Kn.prototype),to.prototype.constructor=to,no.prototype=Object.create(Dn.prototype),no.prototype.constructor=no,ro.prototype=Object.create(Kn.prototype),ro.prototype.constructor=ro,io.prototype=Object.create(Dn.prototype),io.prototype.constructor=io,oo.prototype=Object.create(ro.prototype),oo.prototype.constructor=oo,ao.prototype=Object.create(Dn.prototype),ao.prototype.constructor=ao,so.prototype=Object.create(ro.prototype),so.prototype.constructor=so,co.prototype=Object.create(Dn.prototype),co.prototype.constructor=co,uo.prototype=Object.create(ro.prototype),uo.prototype.constructor=uo,lo.prototype=Object.create(Dn.prototype),lo.prototype.constructor=lo,ho.prototype=Object.create(ro.prototype),ho.prototype.constructor=ho,po.prototype=Object.create(Dn.prototype),po.prototype.constructor=po,fo.prototype=Object.create(Kn.prototype),fo.prototype.constructor=fo,mo.prototype=Object.create(Dn.prototype),mo.prototype.constructor=mo,vo.prototype=Object.create(Kn.prototype),vo.prototype.constructor=vo,go.prototype=Object.create(Dn.prototype),go.prototype.constructor=go,yo.prototype=Object.create(Kn.prototype),yo.prototype.constructor=yo;function _o(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=ko(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=ko(o,e[o],e[o+1],a);return a&&Io(a,a.next)&&(Bo(a),a=a.next),a}function xo(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Io(r,r.next)&&0!==Oo(r.prev,r,r.next))r=r.next;else{if(Bo(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function bo(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Ro(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,c,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(c=u;s>0||c>0&&r;)0!==s&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);for(var s,c,u=e;e.prev!==e.next;)if(s=e.prev,c=e.next,o?Eo(e,r,i,o):wo(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),Bo(e),e=c.next,u=c.next;else if((e=c)===u){a?1===a?bo(e=Mo(e,t,n),t,n,r,i,o,2):2===a&&To(e,t,n,r,i,o):bo(xo(e),t,n,r,i,o,1);break}}}function wo(e){var t=e.prev,n=e,r=e.next;if(Oo(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Co(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Oo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Eo(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Oo(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Ro(s,c,t,n,r),p=Ro(u,l,t,n,r),d=e.nextZ;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&Co(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Oo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&Co(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Oo(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function Mo(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Io(i,o)&&No(i,r,r.next,o)&&Do(i,o)&&Do(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Bo(r),Bo(r.next),r=e=o),r=r.next}while(r!==e);return r}function To(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Po(a,s)){var c=Uo(a,s);return a=xo(a,a.next),c=xo(c,c.next),bo(a,t,n,r,i,o),void bo(c,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function So(e,t){return e.x-t.x}function Ao(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var c,u=n,l=n.x,h=n.y,p=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=l&&i!==r.x&&Co(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((c=Math.abs(o-r.y)/(i-r.x))<p||c===p&&r.x>n.x)&&Do(r,e)&&(n=r,p=c),r=r.next;return n}(e,t)){var n=Uo(t,e);xo(n,n.next)}}function Ro(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Lo(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Co(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Po(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&No(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Do(e,t)&&Do(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Oo(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Io(e,t){return e.x===t.x&&e.y===t.y}function No(e,t,n,r){return!!(Io(e,t)&&Io(n,r)||Io(e,r)&&Io(n,t))||Oo(e,t,n)>0!=Oo(e,t,r)>0&&Oo(n,r,e)>0!=Oo(n,r,t)>0}function Do(e,t){return Oo(e.prev,e,e.next)<0?Oo(e,t,e.next)>=0&&Oo(e,e.prev,t)>=0:Oo(e,t,e.prev)<0||Oo(e,e.next,t)<0}function Uo(e,t){var n=new Fo(e.i,e.x,e.y),r=new Fo(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ko(e,t,n,r){var i=new Fo(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Fo(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var zo={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return zo.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Ho(e),Go(n,e);var o=e.length;t.forEach(Ho);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,Go(n,t[a]);var s=function(e,t,n){n=n||2;var r,i,o,a,s,c,u,l=t&&t.length,h=l?t[0]*n:e.length,p=_o(e,0,h,n,!0),d=[];if(!p)return d;if(l&&(p=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=_o(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Lo(a));for(s.sort(So),i=0;i<s.length;i++)Ao(s[i],n),n=xo(n,n.next);return n}(e,t,p,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var f=n;f<h;f+=n)s=e[f],c=e[f+1],s<r&&(r=s),c<i&&(i=c),s>o&&(o=s),c>a&&(a=c);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return bo(p,d,n,r,i,u),d}(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Ho(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Go(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function jo(e,t){Dn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Vo(e,t)),this.mergeVertices()}function Vo(e,t){Kn.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var n=this,r=[],i=[],o=0,a=(e=Array.isArray(e)?e:[e]).length;o<a;o++)s(e[o]);function s(e){var o,a,s,c,u,l,h,p,d=[],f=void 0!==t.curveSegments?t.curveSegments:12,m=void 0!==t.steps?t.steps:1,v=void 0!==t.amount?t.amount:100,g=void 0===t.bevelEnabled||t.bevelEnabled,y=void 0!==t.bevelThickness?t.bevelThickness:6,_=void 0!==t.bevelSize?t.bevelSize:y-2,x=void 0!==t.bevelSegments?t.bevelSegments:3,b=t.extrudePath,w=void 0!==t.UVGenerator?t.UVGenerator:Wo,E=!1;b&&(o=b.getSpacedPoints(m),E=!0,g=!1,a=b.computeFrenetFrames(m,!1),s=new Yt,c=new Yt,u=new Yt),g||(x=0,y=0,_=0);var M=e.extractPoints(f),T=M.shape,S=M.holes;if(!zo.isClockWise(T))for(T=T.reverse(),h=0,p=S.length;h<p;h++)l=S[h],zo.isClockWise(l)&&(S[h]=l.reverse());var A=zo.triangulateShape(T,S),R=T;for(h=0,p=S.length;h<p;h++)l=S[h],T=T.concat(l);function L(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var C,P,O,I,N,D,U=T.length,k=A.length;function B(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,c=n.x-e.x,u=n.y-e.y,l=a*a+s*s,h=a*u-s*c;if(Math.abs(h)>Number.EPSILON){var p=Math.sqrt(l),d=Math.sqrt(c*c+u*u),f=t.x-s/p,m=t.y+a/p,v=((n.x-u/d-f)*u-(n.y+c/d-m)*c)/(a*u-s*c),g=(r=f+a*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new Wt(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?c>Number.EPSILON&&(y=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new Wt(r/o,i/o)}for(var F=[],z=0,H=R.length,G=H-1,j=z+1;z<H;z++,G++,j++)G===H&&(G=0),j===H&&(j=0),F[z]=B(R[z],R[G],R[j]);var V,W,q=[],X=F.concat();for(h=0,p=S.length;h<p;h++){for(l=S[h],V=[],z=0,G=(H=l.length)-1,j=z+1;z<H;z++,G++,j++)G===H&&(G=0),j===H&&(j=0),V[z]=B(l[z],l[G],l[j]);q.push(V),X=X.concat(V)}for(C=0;C<x;C++){for(O=C/x,I=y*Math.cos(O*Math.PI/2),P=_*Math.sin(O*Math.PI/2),z=0,H=R.length;z<H;z++)K((N=L(R[z],F[z],P)).x,N.y,-I);for(h=0,p=S.length;h<p;h++)for(l=S[h],V=q[h],z=0,H=l.length;z<H;z++)K((N=L(l[z],V[z],P)).x,N.y,-I)}for(P=_,z=0;z<U;z++)N=g?L(T[z],X[z],P):T[z],E?(c.copy(a.normals[0]).multiplyScalar(N.x),s.copy(a.binormals[0]).multiplyScalar(N.y),u.copy(o[0]).add(c).add(s),K(u.x,u.y,u.z)):K(N.x,N.y,0);for(W=1;W<=m;W++)for(z=0;z<U;z++)N=g?L(T[z],X[z],P):T[z],E?(c.copy(a.normals[W]).multiplyScalar(N.x),s.copy(a.binormals[W]).multiplyScalar(N.y),u.copy(o[W]).add(c).add(s),K(u.x,u.y,u.z)):K(N.x,N.y,v/m*W);for(C=x-1;C>=0;C--){for(O=C/x,I=y*Math.cos(O*Math.PI/2),P=_*Math.sin(O*Math.PI/2),z=0,H=R.length;z<H;z++)K((N=L(R[z],F[z],P)).x,N.y,v+I);for(h=0,p=S.length;h<p;h++)for(l=S[h],V=q[h],z=0,H=l.length;z<H;z++)N=L(l[z],V[z],P),E?K(N.x,N.y+o[m-1].y,o[m-1].x+I):K(N.x,N.y,v+I)}function Y(e,t){var n,r;for(z=e.length;--z>=0;){n=z,(r=z-1)<0&&(r=e.length-1);var i=0,o=m+2*x;for(i=0;i<o;i++){var a=U*i,s=U*(i+1);J(t+n+a,t+r+a,t+r+s,t+n+s)}}}function K(e,t,n){d.push(e),d.push(t),d.push(n)}function Z(e,t,i){$(e),$(t),$(i);var o=r.length/3,a=w.generateTopUV(n,r,o-3,o-2,o-1);Q(a[0]),Q(a[1]),Q(a[2])}function J(e,t,i,o){$(e),$(t),$(o),$(t),$(i),$(o);var a=r.length/3,s=w.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);Q(s[0]),Q(s[1]),Q(s[3]),Q(s[1]),Q(s[2]),Q(s[3])}function $(e){r.push(d[3*e+0]),r.push(d[3*e+1]),r.push(d[3*e+2])}function Q(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(g){var t=0,i=U*t;for(z=0;z<k;z++)Z((D=A[z])[2]+i,D[1]+i,D[0]+i);for(i=U*(t=m+2*x),z=0;z<k;z++)Z((D=A[z])[0]+i,D[1]+i,D[2]+i)}else{for(z=0;z<k;z++)Z((D=A[z])[2],D[1],D[0]);for(z=0;z<k;z++)Z((D=A[z])[0]+U*m,D[1]+U*m,D[2]+U*m)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(Y(R,t),t+=R.length,h=0,p=S.length;h<p;h++)Y(l=S[h],t),t+=l.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new Vn(r,3)),this.addAttribute("uv",new Vn(i,2)),this.computeVertexNormals()}jo.prototype=Object.create(Dn.prototype),jo.prototype.constructor=jo,Vo.prototype=Object.create(Kn.prototype),Vo.prototype.constructor=Vo;var Wo={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],c=t[3*r+1],u=t[3*i],l=t[3*i+1];return[new Wt(o,a),new Wt(s,c),new Wt(u,l)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],c=t[3*n+2],u=t[3*r],l=t[3*r+1],h=t[3*r+2],p=t[3*i],d=t[3*i+1],f=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-l)<.01?[new Wt(a,1-c),new Wt(u,1-h),new Wt(p,1-f),new Wt(m,1-g)]:[new Wt(s,1-c),new Wt(l,1-h),new Wt(d,1-f),new Wt(v,1-g)]}};function qo(e,t){Dn.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Xo(e,t)),this.mergeVertices()}function Xo(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Dn;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Vo.call(this,r,t),this.type="TextBufferGeometry"}function Yo(e,t,n,r,i,o,a){Dn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Ko(e,t,n,r,i,o,a)),this.mergeVertices()}function Ko(e,t,n,r,i,o,a){Kn.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,c,u=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),l=0,h=[],p=new Yt,d=new Yt,f=[],m=[],v=[],g=[];for(c=0;c<=n;c++){var y=[],_=c/n;for(s=0;s<=t;s++){var x=s/t;p.x=-e*Math.cos(r+x*i)*Math.sin(o+_*a),p.y=e*Math.cos(o+_*a),p.z=e*Math.sin(r+x*i)*Math.sin(o+_*a),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),v.push(d.x,d.y,d.z),g.push(x,1-_),y.push(l++)}h.push(y)}for(c=0;c<n;c++)for(s=0;s<t;s++){var b=h[c][s+1],w=h[c][s],E=h[c+1][s],M=h[c+1][s+1];(0!==c||o>0)&&f.push(b,w,M),(c!==n-1||u<Math.PI)&&f.push(w,E,M)}this.setIndex(f),this.addAttribute("position",new Vn(m,3)),this.addAttribute("normal",new Vn(v,3)),this.addAttribute("uv",new Vn(g,2))}function Zo(e,t,n,r,i,o){Dn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Jo(e,t,n,r,i,o)),this.mergeVertices()}function Jo(e,t,n,r,i,o){Kn.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,c,u=[],l=[],h=[],p=[],d=e,f=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new Yt,v=new Wt;for(s=0;s<=r;s++){for(c=0;c<=n;c++)a=i+c/n*o,m.x=d*Math.cos(a),m.y=d*Math.sin(a),l.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,p.push(v.x,v.y);d+=f}for(s=0;s<r;s++){var g=s*(n+1);for(c=0;c<n;c++){var y=a=c+g,_=a+n+1,x=a+n+2,b=a+1;u.push(y,_,b),u.push(_,x,b)}}this.setIndex(u),this.addAttribute("position",new Vn(l,3)),this.addAttribute("normal",new Vn(h,3)),this.addAttribute("uv",new Vn(p,2))}function $o(e,t,n,r){Dn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Qo(e,t,n,r)),this.mergeVertices()}function Qo(e,t,n,r){Kn.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Vt.clamp(r,0,2*Math.PI);var i,o,a,s=[],c=[],u=[],l=1/t,h=new Yt,p=new Wt;for(o=0;o<=t;o++){var d=n+o*l*r,f=Math.sin(d),m=Math.cos(d);for(a=0;a<=e.length-1;a++)h.x=e[a].x*f,h.y=e[a].y,h.z=e[a].x*m,c.push(h.x,h.y,h.z),p.x=o/t,p.y=a/(e.length-1),u.push(p.x,p.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=i=a+o*e.length,g=i+e.length,y=i+e.length+1,_=i+1;s.push(v,g,_),s.push(g,y,_)}if(this.setIndex(s),this.addAttribute("position",new Vn(c,3)),this.addAttribute("uv",new Vn(u,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,b=new Yt,w=new Yt,E=new Yt;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)b.x=x[a+0],b.y=x[a+1],b.z=x[a+2],w.x=x[i+a+0],w.y=x[i+a+1],w.z=x[i+a+2],E.addVectors(b,w).normalize(),x[a+0]=x[i+a+0]=E.x,x[a+1]=x[i+a+1]=E.y,x[a+2]=x[i+a+2]=E.z}}function ea(e,t){Dn.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ta(e,t)),this.mergeVertices()}function ta(e,t){Kn.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var c=0;c<e.length;c++)u(e[c]),this.addGroup(a,s,c),a+=s,s=0;function u(e){var a,c,u,l=r.length/3,h=e.extractPoints(t),p=h.shape,d=h.holes;if(!1===zo.isClockWise(p))for(p=p.reverse(),a=0,c=d.length;a<c;a++)u=d[a],!0===zo.isClockWise(u)&&(d[a]=u.reverse());var f=zo.triangulateShape(p,d);for(a=0,c=d.length;a<c;a++)u=d[a],p=p.concat(u);for(a=0,c=p.length;a<c;a++){var m=p[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,c=f.length;a<c;a++){var v=f[a],g=v[0]+l,y=v[1]+l,_=v[2]+l;n.push(g,y,_),s+=3}}this.setIndex(n),this.addAttribute("position",new Vn(r,3)),this.addAttribute("normal",new Vn(i,3)),this.addAttribute("uv",new Vn(o,2))}function na(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function ra(e,t){Kn.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(Vt.DEG2RAD*t),c=[0,0],u={},l=["a","b","c"];e.isBufferGeometry?(o=new Dn).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,p=o.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],v=0;v<3;v++)n=m[l[v]],r=m[l[(v+1)%3]],c[0]=Math.min(n,r),c[1]=Math.max(n,r),void 0===u[i=c[0]+","+c[1]]?u[i]={index1:c[0],index2:c[1],face1:d,face2:void 0}:u[i].face2=d;for(i in u){var g=u[i];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new Vn(a,3))}function ia(e,t,n,r,i,o,a,s){Dn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new oa(e,t,n,r,i,o,a,s)),this.mergeVertices()}function oa(e,t,n,r,i,o,a,s){Kn.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u=[],l=[],h=[],p=[],d=0,f=[],m=n/2,v=0;function g(n){var i,o,f,g=new Wt,y=new Yt,_=0,x=!0===n?e:t,b=!0===n?1:-1;for(o=d,i=1;i<=r;i++)l.push(0,m*b,0),h.push(0,b,0),p.push(.5,.5),d++;for(f=d,i=0;i<=r;i++){var w=i/r*s+a,E=Math.cos(w),M=Math.sin(w);y.x=x*M,y.y=m*b,y.z=x*E,l.push(y.x,y.y,y.z),h.push(0,b,0),g.x=.5*E+.5,g.y=.5*M*b+.5,p.push(g.x,g.y),d++}for(i=0;i<r;i++){var T=o+i,S=f+i;!0===n?u.push(S,S+1,T):u.push(S+1,S,T),_+=3}c.addGroup(v,_,!0===n?1:2),v+=_}!function(){var o,g,y=new Yt,_=new Yt,x=0,b=(t-e)/n;for(g=0;g<=i;g++){var w=[],E=g/i,M=E*(t-e)+e;for(o=0;o<=r;o++){var T=o/r,S=T*s+a,A=Math.sin(S),R=Math.cos(S);_.x=M*A,_.y=-E*n+m,_.z=M*R,l.push(_.x,_.y,_.z),y.set(A,b,R).normalize(),h.push(y.x,y.y,y.z),p.push(T,1-E),w.push(d++)}f.push(w)}for(o=0;o<r;o++)for(g=0;g<i;g++){var L=f[g][o],C=f[g+1][o],P=f[g+1][o+1],O=f[g][o+1];u.push(L,C,O),u.push(C,P,O),x+=6}c.addGroup(v,x,0),v+=x}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(u),this.addAttribute("position",new Vn(l,3)),this.addAttribute("normal",new Vn(h,3)),this.addAttribute("uv",new Vn(p,2))}function aa(e,t,n,r,i,o,a){ia.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function sa(e,t,n,r,i,o,a){oa.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ca(e,t,n,r){Dn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new ua(e,t,n,r)),this.mergeVertices()}function ua(e,t,n,r){Kn.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],c=[],u=[],l=new Yt,h=new Wt;for(s.push(0,0,0),c.push(0,0,1),u.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var p=n+o/t*r;l.x=e*Math.cos(p),l.y=e*Math.sin(p),s.push(l.x,l.y,l.z),c.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,u.push(h.x,h.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new Vn(s,3)),this.addAttribute("normal",new Vn(c,3)),this.addAttribute("uv",new Vn(u,2))}qo.prototype=Object.create(Dn.prototype),qo.prototype.constructor=qo,Xo.prototype=Object.create(Vo.prototype),Xo.prototype.constructor=Xo,Yo.prototype=Object.create(Dn.prototype),Yo.prototype.constructor=Yo,Ko.prototype=Object.create(Kn.prototype),Ko.prototype.constructor=Ko,Zo.prototype=Object.create(Dn.prototype),Zo.prototype.constructor=Zo,Jo.prototype=Object.create(Kn.prototype),Jo.prototype.constructor=Jo,$o.prototype=Object.create(Dn.prototype),$o.prototype.constructor=$o,Qo.prototype=Object.create(Kn.prototype),Qo.prototype.constructor=Qo,ea.prototype=Object.create(Dn.prototype),ea.prototype.constructor=ea,ea.prototype.toJSON=function(){var e=Dn.prototype.toJSON.call(this);return na(this.parameters.shapes,e)},ta.prototype=Object.create(Kn.prototype),ta.prototype.constructor=ta,ta.prototype.toJSON=function(){var e=Kn.prototype.toJSON.call(this);return na(this.parameters.shapes,e)},ra.prototype=Object.create(Kn.prototype),ra.prototype.constructor=ra,ia.prototype=Object.create(Dn.prototype),ia.prototype.constructor=ia,oa.prototype=Object.create(Kn.prototype),oa.prototype.constructor=oa,aa.prototype=Object.create(ia.prototype),aa.prototype.constructor=aa,sa.prototype=Object.create(oa.prototype),sa.prototype.constructor=sa,ca.prototype=Object.create(Dn.prototype),ca.prototype.constructor=ca,ua.prototype=Object.create(Kn.prototype),ua.prototype.constructor=ua;var la=Object.freeze({WireframeGeometry:Qi,ParametricGeometry:eo,ParametricBufferGeometry:to,TetrahedronGeometry:io,TetrahedronBufferGeometry:oo,OctahedronGeometry:ao,OctahedronBufferGeometry:so,IcosahedronGeometry:co,IcosahedronBufferGeometry:uo,DodecahedronGeometry:lo,DodecahedronBufferGeometry:ho,PolyhedronGeometry:no,PolyhedronBufferGeometry:ro,TubeGeometry:po,TubeBufferGeometry:fo,TorusKnotGeometry:mo,TorusKnotBufferGeometry:vo,TorusGeometry:go,TorusBufferGeometry:yo,TextGeometry:qo,TextBufferGeometry:Xo,SphereGeometry:Yo,SphereBufferGeometry:Ko,RingGeometry:Zo,RingBufferGeometry:Jo,PlaneGeometry:$n,PlaneBufferGeometry:Qn,LatheGeometry:$o,LatheBufferGeometry:Qo,ShapeGeometry:ea,ShapeBufferGeometry:ta,ExtrudeGeometry:jo,ExtrudeBufferGeometry:Vo,EdgesGeometry:ra,ConeGeometry:aa,ConeBufferGeometry:sa,CylinderGeometry:ia,CylinderBufferGeometry:oa,CircleGeometry:ca,CircleBufferGeometry:ua,BoxGeometry:Zn,BoxBufferGeometry:Jn});function ha(e){cr.call(this),this.type="ShadowMaterial",this.color=new gn(0),this.transparent=!0,this.setValues(e)}function pa(e){lr.call(this,e),this.type="RawShaderMaterial"}function da(e){cr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function fa(e){da.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function ma(e){cr.call(this),this.type="MeshPhongMaterial",this.color=new gn(16777215),this.specular=new gn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function va(e){ma.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function ga(e){cr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ya(e){cr.call(this),this.type="MeshLambertMaterial",this.color=new gn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _a(e){ji.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}ha.prototype=Object.create(cr.prototype),ha.prototype.constructor=ha,ha.prototype.isShadowMaterial=!0,ha.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.color.copy(e.color),this},pa.prototype=Object.create(lr.prototype),pa.prototype.constructor=pa,pa.prototype.isRawShaderMaterial=!0,da.prototype=Object.create(cr.prototype),da.prototype.constructor=da,da.prototype.isMeshStandardMaterial=!0,da.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},fa.prototype=Object.create(da.prototype),fa.prototype.constructor=fa,fa.prototype.isMeshPhysicalMaterial=!0,fa.prototype.copy=function(e){return da.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},ma.prototype=Object.create(cr.prototype),ma.prototype.constructor=ma,ma.prototype.isMeshPhongMaterial=!0,ma.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},va.prototype=Object.create(ma.prototype),va.prototype.constructor=va,va.prototype.isMeshToonMaterial=!0,va.prototype.copy=function(e){return ma.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},ga.prototype=Object.create(cr.prototype),ga.prototype.constructor=ga,ga.prototype.isMeshNormalMaterial=!0,ga.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ya.prototype=Object.create(cr.prototype),ya.prototype.constructor=ya,ya.prototype.isMeshLambertMaterial=!0,ya.prototype.copy=function(e){return cr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_a.prototype=Object.create(ji.prototype),_a.prototype.constructor=_a,_a.prototype.isLineDashedMaterial=!0,_a.prototype.copy=function(e){return ji.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var xa=Object.freeze({ShadowMaterial:ha,SpriteMaterial:ki,RawShaderMaterial:pa,ShaderMaterial:lr,PointsMaterial:Xi,MeshPhysicalMaterial:fa,MeshStandardMaterial:da,MeshPhongMaterial:ma,MeshToonMaterial:va,MeshNormalMaterial:ga,MeshLambertMaterial:ya,MeshDepthMaterial:Mi,MeshDistanceMaterial:Ti,MeshBasicMaterial:ur,LineDashedMaterial:_a,LineBasicMaterial:ji,Material:cr}),ba={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function wa(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Ea=new wa,Ma={};function Ta(e){this.manager=void 0!==e?e:Ea}function Sa(e){this.manager=void 0!==e?e:Ea,this._parser=null}function Aa(e){this.manager=void 0!==e?e:Ea,this._parser=null}function Ra(e){this.manager=void 0!==e?e:Ea}function La(e){this.manager=void 0!==e?e:Ea}function Ca(e){this.manager=void 0!==e?e:Ea}function Pa(){this.type="Curve",this.arcLengthDivisions=200}function Oa(e,t,n,r,i,o,a,s){Pa.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Ia(e,t,n,r,i,o){Oa.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Na(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var c=(t-e)/o-(n-e)/(o+a)+(n-t)/a,u=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,c*=a,u*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Object.assign(Ta.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ba.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0===Ma[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],c=!!a[2],u=a[3];u=window.decodeURIComponent(u),c&&(u=window.atob(u));try{var l,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var p=new Uint8Array(u.length),d=0;d<u.length;d++)p[d]=u.charCodeAt(d);l="blob"===h?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var f=new DOMParser;l=f.parseFromString(u,s);break;case"json":l=JSON.parse(u);break;default:l=u}window.setTimeout(function(){t&&t(l),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)},0)}}else{Ma[e]=[],Ma[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;ba.add(e,n);var r=Ma[e];if(delete Ma[e],200===this.status){for(var o=0,a=r.length;o<a;o++)(s=r[o]).onLoad&&s.onLoad(n);i.manager.itemEnd(e)}else if(0===this.status){for(console.warn("THREE.FileLoader: HTTP Status 0 received."),o=0,a=r.length;o<a;o++)(s=r[o]).onLoad&&s.onLoad(n);i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=Ma[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=Ma[e];delete Ma[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}Ma[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Sa.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Ji;a.image=o;var s=new Ta(this.manager);function c(c){s.load(e[c],function(e){var n=i._parser(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=Ce),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,h=e.length;l<h;++l)c(l);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Ce),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(Aa.prototype,{load:function(e,t,n,r){var i=this,o=new cn,a=new Ta(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Te,o.wrapT=void 0!==n.wrapT?n.wrapT:Te,o.magFilter=void 0!==n.magFilter?n.magFilter:Ce,o.minFilter=void 0!==n.minFilter?n.minFilter:Oe,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Ce),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(Ra.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ba.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){ba.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),a.addEventListener("error",function(t){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(La.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new vr,o=new Ra(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){i.images[n]=e,6==++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var c=0;c<e.length;++c)s(c);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ca.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new rn,o=new Ra(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n;var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?qe:Xe,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Pa.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,c=o-1;s<=c;)if((a=r[i=Math.floor(s+(c-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(r[i=c]===n)return i/(o-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new Yt,a=[],s=[],c=[],u=new Yt,l=new qt;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new Yt,c[0]=new Yt;var h=Number.MAX_VALUE,p=Math.abs(a[0].x),d=Math.abs(a[0].y),f=Math.abs(a[0].z);for(p<=h&&(h=p,o.set(1,0,0)),d<=h&&(h=d,o.set(0,1,0)),f<=h&&o.set(0,0,1),u.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],u),c[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),c[n]=c[n-1].clone(),u.crossVectors(a[n-1],a[n]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(Vt.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(l.makeRotationAxis(u,i))),c[n].crossVectors(a[n],s[n]);if(!0===t)for(i=Math.acos(Vt.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(l.makeRotationAxis(a[n],i*n)),c[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Oa.prototype=Object.create(Pa.prototype),Oa.prototype.constructor=Oa,Oa.prototype.isEllipseCurve=!0,Oa.prototype.getPoint=function(e,t){for(var n=t||new Wt,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=s-this.aX,p=c-this.aY;s=h*u-p*l+this.aX,c=h*l+p*u+this.aY}return n.set(s,c)},Oa.prototype.copy=function(e){return Pa.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Oa.prototype.toJSON=function(){var e=Pa.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Oa.prototype.fromJSON=function(e){return Pa.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ia.prototype=Object.create(Oa.prototype),Ia.prototype.constructor=Ia,Ia.prototype.isArcCurve=!0;var Da=new Yt,Ua=new Na,ka=new Na,Ba=new Na;function Fa(e,t,n,r){Pa.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function za(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Ha(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*n}(e)+function(e,t){return e*e*r}(e)}function Ga(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*r}(e)+function(e,t){return e*e*e*i}(e)}function ja(e,t,n,r){Pa.call(this),this.type="CubicBezierCurve",this.v0=e||new Wt,this.v1=t||new Wt,this.v2=n||new Wt,this.v3=r||new Wt}function Va(e,t,n,r){Pa.call(this),this.type="CubicBezierCurve3",this.v0=e||new Yt,this.v1=t||new Yt,this.v2=n||new Yt,this.v3=r||new Yt}function Wa(e,t){Pa.call(this),this.type="LineCurve",this.v1=e||new Wt,this.v2=t||new Wt}function qa(e,t){Pa.call(this),this.type="LineCurve3",this.v1=e||new Yt,this.v2=t||new Yt}function Xa(e,t,n){Pa.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Wt,this.v1=t||new Wt,this.v2=n||new Wt}function Ya(e,t,n){Pa.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Yt,this.v1=t||new Yt,this.v2=n||new Yt}function Ka(e){Pa.call(this),this.type="SplineCurve",this.points=e||[]}Fa.prototype=Object.create(Pa.prototype),Fa.prototype.constructor=Fa,Fa.prototype.isCatmullRomCurve3=!0,Fa.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new Yt,s=this.points,c=s.length,u=(c-(this.closed?0:1))*e,l=Math.floor(u),h=u-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/c)+1)*c:0===h&&l===c-1&&(l=c-2,h=1),this.closed||l>0?n=s[(l-1)%c]:(Da.subVectors(s[0],s[1]).add(s[0]),n=Da),r=s[l%c],i=s[(l+1)%c],this.closed||l+2<c?o=s[(l+2)%c]:(Da.subVectors(s[c-1],s[c-2]).add(s[c-1]),o=Da),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(r),p),f=Math.pow(r.distanceToSquared(i),p),m=Math.pow(i.distanceToSquared(o),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),Ua.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,d,f,m),ka.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,d,f,m),Ba.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,d,f,m)}else"catmullrom"===this.curveType&&(Ua.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),ka.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Ba.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Ua.calc(h),ka.calc(h),Ba.calc(h)),a},Fa.prototype.copy=function(e){Pa.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Fa.prototype.toJSON=function(){var e=Pa.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Fa.prototype.fromJSON=function(e){Pa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Yt).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ja.prototype=Object.create(Pa.prototype),ja.prototype.constructor=ja,ja.prototype.isCubicBezierCurve=!0,ja.prototype.getPoint=function(e,t){var n=t||new Wt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ga(e,r.x,i.x,o.x,a.x),Ga(e,r.y,i.y,o.y,a.y)),n},ja.prototype.copy=function(e){return Pa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ja.prototype.toJSON=function(){var e=Pa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ja.prototype.fromJSON=function(e){return Pa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Va.prototype=Object.create(Pa.prototype),Va.prototype.constructor=Va,Va.prototype.isCubicBezierCurve3=!0,Va.prototype.getPoint=function(e,t){var n=t||new Yt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ga(e,r.x,i.x,o.x,a.x),Ga(e,r.y,i.y,o.y,a.y),Ga(e,r.z,i.z,o.z,a.z)),n},Va.prototype.copy=function(e){return Pa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Va.prototype.toJSON=function(){var e=Pa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Va.prototype.fromJSON=function(e){return Pa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Wa.prototype=Object.create(Pa.prototype),Wa.prototype.constructor=Wa,Wa.prototype.isLineCurve=!0,Wa.prototype.getPoint=function(e,t){var n=t||new Wt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Wa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Wa.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Wa.prototype.copy=function(e){return Pa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Wa.prototype.toJSON=function(){var e=Pa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Wa.prototype.fromJSON=function(e){return Pa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},qa.prototype=Object.create(Pa.prototype),qa.prototype.constructor=qa,qa.prototype.isLineCurve3=!0,qa.prototype.getPoint=function(e,t){var n=t||new Yt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},qa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},qa.prototype.copy=function(e){return Pa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},qa.prototype.toJSON=function(){var e=Pa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},qa.prototype.fromJSON=function(e){return Pa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Xa.prototype=Object.create(Pa.prototype),Xa.prototype.constructor=Xa,Xa.prototype.isQuadraticBezierCurve=!0,Xa.prototype.getPoint=function(e,t){var n=t||new Wt,r=this.v0,i=this.v1,o=this.v2;return n.set(Ha(e,r.x,i.x,o.x),Ha(e,r.y,i.y,o.y)),n},Xa.prototype.copy=function(e){return Pa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Xa.prototype.toJSON=function(){var e=Pa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Xa.prototype.fromJSON=function(e){return Pa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ya.prototype=Object.create(Pa.prototype),Ya.prototype.constructor=Ya,Ya.prototype.isQuadraticBezierCurve3=!0,Ya.prototype.getPoint=function(e,t){var n=t||new Yt,r=this.v0,i=this.v1,o=this.v2;return n.set(Ha(e,r.x,i.x,o.x),Ha(e,r.y,i.y,o.y),Ha(e,r.z,i.z,o.z)),n},Ya.prototype.copy=function(e){return Pa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ya.prototype.toJSON=function(){var e=Pa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ya.prototype.fromJSON=function(e){return Pa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ka.prototype=Object.create(Pa.prototype),Ka.prototype.constructor=Ka,Ka.prototype.isSplineCurve=!0,Ka.prototype.getPoint=function(e,t){var n=t||new Wt,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(za(a,s.x,c.x,u.x,l.x),za(a,s.y,c.y,u.y,l.y)),n},Ka.prototype.copy=function(e){Pa.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Ka.prototype.toJSON=function(){var e=Pa.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Ka.prototype.fromJSON=function(e){Pa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Wt).fromArray(r))}return this};var Za=Object.freeze({ArcCurve:Ia,CatmullRomCurve3:Fa,CubicBezierCurve:ja,CubicBezierCurve3:Va,EllipseCurve:Oa,LineCurve:Wa,LineCurve3:qa,QuadraticBezierCurve:Xa,QuadraticBezierCurve3:Ya,SplineCurve:Ka});function Ja(){Pa.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function $a(e){Ja.call(this),this.type="Path",this.currentPoint=new Wt,e&&this.setFromPoints(e)}function Qa(e){$a.call(this,e),this.uuid=Vt.generateUUID(),this.type="Shape",this.holes=[]}function es(e,t){Rn.call(this),this.type="Light",this.color=new gn(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function ts(e,t,n){es.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Rn.DefaultUp),this.updateMatrix(),this.groundColor=new gn(t)}function ns(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Wt(512,512),this.map=null,this.matrix=new qt}function rs(){ns.call(this,new Ci(50,1,.5,500))}function is(e,t,n,r,i,o){es.call(this,e,t),this.type="SpotLight",this.position.copy(Rn.DefaultUp),this.updateMatrix(),this.target=new Rn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new rs}function os(e,t,n,r){es.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new ns(new Ci(90,1,.5,500))}function as(){ns.call(this,new Cn(-5,5,5,-5,.5,500))}function ss(e,t){es.call(this,e,t),this.type="DirectionalLight",this.position.copy(Rn.DefaultUp),this.updateMatrix(),this.target=new Rn,this.shadow=new as}function cs(e,t){es.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function us(e,t,n,r){es.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function ls(e,t,n,r){bs.call(this,e,t,n,r)}function hs(e,t,n){bs.call(this,e,t,n)}function ps(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function ds(e,t,n,r){ps.call(this,e,t,n,r)}function fs(e,t,n,r){bs.call(this,e,t,n,r)}function ms(e,t,n,r){bs.call(this,e,t,n,r)}function vs(e,t,n,r){bs.call(this,e,t,n,r)}function gs(e,t,n,r){ps.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ys(e,t,n,r){ps.call(this,e,t,n,r)}function _s(e,t,n,r){ps.call(this,e,t,n,r)}Ja.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Ja,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Wa(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),c=0;c<s.length;c++){var u=s[c];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Pa.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Pa.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Pa.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Za[r.type]).fromJSON(r))}return this}}),$a.prototype=Object.assign(Object.create(Ja.prototype),{constructor:$a,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Wa(this.currentPoint.clone(),new Wt(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Xa(this.currentPoint.clone(),new Wt(e,t),new Wt(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new ja(this.currentPoint.clone(),new Wt(e,t),new Wt(n,r),new Wt(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new Ka([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var c=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+c,t+u,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var c=new Oa(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);var l=c.getPoint(1);this.currentPoint.copy(l)},copy:function(e){return Ja.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Ja.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Ja.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Qa.prototype=Object.assign(Object.create($a.prototype),{constructor:Qa,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){$a.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=$a.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){$a.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new $a).fromJSON(r))}return this}}),es.prototype=Object.assign(Object.create(Rn.prototype),{constructor:es,isLight:!0,copy:function(e){return Rn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Rn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ts.prototype=Object.assign(Object.create(es.prototype),{constructor:ts,isHemisphereLight:!0,copy:function(e){return es.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ns.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),rs.prototype=Object.assign(Object.create(ns.prototype),{constructor:rs,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Vt.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),is.prototype=Object.assign(Object.create(es.prototype),{constructor:is,isSpotLight:!0,copy:function(e){return es.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),os.prototype=Object.assign(Object.create(es.prototype),{constructor:os,isPointLight:!0,copy:function(e){return es.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),as.prototype=Object.assign(Object.create(ns.prototype),{constructor:as}),ss.prototype=Object.assign(Object.create(es.prototype),{constructor:ss,isDirectionalLight:!0,copy:function(e){return es.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),cs.prototype=Object.assign(Object.create(es.prototype),{constructor:cs,isAmbientLight:!0}),us.prototype=Object.assign(Object.create(es.prototype),{constructor:us,isRectAreaLight:!0,copy:function(e){return es.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=es.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),ls.prototype=Object.assign(Object.create(bs.prototype),{constructor:ls,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Tt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),hs.prototype=Object.assign(Object.create(bs.prototype),{constructor:hs,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Tt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(ps.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];for(e<s&&(n=2,i=s),a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var c=n+o>>>1;e<t[c]?o=c:n=c+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(ps.prototype,{beforeStart_:ps.prototype.copySampleValue_,afterEnd_:ps.prototype.copySampleValue_}),ds.prototype=Object.assign(Object.create(ps.prototype),{constructor:ds,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=(n-t)/(r-t),u=s+a;s!==u;s+=4)Xt.slerpFlat(i,0,o,s-a,o,s,c);return i}}),fs.prototype=Object.assign(Object.create(bs.prototype),{constructor:fs,ValueTypeName:"quaternion",DefaultInterpolation:St,InterpolantFactoryMethodLinear:function(e){return new ds(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),ms.prototype=Object.assign(Object.create(bs.prototype),{constructor:ms,ValueTypeName:"color"}),vs.prototype=Object.assign(Object.create(bs.prototype),{constructor:vs,ValueTypeName:"number"}),gs.prototype=Object.assign(Object.create(ps.prototype),{constructor:gs,DefaultSettings_:{endingStart:Rt,endingEnd:Rt},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Lt:i=e,a=2*t-n;break;case Ct:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Lt:o=e,s=2*n-t;break;case Ct:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(n-t)/(r-t),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,_=p*m-p*f,x=0;x!==a;++x)i[x]=v*o[u+x]+g*o[c+x]+y*o[s+x]+_*o[l+x];return i}}),ys.prototype=Object.assign(Object.create(ps.prototype),{constructor:ys,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=(n-t)/(r-t),l=1-u,h=0;h!==a;++h)i[h]=o[c+h]*l+o[s+h]*u;return i}}),_s.prototype=Object.assign(Object.create(ps.prototype),{constructor:_s,interpolate_:function(e){return this.copySampleValue_(e-1)}});var xs={arraySlice:function(e,t,n){return xs.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function bs(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xs.convertArray(t,this.TimeBufferType),this.values=xs.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function ws(e,t,n,r){bs.call(this,e,t,n,r)}function Es(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Vt.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Ms(e){this.manager=void 0!==e?e:Ea,this.textures={}}function Ts(e){this.manager=void 0!==e?e:Ea}Object.assign(bs,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=bs._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];xs.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:xs.convertArray(e.times,Array),values:xs.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return vs;case"vector":case"vector2":case"vector3":case"vector4":return ws;case"color":return ms;case"quaternion":return fs;case"bool":case"boolean":return hs;case"string":return ls}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(bs.prototype,{constructor:bs,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:St,InterpolantFactoryMethodDiscrete:function(e){return new _s(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new ys(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new gs(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Tt:t=this.InterpolantFactoryMethodDiscrete;break;case St:t=this.InterpolantFactoryMethodLinear;break;case At:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tt;case this.InterpolantFactoryMethodLinear:return St;case this.InterpolantFactoryMethodSmooth:return At}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=xs.arraySlice(n,i,o),this.values=xs.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&xs.isTypedArray(r)){a=0;for(var c=r.length;a!==c;++a){var u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===At,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(r)s=!0;else for(var u=a*n,l=u-n,h=u+n,p=0;p!==n;++p){var d=t[u+p];if(d!==t[l+p]||d!==t[h+p]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var f=a*n,m=i*n;for(p=0;p!==n;++p)t[m+p]=t[f+p]}++i}}if(o>0){for(e[i]=e[o],f=o*n,m=i*n,p=0;p!==n;++p)t[m+p]=t[f+p];++i}return i!==e.length&&(this.times=xs.arraySlice(e,0,i),this.values=xs.arraySlice(t,0,i*n)),this}}),ws.prototype=Object.assign(Object.create(bs.prototype),{constructor:ws,ValueTypeName:"vector"}),Object.assign(Es,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(bs.parse(n[i]).scale(r));return new Es(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t},i=0,o=n.length;i!==o;++i)t.push(bs.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var u=xs.getKeyframeOrder(s);s=xs.sortedArray(s,1,u),c=xs.sortedArray(c,1,u),r||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new vs(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/n))}return new Es(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&c.length>1){var u=r[h=c[1]];u||(r[h]=u=[]),u.push(s)}}var l=[];for(var h in r)l.push(Es.CreateFromMorphTargetSequence(h,r[h],t,n));return l},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];xs.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var u=s[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var l={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var p=0;p<u[h].morphTargets.length;p++)l[u[h].morphTargets[p]]=-1;for(var d in l){var f=[],m=[];for(p=0;p!==u[h].morphTargets.length;++p){var v=u[h];f.push(v.time),m.push(v.morphTarget===d?1:0)}r.push(new vs(".morphTargetInfluence["+d+"]",f,m))}o=l.length*(a||1)}else{var g=".bones["+t[c].name+"]";n(ws,g+".position",u,"pos",r),n(fs,g+".quaternion",u,"rot",r),n(ws,g+".scale",u,"scl",r)}}return 0===r.length?null:new Es(i,o,r)}}),Object.assign(Es.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Ms.prototype,{load:function(e,t,n,r){var i=this;new Ta(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new xa[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new Wt).fromArray(i)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r}}),Object.assign(Ts.prototype,{load:function(e,t,n,r){var i=this;new Ta(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new Kn,n=e.data.index;if(void 0!==n){var r=new Cs[n.type](n.array);t.setIndex(new Un(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o];r=new Cs[a.type](a.array),t.addAttribute(o,new Un(r,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var c=0,u=s.length;c!==u;++c){var l=s[c];t.addGroup(l.start,l.count,l.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var p=new Yt;void 0!==h.center&&p.fromArray(h.center),t.boundingSphere=new ln(p,h.radius)}return t}});var Ss,As,Rs,Ls,Cs={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ps(){}Ps.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(Ps.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:(Ss={NoBlending:O,NormalBlending:I,AdditiveBlending:N,SubtractiveBlending:D,MultiplyBlending:U,CustomBlending:k},As=new gn,Rs=new Ca,Ls=new Ms,function(e,t,n){var r={};function i(e,i,o,a,s){var c,u=t+e,l=Ps.Handlers.get(u);null!==l?c=l.load(u):(Rs.setCrossOrigin(n),c=Rs.load(u)),void 0!==i&&(c.repeat.fromArray(i),1!==i[0]&&(c.wrapS=Me),1!==i[1]&&(c.wrapT=Me)),void 0!==o&&c.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(c.wrapS=Me),"mirror"===a[0]&&(c.wrapS=Se),"repeat"===a[1]&&(c.wrapT=Me),"mirror"===a[1]&&(c.wrapT=Se)),void 0!==s&&(c.anisotropy=s);var h=Vt.generateUUID();return r[h]=c,h}var o={uuid:Vt.generateUUID(),type:"MeshLambertMaterial"};for(var a in e){var s=e[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=Ss[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=As.fromArray(s).getHex();break;case"colorSpecular":o.specular=As.fromArray(s).getHex();break;case"colorEmissive":o.emissive=As.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=i(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=i(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=i(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=i(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=i(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=i(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=i(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=i(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=i(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=i(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=T;break;case"doubleSided":o.side=S;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=P),"face"===s&&(o.vertexColors=C);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Ls.setTextures(r),Ls.parse(o)})});var Os={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Is(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Ea,this.withCredentials=!1}function Ns(e){this.manager=void 0!==e?e:Ea,this.texturePath=""}Object.assign(Is.prototype,{load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Os.extractUrlBase(e),a=new Ta(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var c=i.parse(r,o);t(c.geometry,c.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new Dn;return function(e,t){function n(e,t){return e&1<<t}var r,i,o,a,s,c,u,l,h,p,d,f,m,v,g,y,_,x,b,w,E,M,T,S,A,R=e.faces,L=e.vertices,C=e.normals,P=e.colors,O=e.scale,I=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&I++;for(r=0;r<I;r++)t.faceVertexUvs[r]=[]}for(a=0,s=L.length;a<s;)(x=new Yt).x=L[a++]*O,x.y=L[a++]*O,x.z=L[a++]*O,t.vertices.push(x);for(a=0,s=R.length;a<s;)if(d=n(p=R[a++],0),f=n(p,1),m=n(p,3),v=n(p,4),g=n(p,5),y=n(p,6),_=n(p,7),d){if((w=new Pn).a=R[a],w.b=R[a+1],w.c=R[a+3],(E=new Pn).a=R[a+1],E.b=R[a+2],E.c=R[a+3],a+=4,f&&(h=R[a++],w.materialIndex=h,E.materialIndex=h),o=t.faces.length,m)for(r=0;r<I;r++)for(S=e.uvs[r],t.faceVertexUvs[r][o]=[],t.faceVertexUvs[r][o+1]=[],i=0;i<4;i++)A=new Wt(S[2*(l=R[a++])],S[2*l+1]),2!==i&&t.faceVertexUvs[r][o].push(A),0!==i&&t.faceVertexUvs[r][o+1].push(A);if(v&&(u=3*R[a++],w.normal.set(C[u++],C[u++],C[u]),E.normal.copy(w.normal)),g)for(r=0;r<4;r++)u=3*R[a++],T=new Yt(C[u++],C[u++],C[u]),2!==r&&w.vertexNormals.push(T),0!==r&&E.vertexNormals.push(T);if(y&&(M=P[c=R[a++]],w.color.setHex(M),E.color.setHex(M)),_)for(r=0;r<4;r++)M=P[c=R[a++]],2!==r&&w.vertexColors.push(new gn(M)),0!==r&&E.vertexColors.push(new gn(M));t.faces.push(w),t.faces.push(E)}else{if((b=new Pn).a=R[a++],b.b=R[a++],b.c=R[a++],f&&(h=R[a++],b.materialIndex=h),o=t.faces.length,m)for(r=0;r<I;r++)for(S=e.uvs[r],t.faceVertexUvs[r][o]=[],i=0;i<3;i++)A=new Wt(S[2*(l=R[a++])],S[2*l+1]),t.faceVertexUvs[r][o].push(A);if(v&&(u=3*R[a++],b.normal.set(C[u++],C[u++],C[u])),g)for(r=0;r<3;r++)u=3*R[a++],T=new Yt(C[u++],C[u++],C[u]),b.vertexNormals.push(T);if(y&&(c=R[a++],b.color.setHex(P[c])),_)for(r=0;r<3;r++)c=R[a++],b.vertexColors.push(new gn(P[c]));t.faces.push(b)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n){var o=e.skinWeights[r],a=n>1?e.skinWeights[r+1]:0,s=n>2?e.skinWeights[r+2]:0,c=n>3?e.skinWeights[r+3]:0;t.skinWeights.push(new on(o,a,s,c))}if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=n){var u=e.skinIndices[r],l=n>1?e.skinIndices[r+1]:0,h=n>2?e.skinIndices[r+2]:0,p=n>3?e.skinIndices[r+3]:0;t.skinIndices.push(new on(u,l,h,p))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,c=a.length;s<c;s+=3){var u=new Yt;u.x=a[s]*n,u.y=a[s+1]*n,u.z=a[s+2]*n,o.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var l=t.faces,h=e.morphColors[0].colors;for(r=0,i=l.length;r<i;r++)l[r].color.fromArray(h,3*r)}}(e,n),function(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=Es.parseAnimation(r[i],t.bones);o&&n.push(o)}if(t.morphTargets){var a=Es.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Ps.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(Ns.prototype,{load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new Ta(i.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Qa).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Is,i=new Ts,o=0,a=e.length;o<a;o++){var s,c=e[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new la[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new la[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new la[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new la[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new la[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new la[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new la[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new la[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new la[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new la[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new la[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new la[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],l=0,h=c.shapes.length;l<h;l++){var p=t[c.shapes[l]];u.push(p)}s=new la[c.type](u,c.curveSegments);break;case"BufferGeometry":s=i.parse(c);break;case"Geometry":s=r.parse(c,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),n[c.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new Ms;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=e[i];if("MultiMaterial"===a.type){for(var s=[],c=0;c<a.materials.length;c++)s.push(r.parse(a.materials[c]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=Es.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var o=new Ra(new wa(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var c=e[a],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;r[c.uuid]=i(u)}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new rn(t[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,Us)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],ks),s.wrapT=n(a.wrap[1],ks)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,Bs)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,Bs)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),r[a.uuid]=s}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new Ui,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new gn(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Di(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Ni(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new Ci(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Cn(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new cs(e.color,e.intensity);break;case"DirectionalLight":r=new ss(e.color,e.intensity);break;case"PointLight":r=new os(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new us(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new is(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new ts(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new Gi(a,s):new fr(a,s);break;case"LOD":r=new Fi;break;case"Line":r=new Vi(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new qi(i(e.geometry),o(e.material));break;case"LineSegments":r=new Wi(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Yi(i(e.geometry),o(e.material));break;case"Sprite":r=new Bi(o(e.material));break;case"Group":r=new Ki;break;default:r=new Rn}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.children)for(var c=e.children,u=0;u<c.length;u++)r.add(this.parseObject(c[u],t,n));if("LOD"===e.type)for(var l=e.levels,h=0;h<l.length;h++){var p=l[h],d=r.getObjectByProperty("uuid",p.object);void 0!==d&&r.addLevel(d,p.distance)}return r}});var Ds,Us={UVMapping:ve,CubeReflectionMapping:ge,CubeRefractionMapping:ye,EquirectangularReflectionMapping:_e,EquirectangularRefractionMapping:xe,SphericalReflectionMapping:be,CubeUVReflectionMapping:we,CubeUVRefractionMapping:Ee},ks={RepeatWrapping:Me,ClampToEdgeWrapping:Te,MirroredRepeatWrapping:Se},Bs={NearestFilter:Ae,NearestMipMapNearestFilter:Re,NearestMipMapLinearFilter:Le,LinearFilter:Ce,LinearMipMapNearestFilter:Pe,LinearMipMapLinearFilter:Oe};function Fs(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Ea,this.options=void 0}function zs(){this.type="ShapePath",this.color=new gn,this.subPaths=[],this.currentPath=null}function Hs(e){this.type="Font",this.data=e}function Gs(e,t,n,r,i,o){var a=o.glyphs[e]||o.glyphs["?"];if(a){var s,c,u,l,h,p,d,f,m=new zs;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,y=v.length;g<y;)switch(v[g++]){case"m":s=v[g++]*n+r,c=v[g++]*n+i,m.moveTo(s,c);break;case"l":s=v[g++]*n+r,c=v[g++]*n+i,m.lineTo(s,c);break;case"q":u=v[g++]*n+r,l=v[g++]*n+i,h=v[g++]*n+r,p=v[g++]*n+i,m.quadraticCurveTo(h,p,u,l);break;case"b":u=v[g++]*n+r,l=v[g++]*n+i,h=v[g++]*n+r,p=v[g++]*n+i,d=v[g++]*n+r,f=v[g++]*n+i,m.bezierCurveTo(h,p,d,f,u,l)}return{offsetX:a.ha*n,path:m}}}function js(e){this.manager=void 0!==e?e:Ea}Fs.prototype={constructor:Fs,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,o=ba.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(n){ba.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(zs.prototype,{moveTo:function(e,t){this.currentPath=new $a,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new Qa;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],c=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],c=-c,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=u*(e.x-a.x)-c*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=zo.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,c,u=[];if(1===o.length)return s=o[0],(c=new Qa).curves=s.curves,u.push(c),u;var l=!i(o[0].getPoints());l=e?!l:l;var h,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!l&&f[v]&&v++,f[v]={s:new Qa,p:h},f[v].s.curves=s.curves,l&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(o);if(f.length>1){for(var _=!1,x=[],b=0,w=f.length;b<w;b++)d[b]=[];for(b=0,w=f.length;b<w;b++)for(var E=m[b],M=0;M<E.length;M++){for(var T=E[M],S=!0,A=0;A<f.length;A++)r(T.p,f[A].p)&&(b!==A&&x.push({froms:b,tos:A,hole:M}),S?(S=!1,d[A].push(T)):_=!0);S&&d[b].push(T)}x.length>0&&(_||(m=d))}g=0;for(var R=f.length;g<R;g++){c=f[g].s,u.push(c);for(var L=0,C=(p=m[g]).length;L<C;L++)c.holes.push(p[L].h)}return u}}),Object.assign(Hs.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4);for(var r=[],i=function(e,t,n,r){for(var i=String(e).split(""),o=t/r.resolution,a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,s=[],c=0,u=0,l=0;l<i.length;l++){var h=i[l];if("\n"===h)c=0,u-=a;else{var p=Gs(h,0,o,c,u,r);c+=p.offsetX,s.push(p.path)}}return s}(e,t,0,this.data),o=0,a=i.length;o<a;o++)Array.prototype.push.apply(r,i[o].toShapes());return r}}),Object.assign(js.prototype,{load:function(e,t,n,r){var i=this,o=new Ta(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new Hs(e)},setPath:function(e){return this.path=e,this}});var Vs,Ws,qs,Xs,Ys,Ks,Zs,Js,$s,Qs,ec,tc,nc,rc,ic,oc,ac,sc,cc,uc,lc,hc,pc,dc={getContext:function(){return void 0===Ds&&(Ds=new(window.AudioContext||window.webkitAudioContext)),Ds},setContext:function(e){Ds=e}};function fc(e){this.manager=void 0!==e?e:Ea}function mc(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ci,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ci,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function vc(e,t,n){Rn.call(this),this.type="CubeCamera";var r=new Ci(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Yt(1,0,0)),this.add(r);var i=new Ci(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Yt(-1,0,0)),this.add(i);var o=new Ci(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Yt(0,1,0)),this.add(o);var a=new Ci(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Yt(0,-1,0)),this.add(a);var s=new Ci(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Yt(0,0,1)),this.add(s);var c=new Ci(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new Yt(0,0,-1)),this.add(c);var u={format:qe,magFilter:Ce,minFilter:Ce};this.renderTarget=new sn(n,n,u),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=u,n.activeCubeFace=5,e.render(t,c,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function gc(){Rn.call(this),this.type="AudioListener",this.context=dc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function yc(e){Rn.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function _c(e){yc.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function xc(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function bc(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function wc(e,t,n){var r=n||Ec.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Ec(e,t,n){this.path=t,this.parsedPath=n||Ec.parseTrackName(t),this.node=Ec.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Mc(){this.uuid=Vt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Tc(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:Rt,endingEnd:Rt},s=0;s!==i;++s){var c=r[s].createInterpolant(null);o[s]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Et,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Sc(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ac(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Rc(){Kn.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Lc(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Cc(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Pc(e,t,n){Cc.call(this,e,t),this.meshPerAttribute=n||1}function Oc(e,t,n){Un.call(this,e,t),this.meshPerAttribute=n||1}function Ic(e,t,n,r){this.ray=new hr(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Nc(e,t){return e.distance-t.distance}function Dc(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)Dc(i[o],t,n,!0)}function Uc(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function kc(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Bc(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Fc(e,t){this.min=void 0!==e?e:new Wt(1/0,1/0),this.max=void 0!==t?t:new Wt(-1/0,-1/0)}function zc(e){Rn.call(this),this.material=e,this.render=function(){}}function Hc(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var c=new Kn,u=new Vn(2*a*3,3);c.addAttribute("position",u),Wi.call(this,c,new ji({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Gc(e,t){Rn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Kn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Vn(r,3));var c=new ji({fog:!1});this.cone=new Wi(n,c),this.add(this.cone),this.update()}function jc(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new Kn,r=[],i=[],o=new gn(0,0,1),a=new gn(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new Vn(r,3)),n.addAttribute("color",new Vn(i,3));var u=new ji({vertexColors:P,depthTest:!1,depthWrite:!1,transparent:!0});Wi.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Vc(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Ko(t,4,2),i=new ur({wireframe:!0,fog:!1});fr.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Wc(e,t){Rn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new ji({fog:!1}),r=new Kn;r.addAttribute("position",new Un(new Float32Array(15),3)),this.line=new Vi(r,n),this.add(this.line),this.update()}function qc(e,t,n){Rn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new so(t);r.rotateY(.5*Math.PI),this.material=new ur({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=P);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new Un(o,3)),this.add(new fr(r,this.material)),this.update()}function Xc(e,t,n,r){e=e||10,t=t||10,n=new gn(void 0!==n?n:4473924),r=new gn(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],c=[],u=0,l=0,h=-a;u<=t;u++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var p=u===i?n:r;p.toArray(c,l),l+=3,p.toArray(c,l),l+=3,p.toArray(c,l),l+=3,p.toArray(c,l),l+=3}var d=new Kn;d.addAttribute("position",new Vn(s,3)),d.addAttribute("color",new Vn(c,3));var f=new ji({vertexColors:P});Wi.call(this,d,f)}function Yc(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new gn(void 0!==i?i:4473924),o=new gn(void 0!==o?o:8947848);var a,s,c,u,l,h,p,d=[],f=[];for(u=0;u<=t;u++)c=u/t*(2*Math.PI),a=Math.sin(c)*e,s=Math.cos(c)*e,d.push(0,0,0),d.push(a,0,s),p=1&u?i:o,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(u=0;u<=n;u++)for(p=1&u?i:o,h=e-e/n*u,l=0;l<r;l++)c=l/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,d.push(a,0,s),f.push(p.r,p.g,p.b),c=(l+1)/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,d.push(a,0,s),f.push(p.r,p.g,p.b);var m=new Kn;m.addAttribute("position",new Vn(d,3)),m.addAttribute("color",new Vn(f,3));var v=new ji({vertexColors:P});Wi.call(this,m,v)}function Kc(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Kn,u=new Vn(2*a*3,3);c.addAttribute("position",u),Wi.call(this,c,new ji({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Zc(e,t,n){Rn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new Kn;r.addAttribute("position",new Vn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new ji({fog:!1});this.lightPlane=new Vi(r,i),this.add(this.lightPlane),(r=new Kn).addAttribute("position",new Vn([0,0,0,0,0,1],3)),this.targetLine=new Vi(r,i),this.add(this.targetLine),this.update()}function Jc(e){var t=new Kn,n=new ji({color:16777215,vertexColors:C}),r=[],i=[],o={},a=new gn(16755200),s=new gn(16711680),c=new gn(43775),u=new gn(16777215),l=new gn(3355443);function h(e,t,n){p(e,n),p(t,n)}function p(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",u),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),t.addAttribute("position",new Vn(r,3)),t.addAttribute("color",new Vn(i,3)),Wi.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function $c(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Kn;i.setIndex(new Un(n,1)),i.addAttribute("position",new Un(r,3)),Wi.call(this,i,new ji({color:t})),this.matrixAutoUpdate=!1,this.update()}function Qc(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Kn;i.setIndex(new Un(r,1)),i.addAttribute("position",new Vn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Wi.call(this,i,new ji({color:n})),this.geometry.computeBoundingSphere()}function eu(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new Kn;i.addAttribute("position",new Vn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Vi.call(this,i,new ji({color:r}));var o=new Kn;o.addAttribute("position",new Vn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new fr(o,new ur({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function tu(e,t,n,r,i,o){Rn.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===uc&&((uc=new Kn).addAttribute("position",new Vn([0,0,0,0,1,0],3)),(lc=new oa(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Vi(uc,new ji({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fr(lc,new ur({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function nu(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Kn;n.addAttribute("position",new Vn(t,3)),n.addAttribute("color",new Vn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new ji({vertexColors:P});Wi.call(this,n,r)}function ru(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Pn(e,t,n,i,o,a)}Object.assign(fc.prototype,{load:function(e,t,n,r){var i=new Ta(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){dc.getContext().decodeAudioData(e,function(e){t(e)})},n,r)}}),Object.assign(mc.prototype,{update:($s=new qt,Qs=new qt,function(e){if(Vs!==this||Ws!==e.focus||qs!==e.fov||Xs!==e.aspect*this.aspect||Ys!==e.near||Ks!==e.far||Zs!==e.zoom||Js!==this.eyeSep){Vs=this,Ws=e.focus,qs=e.fov,Xs=e.aspect*this.aspect,Ys=e.near,Ks=e.far,Zs=e.zoom;var t,n,r=e.projectionMatrix.clone(),i=(Js=this.eyeSep/2)*Ys/Ws,o=Ys*Math.tan(Vt.DEG2RAD*qs*.5)/Zs;Qs.elements[12]=-Js,$s.elements[12]=Js,t=-o*Xs+i,n=o*Xs+i,r.elements[0]=2*Ys/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(r),t=-o*Xs-i,n=o*Xs-i,r.elements[0]=2*Ys/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Qs),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply($s)})}),vc.prototype=Object.create(Rn.prototype),vc.prototype.constructor=vc,gc.prototype=Object.assign(Object.create(Rn.prototype),{constructor:gc,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01)},updateMatrixWorld:function(){var e=new Yt,t=new Xt,n=new Yt,r=new Yt;return function(i){Rn.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),yc.prototype=Object.assign(Object.create(Rn.prototype),{constructor:yc,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),_c.prototype=Object.assign(Object.create(yc.prototype),{constructor:_c,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Yt;return function(t){Rn.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(xc.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(bc.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){Xt.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}}),Object.assign(wc.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Ec,{Composite:wc,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Ec.Composite(e,t,n):new Ec(e,t,n)},sanitizeNodeName:(cc=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(cc,"")}),parseTrackName:(ec="[^\\[\\]\\.:\\/]",tc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",nc=/((?:WC+[\/:])*)/.source.replace("WC",ec),rc=/(WCOD+)?/.source.replace("WCOD",tc),ic=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ec),oc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ec),ac=new RegExp("^"+nc+rc+ic+oc+"$"),sc=["material","materials","bones"],function(e){var t=ac.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==sc.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(Ec.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Ec.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var c=this.Versioning.None;void 0!==e.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}else{var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Ec.prototype,{_getValue_unbound:Ec.prototype.getValue,_setValue_unbound:Ec.prototype.setValue}),Object.assign(Mc.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,c=void 0,u=0,l=arguments.length;u!==l;++u){var h=arguments[u],p=h.uuid,d=r[p];if(void 0===d){d=t++,r[p]=d,e.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new Ec(h,i[f],o[f]))}else if(d<n){c=e[d];var v=--n,g=e[v];for(r[g.uuid]=d,e[d]=g,r[p]=v,e[v]=h,f=0,m=s;f!==m;++f){var y=a[f],_=y[v],x=y[d];y[d]=_,void 0===x&&(x=new Ec(h,i[f],o[f])),y[v]=x}}else e[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],c=s.uuid,u=n[c];if(void 0!==u&&u>=t){var l=t++,h=e[l];n[h.uuid]=u,e[u]=h,n[c]=l,e[l]=s;for(var p=0,d=i;p!==d;++p){var f=r[p],m=f[l],v=f[u];f[u]=m,f[l]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a].uuid,u=r[c];if(void 0!==u)if(delete r[c],u<n){var l=--n,h=e[l],p=e[g=--t];r[h.uuid]=u,e[u]=h,r[p.uuid]=l,e[l]=p,e.pop();for(var d=0,f=o;d!==f;++d){var m=(y=i[d])[l],v=y[g];y[u]=m,y[l]=v,y.pop()}}else{var g;for(r[(p=e[g=--t]).uuid]=u,e[u]=p,e.pop(),d=0,f=o;d!==f;++d){var y;(y=i[d])[u]=y[g],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,u=this.nCachedObjects_,l=new Array(c);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var h=u,p=s.length;h!==p;++h){var d=s[h];l[h]=new Ec(d,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(Tc.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=i,s[1]=i+n,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,u=this._propertyBindings,l=0,h=c.length;l!==h;++l)c[l].evaluate(a),u[l].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===wt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=r===Mt;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Lt,r.endingEnd=Lt):(r.endingStart=e?this.zeroSlopeAtStart?Lt:Rt:Ct,r.endingEnd=t?this.zeroSlopeAtEnd?Lt:Rt:Ct)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),Sc.prototype=Object.assign(Object.create(r.prototype),{constructor:Sc,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,u=c[s];void 0===u&&(u={},c[s]=u);for(var l=0;l!==i;++l){var h=r[l],p=h.name,d=u[p];if(void 0!==d)o[l]=d;else{if(void 0!==(d=o[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=t&&t._propertyBindings[l].binding.parsedPath;++(d=new bc(Ec.create(n,p,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),o[l]=d}a[l].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,s[u]=c,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[i];e:{for(var u in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new ys(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Es.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var c=a.actionByRoot[r];if(void 0!==c)return c;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new Tc(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Es.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a)t[a]._update(r,e,i,o);var s=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var u=c._cacheIndex,l=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=u,t[u]=l,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Ac.prototype.clone=function(){return new Ac(void 0===this.value.clone?this.value:this.value.clone())},Rc.prototype=Object.assign(Object.create(Kn.prototype),{constructor:Rc,isInstancedBufferGeometry:!0,copy:function(e){return Kn.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Lc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Lc.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Object.defineProperty(Cc.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Cc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Pc.prototype=Object.assign(Object.create(Cc.prototype),{constructor:Pc,isInstancedInterleavedBuffer:!0,copy:function(e){return Cc.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Oc.prototype=Object.assign(Object.create(Un.prototype),{constructor:Oc,isInstancedBufferAttribute:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Ic.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Dc(e,this,r,t),r.sort(Nc),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)Dc(e[i],this,r,t);return r.sort(Nc),r}}),Object.assign(Uc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(kc.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Vt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Bc.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(Fc.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Wt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Wt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Wt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Wt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Wt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Wt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),zc.prototype=Object.create(Rn.prototype),zc.prototype.constructor=zc,zc.prototype.isImmediateRenderObject=!0,Hc.prototype=Object.create(Wi.prototype),Hc.prototype.constructor=Hc,Hc.prototype.update=function(){var e=new Yt,t=new Yt,n=new Kt;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,c=a.faces,u=0,l=0,h=c.length;l<h;l++)for(var p=c[l],d=0,f=p.vertexNormals.length;d<f;d++){var m=s[p[r[d]]],v=p.vertexNormals[d];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(u=0,d=0,f=g.count;d<f;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(i),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}o.needsUpdate=!0}}(),Gc.prototype=Object.create(Rn.prototype),Gc.prototype.constructor=Gc,Gc.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Gc.prototype.update=function(){var e=new Yt,t=new Yt;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),jc.prototype=Object.create(Wi.prototype),jc.prototype.constructor=jc,jc.prototype.updateMatrixWorld=function(){var e=new Yt,t=new qt,n=new qt;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<i.length;s++){var u=i[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(n,u.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(n,u.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c+1,e.x,e.y,e.z),c+=2)}o.getAttribute("position").needsUpdate=!0,Rn.prototype.updateMatrixWorld.call(this,r)}}(),Vc.prototype=Object.create(fr.prototype),Vc.prototype.constructor=Vc,Vc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Vc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Wc.prototype=Object.create(Rn.prototype),Wc.prototype.constructor=Wc,Wc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Wc.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},qc.prototype=Object.create(Rn.prototype),qc.prototype.constructor=qc,qc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},qc.prototype.update=function(){var e=new Yt,t=new gn,n=new gn;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Xc.prototype=Object.create(Wi.prototype),Xc.prototype.constructor=Xc,Yc.prototype=Object.create(Wi.prototype),Yc.prototype.constructor=Yc,Kc.prototype=Object.create(Wi.prototype),Kc.prototype.constructor=Kc,Kc.prototype.update=function(){var e=new Yt,t=new Yt,n=new Kt;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,c=0,u=0,l=s.length;u<l;u++){var h=s[u],p=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(c,e.x,e.y,e.z),c+=1,i.setXYZ(c,t.x,t.y,t.z),c+=1}i.needsUpdate=!0}}(),Zc.prototype=Object.create(Rn.prototype),Zc.prototype.constructor=Zc,Zc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Zc.prototype.update=function(){var e=new Yt,t=new Yt,n=new Yt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),Jc.prototype=Object.create(Wi.prototype),Jc.prototype.constructor=Jc,Jc.prototype.update=function(){var e,t,n=new Yt,r=new Ln;function i(i,o,a,s){n.set(o,a,s).unproject(r);var c=t[i];if(void 0!==c)for(var u=e.getAttribute("position"),l=0,h=c.length;l<h;l++)u.setXYZ(c[l],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),$c.prototype=Object.create(Wi.prototype),$c.prototype.constructor=$c,$c.prototype.update=function(){var e=new un;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),$c.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Qc.prototype=Object.create(Wi.prototype),Qc.prototype.constructor=Qc,Qc.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Rn.prototype.updateMatrixWorld.call(this,e))},eu.prototype=Object.create(Vi.prototype),eu.prototype.constructor=eu,eu.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),Rn.prototype.updateMatrixWorld.call(this,e)},tu.prototype=Object.create(Rn.prototype),tu.prototype.constructor=tu,tu.prototype.setDirection=(pc=new Yt,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(pc.set(e.z,0,-e.x).normalize(),hc=Math.acos(e.y),this.quaternion.setFromAxisAngle(pc,hc))}),tu.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},tu.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},nu.prototype=Object.create(Wi.prototype),nu.prototype.constructor=nu;var iu=0,ou=1;function au(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function su(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function cu(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Yi(e,t)}function uu(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Bi(e)}function lu(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Yi(e,t)}function hu(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Xi(e)}function pu(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Xi(e)}function du(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Xi(e)}function fu(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Yt(e,t,n)}function mu(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Un(e,t).setDynamic(!0)}function vu(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new kn(e,t)}function gu(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Bn(e,t)}function yu(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Fn(e,t)}function _u(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new zn(e,t)}function xu(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Hn(e,t)}function bu(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Gn(e,t)}function wu(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new jn(e,t)}function Eu(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Vn(e,t)}function Mu(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Wn(e,t)}function Tu(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Fa.call(this,e),this.type="catmullrom",this.closed=!0}function Su(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Fa.call(this,e),this.type="catmullrom"}function Au(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Fa.call(this,e),this.type="catmullrom"}function Ru(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new nu(e)}function Lu(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new $c(e,t)}function Cu(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Wi(new ra(e.geometry),new ji({color:void 0!==t?t:16777215}))}function Pu(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Wi(new Qi(e.geometry),new ji({color:void 0!==t?t:16777215}))}function Ou(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Ta(e)}function Iu(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Aa(e)}Pa.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Pa.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Ja.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Dn,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Yt(i.x,i.y,i.z||0))}return t}}),Object.assign($a.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Tu.prototype=Object.create(Fa.prototype),Su.prototype=Object.create(Fa.prototype),Au.prototype=Object.create(Fa.prototype),Object.assign(Au.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Xc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},jc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Ps.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Os.extractUrlBase(e)}}),Object.assign(Fc.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(un.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),pr.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Vt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Vt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Vt.ceilPowerOfTwo(e)}}),Object.assign(Kt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(qt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Yt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),hn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Xt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(hr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(dr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(dr,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),dr.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),dr.getNormal(e,t,n,r)}}),Object.assign(Qa.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new jo(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ea(this,e)}}),Object.assign(Wt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Yt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(on.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Dn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Rn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Rn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Fi.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(zi.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Pa.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Ci.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(es.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Un.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Kn.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Kn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Vo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Ac.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(cr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new gn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===A}}}),Object.defineProperties(ma.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(lr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Ii.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Ii.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Si.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(an.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Oi.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),yc.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new fc).load(e,function(e){t.setBuffer(e)}),this},xc.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},vc.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Nu={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},Du={crossOrigin:void 0,loadTexture:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ca;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new La;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Uu(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function ku(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}var Bu={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function Fu(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"Reaction",function(){return an}),n.d(t,"untracked",function(){return en}),n.d(t,"IDerivationState",function(){return At}),n.d(t,"createAtom",function(){return qe}),n.d(t,"spy",function(){return y}),n.d(t,"comparer",function(){return D}),n.d(t,"isObservableObject",function(){return ie}),n.d(t,"isBoxedObservable",function(){return Z}),n.d(t,"isObservableArray",function(){return st}),n.d(t,"ObservableMap",function(){return Ue}),n.d(t,"isObservableMap",function(){return Fe}),n.d(t,"transaction",function(){return Ne}),n.d(t,"observable",function(){return Se}),n.d(t,"computed",function(){return fe}),n.d(t,"isObservable",function(){return se}),n.d(t,"isObservableProp",function(){return ce}),n.d(t,"isComputed",function(){return le}),n.d(t,"isComputedProp",function(){return he}),n.d(t,"extendObservable",function(){return ve}),n.d(t,"extendShallowObservable",function(){return me}),n.d(t,"observe",function(){return dn}),n.d(t,"intercept",function(){return fn}),n.d(t,"autorun",function(){return U}),n.d(t,"reaction",function(){return F}),n.d(t,"when",function(){return mn}),n.d(t,"action",function(){return S}),n.d(t,"isAction",function(){return R}),n.d(t,"runInAction",function(){return A}),n.d(t,"keys",function(){return gn}),n.d(t,"values",function(){return yn}),n.d(t,"set",function(){return _n}),n.d(t,"remove",function(){return xn}),n.d(t,"has",function(){return bn}),n.d(t,"get",function(){return wn}),n.d(t,"decorate",function(){return En}),n.d(t,"configure",function(){return Mn}),n.d(t,"onBecomeObserved",function(){return je}),n.d(t,"onBecomeUnobserved",function(){return Ve}),n.d(t,"flow",function(){return Sn}),n.d(t,"toJS",function(){return Ln}),n.d(t,"trace",function(){return on}),n.d(t,"getDependencyTree",function(){return Ut}),n.d(t,"getObserverTree",function(){return Bt}),n.d(t,"_resetGlobalState",function(){return Dt}),n.d(t,"_getGlobalState",function(){return Nt}),n.d(t,"getDebugName",function(){return Ge}),n.d(t,"getAtom",function(){return ze}),n.d(t,"_getAdministration",function(){return He}),n.d(t,"_allowStateChanges",function(){return b}),n.d(t,"isArrayLike",function(){return wt}),n.d(t,"_isComputingDerivation",function(){return Zt}),n.d(t,"onReactionError",function(){return sn}),n.d(t,"_interceptReads",function(){return Cn});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function o(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}var u={},l={};function h(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var n in _t(e,"__mobxDidRunLazyInitializers",!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function p(e,t){return function(){var n,r,i=function(r,i,o,s){if(!0===s)return t(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var c=r.__mobxDecorators;_t(r,"__mobxDecorators",a({},c))}return r.__mobxDecorators[i]={prop:i,propertyCreator:t,descriptor:o,decoratorTarget:r,decoratorArguments:n},function(e,t){var n=t?u:l;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return h(this),this[e]},set:function(t){h(this),this[e]=t}})}(i,e)};return(2===(r=arguments).length||3===r.length)&&"string"==typeof r[1]||4===r.length&&!0===r[3]?(n=ut,i.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),i)}}function d(){return!!Pt.spyListeners.length}function f(e){if(Pt.spyListeners.length)for(var t=Pt.spyListeners,n=0,r=t.length;n<r;n++)t[n](e)}function m(e){f(a({},e,{spyReportStart:!0}))}var v={spyReportEnd:!0};function g(e){f(e?a({},e,{spyReportEnd:!0}):v)}function y(e){return Pt.spyListeners.push(e),mt(function(){Pt.spyListeners=Pt.spyListeners.filter(function(t){return t!==e})})}function _(e,t){var n=function(){return x(e,t,this,arguments)};return n.isMobxAction=!0,n}function x(e,t,n,r){var i=function(e,t,n,r){var i=d()&&!!e,o=0;if(i){o=Date.now();var a=r&&r.length||0,s=new Array(a);if(a>0)for(var c=0;c<a;c++)s[c]=r[c];m({type:"action",name:e,object:n,arguments:s})}var u=tn();return jt(),{prevDerivation:u,prevAllowStateChanges:w(!0),notifySpy:i,startTime:o}}(e,0,n,r);try{return t.apply(n,r)}finally{!function(e){E(e.prevAllowStateChanges),Vt(),nn(e.prevDerivation),e.notifySpy&&g({time:Date.now()-e.startTime})}(i)}}function b(e,t){var n,r=w(e);try{n=t()}finally{E(r)}return n}function w(e){var t=Pt.allowStateChanges;return Pt.allowStateChanges=e,t}function E(e){Pt.allowStateChanges=e}function M(){dt(!1)}function T(e){return function(t,n,r){if(r){if(r.value)return{value:_(e,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return _(e,i.call(this))}}}return function(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){xt(this,n,S(e,t))}})}}(e).apply(this,arguments)}}var S=function(e,t,n,r){return 1===arguments.length&&"function"==typeof e?_(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?_(e,t):1===arguments.length&&"string"==typeof e?T(e):!0!==r?T(t).apply(null,arguments):void(e[t]=_(e.name||t,n.value))};function A(e,t){return x("string"==typeof e?e:e.name||"<unnamed action>","function"==typeof e?e:t,this,void 0)}function R(e){return"function"==typeof e&&!0===e.isMobxAction}function L(e,t,n){_t(e,t,_(t,n.bind(e)))}S.bound=function(e,t,n,r){return!0===r?(L(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return L(this,t,n.value||n.initializer.call(this)),this[t]},set:M}:{enumerable:!1,configurable:!0,set:function(e){L(this,t,e)},get:function(){}}};var C=Object.prototype.toString;function P(e,t){return function e(t,n,r,i){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var o=typeof t;return("function"===o||"object"===o||"object"==typeof n)&&function(t,n,r,i){t=O(t),n=O(n);var o=C.call(t);if(o!==C.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof n)return!1;var s=t.constructor,c=n.constructor;if(s!==c&&!("function"==typeof s&&s instanceof s&&"function"==typeof c&&c instanceof c)&&"constructor"in t&&"constructor"in n)return!1}r=r||[],i=i||[];for(var u=r.length;u--;)if(r[u]===t)return i[u]===n;if(r.push(t),i.push(n),a){if((u=t.length)!==n.length)return!1;for(;u--;)if(!e(t[u],n[u],r,i))return!1}else{var l,h=Object.keys(t);if(u=h.length,Object.keys(n).length!==u)return!1;for(;u--;)if(l=h[u],!I(n,l)||!e(t[l],n[l],r,i))return!1}return r.pop(),i.pop(),!0}(t,n,r,i)}(e,t)}function O(e){return st(e)?e.peek():Et(e)||Fe(e)?Mt(e.entries()):e}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function N(e,t){return e===t}var D={identity:N,structural:function(e,t){return P(e,t)},default:function(e,t){return function(e,t){return"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(e,t)||N(e,t)}};function U(e,t){void 0===t&&(t=lt);var n,r=t&&t.name||e.name||"Autorun@"+pt();if(t.scheduler||t.delay){var i=B(t),o=!1;n=new an(r,function(){o||(o=!0,i(function(){o=!1,n.isDisposed||n.track(a)}))},t.onError)}else n=new an(r,function(){this.track(a)},t.onError);function a(){e(n)}return n.schedule(),n.getDisposer()}var k=function(e){return e()};function B(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:k}function F(e,t,n){void 0===n&&(n=lt),"boolean"==typeof n&&(n={fireImmediately:n});var r,i,o,a=n.name||"Reaction@"+pt(),s=S(a,n.onError?(r=n.onError,i=t,function(){try{return i.apply(this,arguments)}catch(e){r.call(this,e)}}):t),c=!n.scheduler&&!n.delay,u=B(n),l=!0,h=!1,p=n.compareStructural?D.structural:n.equals||D.default,d=new an(a,function(){l||c?f():h||(h=!0,u(f))},n.onError);function f(){if(h=!1,!d.isDisposed){var t=!1;d.track(function(){var n=e(d);t=l||!p(o,n),o=n}),l&&n.fireImmediately&&s(o,d),l||!0!==t||s(o,d),l&&(l=!1)}}return d.schedule(),d.getDisposer()}var z=function(){function e(e){var t=this;if(this.dependenciesState=At.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=At.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+pt(),this.value=new Xt(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Rt.NONE,!e.get)return dt("missing option for computed: get");this.derivation=e.get,this.name=e.name||"ComputedValue@"+pt(),e.set&&(this.setter=_(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?D.structural:D.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,!0===e.keepAlive&&U(function(){return t.get()})}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState===At.UP_TO_DATE){e.lowestObserverState=At.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===At.UP_TO_DATE&&(r.dependenciesState=At.POSSIBLY_STALE,r.isTracing!==Rt.NONE&&qt(r,e),r.onBecomeStale())}}}(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&dt("Cycle detected in computation "+this.name+": "+this.derivation),0===Pt.inBatch?Kt(this)&&(this.warnAboutUntrackedRead(),jt(),this.value=this.computeValue(!1),Vt()):(Wt(this),Kt(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState!==At.STALE){e.lowestObserverState=At.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===At.POSSIBLY_STALE?r.dependenciesState=At.STALE:r.dependenciesState===At.UP_TO_DATE&&(e.lowestObserverState=At.UP_TO_DATE)}}}(this));var e=this.value;if(Yt(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(Yt(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){ft(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else ft(!1,!1)},e.prototype.trackAndCompute=function(){d()&&f({object:this.scope,type:"compute",name:this.name});var e=this.value,t=this.dependenciesState===At.NOT_TRACKING,n=this.computeValue(!0),r=t||Yt(e)||Yt(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Pt.computationDepth++,e)t=$t(this,this.derivation,this.scope);else if(!0===Pt.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new Xt(e)}return Pt.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){Qt(this),this.value=void 0},e.prototype.observe=function(e,t){var n=this,r=!0,i=void 0;return U(function(){var o=n.get();if(!r||t){var a=tn();e({type:"update",object:n,newValue:o,oldValue:i}),nn(a)}r=!1,i=o})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return St(this.get())},e}();z.prototype[Tt()]=z.prototype.valueOf;var H=bt("ComputedValue",z);function G(e){return void 0!==e.interceptors&&e.interceptors.length>0}function j(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),mt(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function V(e,t){var n=tn();try{var r=e.interceptors;if(r)for(var i=0,o=r.length;i<o&&(ft(!(t=r[i](t))||t.type,"Intercept handlers should return nothing or a change object"),t);i++);return t}finally{nn(n)}}function W(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function q(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),mt(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function X(e,t){var n=tn(),r=e.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);nn(n)}}var Y={};ke||(ke=function(){function e(e){void 0===e&&(e="Atom@"+pt()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=At.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return Wt(this)},e.prototype.reportChanged=function(){jt(),function(e){if(e.lowestObserverState!==At.STALE){e.lowestObserverState=At.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===At.UP_TO_DATE&&(r.isTracing!==Rt.NONE&&qt(r,e),r.onBecomeStale()),r.dependenciesState=At.STALE}}}(this),Vt()},e.prototype.toString=function(){return this.name},e}(),Be=bt("Atom",ke));var K=function(e){function t(t,n,r,i){void 0===r&&(r="ObservableValue@"+pt()),void 0===i&&(i=!0);var o=e.call(this,r)||this;return o.enhancer=n,o.hasUnreportedChange=!1,o.value=n(t,void 0,r),i&&d()&&f({type:"create",name:o.name,newValue:""+o.value}),o}return o(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==Y){var n=d();n&&m({type:"update",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),n&&g()}},t.prototype.prepareNewValue=function(e){if(Jt(this),G(this)){var t=V(this,{object:this,type:"update",newValue:e});if(!t)return Y;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.value!==e?e:Y},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),W(this)&&X(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return j(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),q(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return St(this.get())},t}(ke);K.prototype[Tt()]=K.prototype.valueOf;var Z=bt("ObservableValue",K),J=function(){function e(e,t,n){this.target=e,this.name=t,this.defaultEnhancer=n,this.values={}}return e.prototype.read=function(e,t){if(this.target===e)return this.values[t].get();this.illegalAccess(e,t)},e.prototype.write=function(e,t,n){var r=this.target;if(r===e){var i=this.values[t];if(i instanceof z)i.set(n);else{if(G(this)){if(!(c=V(this,{type:"update",object:r,name:t,newValue:n})))return;n=c.newValue}if((n=i.prepareNewValue(n))!==Y){var o=W(this),s=d(),c=o||s?{type:"update",object:r,oldValue:i.value,name:t,newValue:n}:null;s&&m(a({},c,{name:this.name,key:t})),i.setNewValue(n),o&&X(this,c),s&&g()}}}else this.illegalAccess(e,t)},e.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(G(this)&&!(o=V(this,{object:t,name:e,type:"remove"})))return;try{jt();var n=W(this),r=d(),i=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var o=n||r?{type:"remove",object:t,oldValue:i,name:e}:null;r&&m(a({},o,{name:this.name,key:e})),n&&X(this,o),r&&g()}finally{Vt()}}},e.prototype.illegalAccess=function(e,t){return dt("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return q(this,e)},e.prototype.intercept=function(e){return j(this,e)},e.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new tt(Object.keys(this.values).filter(function(t){return e.values[t]instanceof K}),Le,"keys("+this.name+")",!0)),this.keys.slice()},e}();function $(e,t,n){void 0===t&&(t=""),void 0===n&&(n=Re);var r=e.$mobx;return r||(yt(e)||(t=(e.constructor.name||"ObservableObject")+"@"+pt()),t||(t="ObservableObject@"+pt()),xt(e,"$mobx",r=new J(e,t,n)),r)}function Q(e,t,n,r){var i=$(e);if(G(i)){var o=V(i,{object:e,name:t,type:"add",newValue:n});if(!o)return;n=o.newValue}n=(i.values[t]=new K(n,r,i.name+"."+t,!1)).value,Object.defineProperty(e,t,function(e){return ee[e]||(ee[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}(t)),i.keys&&i.keys.push(t),function(e,t,n,r){var i=W(e),o=d(),s=i||o?{type:"add",object:t,name:n,newValue:r}:null;o&&m(a({},s,{name:e.name,key:n})),i&&X(e,s),o&&g()}(i,e,t,n)}var ee={},te={};function ne(e){return e.$mobx||(h(e),e.$mobx)}var re=bt("ObservableObjectAdministration",J);function ie(e){return!!gt(e)&&(h(e),re(e.$mobx))}function oe(t){var n=p(!0,function(e,n,r,i,o){Q(e,n,r?r.initializer?r.initializer.call(e):r.value:void 0,t)}),r=(void 0!==e&&e.env,n);return r.enhancer=t,r}function ae(e,t){if(null===e||void 0===e)return!1;if(void 0!==t){if(ie(e)){var n=e.$mobx;return n.values&&!!n.values[t]}return!1}return ie(e)||!!e.$mobx||Be(e)||pn(e)||H(e)}function se(e){return 1!==arguments.length&&dt(!1),ae(e)}function ce(e,t){return"string"!=typeof t?dt(!1):ae(e,t)}function ue(e,t){if(null===e||void 0===e)return!1;if(void 0!==t){if(!1===ie(e))return!1;if(!e.$mobx.values[t])return!1;var n=ze(e,t);return H(n)}return H(e)}function le(e){return arguments.length>1?dt(!1):ue(e)}function he(e,t){return"string"!=typeof t?dt(!1):ue(e,t)}var pe=p(!1,function(e,t,n,r,i){var o=n.get,s=n.set,c=i[0]||{};!function(e,t,n){var r=$(e);n.name=r.name+"."+t,n.context=e,r.values[t]=new z(n),Object.defineProperty(e,t,function(e){return te[e]||(te[e]={configurable:!0,enumerable:!1,get:function(){return ne(this).read(this,e)},set:function(t){ne(this).write(this,e,t)}})}(t))}(e,t,a({},c,{get:o,set:s}))}),de=pe({equals:D.structural}),fe=function(e,t,n){if("string"==typeof t)return pe.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return pe.apply(null,arguments);var r="object"==typeof t?t:{};return r.get=e,r.set="function"==typeof t?t:r.set,r.name=r.name||e.name||"",new z(r)};function me(e,t,n){return ve(e,t,n,ye)}function ve(e,t,n,r){var i=(r=_e(r)).defaultDecorator||(!1===r.deep?Ee:be);$(e,r.name,i.enhancer),jt();try{for(var o in t){var a=Object.getOwnPropertyDescriptor(t,o),s=(n&&o in n?n[o]:a.get?pe:i)(e,o,a,!0);s&&Object.defineProperty(e,o,s)}}finally{Vt()}return e}fe.struct=de;var ge={deep:!0,name:void 0,defaultDecorator:void 0},ye={deep:!1,name:void 0,defaultDecorator:void 0};function _e(e){return null===e||void 0===e?ge:"string"==typeof e?{name:e,deep:!0}:e}function xe(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?Le:Re}Object.freeze(ge),Object.freeze(ye);var be=oe(Re),we=oe(function(e,t,n){return void 0===e||null===e?e:ie(e)||st(e)||Fe(e)?e:Array.isArray(e)?Se.array(e,{name:n,deep:!1}):yt(e)?Se.object(e,void 0,{name:n,deep:!1}):Et(e)?Se.map(e,{name:n,deep:!1}):dt(!1)}),Ee=oe(Le),Me=oe(function(e,t,n){return P(e,t)?t:e}),Te={box:function(e,t){arguments.length>2&&Ae("box");var n=_e(t);return new K(e,xe(n),n.name)},shallowBox:function(e,t){return arguments.length>2&&Ae("shallowBox"),Se.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&Ae("array");var n=_e(t);return new tt(e,xe(n),n.name)},shallowArray:function(e,t){return arguments.length>2&&Ae("shallowArray"),Se.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&Ae("map");var n=_e(t);return new Ue(e,xe(n),n.name)},shallowMap:function(e,t){return arguments.length>2&&Ae("shallowMap"),Se.map(e,{name:t,deep:!1})},object:function(e,t,n){return"string"==typeof arguments[1]&&Ae("object"),ve({},e,t,_e(n))},shallowObject:function(e,t){return"string"==typeof arguments[1]&&Ae("shallowObject"),Se.object(e,{},{name:t,deep:!1})},ref:Ee,shallow:we,deep:be,struct:Me},Se=function(e,t,n){if("string"==typeof arguments[1])return be.apply(null,arguments);if(se(e))return e;var r=yt(e)?Se.object(e,t,n):Array.isArray(e)?Se.array(e,t):Et(e)?Se.map(e,t):e;if(r!==e)return r;dt(!1)};function Ae(e){dt("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}function Re(e,t,n){return se(e)?e:Array.isArray(e)?Se.array(e,{name:n}):yt(e)?Se.object(e,void 0,{name:n}):Et(e)?Se.map(e,{name:n}):e}function Le(e){return e}function Ce(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function Pe(e,t){xt(e,Ce(),t)}function Oe(e){return e[Ce()]=Ie,e}function Ie(){return this}function Ne(e,t){void 0===t&&(t=void 0),jt();try{return e.apply(t)}finally{Vt()}}Object.keys(Te).forEach(function(e){return Se[e]=Te[e]});var De={},Ue=function(){function e(e,t,n){if(void 0===t&&(t=Re),void 0===n&&(n="ObservableMap@"+pt()),this.enhancer=t,this.name=n,this.$mobx=De,this._keys=new tt(void 0,Le,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){return this._hasMap.has(e)?this._hasMap.get(e).get():this._updateHasMapEntry(e,!1).get()},e.prototype.set=function(e,t){var n=this._has(e);if(G(this)){var r=V(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(G(this)&&!(i=V(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=d(),r=W(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return n&&m(a({},i,{name:this.name,key:e})),Ne(function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)}),r&&X(this,i),n&&g(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);return n?n.setNewValue(t):(n=new K(t,Le,this.name+"."+e+"?",!1),this._hasMap.set(e,n)),n},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==Y){var r=d(),i=W(this),o=i||r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;r&&m(a({},o,{name:this.name,key:e})),n.setNewValue(t),i&&X(this,o),r&&g()}},e.prototype._addValue=function(e,t){var n=this;Ne(function(){var r=new K(t,n.enhancer,n.name+"."+e,!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keys.push(e)});var r=d(),i=W(this),o=i||r?{type:"add",object:this,name:e,newValue:t}:null;r&&m(a({},o,{name:this.name,key:e})),i&&X(this,o),r&&g()},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keys[Ce()]()},e.prototype.values=function(){var e=this,t=0;return Oe({next:function(){return t<e._keys.length?{value:e.get(e._keys[t++]),done:!1}:{value:void 0,done:!0}}})},e.prototype.entries=function(){var e=this,t=0;return Oe({next:function(){if(t<e._keys.length){var n=e._keys[t++];return{value:[n,e.get(n)],done:!1}}return{done:!0}}})},e.prototype.forEach=function(e,t){var n=this;this._keys.forEach(function(r){return e.call(t,n.get(r),r,n)})},e.prototype.merge=function(e){var t=this;return Fe(e)&&(e=e.toJS()),Ne(function(){yt(e)?Object.keys(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(e){var n=s(e,2),r=n[0],i=n[1];return t.set(r,i)}):Et(e)?e.forEach(function(e,n){return t.set(n,e)}):null!==e&&void 0!==e&&dt("Cannot initialize map from "+e)}),this},e.prototype.clear=function(){var e=this;Ne(function(){en(function(){e._keys.slice().forEach(function(t){return e.delete(t)})})})},e.prototype.replace=function(e){var t=this;return Ne(function(){var n,r=yt(n=e)?Object.keys(n):Array.isArray(n)?n.map(function(e){return s(e,1)[0]}):Et(n)||Fe(n)?Mt(n.keys()):dt("Cannot get keys from '"+n+"'");t._keys.filter(function(e){return-1===r.indexOf(e)}).forEach(function(e){return t.delete(e)}),t.merge(e)}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this._keys.forEach(function(n){return t[""+n]=e.get(n)}),t},e.prototype.toJS=function(){var e=this,t=new Map;return this._keys.forEach(function(n){return t.set(n,e.get(n))}),t},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+this._keys.map(function(t){return t+": "+e.get(t)}).join(", ")+" }]"},e.prototype.observe=function(e,t){return q(this,e)},e.prototype.intercept=function(e){return j(this,e)},e}();Pe(Ue.prototype,function(){return this.entries()}),xt(Ue.prototype,"undefined"!=typeof Symbol?Symbol.toStringTag:"@@toStringTag","Map");var ke,Be,Fe=bt("ObservableMap",Ue);function ze(e,t){if("object"==typeof e&&null!==e){if(st(e))return void 0!==t&&dt(!1),e.$mobx.atom;if(Fe(e)){var n=e;return void 0===t?ze(n._keys):((r=n._data.get(t)||n._hasMap.get(t))||dt(!1),r)}var r;if(h(e),t&&!e.$mobx&&e[t],ie(e))return t?((r=e.$mobx.values[t])||dt(!1),r):dt(!1);if(Be(e)||H(e)||pn(e))return e}else if("function"==typeof e&&pn(e.$mobx))return e.$mobx;return dt(!1)}function He(e,t){return e||dt("Expecting some object"),void 0!==t?He(ze(e,t)):Be(e)||H(e)||pn(e)?e:Fe(e)?e:(h(e),e.$mobx?e.$mobx:void dt(!1))}function Ge(e,t){return(void 0!==t?ze(e,t):ie(e)||Fe(e)?He(e):ze(e)).name}function je(e,t,n){return We("onBecomeObserved",e,t,n)}function Ve(e,t,n){return We("onBecomeUnobserved",e,t,n)}function We(e,t,n,r){var i="string"==typeof n?ze(t,n):ze(t),o="string"==typeof n?r:n,a=i[e];return"function"!=typeof a?dt(!1):(i[e]=function(){a.call(this),o.call(this)},function(){i[e]=a})}function qe(e,t,n){void 0===t&&(t=vt),void 0===n&&(n=vt);var r=new ke(e);return je(r,t),Ve(r,n),r}var Xe,Ye,Ke,Ze,Je=(Xe=!1,Ye={},Object.defineProperty(Ye,"0",{set:function(){Xe=!0}}),Object.create(Ye)[0]=1,!1===Xe),$e=0,Qe=function(){};Ke=Qe,Ze=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(Ke.prototype,Ze):void 0!==Ke.prototype.__proto__?Ke.prototype.__proto__=Ze:Ke.prototype=Ze,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(e){Object.defineProperty(Qe.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})});var et=function(){function e(e,t,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new ke(e||"ObservableArray@"+pt()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&this.values.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return j(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),q(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>$e&&ot(e+t+1)},e.prototype.spliceWithArray=function(e,t,n){var r=this;Jt(this.atom);var i=this.values.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:void 0===t||null===t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=ut),G(this)){var o=V(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!o)return ut;t=o.removedCount,n=o.added}var a=(n=0===n.length?n:n.map(function(e){return r.enhancer(e,void 0)})).length-t;this.updateArrayLength(i,a);var s=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,s),this.dehanceValues(s)},e.prototype.spliceItemsIntoValues=function(e,t,n){if(n.length<1e4)return(r=this.values).splice.apply(r,c([e,t],n));var r,i=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),i},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&d(),i=W(this),o=i||r?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;r&&m(a({},o,{name:this.atom.name})),this.atom.reportChanged(),i&&X(this,o),r&&g()},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&d(),i=W(this),o=i||r?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;r&&m(a({},o,{name:this.atom.name})),this.atom.reportChanged(),i&&X(this,o),r&&g()},e}(),tt=function(e){function t(t,n,r,i){void 0===r&&(r="ObservableArray@"+pt()),void 0===i&&(i=!1);var o=e.call(this)||this,a=new et(r,n,o,i);return xt(o,"$mobx",a),t&&t.length&&o.spliceWithArray(0,0,t),Je&&Object.defineProperty(a.array,"0",nt),o}return o(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map(function(e){return st(e)?e.peek():e}))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,n){void 0===n&&(n=0),arguments.length;var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},t.prototype.findIndex=function(e,t,n){void 0===n&&(n=0),arguments.length;for(var r=this.peek(),i=r.length,o=n;o<i;o++)if(e.call(t,r[o],o,this))return o;return-1},t.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,n)},t.prototype.spliceWithArray=function(e,t,n){return this.$mobx.spliceWithArray(e,t,n)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,e),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(0,0,e),n.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function n(e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(n.call(this,e),n.call(this,t),e!==t){var r,i=this.$mobx.values;r=e<t?c(i.slice(0,e),i.slice(e+1,t+1),[i[e]],i.slice(t+1)):c(i.slice(0,t),[i[e]],i.slice(t,e),i.slice(e+1)),this.replace(r)}},t.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},t.prototype.set=function(e,t){var n=this.$mobx,r=n.values;if(e<r.length){Jt(n.atom);var i=r[e];if(G(n)){var o=V(n,{type:"update",object:this,index:e,newValue:t});if(!o)return;t=o.newValue}(t=n.enhancer(t,i))!==i&&(r[e]=t,n.notifyArrayChildUpdate(e,t,i))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}},t}(Qe);Pe(tt.prototype,function(){this.$mobx.atom.reportObserved();var e=this,t=0;return Oe({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})}),Object.defineProperty(tt.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&_t(tt.prototype,"undefined"!=typeof Symbol?Symbol.toStringTag:"@@toStringTag","Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(e){var t=Array.prototype[e];ft("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),_t(tt.prototype,e,function(){return t.apply(this.peek(),arguments)})}),function(e,t){for(var n=0;n<t.length;n++)_t(e,t[n],e[t[n]])}(tt.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var nt=rt(0);function rt(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function it(e){Object.defineProperty(tt.prototype,""+e,rt(e))}function ot(e){for(var t=$e;t<e;t++)it(t);$e=e}ot(1e3);var at=bt("ObservableArrayAdministration",et);function st(e){return gt(e)&&at(e.$mobx)}var ct="An invariant failed, however the error is obfuscated because this is an production build.",ut=[];Object.freeze(ut);var lt={};function ht(){return"undefined"!=typeof window?window:r}function pt(){return++Pt.mobxGuid}function dt(e){throw ft(!1,e),"X"}function ft(e,t){if(!e)throw new Error("[mobx] "+(t||ct))}function mt(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}Object.freeze(lt);var vt=function(){};function gt(e){return null!==e&&"object"==typeof e}function yt(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function _t(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function xt(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function bt(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return gt(e)&&!0===e[n]}}function wt(e){return Array.isArray(e)||st(e)}function Et(e){return void 0!==ht().Map&&e instanceof ht().Map}function Mt(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t}function Tt(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function St(e){return null===e?null:"object"==typeof e?""+e:e}var At,Rt,Lt=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","disableErrorBoundaries","runId"],Ct=function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.disableErrorBoundaries=!1},Pt=new Ct,Ot=!1,It=ht();function Nt(){return Pt}function Dt(){var e=new Ct;for(var t in e)-1===Lt.indexOf(t)&&(Pt[t]=e[t]);Pt.allowStateChanges=!Pt.enforceActions}function Ut(e,t){return kt(ze(e,t))}function kt(e){var t,n,r={name:e.name};return e.observing&&e.observing.length>0&&(r.dependencies=(t=e.observing,n=[],t.forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),n).map(kt)),r}function Bt(e,t){return Ft(ze(e,t))}function Ft(e){var t,n={name:e.name};return(t=e).observers&&t.observers.length>0&&(n.observers=function(e){return e.observers}(e).map(Ft)),n}function zt(e,t){var n=e.observers.length;n&&(e.observersIndexes[t.__mapid]=n),e.observers[n]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Ht(e,t){if(1===e.observers.length)e.observers.length=0,Gt(e);else{var n=e.observers,r=e.observersIndexes,i=n.pop();if(i!==t){var o=r[t.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[t.__mapid]}}function Gt(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Pt.pendingUnobservations.push(e))}function jt(){Pt.inBatch++}function Vt(){if(0==--Pt.inBatch){ln();for(var e=Pt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof z&&n.suspend())}Pt.pendingUnobservations=[]}}function Wt(e){var t=Pt.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&Pt.inBatch>0&&Gt(e),!1)}function qt(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===Rt.BREAK){var n=[];!function e(t,n,r){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(r).join("\t")+t.name),t.dependencies&&t.dependencies.forEach(function(t){return e(t,n,r+1)}))}(Ut(e),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof z?e.derivation.toString():"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}}It.__mobxInstanceCount?(It.__mobxInstanceCount++,setTimeout(function(){Ot||dt(!1)},1)):It.__mobxInstanceCount=1,function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(At||(At={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Rt||(Rt={}));var Xt=function(e){this.cause=e};function Yt(e){return e instanceof Xt}function Kt(e){switch(e.dependenciesState){case At.UP_TO_DATE:return!1;case At.NOT_TRACKING:case At.STALE:return!0;case At.POSSIBLY_STALE:for(var t=tn(),n=e.observing,r=n.length,i=0;i<r;i++){var o=n[i];if(H(o)){if(Pt.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return nn(t),!0}if(e.dependenciesState===At.STALE)return nn(t),!0}}return rn(e),nn(t),!1}}function Zt(){return null!==Pt.trackingDerivation}function Jt(e){var t=e.observers.length>0;Pt.computationDepth>0&&t&&dt(!1),Pt.allowStateChanges||!t&&"strict"!==Pt.enforceActions||dt(!1)}function $t(e,t,n){rn(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Pt.runId;var r,i=Pt.trackingDerivation;if(Pt.trackingDerivation=e,!0===Pt.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new Xt(e)}return Pt.trackingDerivation=i,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=At.UP_TO_DATE,i=0,o=e.unboundDepsCount,a=0;a<o;a++){0===(s=n[a]).diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}for(n.length=i,e.newObserving=null,o=t.length;o--;){0===(s=t[o]).diffValue&&Ht(s,e),s.diffValue=0}for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,zt(s,e))}r!==At.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),r}function Qt(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)Ht(t[n],e);e.dependenciesState=At.NOT_TRACKING}function en(e){var t=tn(),n=e();return nn(t),n}function tn(){var e=Pt.trackingDerivation;return Pt.trackingDerivation=null,e}function nn(e){Pt.trackingDerivation=e}function rn(e){if(e.dependenciesState!==At.UP_TO_DATE){e.dependenciesState=At.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=At.UP_TO_DATE}}function on(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"==typeof e[e.length-1]&&(n=e.pop());var r=function(e){switch(e.length){case 0:return Pt.trackingDerivation;case 1:return ze(e[0]);case 2:return ze(e[0],e[1])}}(e);if(!r)return dt(!1);r.isTracing===Rt.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?Rt.BREAK:Rt.LOG}var an=function(){function e(e,t,n){void 0===e&&(e="Reaction@"+pt()),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.observing=[],this.newObserving=[],this.dependenciesState=At.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+pt(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Rt.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pt.pendingReactions.push(this),ln())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(jt(),this._isScheduled=!1,Kt(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&d()&&f({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}Vt()}},e.prototype.track=function(e){jt();var t,n=d();n&&(t=Date.now(),m({name:this.name,type:"reaction"})),this._isRunning=!0;var r=$t(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Qt(this),Yt(r)&&this.reportExceptionInDerivation(r.cause),n&&g({time:Date.now()-t}),Vt()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Pt.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this;console.error(n,e),d()&&f({type:"error",name:this.name,message:n,error:""+e}),Pt.globalReactionErrorHandlers.forEach(function(n){return n(e,t)})}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(jt(),Qt(this),Vt()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),on(this,e)},e}();function sn(e){return Pt.globalReactionErrorHandlers.push(e),function(){var t=Pt.globalReactionErrorHandlers.indexOf(e);t>=0&&Pt.globalReactionErrorHandlers.splice(t,1)}}var cn=100,un=function(e){return e()};function ln(){Pt.inBatch>0||Pt.isRunningReactions||un(hn)}function hn(){Pt.isRunningReactions=!0;for(var e=Pt.pendingReactions,t=0;e.length>0;){++t===cn&&(console.error("Reaction doesn't converge to a stable state after "+cn+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Pt.isRunningReactions=!1}var pn=bt("Reaction",an);function dn(e,t,n,r){return"function"==typeof n?function(e,t,n,r){return He(e,t).observe(n,r)}(e,t,n,r):function(e,t,n){return He(e).observe(t,n)}(e,t,n)}function fn(e,t,n){return"function"==typeof n?function(e,t,n){return He(e,t).intercept(n)}(e,t,n):function(e,t){return He(e).intercept(t)}(e,t)}function mn(e,t,n){return 1===arguments.length||t&&"object"==typeof t?function(e,t){var n,r=new Promise(function(r,i){var o=vn(e,r,a({},t,{onError:i}));n=function(){o(),i("WHEN_CANCELLED")}});return r.cancel=n,r}(e,t):vn(e,t,n||{})}function vn(e,t,n){var r;"number"==typeof n.timeout&&(r=setTimeout(function(){if(!o.$mobx.isDisposed){o();var e=new Error("WHEN_TIMEOUT");if(!n.onError)throw e;n.onError(e)}},n.timeout)),n.name=n.name||"When@"+pt();var i=_(n.name+"-effect",t),o=U(function(t){e()&&(t.dispose(),r&&clearTimeout(r),i())},n);return o}function gn(e){return ie(e)?e.$mobx.getKeys():Fe(e)?e._keys.slice():dt(!1)}function yn(e){return ie(e)?gn(e).map(function(t){return e[t]}):Fe(e)?gn(e).map(function(t){return e.get(t)}):st(e)?e.slice():dt(!1)}function _n(e,t,n){if(2!==arguments.length)if(ie(e)){var r=e.$mobx,i=r.values[t];i?i.set(n):Q(e,t,n,r.defaultEnhancer)}else if(Fe(e))e.set(t,n);else{if(!st(e))return dt(!1);"number"!=typeof t&&(t=parseInt(t,10)),ft(t>=0,"Not a valid index: '"+t+"'"),jt(),t>=e.length&&(e.length=t+1),e[t]=n,Vt()}else{jt();var o=t;try{for(var a in o)_n(e,a,o[a])}finally{Vt()}}}function xn(e,t){if(ie(e))e.$mobx.remove(t);else if(Fe(e))e.delete(t);else{if(!st(e))return dt(!1);"number"!=typeof t&&(t=parseInt(t,10)),ft(t>=0,"Not a valid index: '"+t+"'"),e.splice(t,1)}}function bn(e,t){if(ie(e)){var n=He(e);return n.getKeys(),n.values[t]instanceof K}return Fe(e)?e.has(t):st(e)?t>=0&&t<e.length:dt(!1)}function wn(e,t){if(bn(e,t))return ie(e)?e[t]:Fe(e)?e.get(t):st(e)?e[t]:dt(!1)}function En(e,t){var n="function"==typeof e?e.prototype:e;for(var r in t){var i=(0,t[r])(n,r,Object.getOwnPropertyDescriptor(n,r));i&&Object.defineProperty(n,r,i)}return e}function Mn(e){var t=e.enforceActions,n=e.computedRequiresReaction,r=e.disableErrorBoundaries,i=e.arrayBuffer,o=e.reactionScheduler;if(void 0!==t){if("boolean"!=typeof t&&"strict"!==t)return fail("Invalid configuration for 'enforceActions': "+t);Pt.enforceActions=t,Pt.allowStateChanges=!0!==t&&"strict"!==t}void 0!==n&&(Pt.computedRequiresReaction=!!n),!0===e.isolateGlobalState&&(Ot=!0,ht().__mobxInstanceCount--),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),Pt.disableErrorBoundaries=!!r),"number"==typeof i&&ot(i),o&&function(e){var t=un;un=function(n){return e(function(){return t(n)})}}(o)}var Tn=0;function Sn(e){1!==arguments.length&&dt("Flow expects one 1 argument and cannot be used as decorator");var t=e.name||"<unnamed flow>";return function(){var n,r=arguments,i=++Tn,o=S(t+" - runid: "+i+" - init",e).apply(this,r),a=void 0,s=new Promise(function(e,r){var s=0;function c(e){var n;a=void 0;try{n=S(t+" - runid: "+i+" - yield "+s++,o.next).call(o,e)}catch(e){return r(e)}l(n)}function u(e){var n;a=void 0;try{n=S(t+" - runid: "+i+" - yield "+s++,o.throw).call(o,e)}catch(e){return r(e)}l(n)}function l(t){if(!t||"function"!=typeof t.then)return t.done?e(t.value):(a=Promise.resolve(t.value)).then(c,u);t.then(l,r)}n=r,c(void 0)});return s.cancel=S(t+" - runid: "+i+" - cancel",function(){try{a&&An(a);var e=o.return(),t=Promise.resolve(e.value);t.then(vt,vt),An(t),n(new Error("FLOW_CANCELLED"))}catch(e){n(e)}}),s}}function An(e){"function"==typeof e.cancel&&e.cancel()}var Rn={detectCycles:!0,exportMapsAsObjects:!0};function Ln(e,t,n){void 0===n&&(n=[]),"boolean"==typeof t&&(t={detectCycles:t}),t||(t=Rn);var r=!0===t.detectCycles;function i(t){return r&&n.push([e,t]),t}if(se(e)){if(r&&null===n&&(n=[]),r&&null!==e&&"object"==typeof e)for(var o=0,a=n.length;o<a;o++)if(n[o][0]===e)return n[o][1];if(st(e)){var s=i([]),c=e.map(function(e){return Ln(e,t,n)});for(s.length=c.length,o=0,a=c.length;o<a;o++)s[o]=c[o];return s}if(ie(e)){for(var u in s=i({}),gn(e),e)s[u]=Ln(e[u],t,n);return s}if(Fe(e)){if(!1===t.exportMapsAsObjects){var l=i(new Map);return e.forEach(function(e,r){l.set(r,Ln(e,t,n))}),l}var h=i({});return e.forEach(function(e,r){h[r]=Ln(e,t,n)}),h}if(Z(e))return Ln(e.get(),t,n)}return e}function Cn(e,t,n){var r;if(Fe(e)||st(e)||Z(e))r=He(e);else{if(!ie(e))return dt(!1);if("string"!=typeof t)return dt(!1);r=He(e,t)}return void 0!==r.dehancer?dt(!1):(r.dehancer="function"==typeof t?t:n,function(){r.dehancer=void 0})}"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:y,extras:{getDebugName:Ge}})}.call(this,n(71),n(18))},function(e,t,n){"use strict";e.exports=n(72)},function(e,t,n){"use strict";(function(e){var r,i,o;function a(){return Math.round(16777215*Math.random())}Object.defineProperty(t,"__esModule",{value:!0}),t.randomColor=a,(r=n(0).enterModule)&&r(e),i=n(0).default,o=n(0).leaveModule,i&&(i.register(a,"randomColor","/Users/andre/Projects/shooter/src/helpers.js"),o(e))}).call(this,n(1)(e))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_lodash=__webpack_require__(10),_Hit=__webpack_require__(63),_Hit2=_interopRequireDefault(_Hit),_Sweep=__webpack_require__(61),_Sweep2=_interopRequireDefault(_Sweep),_Segment=__webpack_require__(16),_Segment2=_interopRequireDefault(_Segment),_helpers=__webpack_require__(5),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var EPSILON=1e-8,Box=function(){function Box(e,t){_classCallCheck(this,Box),this.position=e,this.half=t.clone().multiplyScalar(.5),this.size=t}return _createClass(Box,[{key:"createHelper",value:function(){return null}},{key:"updateHelper",value:function(){this.helper&&this.helper.position.copy(this.position)}},{key:"intersectPoint",value:function(e){var t=e.position.x-this.position.x,n=this.half.x-Math.abs(t);if(n<=0)return null;var r=e.position.z-this.position.z,i=this.half.z-Math.abs(r);if(i<=0)return null;var o=new _Hit2.default(this);if(n<i){var a=Math.sign(t);o.delta.x=n*a,o.normal.x=a,o.position.x=this.position.x+this.half.x*a,o.position.z=e.position.z}else{var s=Math.sign(r);o.delta.z=i*s,o.normal.z=s,o.position.x=e.position.x,o.position.z=this.position.z+this.half.z*s}return o}},{key:"intersectSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=1/e.delta.x,i=1/e.delta.z,o=Math.sign(r),a=Math.sign(i),s=(this.position.x-o*(this.half.x+t)-e.position.x)*r,c=(this.position.z-a*(this.half.z+n)-e.position.z)*i,u=(this.position.x+o*(this.half.x+t)-e.position.x)*r,l=(this.position.z+a*(this.half.z+n)-e.position.z)*i;if(s>l||c>u)return null;var h=Math.max(s,c),p=Math.min(u,l);if(h>=1||p<=0)return null;var d=new _Hit2.default(this);return d.time=(0,_lodash.clamp)(h,0,1),s>c?(d.normal.x=-o,d.normal.z=0):(d.normal.x=0,d.normal.z=-a),d.delta.x=(1-d.time)*-e.delta.x,d.delta.z=(1-d.time)*-e.delta.z,d.position.x=e.position.x+d.delta.x*d.time,d.position.z=e.position.z+d.delta.z*d.time,d}},{key:"intersectBox",value:function(e){var t=e.position.x-this.position.x,n=e.half.x+this.half.x-Math.abs(t);if(n<=0)return null;var r=e.position.z-this.position.z,i=e.half.z+this.half.z-Math.abs(r);if(i<=0)return null;var o=new _Hit2.default(this);if(n<i){var a=Math.sign(t);o.delta.x=n*a,o.normal.x=a,o.position.x=this.position.x+this.half.x*a,o.position.z=e.position.z}else{var s=Math.sign(r);o.delta.z=i*s,o.normal.z=s,o.position.x=e.position.x,o.position.z=this.position.z+this.half.z*s}return o}},{key:"sweepBox",value:function(e,t){var n=new _Sweep2.default;if(0===t.x&&0===t.z)return n.position.x=e.position.x,n.position.z=e.position.z,n.hit=this.intersectBox(e),n.hit?(n.time=0,n.hit.time=0):n.time=1,n;var r=new _Segment2.default(e.position,t.clone());if(n.hit=this.intersectSegment(r,e.half.x,e.half.z),n.hit){n.time=(0,_lodash.clamp)(n.hit.time-EPSILON,0,1),n.position.x=e.position.x+t.x*n.time,n.position.z=e.position.z+t.z*n.time;var i=t.clone();i.normalize(),n.hit.position.x=(0,_lodash.clamp)(n.hit.position.x+i.x*e.half.x,this.position.x-this.half.x,this.position.x+this.half.x),n.hit.position.z=(0,_lodash.clamp)(n.hit.position.z+i.z*e.half.z,this.position.z-this.half.z,this.position.z+this.half.z)}else n.position.x=e.position.x+t.x,n.position.z=e.position.z+t.z,n.time=1;return n}},{key:"sweepInto",value:function(e,t){var n=new _Sweep2.default;n.time=1,n.position.x=this.position.x+t.x,n.position.z=this.position.z+t.z;for(var r=0,i=e.length;r<i;r++)if(e[r]!==this){var o=e[r].sweepBox(this,t);o.time<n.time&&(n=o),o.hit&&n.hit&&n.hit.normal.add(o.hit.normal)}return n}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Box}(),reactHotLoader,leaveModule;exports.default=Box,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(EPSILON,"EPSILON","/Users/andre/Projects/shooter/src/Intersect/Box.js"),reactHotLoader.register(Box,"Box","/Users/andre/Projects/shooter/src/Intersect/Box.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_lodash=__webpack_require__(10),_Animation=__webpack_require__(9),_Animation2=_interopRequireDefault(_Animation),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Entity=(_temp=_class=function(_THREE$Group){function Entity(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_classCallCheck(this,Entity);var i=_possibleConstructorReturn(this,(Entity.__proto__||Object.getPrototypeOf(Entity)).call(this));i.game=e,i.map=t,i.definition=n,i.config=(0,_lodash.defaults)(r,Entity.config),i.animation=new _Animation2.default([n.gid],!1),i.tilewidth=i.map.definition.tilewidth,i.tileheight=i.map.definition.tileheight,i.tile=i.map.tileset.createTile(n.gid);var o=n.x/i.tilewidth+.5,a=n.y/i.tileheight-.5,s=i.map.lights.getColor(Math.floor(o),Math.floor(a));return i.tile.geometry.faces.forEach(function(e){return e.color=s}),i.tile.scale.set(n.width/i.tilewidth,n.height/i.tileheight,1),i.position.set(o,n.height/i.tileheight/2,a),i.add(i.tile),i}return _inherits(Entity,_THREE$Group),_createClass(Entity,[{key:"update",value:function(e,t){this.animation.update(e,t),this.map.tileset.updateTile(this.tile,this.animation.frame);var n=this.game.camera,r=new THREE.Vector3(0,n.position.y,0);r.y-=this.position.y,r.sub(n.position).multiplyScalar(-1),this.lookAt(r),"vertical"===this.definition.properties.fixed?this.rotation.y=0:"horizontal"===this.definition.properties.fixed&&(this.rotation.y=n.position.x>this.position.x?Math.PI/2:Math.PI/-2)}},{key:"animate",value:function(e){this.config.animations[e]||console.warn('Unknown animation "'+e+'" for '+this.constructor.name)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Entity}(THREE.Group),_class.config={animations:{}},_temp),reactHotLoader,leaveModule;exports.default=Entity,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Entity,"Entity","/Users/andre/Projects/shooter/src/entities/Entity.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(51)},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_class,_temp,_constants=__webpack_require__(36),enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Animation=(_temp=_class=function(){function Animation(e,t){_classCallCheck(this,Animation),this.frame=e[0],this.frames=e,this.repeat=t,this.isPlaying=!1,this.time=0}return _createClass(Animation,[{key:"start",value:function(){this.isPlaying=!0,this.time=0}},{key:"update",value:function(e,t){if(this.isPlaying){this.time+=e;var n=Math.floor(this.time/Animation.FRAME_DURATION);this.repeat?n%=this.frames.length:n=Math.max(n,this.frames.length-1),this.frame=this.frames[n]}}},{key:"clone",value:function(){return new Animation(this.frames,this.repeat)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Animation}(),_class.FRAME_DURATION=.25,_temp),reactHotLoader,leaveModule;exports.default=Animation,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Animation,"Animation","/Users/andre/Projects/shooter/src/utils/Animation.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
(function(){var o,a=200,s="Expected a function",c="__lodash_hash_undefined__",u="__lodash_placeholder__",l=1,h=2,p=4,d=1,f=2,m=1,v=2,g=4,y=8,_=16,x=32,b=64,w=128,E=256,M=512,T=800,S=16,A=1/0,R=9007199254740991,L=1.7976931348623157e308,C=NaN,P=4294967295,O=P-1,I=P>>>1,N=[["ary",w],["bind",m],["bindKey",v],["curry",y],["curryRight",_],["flip",M],["partial",x],["partialRight",b],["rearg",E]],D="[object Arguments]",U="[object Array]",k="[object AsyncFunction]",B="[object Boolean]",F="[object Date]",z="[object DOMException]",H="[object Error]",G="[object Function]",j="[object GeneratorFunction]",V="[object Map]",W="[object Number]",q="[object Null]",X="[object Object]",Y="[object Proxy]",K="[object RegExp]",Z="[object Set]",J="[object String]",$="[object Symbol]",Q="[object Undefined]",ee="[object WeakMap]",te="[object ArrayBuffer]",ne="[object DataView]",re="[object Float32Array]",ie="[object Float64Array]",oe="[object Int8Array]",ae="[object Int16Array]",se="[object Int32Array]",ce="[object Uint8Array]",ue="[object Uint8ClampedArray]",le="[object Uint16Array]",he="[object Uint32Array]",pe=/\b__p \+= '';/g,de=/\b(__p \+=) '' \+/g,fe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,me=/&(?:amp|lt|gt|quot|#39);/g,ve=/[&<>"']/g,ge=RegExp(me.source),ye=RegExp(ve.source),_e=/<%-([\s\S]+?)%>/g,xe=/<%([\s\S]+?)%>/g,be=/<%=([\s\S]+?)%>/g,we=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Te=/[\\^$.*+?()[\]{}|]/g,Se=RegExp(Te.source),Ae=/^\s+|\s+$/g,Re=/^\s+/,Le=/\s+$/,Ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pe=/\{\n\/\* \[wrapped with (.+)\] \*/,Oe=/,? & /,Ie=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ne=/\\(\\)?/g,De=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ue=/\w*$/,ke=/^[-+]0x[0-9a-f]+$/i,Be=/^0b[01]+$/i,Fe=/^\[object .+?Constructor\]$/,ze=/^0o[0-7]+$/i,He=/^(?:0|[1-9]\d*)$/,Ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,Ve=/['\n\r\u2028\u2029\\]/g,We="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",qe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xe="["+qe+"]",Ye="["+We+"]",Ke="\\d+",Ze="[a-z\\xdf-\\xf6\\xf8-\\xff]",Je="[^\\ud800-\\udfff"+qe+Ke+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",$e="\\ud83c[\\udffb-\\udfff]",Qe="[^\\ud800-\\udfff]",et="(?:\\ud83c[\\udde6-\\uddff]){2}",tt="[\\ud800-\\udbff][\\udc00-\\udfff]",nt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rt="(?:"+Ze+"|"+Je+")",it="(?:"+nt+"|"+Je+")",ot="(?:"+Ye+"|"+$e+")?",at="[\\ufe0e\\ufe0f]?"+ot+"(?:\\u200d(?:"+[Qe,et,tt].join("|")+")[\\ufe0e\\ufe0f]?"+ot+")*",st="(?:"+["[\\u2700-\\u27bf]",et,tt].join("|")+")"+at,ct="(?:"+[Qe+Ye+"?",Ye,et,tt,"[\\ud800-\\udfff]"].join("|")+")",ut=RegExp("['’]","g"),lt=RegExp(Ye,"g"),ht=RegExp($e+"(?="+$e+")|"+ct+at,"g"),pt=RegExp([nt+"?"+Ze+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Xe,nt,"$"].join("|")+")",it+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Xe,nt+rt,"$"].join("|")+")",nt+"?"+rt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",nt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ke,st].join("|"),"g"),dt=RegExp("[\\u200d\\ud800-\\udfff"+We+"\\ufe0e\\ufe0f]"),ft=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vt=-1,gt={};gt[re]=gt[ie]=gt[oe]=gt[ae]=gt[se]=gt[ce]=gt[ue]=gt[le]=gt[he]=!0,gt[D]=gt[U]=gt[te]=gt[B]=gt[ne]=gt[F]=gt[H]=gt[G]=gt[V]=gt[W]=gt[X]=gt[K]=gt[Z]=gt[J]=gt[ee]=!1;var yt={};yt[D]=yt[U]=yt[te]=yt[ne]=yt[B]=yt[F]=yt[re]=yt[ie]=yt[oe]=yt[ae]=yt[se]=yt[V]=yt[W]=yt[X]=yt[K]=yt[Z]=yt[J]=yt[$]=yt[ce]=yt[ue]=yt[le]=yt[he]=!0,yt[H]=yt[G]=yt[ee]=!1;var _t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xt=parseFloat,bt=parseInt,wt="object"==typeof e&&e&&e.Object===Object&&e,Et="object"==typeof self&&self&&self.Object===Object&&self,Mt=wt||Et||Function("return this")(),Tt="object"==typeof t&&t&&!t.nodeType&&t,St=Tt&&"object"==typeof r&&r&&!r.nodeType&&r,At=St&&St.exports===Tt,Rt=At&&wt.process,Lt=function(){try{return St&&St.require&&St.require("util").types||Rt&&Rt.binding&&Rt.binding("util")}catch(e){}}(),Ct=Lt&&Lt.isArrayBuffer,Pt=Lt&&Lt.isDate,Ot=Lt&&Lt.isMap,It=Lt&&Lt.isRegExp,Nt=Lt&&Lt.isSet,Dt=Lt&&Lt.isTypedArray;function Ut(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function kt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ft(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function zt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Ht(e,t){return!(null==e||!e.length)&&Jt(e,t,0)>-1}function Gt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function jt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Vt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Wt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function qt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Yt=tn("length");function Kt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Zt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Jt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Zt(e,Qt,n)}function $t(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Qt(e){return e!=e}function en(e,t){var n=null==e?0:e.length;return n?on(e,t)/n:C}function tn(e){return function(t){return null==t?o:t[e]}}function nn(e){return function(t){return null==e?o:e[t]}}function rn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function on(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==o&&(n=n===o?a:n+a)}return n}function an(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function sn(e){return function(t){return e(t)}}function cn(e,t){return jt(t,function(t){return e[t]})}function un(e,t){return e.has(t)}function ln(e,t){for(var n=-1,r=e.length;++n<r&&Jt(t,e[n],0)>-1;);return n}function hn(e,t){for(var n=e.length;n--&&Jt(t,e[n],0)>-1;);return n}var pn=nn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),dn=nn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function fn(e){return"\\"+_t[e]}function mn(e){return dt.test(e)}function vn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function gn(e,t){return function(n){return e(t(n))}}function yn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==u||(e[n]=u,o[i++]=n)}return o}function _n(e,t){return"__proto__"==t?o:e[t]}function xn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function bn(e){return mn(e)?function(e){for(var t=ht.lastIndex=0;ht.test(e);)++t;return t}(e):Yt(e)}function wn(e){return mn(e)?function(e){return e.match(ht)||[]}(e):function(e){return e.split("")}(e)}var En=nn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Mn=function e(t){var n,r=(t=null==t?Mt:Mn.defaults(Mt.Object(),t,Mn.pick(Mt,mt))).Array,i=t.Date,We=t.Error,qe=t.Function,Xe=t.Math,Ye=t.Object,Ke=t.RegExp,Ze=t.String,Je=t.TypeError,$e=r.prototype,Qe=qe.prototype,et=Ye.prototype,tt=t["__core-js_shared__"],nt=Qe.toString,rt=et.hasOwnProperty,it=0,ot=(n=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",at=et.toString,st=nt.call(Ye),ct=Mt._,ht=Ke("^"+nt.call(rt).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=At?t.Buffer:o,_t=t.Symbol,wt=t.Uint8Array,Et=dt?dt.allocUnsafe:o,Tt=gn(Ye.getPrototypeOf,Ye),St=Ye.create,Rt=et.propertyIsEnumerable,Lt=$e.splice,Yt=_t?_t.isConcatSpreadable:o,nn=_t?_t.iterator:o,Tn=_t?_t.toStringTag:o,Sn=function(){try{var e=To(Ye,"defineProperty");return e({},"",{}),e}catch(e){}}(),An=t.clearTimeout!==Mt.clearTimeout&&t.clearTimeout,Rn=i&&i.now!==Mt.Date.now&&i.now,Ln=t.setTimeout!==Mt.setTimeout&&t.setTimeout,Cn=Xe.ceil,Pn=Xe.floor,On=Ye.getOwnPropertySymbols,In=dt?dt.isBuffer:o,Nn=t.isFinite,Dn=$e.join,Un=gn(Ye.keys,Ye),kn=Xe.max,Bn=Xe.min,Fn=i.now,zn=t.parseInt,Hn=Xe.random,Gn=$e.reverse,jn=To(t,"DataView"),Vn=To(t,"Map"),Wn=To(t,"Promise"),qn=To(t,"Set"),Xn=To(t,"WeakMap"),Yn=To(Ye,"create"),Kn=Xn&&new Xn,Zn={},Jn=Zo(jn),$n=Zo(Vn),Qn=Zo(Wn),er=Zo(qn),tr=Zo(Xn),nr=_t?_t.prototype:o,rr=nr?nr.valueOf:o,ir=nr?nr.toString:o;function or(e){if(ds(e)&&!ns(e)&&!(e instanceof ur)){if(e instanceof cr)return e;if(rt.call(e,"__wrapped__"))return Jo(e)}return new cr(e)}var ar=function(){function e(){}return function(t){if(!ps(t))return{};if(St)return St(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function sr(){}function cr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function ur(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=P,this.__views__=[]}function lr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function pr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function dr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new pr;++t<n;)this.add(e[t])}function fr(e){var t=this.__data__=new hr(e);this.size=t.size}function mr(e,t){var n=ns(e),r=!n&&ts(e),i=!n&&!r&&as(e),o=!n&&!r&&!i&&bs(e),a=n||r||i||o,s=a?an(e.length,Ze):[],c=s.length;for(var u in e)!t&&!rt.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Oo(u,c))||s.push(u);return s}function vr(e){var t=e.length;return t?e[li(0,t-1)]:o}function gr(e,t,n){(n===o||$a(e[t],n))&&(n!==o||t in e)||wr(e,t,n)}function yr(e,t,n){var r=e[t];rt.call(e,t)&&$a(r,n)&&(n!==o||t in e)||wr(e,t,n)}function _r(e,t){for(var n=e.length;n--;)if($a(e[n][0],t))return n;return-1}function xr(e,t,n,r){return Lr(e,function(e,i,o){t(r,e,n(e),o)}),r}function br(e,t){return e&&ji(t,js(t),e)}function wr(e,t,n){"__proto__"==t&&Sn?Sn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Er(e,t){for(var n=-1,i=t.length,a=r(i),s=null==e;++n<i;)a[n]=s?o:Bs(e,t[n]);return a}function Mr(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function Tr(e,t,n,r,i,a){var s,c=t&l,u=t&h,d=t&p;if(n&&(s=i?n(e,r,i,a):n(e)),s!==o)return s;if(!ps(e))return e;var f=ns(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&rt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return Gi(e,s)}else{var m=Ro(e),v=m==G||m==j;if(as(e))return Ui(e,c);if(m==X||m==D||v&&!i){if(s=u||v?{}:Co(e),!c)return u?function(e,t){return ji(e,Ao(e),t)}(e,function(e,t){return e&&ji(t,Vs(t),e)}(s,e)):function(e,t){return ji(e,So(e),t)}(e,br(s,e))}else{if(!yt[m])return i?e:{};s=function(e,t,n){var r,i,o,a=e.constructor;switch(t){case te:return ki(e);case B:case F:return new a(+e);case ne:return function(e,t){var n=t?ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case re:case ie:case oe:case ae:case se:case ce:case ue:case le:case he:return Bi(e,n);case V:return new a;case W:case J:return new a(e);case K:return(o=new(i=e).constructor(i.source,Ue.exec(i))).lastIndex=i.lastIndex,o;case Z:return new a;case $:return r=e,rr?Ye(rr.call(r)):{}}}(e,m,c)}}a||(a=new fr);var g=a.get(e);if(g)return g;if(a.set(e,s),ys(e))return e.forEach(function(r){s.add(Tr(r,t,n,r,e,a))}),s;if(fs(e))return e.forEach(function(r,i){s.set(i,Tr(r,t,n,i,e,a))}),s;var y=f?o:(d?u?yo:go:u?Vs:js)(e);return Bt(y||e,function(r,i){y&&(r=e[i=r]),yr(s,i,Tr(r,t,n,i,e,a))}),s}function Sr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ye(e);r--;){var i=n[r],a=t[i],s=e[i];if(s===o&&!(i in e)||!a(s))return!1}return!0}function Ar(e,t,n){if("function"!=typeof e)throw new Je(s);return jo(function(){e.apply(o,n)},t)}function Rr(e,t,n,r){var i=-1,o=Ht,s=!0,c=e.length,u=[],l=t.length;if(!c)return u;n&&(t=jt(t,sn(n))),r?(o=Gt,s=!1):t.length>=a&&(o=un,s=!1,t=new dr(t));e:for(;++i<c;){var h=e[i],p=null==n?h:n(h);if(h=r||0!==h?h:0,s&&p==p){for(var d=l;d--;)if(t[d]===p)continue e;u.push(h)}else o(t,p,r)||u.push(h)}return u}or.templateSettings={escape:_e,evaluate:xe,interpolate:be,variable:"",imports:{_:or}},or.prototype=sr.prototype,or.prototype.constructor=or,cr.prototype=ar(sr.prototype),cr.prototype.constructor=cr,ur.prototype=ar(sr.prototype),ur.prototype.constructor=ur,lr.prototype.clear=function(){this.__data__=Yn?Yn(null):{},this.size=0},lr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},lr.prototype.get=function(e){var t=this.__data__;if(Yn){var n=t[e];return n===c?o:n}return rt.call(t,e)?t[e]:o},lr.prototype.has=function(e){var t=this.__data__;return Yn?t[e]!==o:rt.call(t,e)},lr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Yn&&t===o?c:t,this},hr.prototype.clear=function(){this.__data__=[],this.size=0},hr.prototype.delete=function(e){var t=this.__data__,n=_r(t,e);return!(n<0||(n==t.length-1?t.pop():Lt.call(t,n,1),--this.size,0))},hr.prototype.get=function(e){var t=this.__data__,n=_r(t,e);return n<0?o:t[n][1]},hr.prototype.has=function(e){return _r(this.__data__,e)>-1},hr.prototype.set=function(e,t){var n=this.__data__,r=_r(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},pr.prototype.clear=function(){this.size=0,this.__data__={hash:new lr,map:new(Vn||hr),string:new lr}},pr.prototype.delete=function(e){var t=Eo(this,e).delete(e);return this.size-=t?1:0,t},pr.prototype.get=function(e){return Eo(this,e).get(e)},pr.prototype.has=function(e){return Eo(this,e).has(e)},pr.prototype.set=function(e,t){var n=Eo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},dr.prototype.add=dr.prototype.push=function(e){return this.__data__.set(e,c),this},dr.prototype.has=function(e){return this.__data__.has(e)},fr.prototype.clear=function(){this.__data__=new hr,this.size=0},fr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},fr.prototype.get=function(e){return this.__data__.get(e)},fr.prototype.has=function(e){return this.__data__.has(e)},fr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof hr){var r=n.__data__;if(!Vn||r.length<a-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new pr(r)}return n.set(e,t),this.size=n.size,this};var Lr=qi(kr),Cr=qi(Br,!0);function Pr(e,t){var n=!0;return Lr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Or(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(null!=s&&(c===o?s==s&&!xs(s):n(s,c)))var c=s,u=a}return u}function Ir(e,t){var n=[];return Lr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Nr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Po),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Nr(s,t-1,n,r,i):Vt(i,s):r||(i[i.length]=s)}return i}var Dr=Xi(),Ur=Xi(!0);function kr(e,t){return e&&Dr(e,t,js)}function Br(e,t){return e&&Ur(e,t,js)}function Fr(e,t){return zt(t,function(t){return us(e[t])})}function zr(e,t){for(var n=0,r=(t=Oi(t,e)).length;null!=e&&n<r;)e=e[Ko(t[n++])];return n&&n==r?e:o}function Hr(e,t,n){var r=t(e);return ns(e)?r:Vt(r,n(e))}function Gr(e){return null==e?e===o?Q:q:Tn&&Tn in Ye(e)?function(e){var t=rt.call(e,Tn),n=e[Tn];try{e[Tn]=o;var r=!0}catch(e){}var i=at.call(e);return r&&(t?e[Tn]=n:delete e[Tn]),i}(e):function(e){return at.call(e)}(e)}function jr(e,t){return e>t}function Vr(e,t){return null!=e&&rt.call(e,t)}function Wr(e,t){return null!=e&&t in Ye(e)}function qr(e,t,n){for(var i=n?Gt:Ht,a=e[0].length,s=e.length,c=s,u=r(s),l=1/0,h=[];c--;){var p=e[c];c&&t&&(p=jt(p,sn(t))),l=Bn(p.length,l),u[c]=!n&&(t||a>=120&&p.length>=120)?new dr(c&&p):o}p=e[0];var d=-1,f=u[0];e:for(;++d<a&&h.length<l;){var m=p[d],v=t?t(m):m;if(m=n||0!==m?m:0,!(f?un(f,v):i(h,v,n))){for(c=s;--c;){var g=u[c];if(!(g?un(g,v):i(e[c],v,n)))continue e}f&&f.push(v),h.push(m)}}return h}function Xr(e,t,n){var r=null==(e=Ho(e,t=Oi(t,e)))?e:e[Ko(ca(t))];return null==r?o:Ut(r,e,n)}function Yr(e){return ds(e)&&Gr(e)==D}function Kr(e,t,n,r,i){return e===t||(null==e||null==t||!ds(e)&&!ds(t)?e!=e&&t!=t:function(e,t,n,r,i,a){var s=ns(e),c=ns(t),u=s?U:Ro(e),l=c?U:Ro(t),h=(u=u==D?X:u)==X,p=(l=l==D?X:l)==X,m=u==l;if(m&&as(e)){if(!as(t))return!1;s=!0,h=!1}if(m&&!h)return a||(a=new fr),s||bs(e)?mo(e,t,n,r,i,a):function(e,t,n,r,i,o,a){switch(n){case ne:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case te:return!(e.byteLength!=t.byteLength||!o(new wt(e),new wt(t)));case B:case F:case W:return $a(+e,+t);case H:return e.name==t.name&&e.message==t.message;case K:case J:return e==t+"";case V:var s=vn;case Z:var c=r&d;if(s||(s=xn),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=f,a.set(e,t);var l=mo(s(e),s(t),r,i,o,a);return a.delete(e),l;case $:if(rr)return rr.call(e)==rr.call(t)}return!1}(e,t,u,n,r,i,a);if(!(n&d)){var v=h&&rt.call(e,"__wrapped__"),g=p&&rt.call(t,"__wrapped__");if(v||g){var y=v?e.value():e,_=g?t.value():t;return a||(a=new fr),i(y,_,n,r,a)}}return!!m&&(a||(a=new fr),function(e,t,n,r,i,a){var s=n&d,c=go(e),u=c.length;if(u!=go(t).length&&!s)return!1;for(var l=u;l--;){var h=c[l];if(!(s?h in t:rt.call(t,h)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var f=!0;a.set(e,t),a.set(t,e);for(var m=s;++l<u;){var v=e[h=c[l]],g=t[h];if(r)var y=s?r(g,v,h,t,e,a):r(v,g,h,e,t,a);if(!(y===o?v===g||i(v,g,n,r,a):y)){f=!1;break}m||(m="constructor"==h)}if(f&&!m){var _=e.constructor,x=t.constructor;_!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(f=!1)}return a.delete(e),a.delete(t),f}(e,t,n,r,i,a))}(e,t,n,r,Kr,i))}function Zr(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=Ye(e);i--;){var c=n[i];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<a;){var u=(c=n[i])[0],l=e[u],h=c[1];if(s&&c[2]){if(l===o&&!(u in e))return!1}else{var p=new fr;if(r)var m=r(l,h,u,e,t,p);if(!(m===o?Kr(h,l,d|f,r,p):m))return!1}}return!0}function Jr(e){return!(!ps(e)||ot&&ot in e)&&(us(e)?ht:Fe).test(Zo(e))}function $r(e){return"function"==typeof e?e:null==e?mc:"object"==typeof e?ns(e)?ri(e[0],e[1]):ni(e):Mc(e)}function Qr(e){if(!ko(e))return Un(e);var t=[];for(var n in Ye(e))rt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ei(e,t){return e<t}function ti(e,t){var n=-1,i=is(e)?r(e.length):[];return Lr(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function ni(e){var t=Mo(e);return 1==t.length&&t[0][2]?Fo(t[0][0],t[0][1]):function(n){return n===e||Zr(n,e,t)}}function ri(e,t){return No(e)&&Bo(t)?Fo(Ko(e),t):function(n){var r=Bs(n,e);return r===o&&r===t?Fs(n,e):Kr(t,r,d|f)}}function ii(e,t,n,r,i){e!==t&&Dr(t,function(a,s){if(ps(a))i||(i=new fr),function(e,t,n,r,i,a,s){var c=_n(e,n),u=_n(t,n),l=s.get(u);if(l)gr(e,n,l);else{var h=a?a(c,u,n+"",e,t,s):o,p=h===o;if(p){var d=ns(u),f=!d&&as(u),m=!d&&!f&&bs(u);h=u,d||f||m?ns(c)?h=c:os(c)?h=Gi(c):f?(p=!1,h=Ui(u,!0)):m?(p=!1,h=Bi(u,!0)):h=[]:vs(u)||ts(u)?(h=c,ts(c)?h=Ls(c):(!ps(c)||r&&us(c))&&(h=Co(u))):p=!1}p&&(s.set(u,h),i(h,u,r,a,s),s.delete(u)),gr(e,n,h)}}(e,t,s,n,ii,r,i);else{var c=r?r(_n(e,s),a,s+"",e,t,i):o;c===o&&(c=a),gr(e,s,c)}},Vs)}function oi(e,t){var n=e.length;if(n)return Oo(t+=t<0?n:0,n)?e[t]:o}function ai(e,t,n){var r=-1;return t=jt(t.length?t:[mc],sn(wo())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(ti(e,function(e,n,i){return{criteria:jt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var c=Fi(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function si(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=zr(e,a);n(s,a)&&di(o,Oi(a,e),s)}return o}function ci(e,t,n,r){var i=r?$t:Jt,o=-1,a=t.length,s=e;for(e===t&&(t=Gi(t)),n&&(s=jt(e,sn(n)));++o<a;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==e&&Lt.call(s,c,1),Lt.call(e,c,1);return e}function ui(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Oo(i)?Lt.call(e,i,1):Mi(e,i)}}return e}function li(e,t){return e+Pn(Hn()*(t-e+1))}function hi(e,t){var n="";if(!e||t<1||t>R)return n;do{t%2&&(n+=e),(t=Pn(t/2))&&(e+=e)}while(t);return n}function pi(e,t){return Vo(zo(e,t,mc),e+"")}function di(e,t,n,r){if(!ps(e))return e;for(var i=-1,a=(t=Oi(t,e)).length,s=a-1,c=e;null!=c&&++i<a;){var u=Ko(t[i]),l=n;if(i!=s){var h=c[u];(l=r?r(h,u,c):o)===o&&(l=ps(h)?h:Oo(t[i+1])?[]:{})}yr(c,u,l),c=c[u]}return e}var fi=Kn?function(e,t){return Kn.set(e,t),e}:mc,mi=Sn?function(e,t){return Sn(e,"toString",{configurable:!0,enumerable:!1,value:pc(t),writable:!0})}:mc;function vi(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function gi(e,t){var n;return Lr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function yi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=I){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!xs(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return _i(e,t,mc,n)}function _i(e,t,n,r){t=n(t);for(var i=0,a=null==e?0:e.length,s=t!=t,c=null===t,u=xs(t),l=t===o;i<a;){var h=Pn((i+a)/2),p=n(e[h]),d=p!==o,f=null===p,m=p==p,v=xs(p);if(s)var g=r||m;else g=l?m&&(r||d):c?m&&d&&(r||!f):u?m&&d&&!f&&(r||!v):!f&&!v&&(r?p<=t:p<t);g?i=h+1:a=h}return Bn(a,O)}function xi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!$a(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function bi(e){return"number"==typeof e?e:xs(e)?C:+e}function wi(e){if("string"==typeof e)return e;if(ns(e))return jt(e,wi)+"";if(xs(e))return ir?ir.call(e):"";var t=e+"";return"0"==t&&1/e==-A?"-0":t}function Ei(e,t,n){var r=-1,i=Ht,o=e.length,s=!0,c=[],u=c;if(n)s=!1,i=Gt;else if(o>=a){var l=t?null:co(e);if(l)return xn(l);s=!1,i=un,u=new dr}else u=t?[]:c;e:for(;++r<o;){var h=e[r],p=t?t(h):h;if(h=n||0!==h?h:0,s&&p==p){for(var d=u.length;d--;)if(u[d]===p)continue e;t&&u.push(p),c.push(h)}else i(u,p,n)||(u!==c&&u.push(p),c.push(h))}return c}function Mi(e,t){return null==(e=Ho(e,t=Oi(t,e)))||delete e[Ko(ca(t))]}function Ti(e,t,n,r){return di(e,t,n(zr(e,t)),r)}function Si(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?vi(e,r?0:o,r?o+1:i):vi(e,r?o+1:0,r?i:o)}function Ai(e,t){var n=e;return n instanceof ur&&(n=n.value()),Wt(t,function(e,t){return t.func.apply(t.thisArg,Vt([e],t.args))},n)}function Ri(e,t,n){var i=e.length;if(i<2)return i?Ei(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],c=-1;++c<i;)c!=o&&(a[o]=Rr(a[o]||s,e[c],t,n));return Ei(Nr(a,1),t,n)}function Li(e,t,n){for(var r=-1,i=e.length,a=t.length,s={};++r<i;){var c=r<a?t[r]:o;n(s,e[r],c)}return s}function Ci(e){return os(e)?e:[]}function Pi(e){return"function"==typeof e?e:mc}function Oi(e,t){return ns(e)?e:No(e,t)?[e]:Yo(Cs(e))}var Ii=pi;function Ni(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:vi(e,t,n)}var Di=An||function(e){return Mt.clearTimeout(e)};function Ui(e,t){if(t)return e.slice();var n=e.length,r=Et?Et(n):new e.constructor(n);return e.copy(r),r}function ki(e){var t=new e.constructor(e.byteLength);return new wt(t).set(new wt(e)),t}function Bi(e,t){var n=t?ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Fi(e,t){if(e!==t){var n=e!==o,r=null===e,i=e==e,a=xs(e),s=t!==o,c=null===t,u=t==t,l=xs(t);if(!c&&!l&&!a&&e>t||a&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!i)return 1;if(!r&&!a&&!l&&e<t||l&&n&&i&&!r&&!a||c&&n&&i||!s&&i||!u)return-1}return 0}function zi(e,t,n,i){for(var o=-1,a=e.length,s=n.length,c=-1,u=t.length,l=kn(a-s,0),h=r(u+l),p=!i;++c<u;)h[c]=t[c];for(;++o<s;)(p||o<a)&&(h[n[o]]=e[o]);for(;l--;)h[c++]=e[o++];return h}function Hi(e,t,n,i){for(var o=-1,a=e.length,s=-1,c=n.length,u=-1,l=t.length,h=kn(a-c,0),p=r(h+l),d=!i;++o<h;)p[o]=e[o];for(var f=o;++u<l;)p[f+u]=t[u];for(;++s<c;)(d||o<a)&&(p[f+n[s]]=e[o++]);return p}function Gi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function ji(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var c=t[a],u=r?r(n[c],e[c],c,n,e):o;u===o&&(u=e[c]),i?wr(n,c,u):yr(n,c,u)}return n}function Vi(e,t){return function(n,r){var i=ns(n)?kt:xr,o=t?t():{};return i(n,e,wo(r,2),o)}}function Wi(e){return pi(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=e.length>3&&"function"==typeof a?(i--,a):o,s&&Io(n[0],n[1],s)&&(a=i<3?o:a,i=1),t=Ye(t);++r<i;){var c=n[r];c&&e(t,c,r,a)}return t})}function qi(e,t){return function(n,r){if(null==n)return n;if(!is(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Ye(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Xi(e){return function(t,n,r){for(var i=-1,o=Ye(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}function Yi(e){return function(t){var n=mn(t=Cs(t))?wn(t):o,r=n?n[0]:t.charAt(0),i=n?Ni(n,1).join(""):t.slice(1);return r[e]()+i}}function Ki(e){return function(t){return Wt(uc(tc(t).replace(ut,"")),e,"")}}function Zi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ar(e.prototype),r=e.apply(n,t);return ps(r)?r:n}}function Ji(e){return function(t,n,r){var i=Ye(t);if(!is(t)){var a=wo(n,3);t=js(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:o}}function $i(e){return vo(function(t){var n=t.length,r=n,i=cr.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Je(s);if(i&&!c&&"wrapper"==xo(a))var c=new cr([],!0)}for(r=c?r:n;++r<n;){var u=xo(a=t[r]),l="wrapper"==u?_o(a):o;c=l&&Do(l[0])&&l[1]==(w|y|x|E)&&!l[4].length&&1==l[9]?c[xo(l[0])].apply(c,l[3]):1==a.length&&Do(a)?c[u]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&ns(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Qi(e,t,n,i,a,s,c,u,l,h){var p=t&w,d=t&m,f=t&v,g=t&(y|_),x=t&M,b=f?o:Zi(e);return function m(){for(var v=arguments.length,y=r(v),_=v;_--;)y[_]=arguments[_];if(g)var w=bo(m),E=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(y,w);if(i&&(y=zi(y,i,a,g)),s&&(y=Hi(y,s,c,g)),v-=E,g&&v<h){var M=yn(y,w);return ao(e,t,Qi,m.placeholder,n,y,M,u,l,h-v)}var T=d?n:this,S=f?T[e]:e;return v=y.length,u?y=function(e,t){for(var n=e.length,r=Bn(t.length,n),i=Gi(e);r--;){var a=t[r];e[r]=Oo(a,n)?i[a]:o}return e}(y,u):x&&v>1&&y.reverse(),p&&l<v&&(y.length=l),this&&this!==Mt&&this instanceof m&&(S=b||Zi(S)),S.apply(T,y)}}function eo(e,t){return function(n,r){return function(e,t,n,r){return kr(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function to(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=wi(n),r=wi(r)):(n=bi(n),r=bi(r)),i=e(n,r)}return i}}function no(e){return vo(function(t){return t=jt(t,sn(wo())),pi(function(n){var r=this;return e(t,function(e){return Ut(e,r,n)})})})}function ro(e,t){var n=(t=t===o?" ":wi(t)).length;if(n<2)return n?hi(t,e):t;var r=hi(t,Cn(e/bn(t)));return mn(t)?Ni(wn(r),0,e).join(""):r.slice(0,e)}function io(e){return function(t,n,i){return i&&"number"!=typeof i&&Io(t,n,i)&&(n=i=o),t=Ts(t),n===o?(n=t,t=0):n=Ts(n),function(e,t,n,i){for(var o=-1,a=kn(Cn((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,i=i===o?t<n?1:-1:Ts(i),e)}}function oo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Rs(t),n=Rs(n)),e(t,n)}}function ao(e,t,n,r,i,a,s,c,u,l){var h=t&y;t|=h?x:b,(t&=~(h?b:x))&g||(t&=~(m|v));var p=[e,t,i,h?a:o,h?s:o,h?o:a,h?o:s,c,u,l],d=n.apply(o,p);return Do(e)&&Go(d,p),d.placeholder=r,Wo(d,e,t)}function so(e){var t=Xe[e];return function(e,n){if(e=Rs(e),n=null==n?0:Bn(Ss(n),292)){var r=(Cs(e)+"e").split("e");return+((r=(Cs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var co=qn&&1/xn(new qn([,-0]))[1]==A?function(e){return new qn(e)}:xc;function uo(e){return function(t){var n=Ro(t);return n==V?vn(t):n==Z?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return jt(t,function(t){return[t,e[t]]})}(t,e(t))}}function lo(e,t,n,i,a,c,l,h){var p=t&v;if(!p&&"function"!=typeof e)throw new Je(s);var d=i?i.length:0;if(d||(t&=~(x|b),i=a=o),l=l===o?l:kn(Ss(l),0),h=h===o?h:Ss(h),d-=a?a.length:0,t&b){var f=i,M=a;i=a=o}var T=p?o:_o(e),S=[e,t,n,i,a,f,M,c,l,h];if(T&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<(m|v|w),a=r==w&&n==y||r==w&&n==E&&e[7].length<=t[8]||r==(w|E)&&t[7].length<=t[8]&&n==y;if(!o&&!a)return e;r&m&&(e[2]=t[2],i|=n&m?0:g);var s=t[3];if(s){var c=e[3];e[3]=c?zi(c,s,t[4]):s,e[4]=c?yn(e[3],u):t[4]}(s=t[5])&&(c=e[5],e[5]=c?Hi(c,s,t[6]):s,e[6]=c?yn(e[5],u):t[6]),(s=t[7])&&(e[7]=s),r&w&&(e[8]=null==e[8]?t[8]:Bn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(S,T),e=S[0],t=S[1],n=S[2],i=S[3],a=S[4],!(h=S[9]=S[9]===o?p?0:e.length:kn(S[9]-d,0))&&t&(y|_)&&(t&=~(y|_)),t&&t!=m)A=t==y||t==_?function(e,t,n){var i=Zi(e);return function a(){for(var s=arguments.length,c=r(s),u=s,l=bo(a);u--;)c[u]=arguments[u];var h=s<3&&c[0]!==l&&c[s-1]!==l?[]:yn(c,l);return(s-=h.length)<n?ao(e,t,Qi,a.placeholder,o,c,h,o,o,n-s):Ut(this&&this!==Mt&&this instanceof a?i:e,this,c)}}(e,t,h):t!=x&&t!=(m|x)||a.length?Qi.apply(o,S):function(e,t,n,i){var o=t&m,a=Zi(e);return function t(){for(var s=-1,c=arguments.length,u=-1,l=i.length,h=r(l+c),p=this&&this!==Mt&&this instanceof t?a:e;++u<l;)h[u]=i[u];for(;c--;)h[u++]=arguments[++s];return Ut(p,o?n:this,h)}}(e,t,n,i);else var A=function(e,t,n){var r=t&m,i=Zi(e);return function t(){return(this&&this!==Mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Wo((T?fi:Go)(A,S),e,t)}function ho(e,t,n,r){return e===o||$a(e,et[n])&&!rt.call(r,n)?t:e}function po(e,t,n,r,i,a){return ps(e)&&ps(t)&&(a.set(t,e),ii(e,t,o,po,a),a.delete(t)),e}function fo(e){return vs(e)?o:e}function mo(e,t,n,r,i,a){var s=n&d,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var h=-1,p=!0,m=n&f?new dr:o;for(a.set(e,t),a.set(t,e);++h<c;){var v=e[h],g=t[h];if(r)var y=s?r(g,v,h,t,e,a):r(v,g,h,e,t,a);if(y!==o){if(y)continue;p=!1;break}if(m){if(!Xt(t,function(e,t){if(!un(m,t)&&(v===e||i(v,e,n,r,a)))return m.push(t)})){p=!1;break}}else if(v!==g&&!i(v,g,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function vo(e){return Vo(zo(e,o,ra),e+"")}function go(e){return Hr(e,js,So)}function yo(e){return Hr(e,Vs,Ao)}var _o=Kn?function(e){return Kn.get(e)}:xc;function xo(e){for(var t=e.name+"",n=Zn[t],r=rt.call(Zn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function bo(e){return(rt.call(or,"placeholder")?or:e).placeholder}function wo(){var e=or.iteratee||vc;return e=e===vc?$r:e,arguments.length?e(arguments[0],arguments[1]):e}function Eo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Mo(e){for(var t=js(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Bo(i)]}return t}function To(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return Jr(n)?n:o}var So=On?function(e){return null==e?[]:(e=Ye(e),zt(On(e),function(t){return Rt.call(e,t)}))}:Ac,Ao=On?function(e){for(var t=[];e;)Vt(t,So(e)),e=Tt(e);return t}:Ac,Ro=Gr;function Lo(e,t,n){for(var r=-1,i=(t=Oi(t,e)).length,o=!1;++r<i;){var a=Ko(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&hs(i)&&Oo(a,i)&&(ns(e)||ts(e))}function Co(e){return"function"!=typeof e.constructor||ko(e)?{}:ar(Tt(e))}function Po(e){return ns(e)||ts(e)||!!(Yt&&e&&e[Yt])}function Oo(e,t){var n=typeof e;return!!(t=null==t?R:t)&&("number"==n||"symbol"!=n&&He.test(e))&&e>-1&&e%1==0&&e<t}function Io(e,t,n){if(!ps(n))return!1;var r=typeof t;return!!("number"==r?is(n)&&Oo(t,n.length):"string"==r&&t in n)&&$a(n[t],e)}function No(e,t){if(ns(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!xs(e))||Ee.test(e)||!we.test(e)||null!=t&&e in Ye(t)}function Do(e){var t=xo(e),n=or[t];if("function"!=typeof n||!(t in ur.prototype))return!1;if(e===n)return!0;var r=_o(n);return!!r&&e===r[0]}(jn&&Ro(new jn(new ArrayBuffer(1)))!=ne||Vn&&Ro(new Vn)!=V||Wn&&"[object Promise]"!=Ro(Wn.resolve())||qn&&Ro(new qn)!=Z||Xn&&Ro(new Xn)!=ee)&&(Ro=function(e){var t=Gr(e),n=t==X?e.constructor:o,r=n?Zo(n):"";if(r)switch(r){case Jn:return ne;case $n:return V;case Qn:return"[object Promise]";case er:return Z;case tr:return ee}return t});var Uo=tt?us:Rc;function ko(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||et)}function Bo(e){return e==e&&!ps(e)}function Fo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==o||e in Ye(n))}}function zo(e,t,n){return t=kn(t===o?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=kn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=i[o];return c[t]=n(s),Ut(e,this,c)}}function Ho(e,t){return t.length<2?e:zr(e,vi(t,0,-1))}var Go=qo(fi),jo=Ln||function(e,t){return Mt.setTimeout(e,t)},Vo=qo(mi);function Wo(e,t,n){var r=t+"";return Vo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ce,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Bt(N,function(n){var r="_."+n[0];t&n[1]&&!Ht(e,r)&&e.push(r)}),e.sort()}(function(e){var t=r.match(Pe);return t?t[1].split(Oe):[]}(),n)))}function qo(e){var t=0,n=0;return function(){var r=Fn(),i=S-(r-n);if(n=r,i>0){if(++t>=T)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Xo(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var a=li(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Yo=function(e){var t=qa(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Me,function(e,n,r,i){t.push(r?i.replace(Ne,"$1"):n||e)}),t},function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}();function Ko(e){if("string"==typeof e||xs(e))return e;var t=e+"";return"0"==t&&1/e==-A?"-0":t}function Zo(e){if(null!=e){try{return nt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Jo(e){if(e instanceof ur)return e.clone();var t=new cr(e.__wrapped__,e.__chain__);return t.__actions__=Gi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var $o=pi(function(e,t){return os(e)?Rr(e,Nr(t,1,os,!0)):[]}),Qo=pi(function(e,t){var n=ca(t);return os(n)&&(n=o),os(e)?Rr(e,Nr(t,1,os,!0),wo(n,2)):[]}),ea=pi(function(e,t){var n=ca(t);return os(n)&&(n=o),os(e)?Rr(e,Nr(t,1,os,!0),o,n):[]});function ta(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Ss(n);return i<0&&(i=kn(r+i,0)),Zt(e,wo(t,3),i)}function na(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Ss(n),i=n<0?kn(r+i,0):Bn(i,r-1)),Zt(e,wo(t,3),i,!0)}function ra(e){return null!=e&&e.length?Nr(e,1):[]}function ia(e){return e&&e.length?e[0]:o}var oa=pi(function(e){var t=jt(e,Ci);return t.length&&t[0]===e[0]?qr(t):[]}),aa=pi(function(e){var t=ca(e),n=jt(e,Ci);return t===ca(n)?t=o:n.pop(),n.length&&n[0]===e[0]?qr(n,wo(t,2)):[]}),sa=pi(function(e){var t=ca(e),n=jt(e,Ci);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?qr(n,o,t):[]});function ca(e){var t=null==e?0:e.length;return t?e[t-1]:o}var ua=pi(la);function la(e,t){return e&&e.length&&t&&t.length?ci(e,t):e}var ha=vo(function(e,t){var n=null==e?0:e.length,r=Er(e,t);return ui(e,jt(t,function(e){return Oo(e,n)?+e:e}).sort(Fi)),r});function pa(e){return null==e?e:Gn.call(e)}var da=pi(function(e){return Ei(Nr(e,1,os,!0))}),fa=pi(function(e){var t=ca(e);return os(t)&&(t=o),Ei(Nr(e,1,os,!0),wo(t,2))}),ma=pi(function(e){var t=ca(e);return t="function"==typeof t?t:o,Ei(Nr(e,1,os,!0),o,t)});function va(e){if(!e||!e.length)return[];var t=0;return e=zt(e,function(e){if(os(e))return t=kn(e.length,t),!0}),an(t,function(t){return jt(e,tn(t))})}function ga(e,t){if(!e||!e.length)return[];var n=va(e);return null==t?n:jt(n,function(e){return Ut(t,o,e)})}var ya=pi(function(e,t){return os(e)?Rr(e,t):[]}),_a=pi(function(e){return Ri(zt(e,os))}),xa=pi(function(e){var t=ca(e);return os(t)&&(t=o),Ri(zt(e,os),wo(t,2))}),ba=pi(function(e){var t=ca(e);return t="function"==typeof t?t:o,Ri(zt(e,os),o,t)}),wa=pi(va),Ea=pi(function(e){var t=e.length,n=t>1?e[t-1]:o;return ga(e,n="function"==typeof n?(e.pop(),n):o)});function Ma(e){var t=or(e);return t.__chain__=!0,t}function Ta(e,t){return t(e)}var Sa=vo(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Er(t,e)};return!(t>1||this.__actions__.length)&&r instanceof ur&&Oo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Ta,args:[i],thisArg:o}),new cr(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(o),e})):this.thru(i)}),Aa=Vi(function(e,t,n){rt.call(e,n)?++e[n]:wr(e,n,1)}),Ra=Ji(ta),La=Ji(na);function Ca(e,t){return(ns(e)?Bt:Lr)(e,wo(t,3))}function Pa(e,t){return(ns(e)?function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}:Cr)(e,wo(t,3))}var Oa=Vi(function(e,t,n){rt.call(e,n)?e[n].push(t):wr(e,n,[t])}),Ia=pi(function(e,t,n){var i=-1,o="function"==typeof t,a=is(e)?r(e.length):[];return Lr(e,function(e){a[++i]=o?Ut(t,e,n):Xr(e,t,n)}),a}),Na=Vi(function(e,t,n){wr(e,n,t)});function Da(e,t){return(ns(e)?jt:ti)(e,wo(t,3))}var Ua=Vi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ka=pi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Io(e,t[0],t[1])?t=[]:n>2&&Io(t[0],t[1],t[2])&&(t=[t[0]]),ai(e,Nr(t,1),[])}),Ba=Rn||function(){return Mt.Date.now()};function Fa(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,lo(e,w,o,o,o,o,t)}function za(e,t){var n;if("function"!=typeof t)throw new Je(s);return e=Ss(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Ha=pi(function(e,t,n){var r=m;if(n.length){var i=yn(n,bo(Ha));r|=x}return lo(e,r,t,n,i)}),Ga=pi(function(e,t,n){var r=m|v;if(n.length){var i=yn(n,bo(Ga));r|=x}return lo(t,r,e,n,i)});function ja(e,t,n){var r,i,a,c,u,l,h=0,p=!1,d=!1,f=!0;if("function"!=typeof e)throw new Je(s);function m(t){var n=r,a=i;return r=i=o,h=t,c=e.apply(a,n)}function v(e){var n=e-l;return l===o||n>=t||n<0||d&&e-h>=a}function g(){var e=Ba();if(v(e))return y(e);u=jo(g,function(e){var n=t-(e-l);return d?Bn(n,a-(e-h)):n}(e))}function y(e){return u=o,f&&r?m(e):(r=i=o,c)}function _(){var e=Ba(),n=v(e);if(r=arguments,i=this,l=e,n){if(u===o)return function(e){return h=e,u=jo(g,t),p?m(e):c}(l);if(d)return u=jo(g,t),m(l)}return u===o&&(u=jo(g,t)),c}return t=Rs(t)||0,ps(n)&&(p=!!n.leading,a=(d="maxWait"in n)?kn(Rs(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),_.cancel=function(){u!==o&&Di(u),h=0,r=l=i=u=o},_.flush=function(){return u===o?c:y(Ba())},_}var Va=pi(function(e,t){return Ar(e,1,t)}),Wa=pi(function(e,t,n){return Ar(e,Rs(t)||0,n)});function qa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Je(s);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(qa.Cache||pr),n}function Xa(e){if("function"!=typeof e)throw new Je(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}qa.Cache=pr;var Ya=Ii(function(e,t){var n=(t=1==t.length&&ns(t[0])?jt(t[0],sn(wo())):jt(Nr(t,1),sn(wo()))).length;return pi(function(r){for(var i=-1,o=Bn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Ut(e,this,r)})}),Ka=pi(function(e,t){var n=yn(t,bo(Ka));return lo(e,x,o,t,n)}),Za=pi(function(e,t){var n=yn(t,bo(Za));return lo(e,b,o,t,n)}),Ja=vo(function(e,t){return lo(e,E,o,o,o,t)});function $a(e,t){return e===t||e!=e&&t!=t}var Qa=oo(jr),es=oo(function(e,t){return e>=t}),ts=Yr(function(){return arguments}())?Yr:function(e){return ds(e)&&rt.call(e,"callee")&&!Rt.call(e,"callee")},ns=r.isArray,rs=Ct?sn(Ct):function(e){return ds(e)&&Gr(e)==te};function is(e){return null!=e&&hs(e.length)&&!us(e)}function os(e){return ds(e)&&is(e)}var as=In||Rc,ss=Pt?sn(Pt):function(e){return ds(e)&&Gr(e)==F};function cs(e){if(!ds(e))return!1;var t=Gr(e);return t==H||t==z||"string"==typeof e.message&&"string"==typeof e.name&&!vs(e)}function us(e){if(!ps(e))return!1;var t=Gr(e);return t==G||t==j||t==k||t==Y}function ls(e){return"number"==typeof e&&e==Ss(e)}function hs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=R}function ps(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ds(e){return null!=e&&"object"==typeof e}var fs=Ot?sn(Ot):function(e){return ds(e)&&Ro(e)==V};function ms(e){return"number"==typeof e||ds(e)&&Gr(e)==W}function vs(e){if(!ds(e)||Gr(e)!=X)return!1;var t=Tt(e);if(null===t)return!0;var n=rt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&nt.call(n)==st}var gs=It?sn(It):function(e){return ds(e)&&Gr(e)==K},ys=Nt?sn(Nt):function(e){return ds(e)&&Ro(e)==Z};function _s(e){return"string"==typeof e||!ns(e)&&ds(e)&&Gr(e)==J}function xs(e){return"symbol"==typeof e||ds(e)&&Gr(e)==$}var bs=Dt?sn(Dt):function(e){return ds(e)&&hs(e.length)&&!!gt[Gr(e)]},ws=oo(ei),Es=oo(function(e,t){return e<=t});function Ms(e){if(!e)return[];if(is(e))return _s(e)?wn(e):Gi(e);if(nn&&e[nn])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[nn]());var t=Ro(e);return(t==V?vn:t==Z?xn:$s)(e)}function Ts(e){return e?(e=Rs(e))===A||e===-A?(e<0?-1:1)*L:e==e?e:0:0===e?e:0}function Ss(e){var t=Ts(e),n=t%1;return t==t?n?t-n:t:0}function As(e){return e?Mr(Ss(e),0,P):0}function Rs(e){if("number"==typeof e)return e;if(xs(e))return C;if(ps(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ps(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ae,"");var n=Be.test(e);return n||ze.test(e)?bt(e.slice(2),n?2:8):ke.test(e)?C:+e}function Ls(e){return ji(e,Vs(e))}function Cs(e){return null==e?"":wi(e)}var Ps=Wi(function(e,t){if(ko(t)||is(t))ji(t,js(t),e);else for(var n in t)rt.call(t,n)&&yr(e,n,t[n])}),Os=Wi(function(e,t){ji(t,Vs(t),e)}),Is=Wi(function(e,t,n,r){ji(t,Vs(t),e,r)}),Ns=Wi(function(e,t,n,r){ji(t,js(t),e,r)}),Ds=vo(Er),Us=pi(function(e,t){e=Ye(e);var n=-1,r=t.length,i=r>2?t[2]:o;for(i&&Io(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],s=Vs(a),c=-1,u=s.length;++c<u;){var l=s[c],h=e[l];(h===o||$a(h,et[l])&&!rt.call(e,l))&&(e[l]=a[l])}return e}),ks=pi(function(e){return e.push(o,po),Ut(qs,o,e)});function Bs(e,t,n){var r=null==e?o:zr(e,t);return r===o?n:r}function Fs(e,t){return null!=e&&Lo(e,t,Wr)}var zs=eo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=at.call(t)),e[t]=n},pc(mc)),Hs=eo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=at.call(t)),rt.call(e,t)?e[t].push(n):e[t]=[n]},wo),Gs=pi(Xr);function js(e){return is(e)?mr(e):Qr(e)}function Vs(e){return is(e)?mr(e,!0):function(e){if(!ps(e))return function(e){var t=[];if(null!=e)for(var n in Ye(e))t.push(n);return t}(e);var t=ko(e),n=[];for(var r in e)("constructor"!=r||!t&&rt.call(e,r))&&n.push(r);return n}(e)}var Ws=Wi(function(e,t,n){ii(e,t,n)}),qs=Wi(function(e,t,n,r){ii(e,t,n,r)}),Xs=vo(function(e,t){var n={};if(null==e)return n;var r=!1;t=jt(t,function(t){return t=Oi(t,e),r||(r=t.length>1),t}),ji(e,yo(e),n),r&&(n=Tr(n,l|h|p,fo));for(var i=t.length;i--;)Mi(n,t[i]);return n}),Ys=vo(function(e,t){return null==e?{}:function(e,t){return si(e,t,function(t,n){return Fs(e,n)})}(e,t)});function Ks(e,t){if(null==e)return{};var n=jt(yo(e),function(e){return[e]});return t=wo(t),si(e,n,function(e,n){return t(e,n[0])})}var Zs=uo(js),Js=uo(Vs);function $s(e){return null==e?[]:cn(e,js(e))}var Qs=Ki(function(e,t,n){return t=t.toLowerCase(),e+(n?ec(t):t)});function ec(e){return cc(Cs(e).toLowerCase())}function tc(e){return(e=Cs(e))&&e.replace(Ge,pn).replace(lt,"")}var nc=Ki(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),rc=Ki(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),ic=Yi("toLowerCase"),oc=Ki(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),ac=Ki(function(e,t,n){return e+(n?" ":"")+cc(t)}),sc=Ki(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),cc=Yi("toUpperCase");function uc(e,t,n){return e=Cs(e),(t=n?o:t)===o?function(e){return ft.test(e)}(e)?function(e){return e.match(pt)||[]}(e):function(e){return e.match(Ie)||[]}(e):e.match(t)||[]}var lc=pi(function(e,t){try{return Ut(e,o,t)}catch(e){return cs(e)?e:new We(e)}}),hc=vo(function(e,t){return Bt(t,function(t){t=Ko(t),wr(e,t,Ha(e[t],e))}),e});function pc(e){return function(){return e}}var dc=$i(),fc=$i(!0);function mc(e){return e}function vc(e){return $r("function"==typeof e?e:Tr(e,l))}var gc=pi(function(e,t){return function(n){return Xr(n,e,t)}}),yc=pi(function(e,t){return function(n){return Xr(e,n,t)}});function _c(e,t,n){var r=js(t),i=Fr(t,r);null!=n||ps(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Fr(t,js(t)));var o=!(ps(n)&&"chain"in n&&!n.chain),a=us(e);return Bt(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Gi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Vt([this.value()],arguments))})}),e}function xc(){}var bc=no(jt),wc=no(Ft),Ec=no(Xt);function Mc(e){return No(e)?tn(Ko(e)):function(e){return function(t){return zr(t,e)}}(e)}var Tc=io(),Sc=io(!0);function Ac(){return[]}function Rc(){return!1}var Lc,Cc=to(function(e,t){return e+t},0),Pc=so("ceil"),Oc=to(function(e,t){return e/t},1),Ic=so("floor"),Nc=to(function(e,t){return e*t},1),Dc=so("round"),Uc=to(function(e,t){return e-t},0);return or.after=function(e,t){if("function"!=typeof t)throw new Je(s);return e=Ss(e),function(){if(--e<1)return t.apply(this,arguments)}},or.ary=Fa,or.assign=Ps,or.assignIn=Os,or.assignInWith=Is,or.assignWith=Ns,or.at=Ds,or.before=za,or.bind=Ha,or.bindAll=hc,or.bindKey=Ga,or.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return ns(e)?e:[e]},or.chain=Ma,or.chunk=function(e,t,n){t=(n?Io(e,t,n):t===o)?1:kn(Ss(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,s=0,c=r(Cn(i/t));a<i;)c[s++]=vi(e,a,a+=t);return c},or.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},or.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Vt(ns(n)?Gi(n):[n],Nr(t,1))},or.cond=function(e){var t=null==e?0:e.length,n=wo();return e=t?jt(e,function(e){if("function"!=typeof e[1])throw new Je(s);return[n(e[0]),e[1]]}):[],pi(function(n){for(var r=-1;++r<t;){var i=e[r];if(Ut(i[0],this,n))return Ut(i[1],this,n)}})},or.conforms=function(e){return function(e){var t=js(e);return function(n){return Sr(n,e,t)}}(Tr(e,l))},or.constant=pc,or.countBy=Aa,or.create=function(e,t){var n=ar(e);return null==t?n:br(n,t)},or.curry=function e(t,n,r){var i=lo(t,y,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},or.curryRight=function e(t,n,r){var i=lo(t,_,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},or.debounce=ja,or.defaults=Us,or.defaultsDeep=ks,or.defer=Va,or.delay=Wa,or.difference=$o,or.differenceBy=Qo,or.differenceWith=ea,or.drop=function(e,t,n){var r=null==e?0:e.length;return r?vi(e,(t=n||t===o?1:Ss(t))<0?0:t,r):[]},or.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?vi(e,0,(t=r-(t=n||t===o?1:Ss(t)))<0?0:t):[]},or.dropRightWhile=function(e,t){return e&&e.length?Si(e,wo(t,3),!0,!0):[]},or.dropWhile=function(e,t){return e&&e.length?Si(e,wo(t,3),!0):[]},or.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Io(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=Ss(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:Ss(r))<0&&(r+=i),r=n>r?0:As(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},or.filter=function(e,t){return(ns(e)?zt:Ir)(e,wo(t,3))},or.flatMap=function(e,t){return Nr(Da(e,t),1)},or.flatMapDeep=function(e,t){return Nr(Da(e,t),A)},or.flatMapDepth=function(e,t,n){return n=n===o?1:Ss(n),Nr(Da(e,t),n)},or.flatten=ra,or.flattenDeep=function(e){return null!=e&&e.length?Nr(e,A):[]},or.flattenDepth=function(e,t){return null!=e&&e.length?Nr(e,t=t===o?1:Ss(t)):[]},or.flip=function(e){return lo(e,M)},or.flow=dc,or.flowRight=fc,or.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},or.functions=function(e){return null==e?[]:Fr(e,js(e))},or.functionsIn=function(e){return null==e?[]:Fr(e,Vs(e))},or.groupBy=Oa,or.initial=function(e){return null!=e&&e.length?vi(e,0,-1):[]},or.intersection=oa,or.intersectionBy=aa,or.intersectionWith=sa,or.invert=zs,or.invertBy=Hs,or.invokeMap=Ia,or.iteratee=vc,or.keyBy=Na,or.keys=js,or.keysIn=Vs,or.map=Da,or.mapKeys=function(e,t){var n={};return t=wo(t,3),kr(e,function(e,r,i){wr(n,t(e,r,i),e)}),n},or.mapValues=function(e,t){var n={};return t=wo(t,3),kr(e,function(e,r,i){wr(n,r,t(e,r,i))}),n},or.matches=function(e){return ni(Tr(e,l))},or.matchesProperty=function(e,t){return ri(e,Tr(t,l))},or.memoize=qa,or.merge=Ws,or.mergeWith=qs,or.method=gc,or.methodOf=yc,or.mixin=_c,or.negate=Xa,or.nthArg=function(e){return e=Ss(e),pi(function(t){return oi(t,e)})},or.omit=Xs,or.omitBy=function(e,t){return Ks(e,Xa(wo(t)))},or.once=function(e){return za(2,e)},or.orderBy=function(e,t,n,r){return null==e?[]:(ns(t)||(t=null==t?[]:[t]),ns(n=r?o:n)||(n=null==n?[]:[n]),ai(e,t,n))},or.over=bc,or.overArgs=Ya,or.overEvery=wc,or.overSome=Ec,or.partial=Ka,or.partialRight=Za,or.partition=Ua,or.pick=Ys,or.pickBy=Ks,or.property=Mc,or.propertyOf=function(e){return function(t){return null==e?o:zr(e,t)}},or.pull=ua,or.pullAll=la,or.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?ci(e,t,wo(n,2)):e},or.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?ci(e,t,o,n):e},or.pullAt=ha,or.range=Tc,or.rangeRight=Sc,or.rearg=Ja,or.reject=function(e,t){return(ns(e)?zt:Ir)(e,Xa(wo(t,3)))},or.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=wo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return ui(e,i),n},or.rest=function(e,t){if("function"!=typeof e)throw new Je(s);return pi(e,t=t===o?t:Ss(t))},or.reverse=pa,or.sampleSize=function(e,t,n){return t=(n?Io(e,t,n):t===o)?1:Ss(t),(ns(e)?function(e,t){return Xo(Gi(e),Mr(t,0,e.length))}:function(e,t){var n=$s(e);return Xo(n,Mr(t,0,n.length))})(e,t)},or.set=function(e,t,n){return null==e?e:di(e,t,n)},or.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:di(e,t,n,r)},or.shuffle=function(e){return(ns(e)?function(e){return Xo(Gi(e))}:function(e){return Xo($s(e))})(e)},or.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Io(e,t,n)?(t=0,n=r):(t=null==t?0:Ss(t),n=n===o?r:Ss(n)),vi(e,t,n)):[]},or.sortBy=ka,or.sortedUniq=function(e){return e&&e.length?xi(e):[]},or.sortedUniqBy=function(e,t){return e&&e.length?xi(e,wo(t,2)):[]},or.split=function(e,t,n){return n&&"number"!=typeof n&&Io(e,t,n)&&(t=n=o),(n=n===o?P:n>>>0)?(e=Cs(e))&&("string"==typeof t||null!=t&&!gs(t))&&!(t=wi(t))&&mn(e)?Ni(wn(e),0,n):e.split(t,n):[]},or.spread=function(e,t){if("function"!=typeof e)throw new Je(s);return t=null==t?0:kn(Ss(t),0),pi(function(n){var r=n[t],i=Ni(n,0,t);return r&&Vt(i,r),Ut(e,this,i)})},or.tail=function(e){var t=null==e?0:e.length;return t?vi(e,1,t):[]},or.take=function(e,t,n){return e&&e.length?vi(e,0,(t=n||t===o?1:Ss(t))<0?0:t):[]},or.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?vi(e,(t=r-(t=n||t===o?1:Ss(t)))<0?0:t,r):[]},or.takeRightWhile=function(e,t){return e&&e.length?Si(e,wo(t,3),!1,!0):[]},or.takeWhile=function(e,t){return e&&e.length?Si(e,wo(t,3)):[]},or.tap=function(e,t){return t(e),e},or.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Je(s);return ps(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ja(e,t,{leading:r,maxWait:t,trailing:i})},or.thru=Ta,or.toArray=Ms,or.toPairs=Zs,or.toPairsIn=Js,or.toPath=function(e){return ns(e)?jt(e,Ko):xs(e)?[e]:Gi(Yo(Cs(e)))},or.toPlainObject=Ls,or.transform=function(e,t,n){var r=ns(e),i=r||as(e)||bs(e);if(t=wo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ps(e)&&us(o)?ar(Tt(e)):{}}return(i?Bt:kr)(e,function(e,r,i){return t(n,e,r,i)}),n},or.unary=function(e){return Fa(e,1)},or.union=da,or.unionBy=fa,or.unionWith=ma,or.uniq=function(e){return e&&e.length?Ei(e):[]},or.uniqBy=function(e,t){return e&&e.length?Ei(e,wo(t,2)):[]},or.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?Ei(e,o,t):[]},or.unset=function(e,t){return null==e||Mi(e,t)},or.unzip=va,or.unzipWith=ga,or.update=function(e,t,n){return null==e?e:Ti(e,t,Pi(n))},or.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:Ti(e,t,Pi(n),r)},or.values=$s,or.valuesIn=function(e){return null==e?[]:cn(e,Vs(e))},or.without=ya,or.words=uc,or.wrap=function(e,t){return Ka(Pi(t),e)},or.xor=_a,or.xorBy=xa,or.xorWith=ba,or.zip=wa,or.zipObject=function(e,t){return Li(e||[],t||[],yr)},or.zipObjectDeep=function(e,t){return Li(e||[],t||[],di)},or.zipWith=Ea,or.entries=Zs,or.entriesIn=Js,or.extend=Os,or.extendWith=Is,_c(or,or),or.add=Cc,or.attempt=lc,or.camelCase=Qs,or.capitalize=ec,or.ceil=Pc,or.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=Rs(n))==n?n:0),t!==o&&(t=(t=Rs(t))==t?t:0),Mr(Rs(e),t,n)},or.clone=function(e){return Tr(e,p)},or.cloneDeep=function(e){return Tr(e,l|p)},or.cloneDeepWith=function(e,t){return Tr(e,l|p,t="function"==typeof t?t:o)},or.cloneWith=function(e,t){return Tr(e,p,t="function"==typeof t?t:o)},or.conformsTo=function(e,t){return null==t||Sr(e,t,js(t))},or.deburr=tc,or.defaultTo=function(e,t){return null==e||e!=e?t:e},or.divide=Oc,or.endsWith=function(e,t,n){e=Cs(e),t=wi(t);var r=e.length,i=n=n===o?r:Mr(Ss(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},or.eq=$a,or.escape=function(e){return(e=Cs(e))&&ye.test(e)?e.replace(ve,dn):e},or.escapeRegExp=function(e){return(e=Cs(e))&&Se.test(e)?e.replace(Te,"\\$&"):e},or.every=function(e,t,n){var r=ns(e)?Ft:Pr;return n&&Io(e,t,n)&&(t=o),r(e,wo(t,3))},or.find=Ra,or.findIndex=ta,or.findKey=function(e,t){return Kt(e,wo(t,3),kr)},or.findLast=La,or.findLastIndex=na,or.findLastKey=function(e,t){return Kt(e,wo(t,3),Br)},or.floor=Ic,or.forEach=Ca,or.forEachRight=Pa,or.forIn=function(e,t){return null==e?e:Dr(e,wo(t,3),Vs)},or.forInRight=function(e,t){return null==e?e:Ur(e,wo(t,3),Vs)},or.forOwn=function(e,t){return e&&kr(e,wo(t,3))},or.forOwnRight=function(e,t){return e&&Br(e,wo(t,3))},or.get=Bs,or.gt=Qa,or.gte=es,or.has=function(e,t){return null!=e&&Lo(e,t,Vr)},or.hasIn=Fs,or.head=ia,or.identity=mc,or.includes=function(e,t,n,r){e=is(e)?e:$s(e),n=n&&!r?Ss(n):0;var i=e.length;return n<0&&(n=kn(i+n,0)),_s(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Jt(e,t,n)>-1},or.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Ss(n);return i<0&&(i=kn(r+i,0)),Jt(e,t,i)},or.inRange=function(e,t,n){return t=Ts(t),n===o?(n=t,t=0):n=Ts(n),function(e,t,n){return e>=Bn(t,n)&&e<kn(t,n)}(e=Rs(e),t,n)},or.invoke=Gs,or.isArguments=ts,or.isArray=ns,or.isArrayBuffer=rs,or.isArrayLike=is,or.isArrayLikeObject=os,or.isBoolean=function(e){return!0===e||!1===e||ds(e)&&Gr(e)==B},or.isBuffer=as,or.isDate=ss,or.isElement=function(e){return ds(e)&&1===e.nodeType&&!vs(e)},or.isEmpty=function(e){if(null==e)return!0;if(is(e)&&(ns(e)||"string"==typeof e||"function"==typeof e.splice||as(e)||bs(e)||ts(e)))return!e.length;var t=Ro(e);if(t==V||t==Z)return!e.size;if(ko(e))return!Qr(e).length;for(var n in e)if(rt.call(e,n))return!1;return!0},or.isEqual=function(e,t){return Kr(e,t)},or.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?Kr(e,t,o,n):!!r},or.isError=cs,or.isFinite=function(e){return"number"==typeof e&&Nn(e)},or.isFunction=us,or.isInteger=ls,or.isLength=hs,or.isMap=fs,or.isMatch=function(e,t){return e===t||Zr(e,t,Mo(t))},or.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,Zr(e,t,Mo(t),n)},or.isNaN=function(e){return ms(e)&&e!=+e},or.isNative=function(e){if(Uo(e))throw new We("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Jr(e)},or.isNil=function(e){return null==e},or.isNull=function(e){return null===e},or.isNumber=ms,or.isObject=ps,or.isObjectLike=ds,or.isPlainObject=vs,or.isRegExp=gs,or.isSafeInteger=function(e){return ls(e)&&e>=-R&&e<=R},or.isSet=ys,or.isString=_s,or.isSymbol=xs,or.isTypedArray=bs,or.isUndefined=function(e){return e===o},or.isWeakMap=function(e){return ds(e)&&Ro(e)==ee},or.isWeakSet=function(e){return ds(e)&&"[object WeakSet]"==Gr(e)},or.join=function(e,t){return null==e?"":Dn.call(e,t)},or.kebabCase=nc,or.last=ca,or.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=Ss(n))<0?kn(r+i,0):Bn(i,r-1)),t==t?function(e,t,n){for(var r=i+1;r--;)if(e[r]===t)return r;return r}(e,t):Zt(e,Qt,i,!0)},or.lowerCase=rc,or.lowerFirst=ic,or.lt=ws,or.lte=Es,or.max=function(e){return e&&e.length?Or(e,mc,jr):o},or.maxBy=function(e,t){return e&&e.length?Or(e,wo(t,2),jr):o},or.mean=function(e){return en(e,mc)},or.meanBy=function(e,t){return en(e,wo(t,2))},or.min=function(e){return e&&e.length?Or(e,mc,ei):o},or.minBy=function(e,t){return e&&e.length?Or(e,wo(t,2),ei):o},or.stubArray=Ac,or.stubFalse=Rc,or.stubObject=function(){return{}},or.stubString=function(){return""},or.stubTrue=function(){return!0},or.multiply=Nc,or.nth=function(e,t){return e&&e.length?oi(e,Ss(t)):o},or.noConflict=function(){return Mt._===this&&(Mt._=ct),this},or.noop=xc,or.now=Ba,or.pad=function(e,t,n){e=Cs(e);var r=(t=Ss(t))?bn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ro(Pn(i),n)+e+ro(Cn(i),n)},or.padEnd=function(e,t,n){e=Cs(e);var r=(t=Ss(t))?bn(e):0;return t&&r<t?e+ro(t-r,n):e},or.padStart=function(e,t,n){e=Cs(e);var r=(t=Ss(t))?bn(e):0;return t&&r<t?ro(t-r,n)+e:e},or.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),zn(Cs(e).replace(Re,""),t||0)},or.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Io(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=Ts(e),t===o?(t=e,e=0):t=Ts(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Hn();return Bn(e+i*(t-e+xt("1e-"+((i+"").length-1))),t)}return li(e,t)},or.reduce=function(e,t,n){var r=ns(e)?Wt:rn,i=arguments.length<3;return r(e,wo(t,4),n,i,Lr)},or.reduceRight=function(e,t,n){var r=ns(e)?qt:rn,i=arguments.length<3;return r(e,wo(t,4),n,i,Cr)},or.repeat=function(e,t,n){return t=(n?Io(e,t,n):t===o)?1:Ss(t),hi(Cs(e),t)},or.replace=function(){var e=arguments,t=Cs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},or.result=function(e,t,n){var r=-1,i=(t=Oi(t,e)).length;for(i||(i=1,e=o);++r<i;){var a=null==e?o:e[Ko(t[r])];a===o&&(r=i,a=n),e=us(a)?a.call(e):a}return e},or.round=Dc,or.runInContext=e,or.sample=function(e){return(ns(e)?vr:function(e){return vr($s(e))})(e)},or.size=function(e){if(null==e)return 0;if(is(e))return _s(e)?bn(e):e.length;var t=Ro(e);return t==V||t==Z?e.size:Qr(e).length},or.snakeCase=oc,or.some=function(e,t,n){var r=ns(e)?Xt:gi;return n&&Io(e,t,n)&&(t=o),r(e,wo(t,3))},or.sortedIndex=function(e,t){return yi(e,t)},or.sortedIndexBy=function(e,t,n){return _i(e,t,wo(n,2))},or.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=yi(e,t);if(r<n&&$a(e[r],t))return r}return-1},or.sortedLastIndex=function(e,t){return yi(e,t,!0)},or.sortedLastIndexBy=function(e,t,n){return _i(e,t,wo(n,2),!0)},or.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=yi(e,t,!0)-1;if($a(e[n],t))return n}return-1},or.startCase=ac,or.startsWith=function(e,t,n){return e=Cs(e),n=null==n?0:Mr(Ss(n),0,e.length),t=wi(t),e.slice(n,n+t.length)==t},or.subtract=Uc,or.sum=function(e){return e&&e.length?on(e,mc):0},or.sumBy=function(e,t){return e&&e.length?on(e,wo(t,2)):0},or.template=function(e,t,n){var r=or.templateSettings;n&&Io(e,t,n)&&(t=o),e=Cs(e),t=Is({},t,r,ho);var i,a,s=Is({},t.imports,r.imports,ho),c=js(s),u=cn(s,c),l=0,h=t.interpolate||je,p="__p += '",d=Ke((t.escape||je).source+"|"+h.source+"|"+(h===be?De:je).source+"|"+(t.evaluate||je).source+"|$","g"),f="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++vt+"]")+"\n";e.replace(d,function(t,n,r,o,s,c){return r||(r=o),p+=e.slice(l,c).replace(Ve,fn),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),p+="';\n";var m=t.variable;m||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(pe,""):p).replace(de,"$1").replace(fe,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=lc(function(){return qe(c,f+"return "+p).apply(o,u)});if(v.source=p,cs(v))throw v;return v},or.times=function(e,t){if((e=Ss(e))<1||e>R)return[];var n=P,r=Bn(e,P);t=wo(t),e-=P;for(var i=an(r,t);++n<e;)t(n);return i},or.toFinite=Ts,or.toInteger=Ss,or.toLength=As,or.toLower=function(e){return Cs(e).toLowerCase()},or.toNumber=Rs,or.toSafeInteger=function(e){return e?Mr(Ss(e),-R,R):0===e?e:0},or.toString=Cs,or.toUpper=function(e){return Cs(e).toUpperCase()},or.trim=function(e,t,n){if((e=Cs(e))&&(n||t===o))return e.replace(Ae,"");if(!e||!(t=wi(t)))return e;var r=wn(e),i=wn(t);return Ni(r,ln(r,i),hn(r,i)+1).join("")},or.trimEnd=function(e,t,n){if((e=Cs(e))&&(n||t===o))return e.replace(Le,"");if(!e||!(t=wi(t)))return e;var r=wn(e);return Ni(r,0,hn(r,wn(t))+1).join("")},or.trimStart=function(e,t,n){if((e=Cs(e))&&(n||t===o))return e.replace(Re,"");if(!e||!(t=wi(t)))return e;var r=wn(e);return Ni(r,ln(r,wn(t))).join("")},or.truncate=function(e,t){var n=30,r="...";if(ps(t)){var i="separator"in t?t.separator:i;n="length"in t?Ss(t.length):n,r="omission"in t?wi(t.omission):r}var a=(e=Cs(e)).length;if(mn(e)){var s=wn(e);a=s.length}if(n>=a)return e;var c=n-bn(r);if(c<1)return r;var u=s?Ni(s,0,c).join(""):e.slice(0,c);if(i===o)return u+r;if(s&&(c+=u.length-c),gs(i)){if(e.slice(c).search(i)){var l,h=u;for(i.global||(i=Ke(i.source,Cs(Ue.exec(i))+"g")),i.lastIndex=0;l=i.exec(h);)var p=l.index;u=u.slice(0,p===o?c:p)}}else if(e.indexOf(wi(i),c)!=c){var d=u.lastIndexOf(i);d>-1&&(u=u.slice(0,d))}return u+r},or.unescape=function(e){return(e=Cs(e))&&ge.test(e)?e.replace(me,En):e},or.uniqueId=function(e){var t=++it;return Cs(e)+t},or.upperCase=sc,or.upperFirst=cc,or.each=Ca,or.eachRight=Pa,or.first=ia,_c(or,(Lc={},kr(or,function(e,t){rt.call(or.prototype,t)||(Lc[t]=e)}),Lc),{chain:!1}),or.VERSION="4.17.10",Bt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){or[e].placeholder=or}),Bt(["drop","take"],function(e,t){ur.prototype[e]=function(n){n=n===o?1:kn(Ss(n),0);var r=this.__filtered__&&!t?new ur(this):this.clone();return r.__filtered__?r.__takeCount__=Bn(n,r.__takeCount__):r.__views__.push({size:Bn(n,P),type:e+(r.__dir__<0?"Right":"")}),r},ur.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Bt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;ur.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:wo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Bt(["head","last"],function(e,t){var n="take"+(t?"Right":"");ur.prototype[e]=function(){return this[n](1).value()[0]}}),Bt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");ur.prototype[e]=function(){return this.__filtered__?new ur(this):this[n](1)}}),ur.prototype.compact=function(){return this.filter(mc)},ur.prototype.find=function(e){return this.filter(e).head()},ur.prototype.findLast=function(e){return this.reverse().find(e)},ur.prototype.invokeMap=pi(function(e,t){return"function"==typeof e?new ur(this):this.map(function(n){return Xr(n,e,t)})}),ur.prototype.reject=function(e){return this.filter(Xa(wo(e)))},ur.prototype.slice=function(e,t){e=Ss(e);var n=this;return n.__filtered__&&(e>0||t<0)?new ur(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=Ss(t))<0?n.dropRight(-t):n.take(t-e)),n)},ur.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ur.prototype.toArray=function(){return this.take(P)},kr(ur.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=or[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(or.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,c=t instanceof ur,u=s[0],l=c||ns(t),h=function(e){var t=i.apply(or,Vt([e],s));return r&&p?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var p=this.__chain__,d=!!this.__actions__.length,f=a&&!p,m=c&&!d;if(!a&&l){t=m?t:new ur(this);var v=e.apply(t,s);return v.__actions__.push({func:Ta,args:[h],thisArg:o}),new cr(v,p)}return f&&m?e.apply(this,s):(v=this.thru(h),f?r?v.value()[0]:v.value():v)})}),Bt(["pop","push","shift","sort","splice","unshift"],function(e){var t=$e[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);or.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(ns(i)?i:[],e)}return this[n](function(n){return t.apply(ns(n)?n:[],e)})}}),kr(ur.prototype,function(e,t){var n=or[t];if(n){var r=n.name+"";(Zn[r]||(Zn[r]=[])).push({name:t,func:n})}}),Zn[Qi(o,v).name]=[{name:"wrapper",func:o}],ur.prototype.clone=function(){var e=new ur(this.__wrapped__);return e.__actions__=Gi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Gi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Gi(this.__views__),e},ur.prototype.reverse=function(){if(this.__filtered__){var e=new ur(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},ur.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=ns(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Bn(t,e+a);break;case"takeRight":e=kn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,h=l.length,p=0,d=Bn(c,this.__takeCount__);if(!n||!r&&i==c&&d==c)return Ai(e,this.__actions__);var f=[];e:for(;c--&&p<d;){for(var m=-1,v=e[u+=t];++m<h;){var g=l[m],y=g.iteratee,_=g.type,x=y(v);if(2==_)v=x;else if(!x){if(1==_)continue e;break e}}f[p++]=v}return f},or.prototype.at=Sa,or.prototype.chain=function(){return Ma(this)},or.prototype.commit=function(){return new cr(this.value(),this.__chain__)},or.prototype.next=function(){this.__values__===o&&(this.__values__=Ms(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},or.prototype.plant=function(e){for(var t,n=this;n instanceof sr;){var r=Jo(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},or.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof ur){var t=e;return this.__actions__.length&&(t=new ur(this)),(t=t.reverse()).__actions__.push({func:Ta,args:[pa],thisArg:o}),new cr(t,this.__chain__)}return this.thru(pa)},or.prototype.toJSON=or.prototype.valueOf=or.prototype.value=function(){return Ai(this.__wrapped__,this.__actions__)},or.prototype.first=or.prototype.head,nn&&(or.prototype[nn]=function(){return this}),or}();Mt._=Mn,(i=function(){return Mn}.call(t,n,t,r))===o||(r.exports=i)}).call(this)}).call(this,n(18),n(1)(e))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_helpers=__webpack_require__(5),enterModule;function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Point=function(){function Point(e){_classCallCheck(this,Point),this.position=e||new THREE.Vector3}return _createClass(Point,[{key:"createHelper",value:function(){return this.helper||(this.helper=new THREE.Mesh(new THREE.CylinderGeometry(.05,.05,1e-4,5),new THREE.MeshBasicMaterial({wireframe:!0,color:(0,_helpers.randomColor)()})),this.helper.position.copy(this.position)),this.helper}},{key:"updateHelper",value:function(){this.helper&&this.helper.position.copy(this.position)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Point}(),reactHotLoader,leaveModule;exports.default=Point,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Point,"Point","/Users/andre/Projects/shooter/src/Intersect/Point.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],l=0;(c=new Error(t.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_lodash=__webpack_require__(10),_Tileset=__webpack_require__(38),_Tileset2=_interopRequireDefault(_Tileset),_Entities=__webpack_require__(37),_Entities2=_interopRequireDefault(_Entities),_Lights=__webpack_require__(29),_Lights2=_interopRequireDefault(_Lights),_Collision=__webpack_require__(28),_Collision2=_interopRequireDefault(_Collision),_Ceiling=__webpack_require__(27),_Ceiling2=_interopRequireDefault(_Ceiling),_Floor=__webpack_require__(26),_Floor2=_interopRequireDefault(_Floor),_Wall=__webpack_require__(25),_Wall2=_interopRequireDefault(_Wall),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Map=function(_THREE$Group){function Map(e,t){_classCallCheck(this,Map);var n=_possibleConstructorReturn(this,(Map.__proto__||Object.getPrototypeOf(Map)).call(this));return n.game=e,n.definition=n.preprocess(t),n.tileset=new _Tileset2.default(e,t.tilesets),n.queue=[],(0,_lodash.sortBy)(n.definition.layers,function(e){var t=["collision","lights"].indexOf(e.name);return t>-1?t:Number.MAX_VALUE}).forEach(function(t){"lights"===t.name&&(n.lights=new _Lights2.default(e,n,t)),"collision"===t.name&&(n.collision=new _Collision2.default(e,n,t)),"ceiling"===t.name&&t.chunks.forEach(function(t){n.queue.push(function(){return n.add(new _Ceiling2.default(e,n,t))})}),"wall"===t.name&&t.chunks.forEach(function(t){n.queue.push(function(){return n.add(new _Wall2.default(e,n,t))})}),"floor"===t.name&&t.chunks.forEach(function(t){n.queue.push(function(){return n.add(new _Floor2.default(e,n,t))})}),"entities"===t.name&&(n.entities=new _Entities2.default(e,n,t),n.add(n.entities))}),n}return _inherits(Map,_THREE$Group),_createClass(Map,[{key:"update",value:function(e,t){this.queue.length>0&&this.queue.pop()(),this.entities.update(e,t)}},{key:"preprocess",value:function(e){return e.layers.forEach(function(e){"objectgroup"===e.type&&e.objects.forEach(function(e){var t={};(0,_lodash.isArray)(e.properties)&&e.properties.forEach(function(e){t[e.name]=e.value}),e.properties=t})}),e}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Map}(THREE.Group),reactHotLoader,leaveModule;exports.default=Map,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Map,"Map","/Users/andre/Projects/shooter/src/Map/index.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t,n){e.exports=n.p+"7fc4735d04c08700ea66fae0b300f64c.png"},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_helpers=__webpack_require__(5),enterModule;function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Segment=function(){function Segment(e,t){_classCallCheck(this,Segment),this.position=e||new THREE.Vector3,this.delta=t||new THREE.Vector3(1,0,0)}return _createClass(Segment,[{key:"createHelper",value:function(){if(!this.helper)return this.helper=new THREE.ArrowHelper(this.delta,this.position,this.delta.clone().length(),(0,_helpers.randomColor)()),console.log(this.helper),this.helper}},{key:"updateHelper",value:function(){this.helper.position.copy(this.position),this.helper.setDirection(this.delta),this.helper.setLength(this.delta.clone().length())}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Segment}(),reactHotLoader,leaveModule;exports.default=Segment,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Segment,"Segment","/Users/andre/Projects/shooter/src/Intersect/Segment.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_desc,_value,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_descriptor9,_class2,_temp,_mobx=__webpack_require__(3),_BoxBox=__webpack_require__(64),_BoxBox2=_interopRequireDefault(_BoxBox),_BoxPoint=__webpack_require__(60),_BoxPoint2=_interopRequireDefault(_BoxPoint),_BoxSegment=__webpack_require__(59),_BoxSegment2=_interopRequireDefault(_BoxSegment),_SweptBox=__webpack_require__(58),_SweptBox2=_interopRequireDefault(_SweptBox),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _initDefineProp(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _applyDecoratedDescriptor(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function _initializerWarningHelper(e,t){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled.")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var State=(_temp=_class2=function(){function State(){var e=this;_classCallCheck(this,State),_initDefineProp(this,"isPlaying",_descriptor,this),_initDefineProp(this,"frame",_descriptor2,this),_initDefineProp(this,"delta",_descriptor3,this),_initDefineProp(this,"elapsed",_descriptor4,this),_initDefineProp(this,"messages",_descriptor5,this),_initDefineProp(this,"Level",_descriptor6,this),this.game=null,_initDefineProp(this,"stop",_descriptor7,this),_initDefineProp(this,"start",_descriptor8,this),_initDefineProp(this,"step",_descriptor9,this),(0,_mobx.reaction)(function(){return e.messages.length},function(t){t>10&&e.messages.splice(0,1)})}return _createClass(State,[{key:"setGame",value:function(e){this.game=e}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),State}(),_class2.Levels={BoxBox:_BoxBox2.default,BoxPoint:_BoxPoint2.default,BoxSegment:_BoxSegment2.default,SweptBox:_SweptBox2.default},_class=_temp,_descriptor=_applyDecoratedDescriptor(_class.prototype,"isPlaying",[_mobx.observable],{enumerable:!0,initializer:function(){return!1}}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,"frame",[_mobx.observable],{enumerable:!0,initializer:function(){return 0}}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,"delta",[_mobx.observable],{enumerable:!0,initializer:function(){return 0}}),_descriptor4=_applyDecoratedDescriptor(_class.prototype,"elapsed",[_mobx.observable],{enumerable:!0,initializer:function(){return 0}}),_descriptor5=_applyDecoratedDescriptor(_class.prototype,"messages",[_mobx.observable],{enumerable:!0,initializer:function(){return[]}}),_descriptor6=_applyDecoratedDescriptor(_class.prototype,"Level",[_mobx.observable],{enumerable:!0,initializer:function(){return State.Levels.BoxBox}}),_descriptor7=_applyDecoratedDescriptor(_class.prototype,"stop",[_mobx.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.isPlaying=!1}}}),_descriptor8=_applyDecoratedDescriptor(_class.prototype,"start",[_mobx.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.isPlaying=!0}}}),_descriptor9=_applyDecoratedDescriptor(_class.prototype,"step",[_mobx.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.game&&(e.isPlaying=!0,e.game.update(),e.isPlaying=!1)}}}),_class),state=new State,_default=state,reactHotLoader,leaveModule;exports.default=_default,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(State,"State","/Users/andre/Projects/shooter/src/State.js"),reactHotLoader.register(state,"state","/Users/andre/Projects/shooter/src/State.js"),reactHotLoader.register(_default,"default","/Users/andre/Projects/shooter/src/State.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))i.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_react=__webpack_require__(4),_react2=_interopRequireDefault(_react),_mobx=__webpack_require__(3),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_statsJs=__webpack_require__(70),_statsJs2=_interopRequireDefault(_statsJs),_orbitControlsEs=__webpack_require__(22),_orbitControlsEs2=_interopRequireDefault(_orbitControlsEs);__webpack_require__(69);var _State=__webpack_require__(17),_State2=_interopRequireDefault(_State),_Debug=__webpack_require__(57),_Debug2=_interopRequireDefault(_Debug),_Loader=__webpack_require__(44),_Loader2=_interopRequireDefault(_Loader),_Map=__webpack_require__(14),_Map2=_interopRequireDefault(_Map),_Keyboard=__webpack_require__(24),_Keyboard2=_interopRequireDefault(_Keyboard),_Playground=__webpack_require__(23),_Playground2=_interopRequireDefault(_Playground),enterModule;function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Game=function(){function Game(e){var t=this;_classCallCheck(this,Game),this.init=function(){t.scene.children.forEach(function(e){return t.scene.remove(e)}),t.currentLevel=new _Playground2.default(t),t.scene.add(t.currentLevel)},this.update=function(){t.stats.begin();var e=t.clock.getDelta(),n=t.clock.getElapsedTime();t.currentLevel&&t.currentLevel.update(e,n),t.renderer.render(t.scene,t.camera),t.stats.end(),t.animationFrame=requestAnimationFrame(t.update)},this.width=960,this.height=720,this.scene=new THREE.Scene;var n=this.width/this.height;this.camera=new THREE.PerspectiveCamera(60,n,.1,1e3),this.camera.position.set(4,4,4),this.camera.lookAt(new THREE.Vector3),this.clock=new THREE.Clock(!0),this.stats=new _statsJs2.default,this.loader=new _Loader2.default(this,this.init),this.keyboard=new _Keyboard2.default(this),this.renderer=new THREE.WebGLRenderer({antialias:!1}),this.renderer.setPixelRatio(.5),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(15392994),e.appendChild(this.renderer.domElement),this.controls=new _orbitControlsEs2.default(this.camera,this.renderer.domElement),this.controls.enableKeys=!1,this.scene.add(new THREE.AxesHelper(8)),this.update()}return _createClass(Game,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Game}(),reactHotLoader,leaveModule;exports.default=Game,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Game,"Game","/Users/andre/Projects/shooter/src/Game.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t,n){"use strict";function r(){}n.r(t),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(r.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;var n=[],r=0,i=t.length;for(r=0;r<i;r++)n[r]=t[r];for(r=0;r<i;r++)n[r].call(this,e)}}}});var i,o,a,s,c,u,l="83",h={LEFT:0,MIDDLE:1,RIGHT:2},p=0,d=1,f=2,m=0,v=1,g=2,y=0,_=1,x=2,b=1,w=2,E=0,M=1,T=2,S=0,A=1,R=2,L=3,C=4,P=5,O={NoBlending:S,NormalBlending:A,AdditiveBlending:R,SubtractiveBlending:L,MultiplyBlending:C,CustomBlending:P},I=100,N=101,D=102,U=103,k=104,B=200,F=201,z=202,H=203,G=204,j=205,V=206,W=207,q=208,X=209,Y=210,K=0,Z=1,J=2,$=3,Q=4,ee=5,te=6,ne=7,re=0,ie=1,oe=2,ae=0,se=1,ce=2,ue=3,le=4,he=301,pe=302,de=303,fe=304,me=305,ve=306,ge=307,ye={UVMapping:300,CubeReflectionMapping:he,CubeRefractionMapping:pe,EquirectangularReflectionMapping:de,EquirectangularRefractionMapping:fe,SphericalReflectionMapping:me,CubeUVReflectionMapping:ve,CubeUVRefractionMapping:ge},_e=1e3,xe=1001,be=1002,we={RepeatWrapping:_e,ClampToEdgeWrapping:xe,MirroredRepeatWrapping:be},Ee=1003,Me=1004,Te=1005,Se=1006,Ae=1007,Re=1008,Le={NearestFilter:Ee,NearestMipMapNearestFilter:Me,NearestMipMapLinearFilter:Te,LinearFilter:Se,LinearMipMapNearestFilter:Ae,LinearMipMapLinearFilter:Re},Ce=1009,Pe=1010,Oe=1011,Ie=1012,Ne=1013,De=1014,Ue=1015,ke=1016,Be=1017,Fe=1018,ze=1019,He=1020,Ge=1021,je=1022,Ve=1023,We=1024,qe=1025,Xe=1026,Ye=1027,Ke=2001,Ze=2002,Je=2003,$e=2004,Qe=2100,et=2101,tt=2102,nt=2103,rt=2151,it=2201,ot=2400,at=0,st=1,ct=2,ut=3e3,lt=3001,ht=3007,pt=3002,dt=3004,ft=3005,mt=3006,vt=3200,gt=3201,yt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=new Array(36),s=0,function(){for(var e=0;e<36;e++)8===e||13===e||18===e||23===e?a[e]="-":14===e?a[e]="4":(s<=2&&(s=33554432+16777216*Math.random()|0),i=15&s,s>>=4,a[e]=o[19===e?3&i|8:i]);return a.join("")}),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*yt.DEG2RAD},radToDeg:function(e){return e*yt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};function _t(e,t){this.x=e||0,this.y=t||0}_t.prototype={constructor:_t,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return void 0===c&&(c=new _t,u=new _t),c.set(e,e),u.set(t,t),this.clamp(c,u)},clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}};var xt,bt,wt,Et,Mt,Tt,St=0;function At(e,t,n,r,i,o,a,s,c,u){Object.defineProperty(this,"id",{value:St++}),this.uuid=yt.generateUUID(),this.name="",this.image=void 0!==e?e:At.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:At.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:xe,this.wrapT=void 0!==r?r:xe,this.magFilter=void 0!==i?i:Se,this.minFilter=void 0!==o?o:Re,this.anisotropy=void 0!==c?c:1,this.format=void 0!==a?a:Ve,this.type=void 0!==s?s:Ce,this.offset=new _t(0,0),this.repeat=new _t(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:ut,this.version=0,this.onUpdate=null}function Rt(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function Lt(e,t,n){this.uuid=yt.generateUUID(),this.width=e,this.height=t,this.scissor=new Rt(0,0,e,t),this.scissorTest=!1,this.viewport=new Rt(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=Se),this.texture=new At(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Ct(e,t,n){Lt.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function Pt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function Ot(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function It(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Nt(e,t,n,r,i,o,a,s,c,u){e=void 0!==e?e:[],t=void 0!==t?t:he,At.call(this,e,t,n,r,i,o,a,s,c,u),this.flipY=!1}At.DEFAULT_IMAGE=void 0,At.DEFAULT_MAPPING=300,At.prototype={constructor:At,isTexture:!0,set needsUpdate(e){!0===e&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=yt.generateUUID()),void 0===e.images[n.uuid]&&(e.images[n.uuid]={uuid:n.uuid,url:function(e){var t;return void 0!==e.toDataURL?t=e:((t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(n)}),t.image=n.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case _e:e.x=e.x-Math.floor(e.x);break;case xe:e.x=e.x<0?0:1;break;case be:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case _e:e.y=e.y-Math.floor(e.y);break;case xe:e.y=e.y<0?0:1;break;case be:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},Object.assign(At.prototype,r.prototype),Rt.prototype={constructor:Rt,isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],c=o[8],u=o[1],l=o[5],h=o[9],p=o[2],d=o[6],f=o[10];if(Math.abs(s-u)<.01&&Math.abs(c-p)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+u)<.1&&Math.abs(c+p)<.1&&Math.abs(h+d)<.1&&Math.abs(a+l+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(l+1)/2,g=(f+1)/2,y=(s+u)/4,_=(c+p)/4,x=(h+d)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=_/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=x/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(g)),r=x/i),this.set(n,r,i,t),this}var b=Math.sqrt((d-h)*(d-h)+(c-p)*(c-p)+(u-s)*(u-s));return Math.abs(b)<.001&&(b=1),this.x=(d-h)/b,this.y=(c-p)/b,this.z=(u-s)/b,this.w=Math.acos((a+l+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new Rt,t=new Rt),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},Object.assign(Lt.prototype,r.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ct.prototype=Object.create(Lt.prototype),Ct.prototype.constructor=Ct,Ct.prototype.isWebGLRenderTargetCube=!0,Pt.prototype={constructor:Pt,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2),c=e.order;return"XYZ"===c?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"YXZ"===c?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"ZXY"===c?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"ZYX"===c?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"YZX"===c?(this._x=o*r*i+n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i-o*a*s):"XZY"===c&&(this._x=o*r*i-n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i+o*a*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],c=n[9],u=n[2],l=n[6],h=n[10],p=r+s+h;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(l-c)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(l-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+l)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(c+l)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(n,r){return void 0===e&&(e=new Ot),(t=n.dot(r)+1)<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-i*s,this._y=r*u+o*s+i*a-n*c,this._z=i*u+o*c+n*s-r*a,this._w=o*u-n*a-r*s-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var c=Math.atan2(s,a),u=Math.sin((1-t)*c)/s,l=Math.sin(t*c)/s;return this._w=o*u+this._w*l,this._x=n*u+this._x*l,this._y=r*u+this._y*l,this._z=i*u+this._z*l,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(Pt,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],c=n[r+1],u=n[r+2],l=n[r+3],h=i[o+0],p=i[o+1],d=i[o+2],f=i[o+3];if(l!==f||s!==h||c!==p||u!==d){var m=1-a,v=s*h+c*p+u*d+l*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,v*g);m=Math.sin(m*x)/_,a=Math.sin(a*x)/_}var b=a*g;if(s=s*m+h*b,c=c*m+p*b,u=u*m+d*b,l=l*m+f*b,m===1-a){var w=1/Math.sqrt(s*s+c*c+u*u+l*l);s*=w,c*=w,u*=w,l*=w}}e[t]=s,e[t+1]=c,e[t+2]=u,e[t+3]=l}}),Ot.prototype={constructor:Ot,isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===wt&&(wt=new Pt),this.applyQuaternion(wt.setFromEuler(e))},applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new Pt),this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*n,u=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=c*s+h*-i+u*-a-l*-o,this.y=u*s+h*-o+l*-i-c*-a,this.z=l*s+h*-a+c*-o-u*-i,this},project:function(e){return void 0===bt&&(bt=new It),bt.multiplyMatrices(e.projectionMatrix,bt.getInverse(e.matrixWorld)),this.applyProjection(bt)},unproject:function(){var e;return function(t){return void 0===e&&(e=new It),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new Ot,t=new Ot),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return void 0===xt&&(xt=new Ot),xt.copy(this).projectOnVector(e),this.sub(xt)},reflect:function(){var e;return function(t){return void 0===e&&(e=new Ot),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(yt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=e;e=t,t=n}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},It.prototype={constructor:It,isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,c,u,l,h,p,d,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=u,v[10]=l,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new It).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new Ot);var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),c=Math.sin(r),u=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=o*u,p=o*l,d=a*u,f=a*l;t[0]=s*u,t[4]=-s*l,t[8]=c,t[1]=p+d*c,t[5]=h-f*c,t[9]=-a*s,t[2]=f-h*c,t[6]=d+p*c,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*c,t[1]=o*l,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order)m=s*u,v=s*l,g=c*u,y=c*l,t[0]=m-y*a,t[4]=-o*l,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*c,t[6]=a,t[10]=o*s;else if("ZYX"===e.order)h=o*u,p=o*l,d=a*u,f=a*l,t[0]=s*u,t[4]=d*c-p,t[8]=h*c+f,t[1]=s*l,t[5]=f*c+h,t[9]=p*c-d,t[2]=-c,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var _=o*s,x=o*c,b=a*s,w=a*c;t[0]=s*u,t[4]=w-_*l,t[8]=b*l+x,t[1]=l,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=x*l+b,t[10]=_-w*l}else"XZY"===e.order&&(_=o*s,x=o*c,b=a*s,w=a*c,t[0]=s*u,t[4]=-l,t[8]=c*u,t[1]=_*l+w,t[5]=o*u,t[9]=x*l-b,t[2]=b*l-x,t[6]=a*u,t[10]=w*l+_);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,a=n+n,s=r+r,c=i+i,u=n*a,l=n*s,h=n*c,p=r*s,d=r*c,f=i*c,m=o*a,v=o*s,g=o*c;return t[0]=1-(p+f),t[4]=l-g,t[8]=h+v,t[1]=l+g,t[5]=1-(u+f),t[9]=d-m,t[2]=h-v,t[6]=d+m,t[10]=1-(u+p),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(e,t,n){void 0===Et&&(Et=new Ot,Mt=new Ot,Tt=new Ot);var r=this.elements;return Tt.subVectors(e,t).normalize(),0===Tt.lengthSq()&&(Tt.z=1),Et.crossVectors(n,Tt).normalize(),0===Et.lengthSq()&&(Tt.z+=1e-4,Et.crossVectors(n,Tt).normalize()),Mt.crossVectors(Tt,Et),r[0]=Et.x,r[4]=Mt.x,r[8]=Tt.x,r[1]=Et.y,r[5]=Mt.y,r[9]=Tt.y,r[2]=Et.z,r[6]=Mt.z,r[10]=Tt.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],u=n[1],l=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],x=n[15],b=r[0],w=r[4],E=r[8],M=r[12],T=r[1],S=r[5],A=r[9],R=r[13],L=r[2],C=r[6],P=r[10],O=r[14],I=r[3],N=r[7],D=r[11],U=r[15];return i[0]=o*b+a*T+s*L+c*I,i[4]=o*w+a*S+s*C+c*N,i[8]=o*E+a*A+s*P+c*D,i[12]=o*M+a*R+s*O+c*U,i[1]=u*b+l*T+h*L+p*I,i[5]=u*w+l*S+h*C+p*N,i[9]=u*E+l*A+h*P+p*D,i[13]=u*M+l*R+h*O+p*U,i[2]=d*b+f*T+m*L+v*I,i[6]=d*w+f*S+m*C+v*N,i[10]=d*E+f*A+m*P+v*D,i[14]=d*M+f*R+m*O+v*U,i[3]=g*b+y*T+_*L+x*I,i[7]=g*w+y*S+_*C+x*N,i[11]=g*E+y*A+_*P+x*D,i[15]=g*M+y*R+_*O+x*U,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new Ot),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,o=n;i<r;i+=3,o+=3)e.fromArray(t,o),e.applyMatrix4(this),e.toArray(t,o);return t}}(),applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new Ot);for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],u=e[2],l=e[6],h=e[10],p=e[14];return e[3]*(+i*s*l-r*c*l-i*a*h+n*c*h+r*a*p-n*s*p)+e[7]*(+t*s*p-t*c*h+i*o*h-r*o*p+r*c*u-i*s*u)+e[11]*(+t*c*l-t*a*p-i*o*l+n*o*p+i*a*u-n*c*u)+e[15]*(-r*a*u-t*s*l+t*a*h+r*o*l-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],u=r[5],l=r[6],h=r[7],p=r[8],d=r[9],f=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],x=d*y*h-g*f*h+g*l*m-u*y*m-d*l*_+u*f*_,b=v*f*h-p*y*h-v*l*m+c*y*m+p*l*_-c*f*_,w=p*g*h-v*d*h+v*u*m-c*g*m-p*u*_+c*d*_,E=v*d*l-p*g*l-v*u*f+c*g*f+p*u*y-c*d*y,M=i*x+o*b+a*w+s*E;if(0===M){var T="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var S=1/M;return n[0]=x*S,n[1]=(g*f*s-d*y*s-g*a*m+o*y*m+d*a*_-o*f*_)*S,n[2]=(u*y*s-g*l*s+g*a*h-o*y*h-u*a*_+o*l*_)*S,n[3]=(d*l*s-u*f*s-d*a*h+o*f*h+u*a*m-o*l*m)*S,n[4]=b*S,n[5]=(p*y*s-v*f*s+v*a*m-i*y*m-p*a*_+i*f*_)*S,n[6]=(v*l*s-c*y*s-v*a*h+i*y*h+c*a*_-i*l*_)*S,n[7]=(c*f*s-p*l*s+p*a*h-i*f*h-c*a*m+i*l*m)*S,n[8]=w*S,n[9]=(v*d*s-p*g*s-v*o*m+i*g*m+p*o*_-i*d*_)*S,n[10]=(c*g*s-v*u*s+v*o*h-i*g*h-c*o*_+i*u*_)*S,n[11]=(p*u*s-c*d*s-p*o*h+i*d*h+c*o*m-i*u*m)*S,n[12]=E*S,n[13]=(p*g*a-v*d*a+v*o*f-i*g*f-p*o*y+i*d*y)*S,n[14]=(v*u*a-c*g*a-v*o*l+i*g*l+c*o*y-i*u*y)*S,n[15]=(c*d*a-p*u*a+p*o*l-i*d*l-c*o*f+i*u*f)*S,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,c=i*o,u=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,u*a+n,u*s-r*o,0,c*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e,t;return function(n,r,i){void 0===e&&(e=new Ot,t=new It);var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.elements.set(this.elements);var u=1/a,l=1/s,h=1/c;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=l,t.elements[5]*=l,t.elements[6]*=l,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=c,this}}(),makeFrustum:function(e,t,n,r,i,o){var a=this.elements,s=2*i/(t-e),c=2*i/(r-n),u=(t+e)/(t-e),l=(r+n)/(r-n),h=-(o+i)/(o-i),p=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,r){var i=n*Math.tan(yt.DEG2RAD*e*.5),o=-i,a=o*t,s=i*t;return this.makeFrustum(a,s,o,i,n,r)},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),c=1/(n-r),u=1/(o-i),l=(t+e)*s,h=(n+r)*c,p=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},Nt.prototype=Object.create(At.prototype),Nt.prototype.constructor=Nt,Nt.prototype.isCubeTexture=!0,Object.defineProperty(Nt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Dt=new At,Ut=new Nt;function kt(){this.seq=[],this.map={}}var Bt=[],Ft=[];function zt(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Bt[i];if(void 0===o&&(o=new Float32Array(i),Bt[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Ht(e,t){var n=Ft[t];void 0===n&&(n=new Int32Array(t),Ft[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function Gt(e,t){e.uniform1f(this.addr,t)}function jt(e,t){e.uniform1i(this.addr,t)}function Vt(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function Wt(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function qt(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function Xt(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function Yt(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function Kt(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function Zt(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||Dt,r)}function Jt(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||Ut,r)}function $t(e,t){e.uniform2iv(this.addr,t)}function Qt(e,t){e.uniform3iv(this.addr,t)}function en(e,t){e.uniform4iv(this.addr,t)}function tn(e,t){e.uniform1fv(this.addr,t)}function nn(e,t){e.uniform1iv(this.addr,t)}function rn(e,t){e.uniform2fv(this.addr,zt(t,this.size,2))}function on(e,t){e.uniform3fv(this.addr,zt(t,this.size,3))}function an(e,t){e.uniform4fv(this.addr,zt(t,this.size,4))}function sn(e,t){e.uniformMatrix2fv(this.addr,!1,zt(t,this.size,4))}function cn(e,t){e.uniformMatrix3fv(this.addr,!1,zt(t,this.size,9))}function un(e,t){e.uniformMatrix4fv(this.addr,!1,zt(t,this.size,16))}function ln(e,t,n){var r=t.length,i=Ht(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(t[o]||Dt,i[o])}function hn(e,t,n){var r=t.length,i=Ht(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(t[o]||Ut,i[o])}function pn(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(t.type){case 5126:return Gt;case 35664:return Vt;case 35665:return Wt;case 35666:return qt;case 35674:return Xt;case 35675:return Yt;case 35676:return Kt;case 35678:return Zt;case 35680:return Jt;case 5124:case 35670:return jt;case 35667:case 35671:return $t;case 35668:case 35672:return Qt;case 35669:case 35673:return en}}()}function dn(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(t.type){case 5126:return tn;case 35664:return rn;case 35665:return on;case 35666:return an;case 35674:return sn;case 35675:return cn;case 35676:return un;case 35678:return ln;case 35680:return hn;case 5124:case 35670:return nn;case 35667:case 35671:return $t;case 35668:case 35672:return Qt;case 35669:case 35673:return en}}()}function fn(e){this.id=e,kt.call(this)}fn.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(e,t[o.id])}};var mn=/([\w\d_]+)(\])?(\[|\.)?/g;function vn(e,t){e.seq.push(t),e.map[t.id]=t}function gn(e,t,n){var r=e.name,i=r.length;for(mn.lastIndex=0;;){var o=mn.exec(r),a=mn.lastIndex,s=o[1],c="]"===o[2],u=o[3];if(c&&(s|=0),void 0===u||"["===u&&a+2===i){vn(n,void 0===u?new pn(s,e,t):new dn(s,e,t));break}var l=n.map[s];void 0===l&&vn(n,l=new fn(s)),n=l}}function yn(e,t,n){kt.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i!==r;++i){var o=e.getActiveUniform(t,i),a=o.name;gn(o,e.getUniformLocation(t,a),this)}}yn.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},yn.prototype.set=function(e,t,n){var r=this.map[n];void 0!==r&&r.setValue(e,t[n],this.renderer)},yn.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},yn.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},yn.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var _n={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}},xn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#include <premultiplied_alpha_fragment>\n\t#include <encodings_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};function bn(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}bn.prototype={constructor:bn,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=yt.euclideanModulo(t,1),n=yt.clamp(n,0,1),r=yt.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,l=(u=n[1]).length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(u=wn[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,r=e||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),c=Math.min(i,o,a),u=(c+s)/2;if(c===s)t=0,n=0;else{var l=s-c;switch(n=u<=.5?l/(s+c):l/(2-s-c),s){case i:t=(o-a)/l+(o<a?6:0);break;case o:t=(a-i)/l+2;break;case a:t=(i-o)/l+4}t/=6}return r.h=t,r.s=n,r.l=u,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var wn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function En(e,t,n,r,i,o,a,s,c,u,l,h){At.call(this,null,o,a,s,c,u,r,i,l,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:Ee,this.minFilter=void 0!==u?u:Ee,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}En.prototype=Object.create(At.prototype),En.prototype.constructor=En,En.prototype.isDataTexture=!0;var Mn={common:{diffuse:{value:new bn(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Rt(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _t(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bn(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new bn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Rt(0,0,1,1)}}},Tn={basic:{uniforms:_n.merge([Mn.common,Mn.aomap,Mn.lightmap,Mn.fog]),vertexShader:xn.meshbasic_vert,fragmentShader:xn.meshbasic_frag},lambert:{uniforms:_n.merge([Mn.common,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.fog,Mn.lights,{emissive:{value:new bn(0)}}]),vertexShader:xn.meshlambert_vert,fragmentShader:xn.meshlambert_frag},phong:{uniforms:_n.merge([Mn.common,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.gradientmap,Mn.fog,Mn.lights,{emissive:{value:new bn(0)},specular:{value:new bn(1118481)},shininess:{value:30}}]),vertexShader:xn.meshphong_vert,fragmentShader:xn.meshphong_frag},standard:{uniforms:_n.merge([Mn.common,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.roughnessmap,Mn.metalnessmap,Mn.fog,Mn.lights,{emissive:{value:new bn(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag},points:{uniforms:_n.merge([Mn.points,Mn.fog]),vertexShader:xn.points_vert,fragmentShader:xn.points_frag},dashed:{uniforms:_n.merge([Mn.common,Mn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xn.linedashed_vert,fragmentShader:xn.linedashed_frag},depth:{uniforms:_n.merge([Mn.common,Mn.displacementmap]),vertexShader:xn.depth_vert,fragmentShader:xn.depth_frag},normal:{uniforms:_n.merge([Mn.common,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,{opacity:{value:1}}]),vertexShader:xn.normal_vert,fragmentShader:xn.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xn.cube_vert,fragmentShader:xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:xn.equirect_vert,fragmentShader:xn.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new Ot}},vertexShader:xn.distanceRGBA_vert,fragmentShader:xn.distanceRGBA_frag}};function Sn(e,t){this.min=void 0!==e?e:new _t(1/0,1/0),this.max=void 0!==t?t:new _t(-1/0,-1/0)}function An(e,t){var n,r,i,o,a,s,c=e.context,u=e.state,l=new Ot,h=new Pt,p=new Ot;function d(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(f,m){if(0!==t.length){void 0===i&&function(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),u=new Uint16Array([0,1,2,0,2,3]);n=c.createBuffer(),r=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,n),c.bufferData(c.ARRAY_BUFFER,t,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),c.bufferData(c.ELEMENT_ARRAY_BUFFER,u,c.STATIC_DRAW),i=function(){var t=c.createProgram(),n=c.createShader(c.VERTEX_SHADER),r=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),c.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),c.compileShader(n),c.compileShader(r),c.attachShader(t,n),c.attachShader(t,r),c.linkProgram(t),t}(),o={position:c.getAttribLocation(i,"position"),uv:c.getAttribLocation(i,"uv")},a={uvOffset:c.getUniformLocation(i,"uvOffset"),uvScale:c.getUniformLocation(i,"uvScale"),rotation:c.getUniformLocation(i,"rotation"),scale:c.getUniformLocation(i,"scale"),color:c.getUniformLocation(i,"color"),map:c.getUniformLocation(i,"map"),opacity:c.getUniformLocation(i,"opacity"),modelViewMatrix:c.getUniformLocation(i,"modelViewMatrix"),projectionMatrix:c.getUniformLocation(i,"projectionMatrix"),fogType:c.getUniformLocation(i,"fogType"),fogDensity:c.getUniformLocation(i,"fogDensity"),fogNear:c.getUniformLocation(i,"fogNear"),fogFar:c.getUniformLocation(i,"fogFar"),fogColor:c.getUniformLocation(i,"fogColor"),alphaTest:c.getUniformLocation(i,"alphaTest")};var l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");l.width=8,l.height=8;var h=l.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),(s=new At(l)).needsUpdate=!0}(),c.useProgram(i),u.initAttributes(),u.enableAttribute(o.position),u.enableAttribute(o.uv),u.disableUnusedAttributes(),u.disable(c.CULL_FACE),u.enable(c.BLEND),c.bindBuffer(c.ARRAY_BUFFER,n),c.vertexAttribPointer(o.position,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(o.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),c.uniformMatrix4fv(a.projectionMatrix,!1,m.projectionMatrix.elements),u.activeTexture(c.TEXTURE0),c.uniform1i(a.map,0);var v=0,g=0,y=f.fog;y?(c.uniform3f(a.fogColor,y.color.r,y.color.g,y.color.b),y.isFog?(c.uniform1f(a.fogNear,y.near),c.uniform1f(a.fogFar,y.far),c.uniform1i(a.fogType,1),v=1,g=1):y.isFogExp2&&(c.uniform1f(a.fogDensity,y.density),c.uniform1i(a.fogType,2),v=2,g=2)):(c.uniform1i(a.fogType,0),v=0,g=0);for(var _=0,x=t.length;_<x;_++)(w=t[_]).modelViewMatrix.multiplyMatrices(m.matrixWorldInverse,w.matrixWorld),w.z=-w.modelViewMatrix.elements[14];t.sort(d);var b=[];for(_=0,x=t.length;_<x;_++){var w,E=(w=t[_]).material;if(!1!==E.visible){c.uniform1f(a.alphaTest,E.alphaTest),c.uniformMatrix4fv(a.modelViewMatrix,!1,w.modelViewMatrix.elements),w.matrixWorld.decompose(l,h,p),b[0]=p.x,b[1]=p.y;var M=0;f.fog&&E.fog&&(M=g),v!==M&&(c.uniform1i(a.fogType,M),v=M),null!==E.map?(c.uniform2f(a.uvOffset,E.map.offset.x,E.map.offset.y),c.uniform2f(a.uvScale,E.map.repeat.x,E.map.repeat.y)):(c.uniform2f(a.uvOffset,0,0),c.uniform2f(a.uvScale,1,1)),c.uniform1f(a.opacity,E.opacity),c.uniform3f(a.color,E.color.r,E.color.g,E.color.b),c.uniform1f(a.rotation,E.rotation),c.uniform2fv(a.scale,b),u.setBlending(E.blending,E.blendEquation,E.blendSrc,E.blendDst),u.setDepthTest(E.depthTest),u.setDepthWrite(E.depthWrite),E.map?e.setTexture2D(E.map,0):e.setTexture2D(s,0),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)}}u.enable(c.CULL_FACE),e.resetGLState()}}}Tn.physical={uniforms:_n.merge([Tn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag},Sn.prototype={constructor:Sn,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new _t;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new _t;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new _t;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new _t).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new _t).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new _t;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};var Rn,Ln,Cn,Pn,On,In,Nn,Dn,Un,kn,Bn,Fn=0;function zn(){Object.defineProperty(this,"id",{value:Fn++}),this.uuid=yt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=A,this.side=y,this.shading=w,this.vertexColors=E,this.opacity=1,this.transparent=!1,this.blendSrc=G,this.blendDst=j,this.blendEquation=I,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function Hn(e){zn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Gn(e){zn.call(this),this.type="MeshDepthMaterial",this.depthPacking=vt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function jn(e,t){this.min=void 0!==e?e:new Ot(1/0,1/0,1/0),this.max=void 0!==t?t:new Ot(-1/0,-1/0,-1/0)}function Vn(e,t){this.center=void 0!==e?e:new Ot,this.radius=void 0!==t?t:0}function Wn(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function qn(e,t){this.normal=void 0!==e?e:new Ot(1,0,0),this.constant=void 0!==t?t:0}function Xn(e,t,n,r,i,o){this.planes=[void 0!==e?e:new qn,void 0!==t?t:new qn,void 0!==n?n:new qn,void 0!==r?r:new qn,void 0!==i?i:new qn,void 0!==o?o:new qn]}function Yn(e,t,n,r){var i=e.context,o=e.state,a=new Xn,s=new It,c=t.shadows,u=new _t,l=new _t(r.maxTextureSize,r.maxTextureSize),h=new Ot,p=new Ot,d=[],f=1,m=2,g=1+(f|m),b=new Array(g),w=new Array(g),E={},M=[new Ot(1,0,0),new Ot(-1,0,0),new Ot(0,0,1),new Ot(0,0,-1),new Ot(0,1,0),new Ot(0,-1,0)],T=[new Ot(0,1,0),new Ot(0,1,0),new Ot(0,1,0),new Ot(0,1,0),new Ot(0,0,1),new Ot(0,0,-1)],S=[new Rt,new Rt,new Rt,new Rt,new Rt,new Rt],A=new Gn;A.depthPacking=gt,A.clipping=!0;for(var R=Tn.distanceRGBA,L=_n.clone(R.uniforms),C=0;C!==g;++C){var P=0!=(C&f),O=0!=(C&m),I=A.clone();I.morphTargets=P,I.skinning=O,b[C]=I;var N=new Hn({defines:{USE_SHADOWMAP:""},uniforms:L,vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,morphTargets:P,skinning:O,clipping:!0});w[C]=N}var D=this;function U(t,n,r,i){var o=t.geometry,a=null,s=b,c=t.customDepthMaterial;if(r&&(s=w,c=t.customDistanceMaterial),c)a=c;else{var u=!1;n.morphTargets&&(o&&o.isBufferGeometry?u=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(u=o.morphTargets&&o.morphTargets.length>0));var l=t.isSkinnedMesh&&n.skinning,h=0;u&&(h|=f),l&&(h|=m),a=s[h]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var p=a.uuid,d=n.uuid,v=E[p];void 0===v&&(v={},E[p]=v);var g=v[d];void 0===g&&(g=a.clone(),v[d]=g),a=g}a.visible=n.visible,a.wireframe=n.wireframe;var M=n.side;return D.renderSingleSided&&M==x&&(M=y),D.renderReverseSided&&(M===y?M=_:M===_&&(M=y)),a.side=M,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,r&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(i),a}function k(e,t,n){if(!1!==e.visible){0!=(e.layers.mask&t.layers.mask)&&(e.isMesh||e.isLine||e.isPoints)&&(!e.castShadow||!1!==e.frustumCulled&&!0!==a.intersectsObject(e)||!0===e.material.visible&&(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),d.push(e)));for(var r=e.children,i=0,o=r.length;i<o;i++)k(r[i],t,n)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=v,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,r){if(!1!==D.enabled&&(!1!==D.autoUpdate||!1!==D.needsUpdate)&&0!==c.length){var f,m;o.buffers.color.setClear(1,1,1,1),o.disable(i.BLEND),o.setDepthTest(!0),o.setScissorTest(!1);for(var v=0,g=c.length;v<g;v++){var y=c[v],_=y.shadow;if(void 0!==_){var x=_.camera;if(u.copy(_.mapSize),u.min(l),y&&y.isPointLight){f=6,m=!0;var b=u.x,w=u.y;S[0].set(2*b,w,b,w),S[1].set(0,w,b,w),S[2].set(3*b,w,b,w),S[3].set(b,w,b,w),S[4].set(3*b,0,b,w),S[5].set(b,0,b,w),u.x*=4,u.y*=2}else f=1,m=!1;if(null===_.map){var E={minFilter:Ee,magFilter:Ee,format:Ve};_.map=new Lt(u.x,u.y,E),x.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(y),_&&_.isRectAreaLightShadow&&_.update(y);var A=_.map,R=_.matrix;p.setFromMatrixPosition(y.matrixWorld),x.position.copy(p),e.setRenderTarget(A),e.clear();for(var L=0;L<f;L++){if(m){h.copy(x.position),h.add(M[L]),x.up.copy(T[L]),x.lookAt(h);var C=S[L];o.viewport(C)}else h.setFromMatrixPosition(y.target.matrixWorld),x.lookAt(h);x.updateMatrixWorld(),x.matrixWorldInverse.getInverse(x.matrixWorld),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(x.projectionMatrix),R.multiply(x.matrixWorldInverse),s.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),a.setFromMatrix(s),d.length=0,k(t,r,x);for(var P=0,O=d.length;P<O;P++){var I=d[P],N=n.update(I),B=I.material;if(B&&B.isMultiMaterial)for(var F=N.groups,z=B.materials,H=0,G=F.length;H<G;H++){var j=F[H],V=z[j.materialIndex];if(!0===V.visible){var W=U(I,V,m,p);e.renderBufferDirect(x,null,N,W,I,j)}}else W=U(I,B,m,p),e.renderBufferDirect(x,null,N,W,I,null)}}}else console.warn("THREE.WebGLShadowMap:",y,"has no shadow.")}var q=e.getClearColor(),X=e.getClearAlpha();e.setClearColor(q,X),D.needsUpdate=!1}}}function Kn(e,t){this.origin=void 0!==e?e:new Ot,this.direction=void 0!==t?t:new Ot}function Zn(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||Zn.DefaultOrder}function Jn(){this.mask=1}zn.prototype={constructor:zn,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==A&&(n.blending=this.blending),this.shading!==w&&(n.shading=this.shading),this.side!==y&&(n.side=this.side),this.vertexColors!==E&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(zn.prototype,r.prototype),Hn.prototype=Object.create(zn.prototype),Hn.prototype.constructor=Hn,Hn.prototype.isShaderMaterial=!0,Hn.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_n.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Hn.prototype.toJSON=function(e){var t=zn.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Gn.prototype=Object.create(zn.prototype),Gn.prototype.constructor=Gn,Gn.prototype.isMeshDepthMaterial=!0,Gn.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},jn.prototype={constructor:jn,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var u=e[s],l=e[s+1],h=e[s+2];u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}this.min.set(t,n,r),this.max.set(i,o,a)},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var u=e.getX(s),l=e.getY(s),h=e.getZ(s);u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}this.min.set(t,n,r),this.max.set(i,o,a)},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ot;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new Ot;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var r,i,o=t.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(r=0,i=a.length;r<i;r++)e.copy(a[r]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(r=0,i=s.count;r<i;r++)e.fromAttribute(s,r).applyMatrix4(t.matrixWorld),n.expandByPoint(e)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new Ot;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Ot;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new Ot).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return void 0===Ln&&(Ln=new Ot),this.clampPoint(e.center,Ln),Ln.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){return(t||new Ot).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ot;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Ot;return function(t){var n=t||new Vn;return this.getCenter(n.center),n.radius=.5*this.getSize(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Rn=[new Ot,new Ot,new Ot,new Ot,new Ot,new Ot,new Ot,new Ot],function(e){return this.isEmpty()?this:(Rn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Rn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Rn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Rn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Rn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Rn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Rn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Rn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Rn),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Vn.prototype={constructor:Vn,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Cn=new jn,function(e,t){var n=this.center;void 0!==t?n.copy(t):Cn.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new Ot;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new jn;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},Wn.prototype={constructor:Wn,isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,c){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new Ot),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,o=n;i<r;i+=3,o+=3)e.fromArray(t,o),e.applyMatrix3(this),e.toArray(t,o);return t}}(),applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new Ot);for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*i*u+n*a*s+r*i*c-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7],p=n[8],d=p*c-u*h,f=u*l-p*s,m=h*s-c*l,v=i*d+o*f+a*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=d*y,r[1]=(a*h-p*o)*y,r[2]=(u*o-a*c)*y,r[3]=f*y,r[4]=(p*i-a*l)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*l-h*i)*y,r[8]=(c*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},qn.prototype={constructor:qn,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Ot,t=new Ot;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new Ot).copy(this.normal).multiplyScalar(n)},intersectLine:function(){var e=new Ot;return function(t,n){var r=n||new Ot,i=t.delta(e),o=this.normal.dot(i);if(0===o)return 0===this.distanceToPoint(t.start)?r.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/o;return a<0||a>1?void 0:r.copy(i).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new Ot).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Ot,t=new Wn;return function(n,r){var i=this.coplanarPoint(e).applyMatrix4(n),o=r||t.getNormalMatrix(n),a=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(a),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},Xn.prototype={constructor:Xn,set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],l=n[7],h=n[8],p=n[9],d=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,l-s,f-h,y-m).normalize(),t[1].setComponents(a+r,l+s,f+h,y+m).normalize(),t[2].setComponents(a+i,l+c,f+p,y+v).normalize(),t[3].setComponents(a-i,l-c,f-p,y-v).normalize(),t[4].setComponents(a-o,l-u,f-d,y-g).normalize(),t[5].setComponents(a+o,l+u,f+d,y+g).normalize(),this},intersectsObject:(In=new Vn,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),In.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(In)}),intersectsSprite:function(){var e=new Vn;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(Pn=new Ot,On=new Ot,function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];Pn.x=r.normal.x>0?e.min.x:e.max.x,On.x=r.normal.x>0?e.max.x:e.min.x,Pn.y=r.normal.y>0?e.min.y:e.max.y,On.y=r.normal.y>0?e.max.y:e.min.y,Pn.z=r.normal.z>0?e.min.z:e.max.z,On.z=r.normal.z>0?e.max.z:e.min.z;var i=r.distanceToPoint(Pn),o=r.distanceToPoint(On);if(i<0&&o<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},Kn.prototype={constructor:Kn,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new Ot).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Ot;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new Ot;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Ot;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Dn=new Ot,Un=new Ot,kn=new Ot,function(e,t,n,r){Dn.copy(e).add(t).multiplyScalar(.5),Un.copy(t).sub(e).normalize(),kn.copy(this.origin).sub(Dn);var i,o,a,s,c=.5*e.distanceTo(t),u=-this.direction.dot(Un),l=kn.dot(this.direction),h=-kn.dot(Un),p=kn.lengthSq(),d=Math.abs(1-u*u);if(d>0)if(o=u*l-h,s=c*d,(i=u*h-l)>=0)if(o>=-s)if(o<=s){var f=1/d;a=(i*=f)*(i+u*(o*=f)+2*l)+o*(u*i+o+2*h)+p}else o=c,a=-(i=Math.max(0,-(u*o+l)))*i+o*(o+2*h)+p;else o=-c,a=-(i=Math.max(0,-(u*o+l)))*i+o*(o+2*h)+p;else o<=-s?a=-(i=Math.max(0,-(-u*c+l)))*i+(o=i>0?-c:Math.min(Math.max(-c,-h),c))*(o+2*h)+p:o<=s?(i=0,a=(o=Math.min(Math.max(-c,-h),c))*(o+2*h)+p):a=-(i=Math.max(0,-(u*c+l)))*i+(o=i>0?c:Math.min(Math.max(-c,-h),c))*(o+2*h)+p;else o=u>0?-c:c,a=-(i=Math.max(0,-(u*o+l)))*i+o*(o+2*h)+p;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Un).multiplyScalar(o).add(Dn),a}),intersectSphere:function(){var e=new Ot;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,c=r+a;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),l>=0?(a=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(a=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:(Nn=new Ot,function(e){return null!==this.intersectBox(e,Nn)}),intersectTriangle:function(){var e=new Ot,t=new Ot,n=new Ot,r=new Ot;return function(i,o,a,s,c){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var u,l=this.direction.dot(r);if(l>0){if(s)return null;u=1}else{if(!(l<0))return null;u=-1,l=-l}e.subVectors(this.origin,i);var h=u*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var p=u*this.direction.dot(t.cross(e));if(p<0)return null;if(h+p>l)return null;var d=-u*e.dot(r);return d<0?null:this.at(d/l,c)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},Zn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Zn.DefaultOrder="XYZ",Zn.prototype={constructor:Zn,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=yt.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],c=i[1],u=i[5],l=i[9],h=i[2],p=i[6],d=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,n,r){return void 0===e&&(e=new It),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(Bn=new Pt,function(e){return Bn.setFromEuler(this),this.setFromQuaternion(Bn,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Ot(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Jn.prototype={constructor:Jn,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!=(this.mask&e.mask)}};var $n,Qn,er,tr,nr,rr,ir,or,ar=0;function sr(){Object.defineProperty(this,"id",{value:ar++}),this.uuid=yt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=sr.DefaultUp.clone();var e=new Ot,t=new Zn,n=new Pt,r=new Ot(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new It},normalMatrix:{value:new Wn}}),this.matrix=new It,this.matrixWorld=new It,this.matrixAutoUpdate=sr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Jn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function cr(e,t){this.start=void 0!==e?e:new Ot,this.end=void 0!==t?t:new Ot}function ur(e,t,n){this.a=void 0!==e?e:new Ot,this.b=void 0!==t?t:new Ot,this.c=void 0!==n?n:new Ot}function lr(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Ot,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new bn,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function hr(e){zn.call(this),this.type="MeshBasicMaterial",this.color=new bn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=re,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function pr(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=yt.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function dr(e,t){pr.call(this,new Int8Array(e),t)}function fr(e,t){pr.call(this,new Uint8Array(e),t)}function mr(e,t){pr.call(this,new Uint8ClampedArray(e),t)}function vr(e,t){pr.call(this,new Int16Array(e),t)}function gr(e,t){pr.call(this,new Uint16Array(e),t)}function yr(e,t){pr.call(this,new Int32Array(e),t)}function _r(e,t){pr.call(this,new Uint32Array(e),t)}function xr(e,t){pr.call(this,new Float32Array(e),t)}function br(e,t){pr.call(this,new Float64Array(e),t)}function wr(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Er(){Object.defineProperty(this,"id",{value:Tr()}),this.uuid=yt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}sr.DefaultUp=new Ot(0,1,0),sr.DefaultMatrixAutoUpdate=!0,Object.assign(sr.prototype,r.prototype,{isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(tr=new Pt,function(e,t){return tr.setFromAxisAngle(e,t),this.quaternion.multiply(tr),this}),rotateX:function(){var e=new Ot(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Ot(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Ot(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Ot;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Ot(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Ot(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Ot(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(er=new It,function(e){return e.applyMatrix4(er.getInverse(this.matrixWorld))}),lookAt:function(){var e=new It;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var n=this.children.indexOf(e);-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){var t=e||new Ot;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:($n=new Ot,Qn=new Ot,function(e){var t=e||new Pt;return this.updateMatrixWorld(!0),this.matrixWorld.decompose($n,t,Qn),t}),getWorldRotation:function(){var e=new Pt;return function(t){var n=t||new Zn;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new Ot,t=new Pt;return function(n){var r=n||new Ot;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new Pt;return function(t){var n=t||new Ot;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||""===e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),r.material=this.material.uuid),this.children.length>0){r.children=[];for(var i=0;i<this.children.length;i++)r.children.push(this.children[i].toJSON(e).object)}if(t){var o=u(e.geometries),a=u(e.materials),s=u(e.textures),c=u(e.images);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),s.length>0&&(n.textures=s),c.length>0&&(n.images=c)}return n.object=r,n;function u(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),cr.prototype={constructor:cr,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new Ot).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new Ot).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new Ot;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(nr=new Ot,rr=new Ot,function(e,t){nr.subVectors(e,this.start),rr.subVectors(this.end,this.start);var n=rr.dot(rr),r=rr.dot(nr)/n;return t&&(r=yt.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),i=n||new Ot;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},ur.normal=(ir=new Ot,function(e,t,n,r){var i=r||new Ot;i.subVectors(n,t),ir.subVectors(e,t),i.cross(ir);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}),ur.barycoordFromPoint=function(){var e=new Ot,t=new Ot,n=new Ot;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var c=e.dot(e),u=e.dot(t),l=e.dot(n),h=t.dot(t),p=t.dot(n),d=c*h-u*u,f=s||new Ot;if(0===d)return f.set(-2,-1,-1);var m=1/d,v=(h*l-u*p)*m,g=(c*p-u*l)*m;return f.set(1-v-g,g,v)}}(),ur.containsPoint=function(){var e=new Ot;return function(t,n,r,i){var o=ur.barycoordFromPoint(t,n,r,i,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),ur.prototype={constructor:ur,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new Ot,t=new Ot;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new Ot).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return ur.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new qn).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return ur.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ur.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,n,r;return function(i,o){void 0===e&&(e=new qn,t=[new cr,new cr,new cr],n=new Ot,r=new Ot);var a=o||new Ot,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,n),!0===this.containsPoint(n))a.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var c=0;c<t.length;c++){t[c].closestPointToPoint(n,!0,r);var u=n.distanceToSquared(r);u<s&&(s=u,a.copy(r))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},lr.prototype={constructor:lr,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},hr.prototype=Object.create(zn.prototype),hr.prototype.constructor=hr,hr.prototype.isMeshBasicMaterial=!0,hr.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},pr.prototype={constructor:pr,isBufferAttribute:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new bn),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];t[n++]=o.a,t[n++]=o.b,t[n++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new _t),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Ot),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Rt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return(new this.constructor).copy(this)}},dr.prototype=Object.create(pr.prototype),dr.prototype.constructor=dr,fr.prototype=Object.create(pr.prototype),fr.prototype.constructor=fr,mr.prototype=Object.create(pr.prototype),mr.prototype.constructor=mr,vr.prototype=Object.create(pr.prototype),vr.prototype.constructor=vr,gr.prototype=Object.create(pr.prototype),gr.prototype.constructor=gr,yr.prototype=Object.create(pr.prototype),yr.prototype.constructor=yr,_r.prototype=Object.create(pr.prototype),_r.prototype.constructor=_r,xr.prototype=Object.create(pr.prototype),xr.prototype.constructor=xr,br.prototype=Object.create(pr.prototype),br.prototype.constructor=br,Object.assign(wr.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var u=0;u<c;u++)t[u]=[];this.morphTargets.position=t}var l,h=e.morphNormals,p=h.length;if(p>0){for(l=[],u=0;u<p;u++)l[u]=[];this.morphTargets.normal=l}var d=e.skinIndices,f=e.skinWeights,m=d.length===r.length,v=f.length===r.length;for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var x,b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var w=g.color;this.colors.push(w,w,w)}!0===o&&(void 0!==(x=i[0][u])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new _t,new _t,new _t))),!0===a&&(void 0!==(x=i[1][u])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new _t,new _t,new _t)));for(var E=0;E<c;E++){var M=s[E].vertices;t[E].push(M[g.a],M[g.b],M[g.c])}for(E=0;E<p;E++){var T=h[E].vertexNormals[u];l[E].push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}}),Object.assign(Er.prototype,r.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=(new Wn).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new It),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new It),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new It),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new It),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new It),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(e){void 0===or&&(or=new sr),or.lookAt(e),or.updateMatrix(),this.applyMatrix(or.matrix)},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,c=void 0!==r.uv2?r.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var u=[],l=[],h=[],p=0,d=0;p<i.length;p+=3,d+=2)t.vertices.push(new Ot(i[p],i[p+1],i[p+2])),void 0!==o&&u.push(new Ot(o[p],o[p+1],o[p+2])),void 0!==a&&t.colors.push(new bn(a[p],a[p+1],a[p+2])),void 0!==s&&l.push(new _t(s[d],s[d+1])),void 0!==c&&h.push(new _t(c[d],c[d+1]));function f(e,n,r,i){var p=new lr(e,n,r,void 0!==o?[u[e].clone(),u[n].clone(),u[r].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(p),void 0!==s&&t.faceVertexUvs[0].push([l[e].clone(),l[n].clone(),l[r].clone()]),void 0!==c&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[r].clone()])}if(void 0!==n){var m=e.groups;if(m.length>0)for(p=0;p<m.length;p++)for(var v=m[p],g=v.start,y=(d=g,g+v.count);d<y;d+=3)f(n[d],n[d+1],n[d+2],v.materialIndex);else for(p=0;p<n.length;p+=3)f(n[p],n[p+1],n[p+2])}else for(p=0;p<i.length/3;p+=3)f(p,p+1,p+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new It;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Ot,t=new Ot,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Ot;if(e){var s,c,u,l=new Ot,h=new Ot;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],c=this.vertices[o.b],u=this.vertices[o.c],l.subVectors(u,c),h.subVectors(s,c),l.cross(h),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var p=(o=this.faces[r]).vertexNormals;3===p.length?(p[0].copy(a[o.a]),p[1].copy(a[o.b]),p[2].copy(a[o.c])):(p[0]=a[o.a].clone(),p[1]=a[o.b].clone(),p[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Er;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)c=new Ot,u={a:new Ot,b:new Ot,c:new Ot},a.push(c),s.push(u)}var c,u,l=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],c=l.faceNormals[n],u=l.vertexNormals[n],c.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new jn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Vn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!1!==(e&&e.isGeometry)){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,u=this.faceVertexUvs[0],l=e.faceVertexUvs[0],h=this.colors,p=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new Wn).getNormalMatrix(t));for(var d=0,f=a.length;d<f;d++){var m=a[d].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(d=0,f=p.length;d<f;d++)h.push(p[d].clone());for(d=0,f=c.length;d<f;d++){var v,g,y,_=c[d],x=_.vertexNormals,b=_.vertexColors;(v=new lr(_.a+i,_.b+i,_.c+i)).normal.copy(_.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var w=0,E=x.length;w<E;w++)g=x[w].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);for(v.color.copy(_.color),w=0,E=b.length;w<E;w++)y=b[w],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+n,s.push(v)}for(d=0,f=l.length;d<f;d++){var M=l[d],T=[];if(void 0!==M){for(w=0,E=M.length;w<E;w++)T.push(M[w].clone());u.push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){!1!==(e&&e.isMesh)?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,c={},u=[],l=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===c[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(c[t]=n,u.push(this.vertices[n]),l[n]=u.length-1):l[n]=l[c[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var f=p[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],c={},u=[],l={},h=[],p={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,_=0;if(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_,0,0),1,!0),2,!1),3,f),4,m),5,v),6,g),7,y),a.push(_),a.push(d.a,d.b,d.c),a.push(d.materialIndex),f){var x=this.faceVertexUvs[0][i];a.push(S(x[0]),S(x[1]),S(x[2]))}if(m&&a.push(M(d.normal)),v){var b=d.vertexNormals;a.push(M(b[0]),M(b[1]),M(b[2]))}if(g&&a.push(T(d.color)),y){var w=d.vertexColors;a.push(T(w[0]),T(w[1]),T(w[2]))}}function E(e,t,n){return n?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]?l[t]:(l[t]=u.length,u.push(e.getHex()),l[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]?p[t]:(p[t]=h.length/2,h.push(e.x,e.y),p[t])}return e.data={},e.data.vertices=r,e.data.normals=s,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new Er).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());var i=e.colors;for(n=0,r=i.length;n<r;n++)this.colors.push(i[n].clone());var o=e.faces;for(n=0,r=o.length;n<r;n++)this.faces.push(o[n].clone());for(n=0,r=e.faceVertexUvs.length;n<r;n++){var a=e.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var s=0,c=a.length;s<c;s++){for(var u=a[s],l=[],h=0,p=u.length;h<p;h++){var d=u[h];l.push(d.clone())}this.faceVertexUvs[n].push(l)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Mr=0;function Tr(){return Mr++}function Sr(){Object.defineProperty(this,"id",{value:Tr()}),this.uuid=yt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Ar(e,t){sr.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Sr,this.material=void 0!==t?t:new hr({color:16777215*Math.random()}),this.drawMode=at,this.updateMorphTargets()}function Rr(e,t,n,r,i,o){Sr.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a,s,c,u,l=this,h=function(e,t,n){var r=0;return r+=(e+1)*(t+1)*2,(r+=(e+1)*(n+1)*2)+(n+1)*(t+1)*2}(r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1),p=(u=0,u+=(a=r)*(s=i)*2,u+=a*(c=o)*2,6*(u+=c*s*2)),d=new(p>65535?Uint32Array:Uint16Array)(p),f=new Float32Array(3*h),m=new Float32Array(3*h),v=new Float32Array(2*h),g=0,y=0,_=0,x=0,b=0;function w(e,t,n,r,i,o,a,s,c,u,h){for(var p=o/c,w=a/u,E=o/2,M=a/2,T=s/2,S=c+1,A=u+1,R=0,L=0,C=new Ot,P=0;P<A;P++)for(var O=P*w-M,I=0;I<S;I++){var N=I*p-E;C[e]=N*r,C[t]=O*i,C[n]=T,f[g]=C.x,f[g+1]=C.y,f[g+2]=C.z,C[e]=0,C[t]=0,C[n]=s>0?1:-1,m[g]=C.x,m[g+1]=C.y,m[g+2]=C.z,v[y]=I/c,v[y+1]=1-P/u,g+=3,y+=2,R+=1}for(P=0;P<u;P++)for(I=0;I<c;I++){var D=x+I+S*P,U=x+I+S*(P+1),k=x+(I+1)+S*(P+1),B=x+(I+1)+S*P;d[_]=D,d[_+1]=U,d[_+2]=B,d[_+3]=U,d[_+4]=k,d[_+5]=B,_+=6,L+=6}l.addGroup(b,L,h),b+=L,x+=R}w("z","y","x",-1,-1,n,t,e,o,i,0),w("z","y","x",1,-1,n,t,-e,o,i,1),w("x","z","y",1,1,e,n,t,r,o,2),w("x","z","y",1,-1,e,n,-t,r,o,3),w("x","y","z",1,-1,e,t,n,r,i,4),w("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(new pr(d,1)),this.addAttribute("position",new pr(f,3)),this.addAttribute("normal",new pr(m,3)),this.addAttribute("uv",new pr(v,2))}function Lr(e,t,n,r){Sr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};for(var i=e/2,o=t/2,a=Math.floor(n)||1,s=Math.floor(r)||1,c=a+1,u=s+1,l=e/a,h=t/s,p=new Float32Array(c*u*3),d=new Float32Array(c*u*3),f=new Float32Array(c*u*2),m=0,v=0,g=0;g<u;g++)for(var y=g*h-o,_=0;_<c;_++){var x=_*l-i;p[m]=x,p[m+1]=-y,d[m+2]=1,f[v]=_/a,f[v+1]=1-g/s,m+=3,v+=2}m=0;var b=new(p.length/3>65535?Uint32Array:Uint16Array)(a*s*6);for(g=0;g<s;g++)for(_=0;_<a;_++){var w=_+c*g,E=_+c*(g+1),M=_+1+c*(g+1),T=_+1+c*g;b[m]=w,b[m+1]=E,b[m+2]=T,b[m+3]=E,b[m+4]=M,b[m+5]=T,m+=6}this.setIndex(new pr(b,1)),this.addAttribute("position",new pr(p,3)),this.addAttribute("normal",new pr(d,3)),this.addAttribute("uv",new pr(f,2))}function Cr(){sr.call(this),this.type="Camera",this.matrixWorldInverse=new It,this.projectionMatrix=new It}function Pr(e,t,n,r){Cr.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Or(e,t,n,r,i,o){Cr.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ir(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}Object.assign(Sr.prototype,r.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t){return!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new pr(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new Wn).getNormalMatrix(e).applyToVector3Array(n.array),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new It),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new It),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new It),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new It),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new It),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new sr),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new xr(3*t.vertices.length,3),r=new xr(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new xr(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new wr).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new pr(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new pr(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new pr(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new pr(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new pr(o,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var a=new(e.vertices.length>65535?Uint32Array:Uint16Array)(3*e.indices.length);this.setIndex(new pr(a,1).copyIndicesArray(e.indices))}for(var s in this.groups=e.groups,e.morphTargets){for(var c=[],u=e.morphTargets[s],l=0,h=u.length;l<h;l++){var p=u[l],d=new xr(3*p.length,3);c.push(d.copyVector3sArray(p))}this.morphAttributes[s]=c}if(e.skinIndices.length>0){var f=new xr(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var m=new xr(4*e.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new jn);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new jn,t=new Ot;return function(){null===this.boundingSphere&&(this.boundingSphere=new Vn);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new pr(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,c,u,l=t.normal.array,h=new Ot,p=new Ot,d=new Ot,f=new Ot,m=new Ot;if(e){var v=e.array;0===n.length&&this.addGroup(0,v.length);for(var g=0,y=n.length;g<y;++g){var _=n[g],x=_.start;for(o=x,a=x+_.count;o<a;o+=3)s=3*v[o+0],c=3*v[o+1],u=3*v[o+2],h.fromArray(r,s),p.fromArray(r,c),d.fromArray(r,u),f.subVectors(d,p),m.subVectors(h,p),f.cross(m),l[s]+=f.x,l[s+1]+=f.y,l[s+2]+=f.z,l[c]+=f.x,l[c+1]+=f.y,l[c+2]+=f.z,l[u]+=f.x,l[u+1]+=f.y,l[u+2]+=f.z}}else for(o=0,a=r.length;o<a;o+=9)h.fromArray(r,o),p.fromArray(r,o+3),d.fromArray(r,o+6),f.subVectors(d,p),m.subVectors(h,p),f.cross(m),l[o]=f.x,l[o+1]=f.y,l[o+2]=f.z,l[o+3]=f.x,l[o+4]=f.y,l[o+5]=f.z,l[o+6]=f.x,l[o+7]=f.y,l[o+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!1!==(e&&e.isBufferGeometry)){void 0===t&&(t=0);var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,c=o.itemSize*t;s<a.length;s++,c++)i[c]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,n,r,i=this.attributes.normal.array,o=0,a=i.length;o<a;o+=3)e=i[o],t=i[o+1],n=i[o+2],r=1/Math.sqrt(e*e+t*t+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Sr,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),c=0,u=0,l=0,h=t.length;l<h;l++){c=t[l]*a;for(var p=0;p<a;p++)s[u++]=o[c++]}e.addAttribute(r,new pr(s,a))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array),e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new Sr).copy(this)},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=e.groups,a=0,s=o.length;a<s;a++){var c=o[a];this.addGroup(c.start,c.count,c.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Sr.MaxIndex=65535,Ar.prototype=Object.assign(Object.create(sr.prototype),{constructor:Ar,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return sr.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,n=e.length;t<n;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){var e=new It,t=new Kn,n=new Vn,r=new Ot,i=new Ot,o=new Ot,a=new Ot,s=new Ot,c=new Ot,u=new _t,l=new _t,h=new _t,p=new Ot,d=new Ot,f=new Ot;function m(e,t,n,r,i,o,a){return ur.barycoordFromPoint(e,t,n,r,p),i.multiplyScalar(p.x),o.multiplyScalar(p.y),a.multiplyScalar(p.z),i.add(o).add(a),i.clone()}function v(e,t,n,r,i,o,a){var s=e.material;if(null===(s.side===_?n.intersectTriangle(o,i,r,!0,a):n.intersectTriangle(r,i,o,s.side!==x,a)))return null;f.copy(a),f.applyMatrix4(e.matrixWorld);var c=t.ray.origin.distanceTo(f);return c<t.near||c>t.far?null:{distance:c,point:f.clone(),object:e}}function g(e,t,n,a,s,c,p,f){r.fromArray(a,3*c),i.fromArray(a,3*p),o.fromArray(a,3*f);var g=v(e,t,n,r,i,o,d);return g&&(s&&(u.fromArray(s,2*c),l.fromArray(s,2*p),h.fromArray(s,2*f),g.uv=m(d,r,i,o,u,l,h)),g.face=new lr(c,p,f,ur.normal(r,i,o)),g.faceIndex=c),g}return function(p,f){var y,_,x=this.geometry,b=this.material,w=this.matrixWorld;if(void 0!==b&&(null===x.boundingSphere&&x.computeBoundingSphere(),n.copy(x.boundingSphere),n.applyMatrix4(w),!1!==p.ray.intersectsSphere(n)&&(e.getInverse(w),t.copy(p.ray).applyMatrix4(e),null===x.boundingBox||!1!==t.intersectsBox(x.boundingBox))))if(x.isBufferGeometry){var E,M,T,S=x.index,A=x.attributes,R=A.position.array;if(void 0!==A.uv&&(y=A.uv.array),null!==S)for(var L=S.array,C=0,P=L.length;C<P;C+=3)E=L[C],M=L[C+1],T=L[C+2],(_=g(this,p,t,R,y,E,M,T))&&(_.faceIndex=Math.floor(C/3),f.push(_));else for(C=0,P=R.length;C<P;C+=9)(_=g(this,p,t,R,y,E=C/3,M=E+1,T=E+2))&&(_.index=E,f.push(_))}else if(x.isGeometry){var O,I,N,D=b&&b.isMultiMaterial,U=!0===D?b.materials:null,k=x.vertices,B=x.faces,F=x.faceVertexUvs[0];F.length>0&&(y=F);for(var z=0,H=B.length;z<H;z++){var G=B[z],j=!0===D?U[G.materialIndex]:b;if(void 0!==j){if(O=k[G.a],I=k[G.b],N=k[G.c],!0===j.morphTargets){var V=x.morphTargets,W=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var q=0,X=V.length;q<X;q++){var Y=W[q];if(0!==Y){var K=V[q].vertices;r.addScaledVector(a.subVectors(K[G.a],O),Y),i.addScaledVector(s.subVectors(K[G.b],I),Y),o.addScaledVector(c.subVectors(K[G.c],N),Y)}}r.add(O),i.add(I),o.add(N),O=r,I=i,N=o}if(_=v(this,p,t,O,I,N,d)){if(y){var Z=y[z];u.copy(Z[0]),l.copy(Z[1]),h.copy(Z[2]),_.uv=m(d,O,I,N,u,l,h)}_.face=G,_.faceIndex=z,f.push(_)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Rr.prototype=Object.create(Sr.prototype),Rr.prototype.constructor=Rr,Lr.prototype=Object.create(Sr.prototype),Lr.prototype.constructor=Lr,Cr.prototype=Object.create(sr.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isCamera=!0,Cr.prototype.getWorldDirection=function(){var e=new Pt;return function(t){var n=t||new Ot;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),Cr.prototype.lookAt=function(){var e=new It;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),Cr.prototype.clone=function(){return(new this.constructor).copy(this)},Cr.prototype.copy=function(e){return sr.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},Pr.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Pr,isPerspectiveCamera:!0,copy:function(e){return Cr.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*yt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*yt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*yt.RAD2DEG*Math.atan(Math.tan(.5*yt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*yt.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==o){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makeFrustum(i,i+r,t-n,t,e,this.far)},toJSON:function(e){var t=sr.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Or.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Or,isOrthographicCamera:!0,copy:function(e){return Cr.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view){var c=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=l*(this.view.offsetX/c))+l*(this.view.width/c),s=(a-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=sr.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var Nr,Dr,Ur=0;function kr(e){switch(e){case ut:return["Linear","( value )"];case lt:return["sRGB","( value )"];case pt:return["RGBE","( value )"];case dt:return["RGBM","( value, 7.0 )"];case ft:return["RGBM","( value, 16.0 )"];case mt:return["RGBD","( value, 256.0 )"];case ht:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Br(e,t){var n=kr(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Fr(e){return""!==e}function zr(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Hr(e){return e.replace(/#include +<([\w\d.]+)>/g,function(e,t){var n=xn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Hr(n)})}function Gr(e){return e.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function jr(e,t){var n=[],r={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},i=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];function o(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=ut,n===ut&&t&&(n=ht),n}this.getParameters=function(n,i,a,s,c,u){var l=r[n.type],h=function(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var n=t.maxVertexUniforms,r=Math.floor((n-20)/4);return void 0!==e&&e&&e.isSkinnedMesh&&(r=Math.min(e.skeleton.bones.length,r))<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)"),r}(u),p=e.getPrecision();null!==n.precision&&(p=t.getMaxPrecision(n.precision))!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",p,"instead.");var d=e.getCurrentRenderTarget();return{shaderID:l,precision:p,supportsVertexTextures:t.vertexTextures,outputEncoding:o(d?d.texture:null,e.gammaOutput),map:!!n.map,mapEncoding:o(n.map,e.gammaInput),envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,envMapEncoding:o(n.envMap,e.gammaInput),envMapCubeUV:!!n.envMap&&(n.envMap.mapping===ve||n.envMap.mapping===ge),lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:o(n.emissiveMap,e.gammaInput),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,combine:n.combine,vertexColors:n.vertexColors,fog:!!a,useFog:n.fog,fogExp:a&&a.isFogExp2,flatShading:n.shading===b,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:n.skinning,maxBones:h,useVertexTexture:t.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:s,numClipIntersection:c,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&i.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===x,flipSided:n.side===_,depthPacking:void 0!==n.depthPacking&&n.depthPacking}},this.getProgramCode=function(e,t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var o=0;o<i.length;o++)n.push(t[i[o]]);return n.join()},this.acquireProgram=function(t,r,i){for(var o,a=0,s=n.length;a<s;a++){var c=n[a];if(c.code===i){++(o=c).usedTimes;break}}return void 0===o&&(o=new function(e,t,n,r){var i=e.context,o=n.extensions,a=n.defines,s=n.__webglShader.vertexShader,c=n.__webglShader.fragmentShader,u="SHADOWMAP_TYPE_BASIC";r.shadowMapType===v?u="SHADOWMAP_TYPE_PCF":r.shadowMapType===g&&(u="SHADOWMAP_TYPE_PCF_SOFT");var l="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case he:case pe:l="ENVMAP_TYPE_CUBE";break;case ve:case ge:l="ENVMAP_TYPE_CUBE_UV";break;case de:case fe:l="ENVMAP_TYPE_EQUIREC";break;case me:l="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case pe:case fe:h="ENVMAP_MODE_REFRACTION"}switch(n.combine){case re:p="ENVMAP_BLENDING_MULTIPLY";break;case ie:p="ENVMAP_BLENDING_MIX";break;case oe:p="ENVMAP_BLENDING_ADD"}}var d,f,m,y,_,x=e.gammaFactor>0?e.gammaFactor:1,b=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fr).join("\n")}(o,r,e.extensions),w=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),E=i.createProgram();n.isRawShaderMaterial?(d=[w,"\n"].filter(Fr).join("\n"),f=[b,w,"\n"].filter(Fr).join("\n")):(d=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,w,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+x,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Fr).join("\n"),f=[b,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,w,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+x,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+l:"",r.envMap?"#define "+h:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==ae?"#define TONE_MAPPING":"",r.toneMapping!==ae?xn.tonemapping_pars_fragment:"",r.toneMapping!==ae?function(e,t){var n;switch(t){case se:n="Linear";break;case ce:n="Reinhard";break;case ue:n="Uncharted2";break;case le:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 toneMapping( vec3 color ) { return "+n+"ToneMapping( color ); }"}(0,r.toneMapping):"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?xn.encodings_pars_fragment:"",r.mapEncoding?Br("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?Br("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Br("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?(m="linearToOutputTexel",y=r.outputEncoding,_=kr(y),"vec4 "+m+"( vec4 value ) { return LinearTo"+_[0]+_[1]+"; }"):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Fr).join("\n")),s=zr(s=Hr(s),r),c=zr(c=Hr(c),r),n.isShaderMaterial||(s=Gr(s),c=Gr(c));var M=d+s,T=f+c,S=Ir(i,i.VERTEX_SHADER,M),A=Ir(i,i.FRAGMENT_SHADER,T);i.attachShader(E,S),i.attachShader(E,A),void 0!==n.index0AttributeName?i.bindAttribLocation(E,0,n.index0AttributeName):!0===r.morphTargets&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E);var R,L,C=i.getProgramInfoLog(E),P=i.getShaderInfoLog(S),O=i.getShaderInfoLog(A),I=!0,N=!0;return!1===i.getProgramParameter(E,i.LINK_STATUS)?(I=!1,console.error("THREE.WebGLProgram: shader error: ",i.getError(),"gl.VALIDATE_STATUS",i.getProgramParameter(E,i.VALIDATE_STATUS),"gl.getProgramInfoLog",C,P,O)):""!==C?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):""!==P&&""!==O||(N=!1),N&&(this.diagnostics={runnable:I,material:n,programLog:C,vertexShader:{log:P,prefix:d},fragmentShader:{log:O,prefix:f}}),i.deleteShader(S),i.deleteShader(A),this.getUniforms=function(){return void 0===R&&(R=new yn(i,E,e)),R},this.getAttributes=function(){return void 0===L&&(L=function(e,t,n){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=e.getActiveAttrib(t,o).name;r[a]=e.getAttribLocation(t,a)}return r}(i,E)),L},this.destroy=function(){i.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Ur++,this.code=t,this.usedTimes=1,this.program=E,this.vertexShader=S,this.fragmentShader=A,this}(e,i,t,r),n.push(o)),o},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function Vr(e,t,n){var r=new function(e,t,n){var r={};function i(e){var a=e.target,s=r[a.id];null!==s.index&&o(s.index),function(e){for(var t in e)o(e[t])}(s.attributes),a.removeEventListener("dispose",i),delete r[a.id];var c=t.get(a);c.wireframe&&o(c.wireframe),t.delete(a);var u=t.get(s);u.wireframe&&o(u.wireframe),t.delete(s),n.memory.geometries--}function o(n){var r=function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}(n);void 0!==r&&(e.deleteBuffer(r),function(e){e.isInterleavedBufferAttribute?t.delete(e.data):t.delete(e)}(n))}return{get:function(e){var t,o=e.geometry;return void 0!==r[o.id]?r[o.id]:(o.addEventListener("dispose",i),o.isBufferGeometry?t=o:o.isGeometry&&(void 0===o._bufferGeometry&&(o._bufferGeometry=(new Sr).setFromObject(e)),t=o._bufferGeometry),r[o.id]=t,n.memory.geometries++,t)}}}(e,t,n);function i(n,r){var i=n.isInterleavedBufferAttribute?n.data:n,o=t.get(i);void 0===o.__webglBuffer?function(t,n,r){t.__webglBuffer=e.createBuffer(),e.bindBuffer(r,t.__webglBuffer);var i=n.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(r,n.array,i);var o=e.FLOAT,a=n.array;a instanceof Float32Array?o=e.FLOAT:a instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):a instanceof Uint16Array?o=e.UNSIGNED_SHORT:a instanceof Int16Array?o=e.SHORT:a instanceof Uint32Array?o=e.UNSIGNED_INT:a instanceof Int32Array?o=e.INT:a instanceof Int8Array?o=e.BYTE:a instanceof Uint8Array&&(o=e.UNSIGNED_BYTE),t.bytesPerElement=a.BYTES_PER_ELEMENT,t.type=o,t.version=n.version,n.onUploadCallback()}(o,i,r):o.version!==i.version&&function(t,n,r){e.bindBuffer(r,t.__webglBuffer),!1===n.dynamic?e.bufferData(r,n.array,e.STATIC_DRAW):-1===n.updateRange.count?e.bufferSubData(r,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),t.version=n.version}(o,i,r)}return{getAttributeBuffer:function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer},getAttributeProperties:function(e){return e.isInterleavedBufferAttribute?t.get(e.data):t.get(e)},getWireframeAttribute:function(n){var r=t.get(n);if(void 0!==r.wireframe)return r.wireframe;var o,a=[],s=n.index,c=n.attributes,u=c.position;if(null!==s)for(var l=0,h=(o=s.array).length;l<h;l+=3){var p=o[l+0],d=o[l+1],f=o[l+2];a.push(p,d,d,f,f,p)}else for(l=0,h=(o=c.position.array).length/3-1;l<h;l+=3)p=l+0,d=l+1,f=l+2,a.push(p,d,d,f,f,p);var m=new pr(new(u.count>65535?Uint32Array:Uint16Array)(a),1);return i(m,e.ELEMENT_ARRAY_BUFFER),r.wireframe=m,m},update:function(t){var n=r.get(t);t.geometry.isGeometry&&n.updateFromObject(t);var o=n.index,a=n.attributes;for(var s in null!==o&&i(o,e.ELEMENT_ARRAY_BUFFER),a)i(a[s],e.ARRAY_BUFFER);var c=n.morphAttributes;for(var s in c)for(var u=c[s],l=0,h=u.length;l<h;l++)i(u[l],e.ARRAY_BUFFER);return n}}}function Wr(e,t,n,r,i,o,a){var s=a.memory,c="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;function u(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function l(e){return yt.isPowerOfTwo(e.width)&&yt.isPowerOfTwo(e.height)}function h(t){return t===Ee||t===Me||t===Te?e.NEAREST:e.LINEAR}function p(t){var n=t.target;n.removeEventListener("dispose",p),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.delete(t)}(n),s.textures--}function d(t){var n=t.target;n.removeEventListener("dispose",d),function(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.delete(t.texture),r.delete(t)}}(n),s.textures--}function f(t,a){var h=r.get(t);if(t.version>0&&h.__version!==t.version){var d=t.image;if(void 0===d)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==d.complete)return void function(t,r,a){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),s.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var h=u(r.image,i.maxTextureSize);(function(e){return e.wrapS!==xe||e.wrapT!==xe||e.minFilter!==Ee&&e.minFilter!==Se})(r)&&!1===l(h)&&(h=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=yt.nearestPowerOfTwo(e.width),t.height=yt.nearestPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}(h));var d=l(h),f=o(r.format),v=o(r.type);m(e.TEXTURE_2D,r,d);var g,y=r.mipmaps;if(r.isDepthTexture){var _=e.DEPTH_COMPONENT;if(r.type===Ue){if(!c)throw new Error("Float Depth Texture only supported in WebGL2.0");_=e.DEPTH_COMPONENT32F}else c&&(_=e.DEPTH_COMPONENT16);r.format===Xe&&_===e.DEPTH_COMPONENT&&r.type!==Ie&&r.type!==De&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ie,v=o(r.type)),r.format===Ye&&(_=e.DEPTH_STENCIL,r.type!==He&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=He,v=o(r.type))),n.texImage2D(e.TEXTURE_2D,0,_,h.width,h.height,0,f,v,null)}else if(r.isDataTexture)if(y.length>0&&d){for(var x=0,b=y.length;x<b;x++)g=y[x],n.texImage2D(e.TEXTURE_2D,x,f,g.width,g.height,0,f,v,g.data);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,f,h.width,h.height,0,f,v,h.data);else if(r.isCompressedTexture)for(x=0,b=y.length;x<b;x++)g=y[x],r.format!==Ve&&r.format!==je?n.getCompressedTextureFormats().indexOf(f)>-1?n.compressedTexImage2D(e.TEXTURE_2D,x,f,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,x,f,g.width,g.height,0,f,v,g.data);else if(y.length>0&&d){for(x=0,b=y.length;x<b;x++)g=y[x],n.texImage2D(e.TEXTURE_2D,x,f,f,v,g);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,f,f,v,h);r.generateMipmaps&&d&&e.generateMipmap(e.TEXTURE_2D),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(h,t,a);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_2D,h.__webglTexture)}function m(n,a,s){var c;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===xe&&a.wrapT===xe||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,h(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,h(a.minFilter)),a.minFilter!==Ee&&a.minFilter!==Se&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),c=t.get("EXT_texture_filter_anisotropic")){if(a.type===Ue&&null===t.get("OES_texture_float_linear"))return;if(a.type===ke&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function v(t,i,a,s){var c=o(i.texture.format),u=o(i.texture.type);n.texImage2D(s,0,c,i.width,i.height,0,c,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function g(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.setTexture2D=f,this.setTextureCube=function(t,a){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",p),c.__image__webglTextureCube=e.createTexture(),s.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var h=t&&t.isCompressedTexture,d=t.image[0]&&t.image[0].isDataTexture,f=[],v=0;v<6;v++)f[v]=h||d?d?t.image[v].image:t.image[v]:u(t.image[v],i.maxCubemapSize);var g=l(f[0]),y=o(t.format),_=o(t.type);for(m(e.TEXTURE_CUBE_MAP,t,g),v=0;v<6;v++)if(h)for(var x,b=f[v].mipmaps,w=0,E=b.length;w<E;w++)x=b[w],t.format!==Ve&&t.format!==je?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,w,y,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,w,y,x.width,x.height,0,y,_,x.data);else d?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,y,f[v].width,f[v].height,0,y,_,f[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,y,y,_,f[v]);t.generateMipmaps&&g&&e.generateMipmap(e.TEXTURE_CUBE_MAP),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",d),o.__webglTexture=e.createTexture(),s.textures++;var a=!0===t.isWebGLRenderTargetCube,c=l(t);if(a){i.__webglFramebuffer=[];for(var u=0;u<6;u++)i.__webglFramebuffer[u]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(a){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),m(e.TEXTURE_CUBE_MAP,t.texture,c),u=0;u<6;u++)v(i.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);t.texture.generateMipmaps&&c&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),m(e.TEXTURE_2D,t.texture,c),v(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&c&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&function(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),f(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Xe)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==Ye)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),g(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),g(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(i.generateMipmaps&&l(t)&&i.minFilter!==Ee&&i.minFilter!==Se){var o=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),e.generateMipmap(o),n.bindTexture(o,null)}}}function qr(e){console.log("THREE.WebGLRenderer",l);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=[],h=[],v=-1,g=[],y=-1,w=new Float32Array(8),M=[],T=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=se,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var O,re=this,ie=null,oe=null,ae=null,ce=-1,ue="",le=null,he=new Rt,pe=null,de=new Rt,fe=0,me=new bn(0),ve=0,ge=t.width,ye=t.height,we=1,Le=new Rt(0,0,ge,ye),it=!1,ot=new Rt(0,0,ge,ye),ut=new Xn,lt=new function(){var e=this,t=null,n=0,r=!1,i=!1,o=new qn,a=new Wn,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,r,i){var c=null!==t?t.length:0,u=null;if(0!==c){if(u=s.value,!0!==i||null===u){var l=r+4*c,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===u||u.length<l)&&(u=new Float32Array(l));for(var p=0,d=r;p!==c;++p,d+=4)o.copy(t[p]).applyMatrix4(h,a),o.normal.toArray(u,d),u[d+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=c,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=u(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,c()},this.setState=function(e,o,a,l,h,p){if(!r||null===e||0===e.length||i&&!a)i?u(null):c();else{var d=i?0:n,f=4*d,m=h.clippingState||null;s.value=m,m=u(e,l,f,p);for(var v=0;v!==f;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}},ht=!1,pt=!1,dt=new Vn,ft=new It,mt=new Ot,vt=new It,gt=new It,yt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},xt={calls:0,vertices:0,faces:0,points:0};this.info={render:xt,memory:{geometries:0,textures:0},programs:null};try{var bt={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c};if(null===(O=n||t.getContext("webgl",bt)||t.getContext("experimental-webgl",bt)))throw null!==t.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===O.getShaderPrecisionFormat&&(O.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),t.addEventListener("webglcontextlost",Xt,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var wt=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}(O);wt.get("WEBGL_depth_texture"),wt.get("OES_texture_float"),wt.get("OES_texture_float_linear"),wt.get("OES_texture_half_float"),wt.get("OES_texture_half_float_linear"),wt.get("OES_standard_derivatives"),wt.get("ANGLE_instanced_arrays"),wt.get("OES_element_index_uint")&&(Sr.MaxIndex=4294967296);var Et=new function(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==n.precision?n.precision:"highp",a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===n.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),d=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),f=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=u>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:s,maxTextures:c,maxVertexTextures:u,maxTextureSize:l,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:d,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g}}(O,wt,e),Mt=new function(e,t,n){var r=new function(){var t=!1,n=new Rt,r=null,i=new Rt;return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(0,0,0,1)}}},i=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?V(e.DEPTH_TEST):W(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case K:e.depthFunc(e.NEVER);break;case Z:e.depthFunc(e.ALWAYS);break;case J:e.depthFunc(e.LESS);break;case $:e.depthFunc(e.LEQUAL);break;case Q:e.depthFunc(e.EQUAL);break;case ee:e.depthFunc(e.GEQUAL);break;case te:e.depthFunc(e.GREATER);break;case ne:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null;return{setTest:function(t){t?V(e.STENCIL_TEST):W(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&c===r||(e.stencilOp(t,n,r),a=t,s=n,c=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null}}},a=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(a),c=new Uint8Array(a),u=new Uint8Array(a),l={},h=null,m=null,v=null,g=null,y=null,_=null,x=null,b=null,w=!1,E=null,M=null,T=null,O=null,I=null,N=null,D=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),U=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),k=parseFloat(U)>=1,B=null,F={},z=new Rt,H=new Rt;function G(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var j={};function V(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function W(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}function q(t,r,i,o,a,s,c,u){t!==S?V(e.BLEND):W(e.BLEND),t===m&&u===w||(t===R?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===L?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===C?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),m=t,w=u),t===P?(a=a||r,s=s||i,c=c||o,r===v&&a===_||(e.blendEquationSeparate(n(r),n(a)),v=r,_=a),i===g&&o===y&&s===x&&c===b||(e.blendFuncSeparate(n(i),n(o),n(s),n(c)),g=i,y=o,x=s,b=c)):(v=null,g=null,y=null,_=null,x=null,b=null)}function X(e){i.setFunc(e)}function Y(t){E!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),E=t)}function re(t){t!==p?(V(e.CULL_FACE),t!==M&&(t===d?e.cullFace(e.BACK):t===f?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):W(e.CULL_FACE),M=t}function ie(t){void 0===t&&(t=e.TEXTURE0+D-1),B!==t&&(e.activeTexture(t),B=t)}return j[e.TEXTURE_2D]=G(e.TEXTURE_2D,e.TEXTURE_2D,1),j[e.TEXTURE_CUBE_MAP]=G(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:r,depth:i,stencil:o},init:function(){r.setClear(0,0,0,1),i.setClear(1),o.setClear(0),V(e.DEPTH_TEST),X($),Y(!1),re(d),V(e.CULL_FACE),V(e.BLEND),q(A)},initAttributes:function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function(n){s[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),0!==u[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),u[n]=0)},enableAttributeAndDivisor:function(t,n,r){s[t]=1,0===c[t]&&(e.enableVertexAttribArray(t),c[t]=1),u[t]!==n&&(r.vertexAttribDivisorANGLE(t,n),u[t]=n)},disableUnusedAttributes:function(){for(var t=0,n=c.length;t!==n;++t)c[t]!==s[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:V,disable:W,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)h.push(n[r]);return h},setBlending:q,setColorWrite:function(e){r.setMask(e)},setDepthTest:function(e){i.setTest(e)},setDepthWrite:function(e){i.setMask(e)},setDepthFunc:X,setStencilTest:function(e){o.setTest(e)},setStencilWrite:function(e){o.setMask(e)},setStencilFunc:function(e,t,n){o.setFunc(e,t,n)},setStencilOp:function(e,t,n){o.setOp(e,t,n)},setFlipSided:Y,setCullFace:re,setLineWidth:function(t){t!==T&&(k&&e.lineWidth(t),T=t)},setPolygonOffset:function(t,n,r){t?(V(e.POLYGON_OFFSET_FILL),O===n&&I===r||(e.polygonOffset(n,r),O=n,I=r)):W(e.POLYGON_OFFSET_FILL)},getScissorTest:function(){return N},setScissorTest:function(t){N=t,t?V(e.SCISSOR_TEST):W(e.SCISSOR_TEST)},activeTexture:ie,bindTexture:function(t,n){null===B&&ie();var r=F[B];void 0===r&&(r={type:void 0,texture:void 0},F[B]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||j[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),z.copy(t))},viewport:function(t){!1===H.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),H.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);l={},h=null,B=null,F={},m=null,E=null,M=null,r.reset(),i.reset(),o.reset()}}}(O,wt,cn),Tt=new function(){var e={};return{get:function(t){var n=t.uuid,r=e[n];return void 0===r&&(r={},e[n]=r),r},delete:function(t){delete e[t.uuid]},clear:function(){e={}}}},St=new Wr(O,wt,Mt,Tt,Et,cn,this.info),At=new Vr(O,Tt,this.info),Lt=new jr(this,Et),Ct=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Ot,color:new bn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"SpotLight":n={position:new Ot,direction:new Ot,color:new bn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"PointLight":n={position:new Ot,color:new bn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"HemisphereLight":n={direction:new Ot,skyColor:new bn,groundColor:new bn};break;case"RectAreaLight":n={color:new bn,position:new Ot,halfWidth:new Ot,halfHeight:new Ot}}return e[t.id]=n,n}}};this.info.programs=Lt.programs;var Pt=new function(e,t,n){var r;return{setMode:function(e){r=e},render:function(t,i){e.drawArrays(r,t,i),n.calls++,n.vertices+=i,r===e.TRIANGLES&&(n.faces+=i/3)},renderInstances:function(i){var o=t.get("ANGLE_instanced_arrays");if(null!==o){var a=i.attributes.position,s=0;a.isInterleavedBufferAttribute?(s=a.data.count,o.drawArraysInstancedANGLE(r,0,s,i.maxInstancedCount)):(s=a.count,o.drawArraysInstancedANGLE(r,0,s,i.maxInstancedCount)),n.calls++,n.vertices+=s*i.maxInstancedCount,r===e.TRIANGLES&&(n.faces+=i.maxInstancedCount*s/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}(O,wt,xt),Nt=new function(e,t,n){var r,i,o;return{setMode:function(e){r=e},setIndex:function(n){n.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(i=e.UNSIGNED_INT,o=4):n.array instanceof Uint16Array?(i=e.UNSIGNED_SHORT,o=2):(i=e.UNSIGNED_BYTE,o=1)},render:function(t,a){e.drawElements(r,a,i,t*o),n.calls++,n.vertices+=a,r===e.TRIANGLES&&(n.faces+=a/3)},renderInstances:function(a,s,c){var u=t.get("ANGLE_instanced_arrays");null!==u?(u.drawElementsInstancedANGLE(r,c,i,s*o,a.maxInstancedCount),n.calls++,n.vertices+=c*a.maxInstancedCount,r===e.TRIANGLES&&(n.faces+=a.maxInstancedCount*c/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}(O,wt,xt),Dt=new Or(-1,1,1,-1,0,1),Ut=new Pr,kt=new Ar(new Lr(2,2),new hr({depthTest:!1,depthWrite:!1,fog:!1})),Bt=Tn.cube,Ft=new Ar(new Rr(5,5,5),new Hn({uniforms:Bt.uniforms,vertexShader:Bt.vertexShader,fragmentShader:Bt.fragmentShader,side:_,depthTest:!1,depthWrite:!1,fog:!1}));function zt(){return null===oe?we:1}function Ht(){Mt.init(),Mt.scissor(he.copy(Le).multiplyScalar(we)),Mt.viewport(de.copy(ot).multiplyScalar(we)),Mt.buffers.color.setClear(me.r,me.g,me.b,ve,s)}function Gt(){ie=null,le=null,ue="",ce=-1,Mt.reset()}Ht(),this.context=O,this.capabilities=Et,this.extensions=wt,this.properties=Tt,this.state=Mt;var jt=new Yn(this,yt,At,Et);this.shadowMap=jt;var Vt,Wt=new An(this,M),qt=new function(e,t){var n,r,i,o,a,s,c,u,l=e.context,h=e.state;function p(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),p=new Uint16Array([0,1,2,0,2,3]);n=l.createBuffer(),r=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,n),l.bufferData(l.ARRAY_BUFFER,t,l.STATIC_DRAW),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),l.bufferData(l.ELEMENT_ARRAY_BUFFER,p,l.STATIC_DRAW),c=l.createTexture(),u=l.createTexture(),h.bindTexture(l.TEXTURE_2D,c),l.texImage2D(l.TEXTURE_2D,0,l.RGB,16,16,0,l.RGB,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),h.bindTexture(l.TEXTURE_2D,u),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,16,16,0,l.RGBA,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),i={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},o=function(t){var n=l.createProgram(),r=l.createShader(l.FRAGMENT_SHADER),i=l.createShader(l.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return l.shaderSource(r,o+t.fragmentShader),l.shaderSource(i,o+t.vertexShader),l.compileShader(r),l.compileShader(i),l.attachShader(n,r),l.attachShader(n,i),l.linkProgram(n),n}(i),a={vertex:l.getAttribLocation(o,"position"),uv:l.getAttribLocation(o,"uv")},s={renderType:l.getUniformLocation(o,"renderType"),map:l.getUniformLocation(o,"map"),occlusionMap:l.getUniformLocation(o,"occlusionMap"),opacity:l.getUniformLocation(o,"opacity"),color:l.getUniformLocation(o,"color"),scale:l.getUniformLocation(o,"scale"),rotation:l.getUniformLocation(o,"rotation"),screenPosition:l.getUniformLocation(o,"screenPosition")}}this.render=function(i,d,f){if(0!==t.length){var m=new Ot,v=f.w/f.z,g=.5*f.z,y=.5*f.w,_=16/f.w,x=new _t(_*v,_),b=new Ot(1,1,0),w=new _t(1,1),E=new Sn;E.min.set(f.x,f.y),E.max.set(f.x+(f.z-16),f.y+(f.w-16)),void 0===o&&p(),l.useProgram(o),h.initAttributes(),h.enableAttribute(a.vertex),h.enableAttribute(a.uv),h.disableUnusedAttributes(),l.uniform1i(s.occlusionMap,0),l.uniform1i(s.map,1),l.bindBuffer(l.ARRAY_BUFFER,n),l.vertexAttribPointer(a.vertex,2,l.FLOAT,!1,16,0),l.vertexAttribPointer(a.uv,2,l.FLOAT,!1,16,8),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),h.disable(l.CULL_FACE),h.setDepthWrite(!1);for(var M=0,T=t.length;M<T;M++){_=16/f.w,x.set(_*v,_);var S=t[M];if(m.set(S.matrixWorld.elements[12],S.matrixWorld.elements[13],S.matrixWorld.elements[14]),m.applyMatrix4(d.matrixWorldInverse),m.applyProjection(d.projectionMatrix),b.copy(m),w.x=f.x+b.x*g+g-8,w.y=f.y+b.y*y+y-8,!0===E.containsPoint(w)){h.activeTexture(l.TEXTURE0),h.bindTexture(l.TEXTURE_2D,null),h.activeTexture(l.TEXTURE1),h.bindTexture(l.TEXTURE_2D,c),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGB,w.x,w.y,16,16,0),l.uniform1i(s.renderType,0),l.uniform2f(s.scale,x.x,x.y),l.uniform3f(s.screenPosition,b.x,b.y,b.z),h.disable(l.BLEND),h.enable(l.DEPTH_TEST),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0),h.activeTexture(l.TEXTURE0),h.bindTexture(l.TEXTURE_2D,u),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,w.x,w.y,16,16,0),l.uniform1i(s.renderType,1),h.disable(l.DEPTH_TEST),h.activeTexture(l.TEXTURE1),h.bindTexture(l.TEXTURE_2D,c),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0),S.positionScreen.copy(b),S.customUpdateCallback?S.customUpdateCallback(S):S.updateLensFlares(),l.uniform1i(s.renderType,2),h.enable(l.BLEND);for(var A=0,R=S.lensFlares.length;A<R;A++){var L=S.lensFlares[A];L.opacity>.001&&L.scale>.001&&(b.x=L.x,b.y=L.y,b.z=L.z,_=L.size*L.scale/f.w,x.x=_*v,x.y=_,l.uniform3f(s.screenPosition,b.x,b.y,b.z),l.uniform2f(s.scale,x.x,x.y),l.uniform1f(s.rotation,L.rotation),l.uniform1f(s.opacity,L.opacity),l.uniform3f(s.color,L.color.r,L.color.g,L.color.b),h.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),e.setTexture2D(L.texture,1),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0))}}}h.enable(l.CULL_FACE),h.enable(l.DEPTH_TEST),h.setDepthWrite(!0),e.resetGLState()}}}(this,T);function Xt(e){e.preventDefault(),Gt(),Ht(),Tt.clear()}function Yt(e){var t=e.target;t.removeEventListener("dispose",Yt),function(e){Kt(e),Tt.delete(e)}(t)}function Kt(e){var t=Tt.get(e).program;e.program=void 0,void 0!==t&&Lt.releaseProgram(t)}function Zt(e,t){return Math.abs(t[0])-Math.abs(e[0])}function Jt(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function $t(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Qt(e,t,n,r,i){var o,a;n.transparent?(o=g,a=++y):(o=h,a=++v);var s=o[a];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=n,s.z=mt.z,s.group=i):(s={id:e.id,object:e,geometry:t,material:n,z:mt.z,group:i},o.push(s))}function en(e){if(!ut.intersectsSphere(e))return!1;var t=lt.numPlanes;if(0===t)return!0;var n=re.clippingPlanes,r=e.center,i=-e.radius,o=0;do{if(n[o].distanceToPoint(r)<i)return!1}while(++o!==t);return!0}function tn(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,u=void 0===r?a.material:r,l=a.group;if(s.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(re,t,n,c,u,l),s.isImmediateRenderObject){nn(u);var h=rn(n,t.fog,u,s);ue="",s.render(function(e){re.renderBufferImmediate(e,h,u)})}else re.renderBufferDirect(n,t.fog,c,u,s,l);s.onAfterRender(re,t,n,c,u,l)}}function nn(e){e.side===x?Mt.disable(O.CULL_FACE):Mt.enable(O.CULL_FACE),Mt.setFlipSided(e.side===_),!0===e.transparent?Mt.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):Mt.setBlending(S),Mt.setDepthFunc(e.depthFunc),Mt.setDepthTest(e.depthTest),Mt.setDepthWrite(e.depthWrite),Mt.setColorWrite(e.colorWrite),Mt.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function rn(e,t,n,r){fe=0;var i=Tt.get(n);if(ht&&(pt||e!==le)){var o=e===le&&n.id===ce;lt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,o)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsHash!==yt.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===lt.numPlanes&&i.numIntersection===lt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(function(e,t,n){var r=Tt.get(e),i=Lt.getParameters(e,yt,t,lt.numPlanes,lt.numIntersection,n),o=Lt.getProgramCode(e,i),a=r.program,s=!0;if(void 0===a)e.addEventListener("dispose",Yt);else if(a.code!==o)Kt(e);else{if(void 0!==i.shaderID)return;s=!1}if(s){if(i.shaderID){var c=Tn[i.shaderID];r.__webglShader={name:e.type,uniforms:_n.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else r.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=r.__webglShader,a=Lt.acquireProgram(e,i,o),r.program=a,e.program=a}var u=a.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var l=0;l<re.maxMorphTargets;l++)u["morphTarget"+l]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,l=0;l<re.maxMorphNormals;l++)u["morphNormal"+l]>=0&&e.numSupportedMorphNormals++;var h=r.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=lt.numPlanes,r.numIntersection=lt.numIntersection,h.clippingPlanes=lt.uniform),r.fog=t,r.lightsHash=yt.hash,e.lights&&(h.ambientLightColor.value=yt.ambient,h.directionalLights.value=yt.directional,h.spotLights.value=yt.spot,h.rectAreaLights.value=yt.rectArea,h.pointLights.value=yt.point,h.hemisphereLights.value=yt.hemi,h.directionalShadowMap.value=yt.directionalShadowMap,h.directionalShadowMatrix.value=yt.directionalShadowMatrix,h.spotShadowMap.value=yt.spotShadowMap,h.spotShadowMatrix.value=yt.spotShadowMatrix,h.pointShadowMap.value=yt.pointShadowMap,h.pointShadowMatrix.value=yt.pointShadowMatrix);var p=r.program.getUniforms(),d=yn.seqWithValue(p.seq,h);r.uniformsList=d}(n,t,r),n.needsUpdate=!1);var a,s,c=!1,u=!1,l=!1,h=i.program,p=h.getUniforms(),d=i.__webglShader.uniforms;if(h.id!==ie&&(O.useProgram(h.program),ie=h.id,c=!0,u=!0,l=!0),n.id!==ce&&(ce=n.id,u=!0),c||e!==le){if(p.set(O,e,"projectionMatrix"),Et.logarithmicDepthBuffer&&p.setValue(O,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==le&&(le=e,u=!0,l=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var f=p.map.cameraPosition;void 0!==f&&f.setValue(O,mt.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&p.setValue(O,"viewMatrix",e.matrixWorldInverse),p.set(O,re,"toneMappingExposure"),p.set(O,re,"toneMappingWhitePoint")}if(n.skinning){p.setOptional(O,r,"bindMatrix"),p.setOptional(O,r,"bindMatrixInverse");var m=r.skeleton;m&&(Et.floatVertexTextures&&m.useVertexTexture?(p.set(O,m,"boneTexture"),p.set(O,m,"boneTextureWidth"),p.set(O,m,"boneTextureHeight")):p.setOptional(O,m,"boneMatrices"))}return u&&(n.lights&&(s=l,(a=d).ambientLightColor.needsUpdate=s,a.directionalLights.needsUpdate=s,a.pointLights.needsUpdate=s,a.spotLights.needsUpdate=s,a.rectAreaLights.needsUpdate=s,a.hemisphereLights.needsUpdate=s),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(d,t),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshNormalMaterial||n.isMeshDepthMaterial)&&function(e,t){var n;if(e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var r=n.offset,i=n.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}(d,n),n.isLineBasicMaterial?on(d,n):n.isLineDashedMaterial?(on(d,n),function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(d,n)):n.isPointsMaterial?function(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*we,e.scale.value=.5*ye,e.map.value=t.map,null!==t.map){var n=t.map.offset,r=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}(d,n):n.isMeshLambertMaterial?function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(d,n):n.isMeshToonMaterial?function(e,t){an(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(d,n):n.isMeshPhongMaterial?an(d,n):n.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,sn(e,t)}(d,n):n.isMeshStandardMaterial?sn(d,n):n.isMeshDepthMaterial?n.displacementMap&&(d.displacementMap.value=n.displacementMap,d.displacementScale.value=n.displacementScale,d.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(d,n),void 0!==d.ltcMat&&(d.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==d.ltcMag&&(d.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),yn.upload(O,i.uniformsList,d,re)),p.set(O,r,"modelViewMatrix"),p.set(O,r,"normalMatrix"),p.setValue(O,"modelMatrix",r.matrixWorld),h}function on(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function an(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function sn(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function cn(e){var t;if(e===_e)return O.REPEAT;if(e===xe)return O.CLAMP_TO_EDGE;if(e===be)return O.MIRRORED_REPEAT;if(e===Ee)return O.NEAREST;if(e===Me)return O.NEAREST_MIPMAP_NEAREST;if(e===Te)return O.NEAREST_MIPMAP_LINEAR;if(e===Se)return O.LINEAR;if(e===Ae)return O.LINEAR_MIPMAP_NEAREST;if(e===Re)return O.LINEAR_MIPMAP_LINEAR;if(e===Ce)return O.UNSIGNED_BYTE;if(e===Be)return O.UNSIGNED_SHORT_4_4_4_4;if(e===Fe)return O.UNSIGNED_SHORT_5_5_5_1;if(e===ze)return O.UNSIGNED_SHORT_5_6_5;if(e===Pe)return O.BYTE;if(e===Oe)return O.SHORT;if(e===Ie)return O.UNSIGNED_SHORT;if(e===Ne)return O.INT;if(e===De)return O.UNSIGNED_INT;if(e===Ue)return O.FLOAT;if(e===ke&&null!==(t=wt.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===Ge)return O.ALPHA;if(e===je)return O.RGB;if(e===Ve)return O.RGBA;if(e===We)return O.LUMINANCE;if(e===qe)return O.LUMINANCE_ALPHA;if(e===Xe)return O.DEPTH_COMPONENT;if(e===Ye)return O.DEPTH_STENCIL;if(e===I)return O.FUNC_ADD;if(e===N)return O.FUNC_SUBTRACT;if(e===D)return O.FUNC_REVERSE_SUBTRACT;if(e===B)return O.ZERO;if(e===F)return O.ONE;if(e===z)return O.SRC_COLOR;if(e===H)return O.ONE_MINUS_SRC_COLOR;if(e===G)return O.SRC_ALPHA;if(e===j)return O.ONE_MINUS_SRC_ALPHA;if(e===V)return O.DST_ALPHA;if(e===W)return O.ONE_MINUS_DST_ALPHA;if(e===q)return O.DST_COLOR;if(e===X)return O.ONE_MINUS_DST_COLOR;if(e===Y)return O.SRC_ALPHA_SATURATE;if((e===Ke||e===Ze||e===Je||e===$e)&&null!==(t=wt.get("WEBGL_compressed_texture_s3tc"))){if(e===Ke)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Ze)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Je)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===$e)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Qe||e===et||e===tt||e===nt)&&null!==(t=wt.get("WEBGL_compressed_texture_pvrtc"))){if(e===Qe)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===et)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===tt)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===nt)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===rt&&null!==(t=wt.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===U||e===k)&&null!==(t=wt.get("EXT_blend_minmax"))){if(e===U)return t.MIN_EXT;if(e===k)return t.MAX_EXT}return e===He&&null!==(t=wt.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){wt.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Et.getMaxAnisotropy()},this.getPrecision=function(){return Et.precision},this.getPixelRatio=function(){return we},this.setPixelRatio=function(e){void 0!==e&&(we=e,this.setSize(ot.z,ot.w,!1))},this.getSize=function(){return{width:ge,height:ye}},this.setSize=function(e,n,r){ge=e,ye=n,t.width=e*we,t.height=n*we,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n)},this.setViewport=function(e,t,n,r){Mt.viewport(ot.set(e,t,n,r))},this.setScissor=function(e,t,n,r){Mt.scissor(Le.set(e,t,n,r))},this.setScissorTest=function(e){Mt.setScissorTest(it=e)},this.getClearColor=function(){return me},this.setClearColor=function(e,t){me.set(e),ve=void 0!==t?t:1,Mt.buffers.color.setClear(me.r,me.g,me.b,ve,s)},this.getClearAlpha=function(){return ve},this.setClearAlpha=function(e){ve=e,Mt.buffers.color.setClear(me.r,me.g,me.b,ve,s)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=O.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=O.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=O.STENCIL_BUFFER_BIT),O.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=Gt,this.dispose=function(){g=[],y=-1,h=[],v=-1,t.removeEventListener("webglcontextlost",Xt,!1)},this.renderBufferImmediate=function(e,t,n){Mt.initAttributes();var r=Tt.get(e);e.hasPositions&&!r.position&&(r.position=O.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=O.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=O.createBuffer()),e.hasColors&&!r.color&&(r.color=O.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(O.bindBuffer(O.ARRAY_BUFFER,r.position),O.bufferData(O.ARRAY_BUFFER,e.positionArray,O.DYNAMIC_DRAW),Mt.enableAttribute(i.position),O.vertexAttribPointer(i.position,3,O.FLOAT,!1,0,0)),e.hasNormals){if(O.bindBuffer(O.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&n.shading===b)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,c=(s[o+0]+s[o+3]+s[o+6])/3,u=(s[o+1]+s[o+4]+s[o+7])/3,l=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=c,s[o+1]=u,s[o+2]=l,s[o+3]=c,s[o+4]=u,s[o+5]=l,s[o+6]=c,s[o+7]=u,s[o+8]=l}O.bufferData(O.ARRAY_BUFFER,e.normalArray,O.DYNAMIC_DRAW),Mt.enableAttribute(i.normal),O.vertexAttribPointer(i.normal,3,O.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(O.bindBuffer(O.ARRAY_BUFFER,r.uv),O.bufferData(O.ARRAY_BUFFER,e.uvArray,O.DYNAMIC_DRAW),Mt.enableAttribute(i.uv),O.vertexAttribPointer(i.uv,2,O.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==E&&(O.bindBuffer(O.ARRAY_BUFFER,r.color),O.bufferData(O.ARRAY_BUFFER,e.colorArray,O.DYNAMIC_DRAW),Mt.enableAttribute(i.color),O.vertexAttribPointer(i.color,3,O.FLOAT,!1,0,0)),Mt.disableUnusedAttributes(),O.drawArrays(O.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){nn(r);var a=rn(e,t,r,i),s=!1,c=n.id+"_"+a.id+"_"+r.wireframe;c!==ue&&(ue=c,s=!0);var u=i.morphTargetInfluences;if(void 0!==u){for(var l=[],h=0,p=u.length;h<p;h++){var d=u[h];l.push([d,h])}l.sort(Zt),l.length>8&&(l.length=8);var f=n.morphAttributes;for(h=0,p=l.length;h<p;h++)if(d=l[h],w[h]=d[0],0!==d[0]){var m=d[1];!0===r.morphTargets&&f.position&&n.addAttribute("morphTarget"+h,f.position[m]),!0===r.morphNormals&&f.normal&&n.addAttribute("morphNormal"+h,f.normal[m])}else!0===r.morphTargets&&n.removeAttribute("morphTarget"+h),!0===r.morphNormals&&n.removeAttribute("morphNormal"+h);h=l.length;for(var v=w.length;h<v;h++)w[h]=0;a.getUniforms().setValue(O,"morphTargetInfluences",w),s=!0}m=n.index;var g,y=n.attributes.position,_=1;!0===r.wireframe&&(m=At.getWireframeAttribute(n),_=2),null!==m?(g=Nt).setIndex(m):g=Pt,s&&(function(e,t,n,r){var i;if(n&&n.isInstancedBufferGeometry&&null===(i=wt.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===r&&(r=0),Mt.initAttributes();var o=n.attributes,a=t.getAttributes(),s=e.defaultAttributeValues;for(var c in a){var u=a[c];if(u>=0){var l=o[c];if(void 0!==l){var h=l.normalized,p=l.itemSize,d=At.getAttributeProperties(l),f=d.__webglBuffer,m=d.type,v=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var g=l.data,y=g.stride,_=l.offset;g&&g.isInstancedInterleavedBuffer?(Mt.enableAttributeAndDivisor(u,g.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=g.meshPerAttribute*g.count)):Mt.enableAttribute(u),O.bindBuffer(O.ARRAY_BUFFER,f),O.vertexAttribPointer(u,p,m,h,y*v,(r*y+_)*v)}else l.isInstancedBufferAttribute?(Mt.enableAttributeAndDivisor(u,l.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):Mt.enableAttribute(u),O.bindBuffer(O.ARRAY_BUFFER,f),O.vertexAttribPointer(u,p,m,h,0,r*p*v)}else if(void 0!==s){var x=s[c];if(void 0!==x)switch(x.length){case 2:O.vertexAttrib2fv(u,x);break;case 3:O.vertexAttrib3fv(u,x);break;case 4:O.vertexAttrib4fv(u,x);break;default:O.vertexAttrib1fv(u,x)}}}}Mt.disableUnusedAttributes()}}(r,a,n),null!==m&&O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,At.getAttributeBuffer(m)));var x=0;null!==m?x=m.count:void 0!==y&&(x=y.count);var b=n.drawRange.start*_,E=n.drawRange.count*_,M=null!==o?o.start*_:0,T=null!==o?o.count*_:1/0,S=Math.max(b,M),A=Math.min(x,b+E,M+T)-1,R=Math.max(0,A-S+1);if(0!==R){if(i.isMesh)if(!0===r.wireframe)Mt.setLineWidth(r.wireframeLinewidth*zt()),g.setMode(O.LINES);else switch(i.drawMode){case at:g.setMode(O.TRIANGLES);break;case st:g.setMode(O.TRIANGLE_STRIP);break;case ct:g.setMode(O.TRIANGLE_FAN)}else if(i.isLine){var L=r.linewidth;void 0===L&&(L=1),Mt.setLineWidth(L*zt()),i.isLineSegments?g.setMode(O.LINES):g.setMode(O.LINE_STRIP)}else i.isPoints&&g.setMode(O.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,S,R):g.render(S,R)}},this.render=function(e,t,n,r){if(void 0===t||!0===t.isCamera){ue="",ce=-1,le=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),ft.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ut.setFromMatrix(ft),u.length=0,v=-1,y=-1,M.length=0,T.length=0,pt=this.localClippingEnabled,ht=lt.init(this.clippingPlanes,pt,t),function e(t,n){if(!1!==t.visible){var r;if(0!=(t.layers.mask&n.layers.mask))if(t.isLight)u.push(t);else if(t.isSprite)!1!==t.frustumCulled&&!0!==(r=t,dt.center.set(0,0,0),dt.radius=.7071067811865476,dt.applyMatrix4(r.matrixWorld),en(dt))||M.push(t);else if(t.isLensFlare)T.push(t);else if(t.isImmediateRenderObject)!0===re.sortObjects&&(mt.setFromMatrixPosition(t.matrixWorld),mt.applyProjection(ft)),Qt(t,null,t.material,mt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!1===t.frustumCulled||!0===function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),dt.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),en(dt)}(t))){var i=t.material;if(!0===i.visible){!0===re.sortObjects&&(mt.setFromMatrixPosition(t.matrixWorld),mt.applyProjection(ft));var o=At.update(t);if(i.isMultiMaterial)for(var a=o.groups,s=i.materials,c=0,l=a.length;c<l;c++){var h=a[c],p=s[h.materialIndex];!0===p.visible&&Qt(t,o,p,mt.z,h)}else Qt(t,o,i,mt.z,null)}}var d=t.children;for(c=0,l=d.length;c<l;c++)e(d[c],n)}}(e,t),h.length=v+1,g.length=y+1,!0===re.sortObjects&&(h.sort(Jt),g.sort($t)),ht&&lt.beginShadows(),function(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];i.castShadow&&(yt.shadows[t++]=i)}yt.shadows.length=t}(u),jt.render(e,t),function(e,t){var n,r,i,o,a,s,c,u=0,l=0,h=0,p=t.matrixWorldInverse,d=0,f=0,m=0,v=0,g=0;for(n=0,r=e.length;n<r;n++)if(o=(i=e[n]).color,a=i.intensity,s=i.distance,c=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i.isAmbientLight)u+=o.r*a,l+=o.g*a,h+=o.b*a;else if(i.isDirectionalLight){(y=Ct.get(i)).color.copy(i.color).multiplyScalar(i.intensity),y.direction.setFromMatrixPosition(i.matrixWorld),mt.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(mt),y.direction.transformDirection(p),y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),yt.directionalShadowMap[d]=c,yt.directionalShadowMatrix[d]=i.shadow.matrix,yt.directional[d++]=y}else if(i.isSpotLight){(y=Ct.get(i)).position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),y.color.copy(o).multiplyScalar(a),y.distance=s,y.direction.setFromMatrixPosition(i.matrixWorld),mt.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(mt),y.direction.transformDirection(p),y.coneCos=Math.cos(i.angle),y.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),yt.spotShadowMap[m]=c,yt.spotShadowMatrix[m]=i.shadow.matrix,yt.spot[m++]=y}else if(i.isRectAreaLight){(y=Ct.get(i)).color.copy(o).multiplyScalar(a/(i.width*i.height)),y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),gt.identity(),vt.copy(i.matrixWorld),vt.premultiply(p),gt.extractRotation(vt),y.halfWidth.set(.5*i.width,0,0),y.halfHeight.set(0,.5*i.height,0),y.halfWidth.applyMatrix4(gt),y.halfHeight.applyMatrix4(gt),yt.rectArea[v++]=y}else if(i.isPointLight){(y=Ct.get(i)).position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),y.color.copy(i.color).multiplyScalar(i.intensity),y.distance=i.distance,y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),yt.pointShadowMap[f]=c,void 0===yt.pointShadowMatrix[f]&&(yt.pointShadowMatrix[f]=new It),mt.setFromMatrixPosition(i.matrixWorld).negate(),yt.pointShadowMatrix[f].identity().setPosition(mt),yt.point[f++]=y}else if(i.isHemisphereLight){var y;(y=Ct.get(i)).direction.setFromMatrixPosition(i.matrixWorld),y.direction.transformDirection(p),y.direction.normalize(),y.skyColor.copy(i.color).multiplyScalar(a),y.groundColor.copy(i.groundColor).multiplyScalar(a),yt.hemi[g++]=y}yt.ambient[0]=u,yt.ambient[1]=l,yt.ambient[2]=h,yt.directional.length=d,yt.spot.length=m,yt.rectArea.length=v,yt.point.length=f,yt.hemi.length=g,yt.hash=d+","+f+","+m+","+v+","+g+","+yt.shadows.length}(u,t),ht&&lt.endShadows(),xt.calls=0,xt.vertices=0,xt.faces=0,xt.points=0,void 0===n&&(n=null),this.setRenderTarget(n);var i=e.background;if(null===i?Mt.buffers.color.setClear(me.r,me.g,me.b,ve,s):i&&i.isColor&&(Mt.buffers.color.setClear(i.r,i.g,i.b,1,s),r=!0),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),i&&i.isCubeTexture?(Ut.projectionMatrix.copy(t.projectionMatrix),Ut.matrixWorld.extractRotation(t.matrixWorld),Ut.matrixWorldInverse.getInverse(Ut.matrixWorld),Ft.material.uniforms.tCube.value=i,Ft.modelViewMatrix.multiplyMatrices(Ut.matrixWorldInverse,Ft.matrixWorld),At.update(Ft),re.renderBufferDirect(Ut,null,Ft.geometry,Ft.material,Ft,null)):i&&i.isTexture&&(kt.material.map=i,At.update(kt),re.renderBufferDirect(Dt,null,kt.geometry,kt.material,kt,null)),e.overrideMaterial){var o=e.overrideMaterial;tn(h,e,t,o),tn(g,e,t,o)}else Mt.setBlending(S),tn(h,e,t),tn(g,e,t);Wt.render(e,t),qt.render(e,t,de),n&&St.updateRenderTargetMipmap(n),Mt.setDepthTest(!0),Mt.setDepthWrite(!0),Mt.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(e,t){Mt.setCullFace(e),Mt.setFlipSided(t===m)},this.allocTextureUnit=function(){var e=fe;return e>=Et.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Et.maxTextures),fe+=1,e},this.setTexture2D=(Vt=!1,function(e,t){e&&e.isWebGLRenderTarget&&(Vt||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Vt=!0),e=e.texture),St.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),St.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?St.setTextureCube(t,n):St.setTextureCubeDynamic(t,n)}}(),this.getCurrentRenderTarget=function(){return oe},this.setRenderTarget=function(e){oe=e,e&&void 0===Tt.get(e).__webglFramebuffer&&St.setupRenderTarget(e);var t,n=e&&e.isWebGLRenderTargetCube;if(e){var r=Tt.get(e);t=n?r.__webglFramebuffer[e.activeCubeFace]:r.__webglFramebuffer,he.copy(e.scissor),pe=e.scissorTest,de.copy(e.viewport)}else t=null,he.copy(Le).multiplyScalar(we),pe=it,de.copy(ot).multiplyScalar(we);if(ae!==t&&(O.bindFramebuffer(O.FRAMEBUFFER,t),ae=t),Mt.scissor(he),Mt.setScissorTest(pe),Mt.viewport(de),n){var i=Tt.get(e.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(!1!==(e&&e.isWebGLRenderTarget)){var a=Tt.get(e).__webglFramebuffer;if(a){var s=!1;a!==ae&&(O.bindFramebuffer(O.FRAMEBUFFER,a),s=!0);try{var c=e.texture,u=c.format,l=c.type;if(u!==Ve&&cn(u)!==O.getParameter(O.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===Ce||cn(l)===O.getParameter(O.IMPLEMENTATION_COLOR_READ_TYPE)||l===Ue&&(wt.get("OES_texture_float")||wt.get("WEBGL_color_buffer_float"))||l===ke&&wt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");O.checkFramebufferStatus(O.FRAMEBUFFER)===O.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&O.readPixels(t,n,r,i,cn(u),cn(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&O.bindFramebuffer(O.FRAMEBUFFER,ae)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function Xr(e,t){this.name="",this.color=new bn(e),this.density=void 0!==t?t:25e-5}function Yr(e,t,n){this.name="",this.color=new bn(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Kr(){sr.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Zr(e,t,n,r,i){sr.call(this),this.lensFlares=[],this.positionScreen=new Ot,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,i)}function Jr(e){zn.call(this),this.type="SpriteMaterial",this.color=new bn(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function $r(e){sr.call(this),this.type="Sprite",this.material=void 0!==e?e:new Jr}function Qr(){sr.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ei(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new It,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var r=Math.sqrt(4*this.bones.length);r=yt.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new En(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Ve,Ue)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new It)}}function ti(){sr.call(this),this.type="Bone"}function ni(e,t,n){Ar.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new It,this.bindMatrixInverse=new It;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,o,a=0,s=this.geometry.bones.length;a<s;++a)o=this.geometry.bones[a],i=new ti,r.push(i),i.name=o.name,i.position.fromArray(o.pos),i.quaternion.fromArray(o.rotq),void 0!==o.scl&&i.scale.fromArray(o.scl);for(a=0,s=this.geometry.bones.length;a<s;++a)-1!==(o=this.geometry.bones[a]).parent&&null!==o.parent&&void 0!==r[o.parent]?r[o.parent].add(r[a]):this.add(r[a])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ei(r,void 0,n),this.matrixWorld)}function ri(e){zn.call(this),this.type="LineBasicMaterial",this.color=new bn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function ii(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new oi(e,t);sr.call(this),this.type="Line",this.geometry=void 0!==e?e:new Sr,this.material=void 0!==t?t:new ri({color:16777215*Math.random()})}function oi(e,t){ii.call(this,e,t),this.type="LineSegments"}function ai(e){zn.call(this),this.type="PointsMaterial",this.color=new bn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function si(e,t){sr.call(this),this.type="Points",this.geometry=void 0!==e?e:new Sr,this.material=void 0!==t?t:new ai({color:16777215*Math.random()})}function ci(){sr.call(this),this.type="Group"}function ui(e,t,n,r,i,o,a,s,c){At.call(this,e,t,n,r,i,o,a,s,c),this.generateMipmaps=!1;var u=this;!function t(){requestAnimationFrame(t),e.readyState>=e.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}()}function li(e,t,n,r,i,o,a,s,c,u,l,h){At.call(this,null,o,a,s,c,u,r,i,l,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function hi(e,t,n,r,i,o,a,s,c){At.call(this,e,t,n,r,i,o,a,s,c),this.needsUpdate=!0}function pi(e,t,n,r,i,o,a,s,c,u){if((u=void 0!==u?u:Xe)!==Xe&&u!==Ye)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Xe&&(n=Ie),void 0===n&&u===Ye&&(n=He),At.call(this,null,r,i,o,a,s,u,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Ee,this.minFilter=void 0!==s?s:Ee,this.flipY=!1,this.generateMipmaps=!1}function di(e){Sr.call(this);var t=[0,0],n={};function r(e,t){return e-t}var i=["a","b","c"];if(e&&e.isGeometry){for(var o=e.vertices,a=e.faces,s=0,c=new Uint32Array(6*a.length),u=0,l=a.length;u<l;u++)for(var h=a[u],p=0;p<3;p++)t[0]=h[i[p]],t[1]=h[i[(p+1)%3]],t.sort(r),void 0===n[w=t.toString()]&&(c[2*s]=t[0],c[2*s+1]=t[1],n[w]=!0,s++);var d=new Float32Array(2*s*3);for(u=0,l=s;u<l;u++)for(p=0;p<2;p++){var f=o[c[2*u+p]];d[0+(E=6*u+3*p)]=f.x,d[E+1]=f.y,d[E+2]=f.z}this.addAttribute("position",new pr(d,3))}else if(e&&e.isBufferGeometry)if(null!==e.index){var m=e.index.array,v=(o=e.attributes.position,e.groups);s=0,0===v.length&&e.addGroup(0,m.length),c=new Uint32Array(2*m.length);for(var g=0,y=v.length;g<y;++g)for(var _=v[g],x=_.start,b=(u=x,x+_.count);u<b;u+=3)for(p=0;p<3;p++){var w;t[0]=m[u+p],t[1]=m[u+(p+1)%3],t.sort(r),void 0===n[w=t.toString()]&&(c[2*s]=t[0],c[2*s+1]=t[1],n[w]=!0,s++)}for(d=new Float32Array(2*s*3),u=0,l=s;u<l;u++)for(p=0;p<2;p++){var E=6*u+3*p,M=c[2*u+p];d[E+0]=o.getX(M),d[E+1]=o.getY(M),d[E+2]=o.getZ(M)}this.addAttribute("position",new pr(d,3))}else{var T=(s=(o=e.attributes.position.array).length/3)/3;for(d=new Float32Array(2*s*3),u=0,l=T;u<l;u++)for(p=0;p<3;p++){var S=9*u+3*p;d[0+(E=18*u+6*p)]=o[S],d[E+1]=o[S+1],d[E+2]=o[S+2],M=9*u+(p+1)%3*3,d[E+3]=o[M],d[E+4]=o[M+1],d[E+5]=o[M+2]}this.addAttribute("position",new pr(d,3))}}function fi(e,t,n){Sr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o,a,s,c=[],u=[],l=t+1;for(r=0;r<=n;r++)for(s=r/n,i=0;i<=t;i++)o=e(a=i/t,s),c.push(o.x,o.y,o.z),u.push(a,s);var h,p,d,f,m=[];for(r=0;r<n;r++)for(i=0;i<t;i++)h=r*l+i,p=r*l+i+1,d=(r+1)*l+i+1,f=(r+1)*l+i,m.push(h,p,f),m.push(p,d,f);this.setIndex(new(m.length>65535?_r:gr)(m,1)),this.addAttribute("position",new xr(c,3)),this.addAttribute("uv",new xr(u,2)),this.computeVertexNormals()}function mi(e,t,n){Er.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new fi(e,t,n)),this.mergeVertices()}function vi(e,t,n,r){Sr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),c=[];for(i=0;i<=a;i++){c[i]=[];var u=e.clone().lerp(n,i/a),l=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)c[i][o]=0===o&&i===a?u:u.clone().lerp(l,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var p=Math.floor(o/2);o%2==0?(s(c[i][p+1]),s(c[i+1][p]),s(c[i][p])):(s(c[i][p+1]),s(c[i+1][p+1]),s(c[i+1][p]))}}function s(e){i.push(e.x,e.y,e.z)}function c(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function l(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new Ot,r=new Ot,i=new Ot,o=0;o<t.length;o+=3)c(t[o+0],n),c(t[o+1],r),c(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new Ot,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new Ot,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=l(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new Ot,t=new Ot,n=new Ot,r=new Ot,a=new _t,s=new _t,c=new _t,h=0,p=0;h<i.length;h+=9,p+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[p+0],o[p+1]),s.set(o[p+2],o[p+3]),c.set(o[p+4],o[p+5]),r.copy(e).add(t).add(n).divideScalar(3);var d=l(r);u(a,p+0,e,d),u(s,p+2,t,d),u(c,p+4,n,d)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new xr(i,3)),this.addAttribute("normal",new xr(i.slice(),3)),this.addAttribute("uv",new xr(o,2)),this.normalizeNormals(),this.boundingSphere=new Vn(new Ot,n)}function gi(e,t){vi.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function yi(e,t){Er.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new gi(e,t)),this.mergeVertices()}function _i(e,t){vi.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function xi(e,t){Er.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new _i(e,t)),this.mergeVertices()}function bi(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];vi.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function wi(e,t){Er.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new bi(e,t)),this.mergeVertices()}function Ei(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];vi.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Mi(e,t){Er.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ei(e,t)),this.mergeVertices()}function Ti(e,t,n,r){Er.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new vi(e,t,n,r)),this.mergeVertices()}function Si(e,t,n,r,i){Sr.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,c=new Ot,u=new Ot,l=new _t,h=[],p=[],d=[],f=[];function m(i){var a=e.getPointAt(i/t),l=o.normals[i],d=o.binormals[i];for(s=0;s<=r;s++){var f=s/r*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);u.x=v*l.x+m*d.x,u.y=v*l.y+m*d.y,u.z=v*l.z+m*d.z,u.normalize(),p.push(u.x,u.y,u.z),c.x=a.x+n*u.x,c.y=a.y+n*u.y,c.z=a.z+n*u.z,h.push(c.x,c.y,c.z)}}!function(){for(a=0;a<t;a++)m(a);m(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)l.x=a/t,l.y=s/r,d.push(l.x,l.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;f.push(e,n,o),f.push(n,i,o)}}()}(),this.setIndex(new(f.length>65535?_r:gr)(f,1)),this.addAttribute("position",new xr(h,3)),this.addAttribute("normal",new xr(p,3)),this.addAttribute("uv",new xr(d,2))}function Ai(e,t,n,r,i,o){Er.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Si(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Ri(e,t,n,r,i,o){Sr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||100,t=t||40,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,c=(r+1)*(n+1),u=r*n*2*3,l=new pr(new(u>65535?Uint32Array:Uint16Array)(u),1),h=new pr(new Float32Array(3*c),3),p=new pr(new Float32Array(3*c),3),d=new pr(new Float32Array(2*c),2),f=0,m=0,v=new Ot,g=new Ot,y=new _t,_=new Ot,x=new Ot,b=new Ot,w=new Ot,E=new Ot;for(a=0;a<=n;++a){var M=a/n*i*Math.PI*2;for(O(M,i,o,e,_),O(M+.01,i,o,e,x),w.subVectors(x,_),E.addVectors(x,_),b.crossVectors(w,E),E.crossVectors(b,w),b.normalize(),E.normalize(),s=0;s<=r;++s){var T=s/r*Math.PI*2,S=-t*Math.cos(T),A=t*Math.sin(T);v.x=_.x+(S*E.x+A*b.x),v.y=_.y+(S*E.y+A*b.y),v.z=_.z+(S*E.z+A*b.z),h.setXYZ(f,v.x,v.y,v.z),g.subVectors(v,_).normalize(),p.setXYZ(f,g.x,g.y,g.z),y.x=a/n,y.y=s/r,d.setXY(f,y.x,y.y),f++}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var R=(r+1)*(s-1)+(a-1),L=(r+1)*s+(a-1),C=(r+1)*s+a,P=(r+1)*(s-1)+a;l.setX(m,R),m++,l.setX(m,L),m++,l.setX(m,P),m++,l.setX(m,L),m++,l.setX(m,C),m++,l.setX(m,P),m++}function O(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",h),this.addAttribute("normal",p),this.addAttribute("uv",d)}function Li(e,t,n,r,i,o,a){Er.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ri(e,t,n,r,i,o)),this.mergeVertices()}function Ci(e,t,n,r,i){Sr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=(n+1)*(r+1),c=n*r*2*3,u=new(c>65535?Uint32Array:Uint16Array)(c),l=new Float32Array(3*s),h=new Float32Array(3*s),p=new Float32Array(2*s),d=0,f=0,m=0,v=new Ot,g=new Ot,y=new Ot;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var _=a/r*i,x=o/n*Math.PI*2;g.x=(e+t*Math.cos(x))*Math.cos(_),g.y=(e+t*Math.cos(x))*Math.sin(_),g.z=t*Math.sin(x),l[d]=g.x,l[d+1]=g.y,l[d+2]=g.z,v.x=e*Math.cos(_),v.y=e*Math.sin(_),y.subVectors(g,v).normalize(),h[d]=y.x,h[d+1]=y.y,h[d+2]=y.z,p[f]=a/r,p[f+1]=o/n,d+=3,f+=2}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var b=(r+1)*o+a-1,w=(r+1)*(o-1)+a-1,E=(r+1)*(o-1)+a,M=(r+1)*o+a;u[m]=b,u[m+1]=w,u[m+2]=M,u[m+3]=w,u[m+4]=E,u[m+5]=M,m+=6}this.setIndex(new pr(u,1)),this.addAttribute("position",new pr(l,3)),this.addAttribute("normal",new pr(h,3)),this.addAttribute("uv",new pr(p,2))}function Pi(e,t,n,r,i){Er.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Ci(e,t,n,r,i))}Xr.prototype.isFogExp2=!0,Xr.prototype.clone=function(){return new Xr(this.color.getHex(),this.density)},Xr.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Yr.prototype.isFog=!0,Yr.prototype.clone=function(){return new Yr(this.color.getHex(),this.near,this.far)},Yr.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Kr.prototype=Object.create(sr.prototype),Kr.prototype.constructor=Kr,Kr.prototype.copy=function(e,t){return sr.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},Kr.prototype.toJSON=function(e){var t=sr.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},Zr.prototype=Object.assign(Object.create(sr.prototype),{constructor:Zr,isLensFlare:!0,copy:function(e){sr.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,i,o){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=new bn(16777215)),void 0===r&&(r=A),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:i,blending:r})},updateLensFlares:function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<n;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),Jr.prototype=Object.create(zn.prototype),Jr.prototype.constructor=Jr,Jr.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},$r.prototype=Object.assign(Object.create(sr.prototype),{constructor:$r,isSprite:!0,raycast:(Nr=new Ot,function(e,t){Nr.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(Nr);n>this.scale.x*this.scale.y/4||t.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}),clone:function(){return new this.constructor(this.material).copy(this)}}),Qr.prototype=Object.assign(Object.create(sr.prototype),{constructor:Qr,copy:function(e){sr.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new Ot;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new Ot,t=new Ot;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=sr.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(ei.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new It;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(Dr=new It,function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;Dr.multiplyMatrices(n,this.boneInverses[e]),Dr.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}),clone:function(){return new ei(this.bones,this.boneInverses,this.useVertexTexture)}}),ti.prototype=Object.assign(Object.create(sr.prototype),{constructor:ti,isBone:!0}),ni.prototype=Object.assign(Object.create(Ar.prototype),{constructor:ni,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e];(i=1/t.lengthManhattan())!=1/0?t.multiplyScalar(i):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new Rt,r=this.geometry.attributes.skinWeight;for(e=0;e<r.count;e++){var i;n.x=r.getX(e),n.y=r.getY(e),n.z=r.getZ(e),n.w=r.getW(e),(i=1/n.lengthManhattan())!=1/0?n.multiplyScalar(i):n.set(1,0,0,0),r.setXYZW(e,n.x,n.y,n.z,n.w)}}},updateMatrixWorld:function(e){Ar.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),ri.prototype=Object.create(zn.prototype),ri.prototype.constructor=ri,ri.prototype.isLineBasicMaterial=!0,ri.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},ii.prototype=Object.assign(Object.create(sr.prototype),{constructor:ii,isLine:!0,raycast:function(){var e=new It,t=new Kn,n=new Vn;return function(r,i){var o=r.linePrecision,a=o*o,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(c),!1!==r.ray.intersectsSphere(n)){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var u=new Ot,l=new Ot,h=new Ot,p=new Ot,d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var f=s.index,m=s.attributes.position.array;if(null!==f)for(var v=f.array,g=0,y=v.length-1;g<y;g+=d){var _=v[g],x=v[g+1];u.fromArray(m,3*_),l.fromArray(m,3*x),t.distanceSqToSegment(u,l,p,h)>a||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,y=m.length/3-1;g<y;g+=d)u.fromArray(m,3*g),l.fromArray(m,3*g+3),t.distanceSqToSegment(u,l,p,h)>a||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var b=s.vertices,w=b.length;for(g=0;g<w-1;g+=d){var E;t.distanceSqToSegment(b[g],b[g+1],p,h)>a||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),oi.prototype=Object.assign(Object.create(ii.prototype),{constructor:oi,isLineSegments:!0}),ai.prototype=Object.create(zn.prototype),ai.prototype.constructor=ai,ai.prototype.isPointsMaterial=!0,ai.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},si.prototype=Object.assign(Object.create(sr.prototype),{constructor:si,isPoints:!0,raycast:function(){var e=new It,t=new Kn,n=new Vn;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,c=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var u=c/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,h=new Ot;if(a.isBufferGeometry){var p=a.index,d=a.attributes.position.array;if(null!==p)for(var f=p.array,m=0,v=f.length;m<v;m++){var g=f[m];h.fromArray(d,3*g),x(h,g)}else{m=0;for(var y=d.length/3;m<y;m++)h.fromArray(d,3*m),x(h,m)}}else{var _=a.vertices;for(m=0,y=_.length;m<y;m++)x(_[m],m)}}function x(e,n){var a=t.distanceSqToPoint(e);if(a<l){var c=t.closestPointToPoint(e);c.applyMatrix4(s);var u=r.ray.origin.distanceTo(c);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(a),point:c.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ci.prototype=Object.assign(Object.create(sr.prototype),{constructor:ci}),ui.prototype=Object.create(At.prototype),ui.prototype.constructor=ui,li.prototype=Object.create(At.prototype),li.prototype.constructor=li,li.prototype.isCompressedTexture=!0,hi.prototype=Object.create(At.prototype),hi.prototype.constructor=hi,pi.prototype=Object.create(At.prototype),pi.prototype.constructor=pi,pi.prototype.isDepthTexture=!0,di.prototype=Object.create(Sr.prototype),di.prototype.constructor=di,fi.prototype=Object.create(Sr.prototype),fi.prototype.constructor=fi,mi.prototype=Object.create(Er.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(Sr.prototype),vi.prototype.constructor=vi,gi.prototype=Object.create(vi.prototype),gi.prototype.constructor=gi,yi.prototype=Object.create(Er.prototype),yi.prototype.constructor=yi,_i.prototype=Object.create(vi.prototype),_i.prototype.constructor=_i,xi.prototype=Object.create(Er.prototype),xi.prototype.constructor=xi,bi.prototype=Object.create(vi.prototype),bi.prototype.constructor=bi,wi.prototype=Object.create(Er.prototype),wi.prototype.constructor=wi,Ei.prototype=Object.create(vi.prototype),Ei.prototype.constructor=Ei,Mi.prototype=Object.create(Er.prototype),Mi.prototype.constructor=Mi,Ti.prototype=Object.create(Er.prototype),Ti.prototype.constructor=Ti,Si.prototype=Object.create(Sr.prototype),Si.prototype.constructor=Si,Ai.prototype=Object.create(Er.prototype),Ai.prototype.constructor=Ai,Ri.prototype=Object.create(Sr.prototype),Ri.prototype.constructor=Ri,Li.prototype=Object.create(Er.prototype),Li.prototype.constructor=Li,Ci.prototype=Object.create(Sr.prototype),Ci.prototype.constructor=Ci,Pi.prototype=Object.create(Er.prototype),Pi.prototype.constructor=Pi;var Oi={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},triangulate:function(){function e(e,t,n,r,i,o){var a,s,c,u,l,h,p,d,f,m,v,g,y,_,x,b,w;if(s=e[o[t]].x,c=e[o[t]].y,u=e[o[n]].x,l=e[o[n]].y,h=e[o[r]].x,(u-s)*((p=e[o[r]].y)-c)-(l-c)*(h-s)<=0)return!1;for(m=h-u,v=p-l,g=s-h,y=c-p,_=u-s,x=l-c,a=0;a<i;a++)if(d=e[o[a]].x,f=e[o[a]].y,!(d===s&&f===c||d===u&&f===l||d===h&&f===p)&&(b=_*(f-c)-x*(d-s),w=g*(f-p)-y*(d-h),m*(f-l)-v*(d-u)>=-Number.EPSILON&&w>=-Number.EPSILON&&b>=-Number.EPSILON))return!1;return!0}return function(t,n){var r=t.length;if(r<3)return null;var i,o,a,s=[],c=[],u=[];if(Oi.area(t)>0)for(o=0;o<r;o++)c[o]=o;else for(o=0;o<r;o++)c[o]=r-1-o;var l=r,h=2*l;for(o=l-1;l>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?u:s;if(l<=(i=o)&&(i=0),l<=(o=i+1)&&(o=0),l<=(a=o+1)&&(a=0),e(t,i,o,a,l,c)){var p,d,f,m,v;for(p=c[i],d=c[o],f=c[a],s.push([t[p],t[d],t[f]]),u.push([c[i],c[o],c[a]]),m=o,v=o+1;v<l;m++,v++)c[m]=c[v];h=2*--l}}return n?u:s}}(),triangulateShape:function(e,t){function n(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function r(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function i(e,t,n,i,o){var a=t.x-e.x,s=t.y-e.y,c=i.x-n.x,u=i.y-n.y,l=e.x-n.x,h=e.y-n.y,p=s*c-a*u,d=s*l-a*h;if(Math.abs(p)>Number.EPSILON){var f;if(p>0){if(d<0||d>p)return[];if((f=u*l-c*h)<0||f>p)return[]}else{if(d>0||d<p)return[];if((f=u*l-c*h)>0||f<p)return[]}if(0===f)return!o||0!==d&&d!==p?[e]:[];if(f===p)return!o||0!==d&&d!==p?[t]:[];if(0===d)return[n];if(d===p)return[i];var m=f/p;return[{x:e.x+m*a,y:e.y+m*s}]}if(0!==d||u*l!=c*h)return[];var v,g,y,_,x,b,w,E,M=0===a&&0===s,T=0===c&&0===u;return M&&T?e.x!==n.x||e.y!==n.y?[]:[e]:M?r(n,i,e)?[e]:[]:T?r(e,t,n)?[n]:[]:(0!==a?(e.x<t.x?(v=e,y=e.x,g=t,_=t.x):(v=t,y=t.x,g=e,_=e.x),n.x<i.x?(x=n,w=n.x,b=i,E=i.x):(x=i,w=i.x,b=n,E=n.x)):(e.y<t.y?(v=e,y=e.y,g=t,_=t.y):(v=t,y=t.y,g=e,_=e.y),n.y<i.y?(x=n,w=n.y,b=i,E=i.y):(x=i,w=i.y,b=n,E=n.y)),y<=w?_<w?[]:_===w?o?[]:[x]:_<=E?[x,g]:[x,b]:y>E?[]:y===E?o?[]:[v]:_<=E?[v,g]:[v,b])}function o(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,c=r.x-e.x,u=r.y-e.y,l=i*s-o*a,h=i*u-o*c;if(Math.abs(l)>Number.EPSILON){var p=c*s-u*a;return l>0?h>=0&&p>=0:h>=0||p>=0}return h>0}n(e),t.forEach(n);for(var a,s,c,u,l,h,p={},d=e.concat(),f=0,m=t.length;f<m;f++)Array.prototype.push.apply(d,t[f]);for(a=0,s=d.length;a<s;a++)void 0!==p[l=d[a].x+":"+d[a].y]&&console.warn("THREE.ShapeUtils: Duplicate point",l,a),p[l]=a;var v=function(e,t){var n,r=e.concat();function a(e,t){var i=r.length-1,a=e-1;a<0&&(a=i);var s=e+1;s>i&&(s=0);var c=o(r[e],r[a],r[s],n[t]);if(!c)return!1;var u=n.length-1,l=t-1;l<0&&(l=u);var h=t+1;return h>u&&(h=0),!!(c=o(n[t],n[l],n[h],r[e]))}function s(e,t){var n,o;for(n=0;n<r.length;n++)if(o=n+1,o%=r.length,i(e,t,r[n],r[o],!0).length>0)return!0;return!1}var c=[];function u(e,n){var r,o,a,s;for(r=0;r<c.length;r++)for(o=t[c[r]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,i(e,n,o[a],o[s],!0).length>0)return!0;return!1}for(var l,h,p,d,f,m,v,g,y,_,x=[],b=0,w=t.length;b<w;b++)c.push(b);for(var E=0,M=2*c.length;c.length>0;){if(--M<0){console.log("Infinite Loop! Holes left:"+c.length+", Probably Hole outside Shape!");break}for(h=E;h<r.length;h++){for(p=r[h],l=-1,b=0;b<c.length;b++)if(f=c[b],void 0===x[m=p.x+":"+p.y+":"+f]){n=t[f];for(var T=0;T<n.length;T++)if(d=n[T],a(h,T)&&!s(p,d)&&!u(p,d)){l=T,c.splice(b,1),v=r.slice(0,h+1),g=r.slice(h),y=n.slice(l),_=n.slice(0,l+1),r=v.concat(y).concat(_).concat(g),E=h;break}if(l>=0)break;x[m]=!0}if(l>=0)break}}return r}(e,t),g=Oi.triangulate(v,!1);for(a=0,s=g.length;a<s;a++)for(u=g[a],c=0;c<3;c++)void 0!==(h=p[l=u[c].x+":"+u[c].y])&&(u[c]=h);return g.concat()},isClockWise:function(e){return Oi.area(e)<0},b2:function(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*n}(e)+function(e,t){return e*e*r}(e)},b3:function(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*r}(e)+function(e,t){return e*e*e*i}(e)}};function Ii(e,t){void 0!==e?(Er.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals()):e=[]}function Ni(e,t){var n=(t=t||{}).font;if(!1===(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Er;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Ii.call(this,r,t),this.type="TextGeometry"}function Di(e,t,n,r,i,o,a){Sr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;for(var s=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),c=(t+1)*(n+1),u=new pr(new Float32Array(3*c),3),l=new pr(new Float32Array(3*c),3),h=new pr(new Float32Array(2*c),2),p=0,d=[],f=new Ot,m=0;m<=n;m++){for(var v=[],g=m/n,y=0;y<=t;y++){var _=y/t,x=-e*Math.cos(r+_*i)*Math.sin(o+g*a),b=e*Math.cos(o+g*a),w=e*Math.sin(r+_*i)*Math.sin(o+g*a);f.set(x,b,w).normalize(),u.setXYZ(p,x,b,w),l.setXYZ(p,f.x,f.y,f.z),h.setXY(p,_,1-g),v.push(p),p++}d.push(v)}var E=[];for(m=0;m<n;m++)for(y=0;y<t;y++){var M=d[m][y+1],T=d[m][y],S=d[m+1][y],A=d[m+1][y+1];(0!==m||o>0)&&E.push(M,T,A),(m!==n-1||s<Math.PI)&&E.push(T,S,A)}this.setIndex(new(u.count>65535?_r:gr)(E,1)),this.addAttribute("position",u),this.addAttribute("normal",l),this.addAttribute("uv",h),this.boundingSphere=new Vn(new Ot,e)}function Ui(e,t,n,r,i,o,a){Er.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Di(e,t,n,r,i,o,a))}function ki(e,t,n,r,i,o){Sr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||20,t=t||50,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI;var a,s,c,u=((n=void 0!==n?Math.max(3,n):8)+1)*((r=void 0!==r?Math.max(1,r):1)+1),l=n*r*2*3,h=new pr(new(l>65535?Uint32Array:Uint16Array)(l),1),p=new pr(new Float32Array(3*u),3),d=new pr(new Float32Array(3*u),3),f=new pr(new Float32Array(2*u),2),m=0,v=0,g=e,y=(t-e)/r,_=new Ot,x=new _t;for(s=0;s<=r;s++){for(c=0;c<=n;c++)a=i+c/n*o,_.x=g*Math.cos(a),_.y=g*Math.sin(a),p.setXYZ(m,_.x,_.y,_.z),d.setXYZ(m,0,0,1),x.x=(_.x/t+1)/2,x.y=(_.y/t+1)/2,f.setXY(m,x.x,x.y),m++;g+=y}for(s=0;s<r;s++){var b=s*(n+1);for(c=0;c<n;c++){var w=a=c+b,E=a+n+1,M=a+n+2,T=a+1;h.setX(v,w),v++,h.setX(v,E),v++,h.setX(v,M),v++,h.setX(v,w),v++,h.setX(v,M),v++,h.setX(v,T),v++}}this.setIndex(h),this.addAttribute("position",p),this.addAttribute("normal",d),this.addAttribute("uv",f)}function Bi(e,t,n,r,i,o){Er.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new ki(e,t,n,r,i,o))}function Fi(e,t,n,r){Er.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Lr(e,t,n,r))}function zi(e,t,n,r){Sr.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=yt.clamp(r,0,2*Math.PI);var i,o,a,s=(t+1)*e.length,c=t*e.length*2*3,u=new pr(new(c>65535?Uint32Array:Uint16Array)(c),1),l=new pr(new Float32Array(3*s),3),h=new pr(new Float32Array(2*s),2),p=0,d=0,f=1/t,m=new Ot,v=new _t;for(o=0;o<=t;o++){var g=n+o*f*r,y=Math.sin(g),_=Math.cos(g);for(a=0;a<=e.length-1;a++)m.x=e[a].x*y,m.y=e[a].y,m.z=e[a].x*_,l.setXYZ(p,m.x,m.y,m.z),v.x=o/t,v.y=a/(e.length-1),h.setXY(p,v.x,v.y),p++}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var x=i=a+o*e.length,b=i+e.length,w=i+e.length+1,E=i+1;u.setX(d,x),d++,u.setX(d,b),d++,u.setX(d,E),d++,u.setX(d,b),d++,u.setX(d,w),d++,u.setX(d,E),d++}if(this.setIndex(u),this.addAttribute("position",l),this.addAttribute("uv",h),this.computeVertexNormals(),r===2*Math.PI){var M=this.attributes.normal.array,T=new Ot,S=new Ot,A=new Ot;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)T.x=M[a+0],T.y=M[a+1],T.z=M[a+2],S.x=M[i+a+0],S.y=M[i+a+1],S.z=M[i+a+2],A.addVectors(T,S).normalize(),M[a+0]=M[i+a+0]=A.x,M[a+1]=M[i+a+1]=A.y,M[a+2]=M[i+a+2]=A.z}}function Hi(e,t,n,r){Er.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new zi(e,t,n,r)),this.mergeVertices()}function Gi(e,t){Sr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var c=0;c<e.length;c++)u(e[c]),this.addGroup(a,s,c),a+=s,s=0;function u(e){var a,c,u,l=n.length/3,h=e.extractPoints(t),p=h.shape,d=h.holes;if(!1===Oi.isClockWise(p))for(p=p.reverse(),a=0,c=d.length;a<c;a++)u=d[a],!0===Oi.isClockWise(u)&&(d[a]=u.reverse());var f=Oi.triangulateShape(p,d);for(a=0,c=d.length;a<c;a++)u=d[a],p=p.concat(u);for(a=0,c=p.length;a<c;a++){var m=p[a];n.push(m.x,m.y,0),r.push(0,0,1),i.push(m.x,m.y)}for(a=0,c=f.length;a<c;a++){var v=f[a],g=v[0]+l,y=v[1]+l,_=v[2]+l;o.push(g,y,_),s+=3}}this.setIndex(new(o.length>65535?_r:gr)(o,1)),this.addAttribute("position",new xr(n,3)),this.addAttribute("normal",new xr(r,3)),this.addAttribute("uv",new xr(i,2))}function ji(e,t){Er.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Gi(e,t)),this.mergeVertices()}function Vi(e,t){Sr.call(this),t=void 0!==t?t:1;var n=Math.cos(yt.DEG2RAD*t),r=[0,0],i={};function o(e,t){return e-t}var a,s=["a","b","c"];e.isBufferGeometry?(a=new Er).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var c=a.vertices,u=a.faces,l=0,h=u.length;l<h;l++)for(var p=u[l],d=0;d<3;d++)r[0]=p[s[d]],r[1]=p[s[(d+1)%3]],r.sort(o),void 0===i[m=r.toString()]?i[m]={vert1:r[0],vert2:r[1],face1:l,face2:void 0}:i[m].face2=l;var f=[];for(var m in i){var v=i[m];if(void 0===v.face2||u[v.face1].normal.dot(u[v.face2].normal)<=n){var g=c[v.vert1];f.push(g.x),f.push(g.y),f.push(g.z),g=c[v.vert2],f.push(g.x),f.push(g.y),f.push(g.z)}}this.addAttribute("position",new xr(f,3))}function Wi(e,t,n,r,i,o,a,s){Sr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var c=this;e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u=0;!1===o&&(e>0&&u++,t>0&&u++);var l=function(){var e=(r+1)*(i+1);return!1===o&&(e+=(r+1)*u+r*u),e}(),h=function(){var e=r*i*2*3;return!1===o&&(e+=r*u*3),e}(),p=new pr(new(h>65535?Uint32Array:Uint16Array)(h),1),d=new pr(new Float32Array(3*l),3),f=new pr(new Float32Array(3*l),3),m=new pr(new Float32Array(2*l),2),v=0,g=0,y=[],_=n/2,x=0;function b(n){var i,o,u,l=new _t,h=new Ot,y=0,b=!0===n?e:t,w=!0===n?1:-1;for(o=v,i=1;i<=r;i++)d.setXYZ(v,0,_*w,0),f.setXYZ(v,0,w,0),l.x=.5,l.y=.5,m.setXY(v,l.x,l.y),v++;for(u=v,i=0;i<=r;i++){var E=i/r*s+a,M=Math.cos(E),T=Math.sin(E);h.x=b*T,h.y=_*w,h.z=b*M,d.setXYZ(v,h.x,h.y,h.z),f.setXYZ(v,0,w,0),l.x=.5*M+.5,l.y=.5*T*w+.5,m.setXY(v,l.x,l.y),v++}for(i=0;i<r;i++){var S=o+i,A=u+i;!0===n?(p.setX(g,A),g++,p.setX(g,A+1),g++,p.setX(g,S),g++):(p.setX(g,A+1),g++,p.setX(g,A),g++,p.setX(g,S),g++),y+=3}c.addGroup(x,y,!0===n?1:2),x+=y}!function(){var o,u,l=new Ot,h=new Ot,b=0,w=(t-e)/n;for(u=0;u<=i;u++){var E=[],M=u/i,T=M*(t-e)+e;for(o=0;o<=r;o++){var S=o/r,A=S*s+a,R=Math.sin(A),L=Math.cos(A);h.x=T*R,h.y=-M*n+_,h.z=T*L,d.setXYZ(v,h.x,h.y,h.z),l.set(R,w,L).normalize(),f.setXYZ(v,l.x,l.y,l.z),m.setXY(v,S,1-M),E.push(v),v++}y.push(E)}for(o=0;o<r;o++)for(u=0;u<i;u++){var C=y[u][o],P=y[u+1][o],O=y[u+1][o+1],I=y[u][o+1];p.setX(g,C),g++,p.setX(g,P),g++,p.setX(g,I),g++,p.setX(g,P),g++,p.setX(g,O),g++,p.setX(g,I),g++,b+=6}c.addGroup(x,b,0),x+=b}(),!1===o&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(p),this.addAttribute("position",d),this.addAttribute("normal",f),this.addAttribute("uv",m)}function qi(e,t,n,r,i,o,a,s){Er.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Wi(e,t,n,r,i,o,a,s)),this.mergeVertices()}function Xi(e,t,n,r,i,o,a){qi.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Yi(e,t,n,r,i,o,a){Wi.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Ki(e,t,n,r){Sr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=t+2,o=new Float32Array(3*i),a=new Float32Array(3*i),s=new Float32Array(2*i);a[2]=1,s[0]=.5,s[1]=.5;for(var c=0,u=3,l=2;c<=t;c++,u+=3,l+=2){var h=n+c/t*r;o[u]=e*Math.cos(h),o[u+1]=e*Math.sin(h),a[u+2]=1,s[l]=(o[u]/e+1)/2,s[l+1]=(o[u+1]/e+1)/2}var p=[];for(u=1;u<=t;u++)p.push(u,u+1,0);this.setIndex(new pr(new Uint16Array(p),1)),this.addAttribute("position",new pr(o,3)),this.addAttribute("normal",new pr(a,3)),this.addAttribute("uv",new pr(s,2)),this.boundingSphere=new Vn(new Ot,e)}function Zi(e,t,n,r){Er.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Ki(e,t,n,r))}function Ji(e,t,n,r,i,o){Er.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Rr(e,t,n,r,i,o)),this.mergeVertices()}Ii.prototype=Object.create(Er.prototype),Ii.prototype.constructor=Ii,Ii.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];this.addShape(i,t)}},Ii.prototype.addShape=function(e,t){var n,r,i,o,a,s,c,u,l=void 0!==t.amount?t.amount:100,h=void 0!==t.bevelThickness?t.bevelThickness:6,p=void 0!==t.bevelSize?t.bevelSize:h-2,d=void 0!==t.bevelSegments?t.bevelSegments:3,f=void 0===t.bevelEnabled||t.bevelEnabled,m=void 0!==t.curveSegments?t.curveSegments:12,v=void 0!==t.steps?t.steps:1,g=t.extrudePath,y=!1,_=void 0!==t.UVGenerator?t.UVGenerator:Ii.WorldUVGenerator;g&&(n=g.getSpacedPoints(v),y=!0,f=!1,r=void 0!==t.frames?t.frames:g.computeFrenetFrames(v,!1),i=new Ot,o=new Ot,a=new Ot),f||(d=0,h=0,p=0);var x=this,b=this.vertices.length,w=e.extractPoints(m),E=w.shape,M=w.holes,T=!Oi.isClockWise(E);if(T){for(E=E.reverse(),c=0,u=M.length;c<u;c++)s=M[c],Oi.isClockWise(s)&&(M[c]=s.reverse());T=!1}var S=Oi.triangulateShape(E,M),A=E;for(c=0,u=M.length;c<u;c++)s=M[c],E=E.concat(s);function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,C,P,O,I,N,D=E.length,U=S.length;function k(e,t,n){var r,i,o=1,a=e.x-t.x,s=e.y-t.y,c=n.x-e.x,u=n.y-e.y,l=a*a+s*s,h=a*u-s*c;if(Math.abs(h)>Number.EPSILON){var p=Math.sqrt(l),d=Math.sqrt(c*c+u*u),f=t.x-s/p,m=t.y+a/p,v=((n.x-u/d-f)*u-(n.y+c/d-m)*c)/(a*u-s*c),g=(r=f+a*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new _t(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?c>Number.EPSILON&&(y=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new _t(r/o,i/o)}for(var B=[],F=0,z=A.length,H=z-1,G=F+1;F<z;F++,H++,G++)H===z&&(H=0),G===z&&(G=0),B[F]=k(A[F],A[H],A[G]);var j,V,W=[],q=B.concat();for(c=0,u=M.length;c<u;c++){for(s=M[c],j=[],F=0,H=(z=s.length)-1,G=F+1;F<z;F++,H++,G++)H===z&&(H=0),G===z&&(G=0),j[F]=k(s[F],s[H],s[G]);W.push(j),q=q.concat(j)}for(L=0;L<d;L++){for(P=L/d,O=h*Math.cos(P*Math.PI/2),C=p*Math.sin(P*Math.PI/2),F=0,z=A.length;F<z;F++)Y((I=R(A[F],B[F],C)).x,I.y,-O);for(c=0,u=M.length;c<u;c++)for(s=M[c],j=W[c],F=0,z=s.length;F<z;F++)Y((I=R(s[F],j[F],C)).x,I.y,-O)}for(C=p,F=0;F<D;F++)I=f?R(E[F],q[F],C):E[F],y?(o.copy(r.normals[0]).multiplyScalar(I.x),i.copy(r.binormals[0]).multiplyScalar(I.y),a.copy(n[0]).add(o).add(i),Y(a.x,a.y,a.z)):Y(I.x,I.y,0);for(V=1;V<=v;V++)for(F=0;F<D;F++)I=f?R(E[F],q[F],C):E[F],y?(o.copy(r.normals[V]).multiplyScalar(I.x),i.copy(r.binormals[V]).multiplyScalar(I.y),a.copy(n[V]).add(o).add(i),Y(a.x,a.y,a.z)):Y(I.x,I.y,l/v*V);for(L=d-1;L>=0;L--){for(P=L/d,O=h*Math.cos(P*Math.PI/2),C=p*Math.sin(P*Math.PI/2),F=0,z=A.length;F<z;F++)Y((I=R(A[F],B[F],C)).x,I.y,l+O);for(c=0,u=M.length;c<u;c++)for(s=M[c],j=W[c],F=0,z=s.length;F<z;F++)I=R(s[F],j[F],C),y?Y(I.x,I.y+n[v-1].y,n[v-1].x+O):Y(I.x,I.y,l+O)}function X(e,t){var n,r;for(F=e.length;--F>=0;){n=F,(r=F-1)<0&&(r=e.length-1);var i=0,o=v+2*d;for(i=0;i<o;i++){var a=D*i,s=D*(i+1);Z(t+n+a,t+r+a,t+r+s,t+n+s,e,i,o,n,r)}}}function Y(e,t,n){x.vertices.push(new Ot(e,t,n))}function K(e,t,n){e+=b,t+=b,n+=b,x.faces.push(new lr(e,t,n,null,null,0));var r=_.generateTopUV(x,e,t,n);x.faceVertexUvs[0].push(r)}function Z(e,t,n,r,i,o,a,s,c){e+=b,t+=b,n+=b,r+=b,x.faces.push(new lr(e,t,r,null,null,1)),x.faces.push(new lr(t,n,r,null,null,1));var u=_.generateSideWallUV(x,e,t,n,r);x.faceVertexUvs[0].push([u[0],u[1],u[3]]),x.faceVertexUvs[0].push([u[1],u[2],u[3]])}!function(){if(f){var e=0,t=D*e;for(F=0;F<U;F++)K((N=S[F])[2]+t,N[1]+t,N[0]+t);for(t=D*(e=v+2*d),F=0;F<U;F++)K((N=S[F])[0]+t,N[1]+t,N[2]+t)}else{for(F=0;F<U;F++)K((N=S[F])[2],N[1],N[0]);for(F=0;F<U;F++)K((N=S[F])[0]+D*v,N[1]+D*v,N[2]+D*v)}}(),function(){var e=0;for(X(A,e),e+=A.length,c=0,u=M.length;c<u;c++)X(s=M[c],e),e+=s.length}()},Ii.WorldUVGenerator={generateTopUV:function(e,t,n,r){var i=e.vertices,o=i[t],a=i[n],s=i[r];return[new _t(o.x,o.y),new _t(a.x,a.y),new _t(s.x,s.y)]},generateSideWallUV:function(e,t,n,r,i){var o=e.vertices,a=o[t],s=o[n],c=o[r],u=o[i];return Math.abs(a.y-s.y)<.01?[new _t(a.x,1-a.z),new _t(s.x,1-s.z),new _t(c.x,1-c.z),new _t(u.x,1-u.z)]:[new _t(a.y,1-a.z),new _t(s.y,1-s.z),new _t(c.y,1-c.z),new _t(u.y,1-u.z)]}},Ni.prototype=Object.create(Ii.prototype),Ni.prototype.constructor=Ni,Di.prototype=Object.create(Sr.prototype),Di.prototype.constructor=Di,Ui.prototype=Object.create(Er.prototype),Ui.prototype.constructor=Ui,ki.prototype=Object.create(Sr.prototype),ki.prototype.constructor=ki,Bi.prototype=Object.create(Er.prototype),Bi.prototype.constructor=Bi,Fi.prototype=Object.create(Er.prototype),Fi.prototype.constructor=Fi,zi.prototype=Object.create(Sr.prototype),zi.prototype.constructor=zi,Hi.prototype=Object.create(Er.prototype),Hi.prototype.constructor=Hi,Gi.prototype=Object.create(Sr.prototype),Gi.prototype.constructor=Gi,ji.prototype=Object.create(Er.prototype),ji.prototype.constructor=ji,Vi.prototype=Object.create(Sr.prototype),Vi.prototype.constructor=Vi,Wi.prototype=Object.create(Sr.prototype),Wi.prototype.constructor=Wi,qi.prototype=Object.create(Er.prototype),qi.prototype.constructor=qi,Xi.prototype=Object.create(qi.prototype),Xi.prototype.constructor=Xi,Yi.prototype=Object.create(Wi.prototype),Yi.prototype.constructor=Yi,Ki.prototype=Object.create(Sr.prototype),Ki.prototype.constructor=Ki,Zi.prototype=Object.create(Er.prototype),Zi.prototype.constructor=Zi,Ji.prototype=Object.create(Er.prototype),Ji.prototype.constructor=Ji;var $i=Object.freeze({WireframeGeometry:di,ParametricGeometry:mi,ParametricBufferGeometry:fi,TetrahedronGeometry:yi,TetrahedronBufferGeometry:gi,OctahedronGeometry:xi,OctahedronBufferGeometry:_i,IcosahedronGeometry:wi,IcosahedronBufferGeometry:bi,DodecahedronGeometry:Mi,DodecahedronBufferGeometry:Ei,PolyhedronGeometry:Ti,PolyhedronBufferGeometry:vi,TubeGeometry:Ai,TubeBufferGeometry:Si,TorusKnotGeometry:Li,TorusKnotBufferGeometry:Ri,TorusGeometry:Pi,TorusBufferGeometry:Ci,TextGeometry:Ni,SphereBufferGeometry:Di,SphereGeometry:Ui,RingGeometry:Bi,RingBufferGeometry:ki,PlaneBufferGeometry:Lr,PlaneGeometry:Fi,LatheGeometry:Hi,LatheBufferGeometry:zi,ShapeGeometry:ji,ShapeBufferGeometry:Gi,ExtrudeGeometry:Ii,EdgesGeometry:Vi,ConeGeometry:Xi,ConeBufferGeometry:Yi,CylinderGeometry:qi,CylinderBufferGeometry:Wi,CircleBufferGeometry:Ki,CircleGeometry:Zi,BoxBufferGeometry:Rr,BoxGeometry:Ji});function Qi(){Hn.call(this,{uniforms:_n.merge([Mn.lights,{opacity:{value:1}}]),vertexShader:xn.shadow_vert,fragmentShader:xn.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function eo(e){Hn.call(this,e),this.type="RawShaderMaterial"}function to(e){this.uuid=yt.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(e)?e:[],this.visible=!0}function no(e){zn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new bn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ro(e){no.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function io(e){zn.call(this),this.type="MeshPhongMaterial",this.color=new bn(16777215),this.specular=new bn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=re,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function oo(e){io.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function ao(e){zn.call(this,e),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function so(e){zn.call(this),this.type="MeshLambertMaterial",this.color=new bn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=re,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function co(e){zn.call(this),this.type="LineDashedMaterial",this.color=new bn(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}Qi.prototype=Object.create(Hn.prototype),Qi.prototype.constructor=Qi,Qi.prototype.isShadowMaterial=!0,eo.prototype=Object.create(Hn.prototype),eo.prototype.constructor=eo,eo.prototype.isRawShaderMaterial=!0,to.prototype={constructor:to,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var o=n[r].toJSON(e);delete o.metadata,t.materials.push(o)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},no.prototype=Object.create(zn.prototype),no.prototype.constructor=no,no.prototype.isMeshStandardMaterial=!0,no.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ro.prototype=Object.create(no.prototype),ro.prototype.constructor=ro,ro.prototype.isMeshPhysicalMaterial=!0,ro.prototype.copy=function(e){return no.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},io.prototype=Object.create(zn.prototype),io.prototype.constructor=io,io.prototype.isMeshPhongMaterial=!0,io.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},oo.prototype=Object.create(io.prototype),oo.prototype.constructor=oo,oo.prototype.isMeshToonMaterial=!0,oo.prototype.copy=function(e){return io.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},ao.prototype=Object.create(zn.prototype),ao.prototype.constructor=ao,ao.prototype.isMeshNormalMaterial=!0,ao.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},so.prototype=Object.create(zn.prototype),so.prototype.constructor=so,so.prototype.isMeshLambertMaterial=!0,so.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},co.prototype=Object.create(zn.prototype),co.prototype.constructor=co,co.prototype.isLineDashedMaterial=!0,co.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var uo=Object.freeze({ShadowMaterial:Qi,SpriteMaterial:Jr,RawShaderMaterial:eo,ShaderMaterial:Hn,PointsMaterial:ai,MultiMaterial:to,MeshPhysicalMaterial:ro,MeshStandardMaterial:no,MeshPhongMaterial:io,MeshToonMaterial:oo,MeshNormalMaterial:ao,MeshLambertMaterial:so,MeshDepthMaterial:Gn,MeshBasicMaterial:hr,LineDashedMaterial:co,LineBasicMaterial:ri,Material:zn}),lo={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function ho(e,t,n){var r=this,i=!1,o=0,a=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)}}var po=new ho;function fo(e){this.manager=void 0!==e?e:po}function mo(e){this.manager=void 0!==e?e:po}function vo(e){this.manager=void 0!==e?e:po}function go(e,t){sr.call(this),this.type="Light",this.color=new bn(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function yo(e,t,n){go.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(sr.DefaultUp),this.updateMatrix(),this.groundColor=new bn(t)}function _o(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new _t(512,512),this.map=null,this.matrix=new It}function xo(){_o.call(this,new Pr(50,1,.5,500))}function bo(e,t,n,r,i,o){go.call(this,e,t),this.type="SpotLight",this.position.copy(sr.DefaultUp),this.updateMatrix(),this.target=new sr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new xo}function wo(e,t,n,r){go.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new _o(new Pr(90,1,.5,500))}function Eo(e){_o.call(this,new Or(-5,5,5,-5,.5,500))}function Mo(e,t){go.call(this,e,t),this.type="DirectionalLight",this.position.copy(sr.DefaultUp),this.updateMatrix(),this.target=new sr,this.shadow=new Eo}function To(e,t){go.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}Object.assign(fo.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,o=lo.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],c=!!a[2],u=a[3];u=window.decodeURIComponent(u),c&&(u=window.atob(u));try{var l,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":l=new ArrayBuffer(u.length);for(var p=new Uint8Array(l),d=0;d<u.length;d++)p[d]=u.charCodeAt(d);"blob"===h&&(l=new Blob([l],{type:s}));break;case"document":var f=new DOMParser;l=f.parseFromString(u,s);break;case"json":l=JSON.parse(u);break;default:l=u}window.setTimeout(function(){t&&t(l),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemError(e)},0)}}else{var m=new XMLHttpRequest;m.open("GET",e,!0),m.addEventListener("load",function(n){var o=n.target.response;lo.add(e,o),200===this.status?(t&&t(o),i.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(o),i.manager.itemEnd(e)):(r&&r(n),i.manager.itemError(e))},!1),void 0!==n&&m.addEventListener("progress",function(e){n(e)},!1),m.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),m.send(null)}return i.manager.itemStart(e),m},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:po,this._parser=null}.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new li;a.image=o;var s=new fo(this.manager);function c(c){s.load(e[c],function(e){var n=i._parser(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=Se),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,h=e.length;l<h;++l)c(l);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Se),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:po,this._parser=null}.prototype,{load:function(e,t,n,r){var i=this,o=new En,a=new fo(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:xe,o.wrapT=void 0!==n.wrapT?n.wrapT:xe,o.magFilter=void 0!==n.magFilter?n.magFilter:Se,o.minFilter=void 0!==n.minFilter?n.minFilter:Re,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Se),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(mo.prototype,{load:function(e,t,n,r){var i=this,o=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(o.onload=function(){o.onload=null,URL.revokeObjectURL(o.src),t&&t(o),i.manager.itemEnd(e)},o.onerror=r,0===e.indexOf("data:"))o.src=e;else if(void 0!==this.crossOrigin)o.crossOrigin=this.crossOrigin,o.src=e;else{var a=new fo;a.setPath(this.path),a.setResponseType("blob"),a.setWithCredentials(this.withCredentials),a.load(e,function(e){o.src=URL.createObjectURL(e)},n,r)}return i.manager.itemStart(e),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:po}.prototype,{load:function(e,t,n,r){var i=new Nt,o=new mo(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){i.images[n]=e,6==++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var c=0;c<e.length;++c)s(c);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(vo.prototype,{load:function(e,t,n,r){var i=new At,o=new mo(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setWithCredentials(this.withCredentials),o.setPath(this.path),o.load(e,function(n){var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?je:Ve,i.image=n,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this}}),go.prototype=Object.assign(Object.create(sr.prototype),{constructor:go,isLight:!0,copy:function(e){return sr.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=sr.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),yo.prototype=Object.assign(Object.create(go.prototype),{constructor:yo,isHemisphereLight:!0,copy:function(e){return go.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(_o.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),xo.prototype=Object.assign(Object.create(_o.prototype),{constructor:xo,isSpotLightShadow:!0,update:function(e){var t=2*yt.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,r=e.distance||500,i=this.camera;t===i.fov&&n===i.aspect&&r===i.far||(i.fov=t,i.aspect=n,i.far=r,i.updateProjectionMatrix())}}),bo.prototype=Object.assign(Object.create(go.prototype),{constructor:bo,isSpotLight:!0,copy:function(e){return go.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),wo.prototype=Object.assign(Object.create(go.prototype),{constructor:wo,isPointLight:!0,copy:function(e){return go.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Eo.prototype=Object.assign(Object.create(_o.prototype),{constructor:Eo}),Mo.prototype=Object.assign(Object.create(go.prototype),{constructor:Mo,isDirectionalLight:!0,copy:function(e){return go.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),To.prototype=Object.assign(Object.create(go.prototype),{constructor:To,isAmbientLight:!0});var So,Ao,Ro,Lo,Co={arraySlice:function(e,t,n){return Co.isTypedArray(e)?new e.constructor(e.subarray(t,n)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function Po(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Oo(e,t,n,r){Po.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Io(e,t,n,r){Po.call(this,e,t,n,r)}function No(e,t,n,r){Po.call(this,e,t,n,r)}function Do(e,t,n,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=Co.convertArray(t,this.TimeBufferType),this.values=Co.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function Uo(e,t,n,r){Do.call(this,e,t,n,r)}function ko(e,t,n,r){Po.call(this,e,t,n,r)}function Bo(e,t,n,r){Do.call(this,e,t,n,r)}function Fo(e,t,n,r){Do.call(this,e,t,n,r)}function zo(e,t,n,r){Do.call(this,e,t,n,r)}function Ho(e,t,n){Do.call(this,e,t,n)}function Go(e,t,n,r){Do.call(this,e,t,n,r)}function jo(e,t,n,r){Do.apply(this,arguments)}function Vo(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=yt.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Wo(e){this.manager=void 0!==e?e:po,this.textures={}}function qo(e){this.manager=void 0!==e?e:po}function Xo(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Yo(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:po,this.withCredentials=!1}function Ko(){}function Zo(e,t){this.v1=e,this.v2=t}function Jo(){this.curves=[],this.autoClose=!1}function $o(e,t,n,r,i,o,a,s){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0}Po.prototype={constructor:Po,evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];for(e<s&&(n=2,i=s),a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var c=n+o>>>1;e<t[c]?o=c:n=c+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(e,t,n,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}},Object.assign(Po.prototype,{beforeStart_:Po.prototype.copySampleValue_,afterEnd_:Po.prototype.copySampleValue_}),Oo.prototype=Object.assign(Object.create(Po.prototype),{constructor:Oo,DefaultSettings_:{endingStart:ot,endingEnd:ot},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(n-t)/(r-t),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,_=p*m-p*f,x=0;x!==a;++x)i[x]=v*o[u+x]+g*o[c+x]+y*o[s+x]+_*o[l+x];return i}}),Io.prototype=Object.assign(Object.create(Po.prototype),{constructor:Io,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=(n-t)/(r-t),l=1-u,h=0;h!==a;++h)i[h]=o[c+h]*l+o[s+h]*u;return i}}),No.prototype=Object.assign(Object.create(Po.prototype),{constructor:No,interpolate_:function(e,t,n,r){return this.copySampleValue_(e-1)}}),So={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new No(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Io(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Oo(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn(n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Co.arraySlice(n,i,o),this.values=Co.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("invalid value size in track",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("track is empty",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("out of order keys",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&Co.isTypedArray(r)){a=0;for(var c=r.length;a!==c;++a){var u=r[a];if(isNaN(u)){console.error("value is not a valid number",this,a,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(r)s=!0;else for(var u=a*n,l=u-n,h=u+n,p=0;p!==n;++p){var d=t[u+p];if(d!==t[l+p]||d!==t[h+p]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var f=a*n,m=i*n;for(p=0;p!==n;++p)t[m+p]=t[f+p]}++i}}if(o>0){for(e[i]=e[o],f=o*n,m=i*n,p=0;p!==n;++p)t[m+p]=t[f+p];++i}return i!==e.length&&(this.times=Co.arraySlice(e,0,i),this.values=Co.arraySlice(t,0,i*n)),this}},Uo.prototype=Object.assign(Object.create(So),{constructor:Uo,ValueTypeName:"vector"}),ko.prototype=Object.assign(Object.create(Po.prototype),{constructor:ko,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=(n-t)/(r-t),u=s+a;s!==u;s+=4)Pt.slerpFlat(i,0,o,s-a,o,s,c);return i}}),Bo.prototype=Object.assign(Object.create(So),{constructor:Bo,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new ko(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Fo.prototype=Object.assign(Object.create(So),{constructor:Fo,ValueTypeName:"number"}),zo.prototype=Object.assign(Object.create(So),{constructor:zo,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ho.prototype=Object.assign(Object.create(So),{constructor:Ho,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Go.prototype=Object.assign(Object.create(So),{constructor:Go,ValueTypeName:"color"}),jo.prototype=So,So.constructor=jo,Object.assign(jo,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=jo._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];Co.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Co.convertArray(e.times,Array),values:Co.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fo;case"vector":case"vector2":case"vector3":case"vector4":return Uo;case"color":return Go;case"quaternion":return Bo;case"bool":case"boolean":return Ho;case"string":return zo}throw new Error("Unsupported typeName: "+e)}}),Vo.prototype={constructor:Vo,resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(Vo,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(jo.parse(n[i]).scale(r));return new Vo(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t},i=0,o=n.length;i!==o;++i)t.push(jo.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var u=Co.getKeyframeOrder(s);s=Co.sortedArray(s,1,u),c=Co.sortedArray(c,1,u),r||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new Fo(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/n))}return new Vo(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&c.length>1){var u=r[h=c[1]];u||(r[h]=u=[]),u.push(s)}}var l=[];for(var h in r)l.push(Vo.CreateFromMorphTargetSequence(h,r[h],t,n));return l},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];Co.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var u=s[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var l={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var p=0;p<u[h].morphTargets.length;p++)l[u[h].morphTargets[p]]=-1;for(var d in l){var f=[],m=[];for(p=0;p!==u[h].morphTargets.length;++p){var v=u[h];f.push(v.time),m.push(v.morphTarget===d?1:0)}r.push(new Fo(".morphTargetInfluence["+d+"]",f,m))}o=l.length*(a||1)}else{var g=".bones["+t[c].name+"]";n(Uo,g+".position",u,"pos",r),n(Bo,g+".quaternion",u,"rot",r),n(Uo,g+".scale",u,"scl",r)}}return 0===r.length?null:new Vo(i,o,r)}}),Object.assign(Wo.prototype,{load:function(e,t,n,r){var i=this;new fo(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new uo[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.shading&&(r.shading=e.shading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new _t).fromArray(i)}if(void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.materials)for(var o=0,a=e.materials.length;o<a;o++)r.materials.push(this.parse(e.materials[o]));return r}}),Object.assign(qo.prototype,{load:function(e,t,n,r){var i=this;new fo(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new Sr,n=e.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var i=new r[n.type](n.array);t.setIndex(new pr(i,1))}var o=e.data.attributes;for(var a in o){var s=o[a];i=new r[s.type](s.array),t.addAttribute(a,new pr(i,s.itemSize,s.normalized))}var c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(var u=0,l=c.length;u!==l;++u){var h=c[u];t.addGroup(h.start,h.count,h.materialIndex)}var p=e.data.boundingSphere;if(void 0!==p){var d=new Ot;void 0!==p.center&&d.fromArray(p.center),t.boundingSphere=new Vn(d,p.radius)}return t}}),Xo.prototype={constructor:Xo,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(e,t,n){void 0===Ao&&(Ao=new bn),void 0===Ro&&(Ro=new vo),void 0===Lo&&(Lo=new Wo);var r={};function i(e,i,o,a,s){var c,u=t+e,l=Xo.Handlers.get(u);null!==l?c=l.load(u):(Ro.setCrossOrigin(n),c=Ro.load(u)),void 0!==i&&(c.repeat.fromArray(i),1!==i[0]&&(c.wrapS=_e),1!==i[1]&&(c.wrapT=_e)),void 0!==o&&c.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(c.wrapS=_e),"mirror"===a[0]&&(c.wrapS=be),"repeat"===a[1]&&(c.wrapT=_e),"mirror"===a[1]&&(c.wrapT=be)),void 0!==s&&(c.anisotropy=s);var h=yt.generateUUID();return r[h]=c,h}var o={uuid:yt.generateUUID(),type:"MeshLambertMaterial"};for(var a in e){var s=e[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=O[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=Ao.fromArray(s).getHex();break;case"colorSpecular":o.specular=Ao.fromArray(s).getHex();break;case"colorEmissive":o.emissive=Ao.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=i(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=i(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=i(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=i(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=i(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=i(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=[s,s];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=i(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=i(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=i(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=i(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=_;break;case"doubleSided":o.side=x;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=T),"face"===s&&(o.vertexColors=M);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Lo.setTextures(r),Lo.parse(o)}},Xo.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(Yo.prototype,{load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Xo.prototype.extractUrlBase(e),a=new fo(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var c=i.parse(r,o);t(c.geometry,c.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){var n=new Er,r=void 0!==e.scale?1/e.scale:1;if(function(t){function r(e,t){return e&1<<t}var i,o,a,s,c,u,l,h,p,d,f,m,v,g,y,_,x,b,w,E,M,T,S,A,R,L=e.faces,C=e.vertices,P=e.normals,O=e.colors,I=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&I++;for(i=0;i<I;i++)n.faceVertexUvs[i]=[]}for(s=0,c=C.length;s<c;)(b=new Ot).x=C[s++]*t,b.y=C[s++]*t,b.z=C[s++]*t,n.vertices.push(b);for(s=0,c=L.length;s<c;)if(f=r(d=L[s++],0),m=r(d,1),v=r(d,3),g=r(d,4),y=r(d,5),_=r(d,6),x=r(d,7),f){if((E=new lr).a=L[s],E.b=L[s+1],E.c=L[s+3],(M=new lr).a=L[s+1],M.b=L[s+2],M.c=L[s+3],s+=4,m&&(p=L[s++],E.materialIndex=p,M.materialIndex=p),a=n.faces.length,v)for(i=0;i<I;i++)for(A=e.uvs[i],n.faceVertexUvs[i][a]=[],n.faceVertexUvs[i][a+1]=[],o=0;o<4;o++)R=new _t(A[2*(h=L[s++])],A[2*h+1]),2!==o&&n.faceVertexUvs[i][a].push(R),0!==o&&n.faceVertexUvs[i][a+1].push(R);if(g&&(l=3*L[s++],E.normal.set(P[l++],P[l++],P[l]),M.normal.copy(E.normal)),y)for(i=0;i<4;i++)l=3*L[s++],S=new Ot(P[l++],P[l++],P[l]),2!==i&&E.vertexNormals.push(S),0!==i&&M.vertexNormals.push(S);if(_&&(T=O[u=L[s++]],E.color.setHex(T),M.color.setHex(T)),x)for(i=0;i<4;i++)T=O[u=L[s++]],2!==i&&E.vertexColors.push(new bn(T)),0!==i&&M.vertexColors.push(new bn(T));n.faces.push(E),n.faces.push(M)}else{if((w=new lr).a=L[s++],w.b=L[s++],w.c=L[s++],m&&(p=L[s++],w.materialIndex=p),a=n.faces.length,v)for(i=0;i<I;i++)for(A=e.uvs[i],n.faceVertexUvs[i][a]=[],o=0;o<3;o++)R=new _t(A[2*(h=L[s++])],A[2*h+1]),n.faceVertexUvs[i][a].push(R);if(g&&(l=3*L[s++],w.normal.set(P[l++],P[l++],P[l])),y)for(i=0;i<3;i++)l=3*L[s++],S=new Ot(P[l++],P[l++],P[l]),w.vertexNormals.push(S);if(_&&(u=L[s++],w.color.setHex(O[u])),x)for(i=0;i<3;i++)u=L[s++],w.vertexColors.push(new bn(O[u]));n.faces.push(w)}}(r),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=t){var o=e.skinWeights[r],a=t>1?e.skinWeights[r+1]:0,s=t>2?e.skinWeights[r+2]:0,c=t>3?e.skinWeights[r+3]:0;n.skinWeights.push(new Rt(o,a,s,c))}if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=t){var u=e.skinIndices[r],l=t>1?e.skinIndices[r+1]:0,h=t>2?e.skinIndices[r+2]:0,p=t>3?e.skinIndices[r+3]:0;n.skinIndices.push(new Rt(u,l,h,p))}n.bones=e.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match.")}(),function(t){if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){n.morphTargets[r]={},n.morphTargets[r].name=e.morphTargets[r].name,n.morphTargets[r].vertices=[];for(var o=n.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,c=a.length;s<c;s+=3){var u=new Ot;u.x=a[s]*t,u.y=a[s+1]*t,u.z=a[s+2]*t,o.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var l=n.faces,h=e.morphColors[0].colors;for(r=0,i=l.length;r<i;r++)l[r].color.fromArray(h,3*r)}}(r),function(){var t=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=Vo.parseAnimation(r[i],n.bones);o&&t.push(o)}if(n.morphTargets){var a=Vo.CreateClipsFromMorphTargetSequences(n.morphTargets,10);t=t.concat(a)}t.length>0&&(n.animations=t)}(),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:n};var i=Xo.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:n,materials:i}}}),Object.assign(function(e){this.manager=void 0!==e?e:po,this.texturePath=""}.prototype,{load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new fo(i.manager).load(e,function(n){var r=null;try{r=JSON.parse(n)}catch(t){return void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=r.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(r,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),i=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,i),a=this.parseObject(e.object,n,o);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new Yo,r=new qo,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new $i[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new $i[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new $i[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new $i[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new $i[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new $i[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new $i[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new $i[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new $i[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new $i[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new $i[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":a=r.parse(s);break;case"Geometry":a=n.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new Wo;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=r.parse(e[i]);n[a.uuid]=a}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=Vo.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var o=new mo(new ho(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var c=e[a],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;r[c.uuid]=i(u)}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new At(t[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,ye)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],we),s.wrapT=n(a.wrap[1],we)),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,Le)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,Le)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),r[a.uuid]=s}return r},parseObject:function(){var e=new It;return function(t,n,r){var i;function o(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),n[e]}function a(e){if(void 0!==e)return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}switch(t.type){case"Scene":i=new Kr,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new bn(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new Yr(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new Xr(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Pr(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new Or(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":i=new To(t.color,t.intensity);break;case"DirectionalLight":i=new Mo(t.color,t.intensity);break;case"PointLight":i=new wo(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":i=new bo(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new yo(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=o(t.geometry),c=a(t.material);i=s.bones&&s.bones.length>0?new ni(s,c):new Ar(s,c);break;case"LOD":i=new Qr;break;case"Line":i=new ii(o(t.geometry),a(t.material),t.mode);break;case"LineSegments":i=new oi(o(t.geometry),a(t.material));break;case"PointCloud":case"Points":i=new si(o(t.geometry),a(t.material));break;case"Sprite":i=new $r(a(t.material));break;case"Group":i=new ci;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:i=new sr}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.children)for(var u in t.children)i.add(this.parseObject(t.children[u],n,r));if("LOD"===t.type)for(var l=t.levels,h=0;h<l.length;h++){var p=l[h];void 0!==(u=i.getObjectByProperty("uuid",p.object))&&i.addLevel(u,p.distance)}return i}}()}),Ko.prototype={constructor:Ko,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e||(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e||(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,c=o-1;s<=c;)if((a=r[i=Math.floor(s+(c-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(r[i=c]===n)return i/(o-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new Ot,a=[],s=[],c=[],u=new Ot,l=new It;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new Ot,c[0]=new Ot;var h=Number.MAX_VALUE,p=Math.abs(a[0].x),d=Math.abs(a[0].y),f=Math.abs(a[0].z);for(p<=h&&(h=p,o.set(1,0,0)),d<=h&&(h=d,o.set(0,1,0)),f<=h&&o.set(0,0,1),u.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],u),c[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),c[n]=c[n-1].clone(),u.crossVectors(a[n-1],a[n]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(yt.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(l.makeRotationAxis(u,i))),c[n].crossVectors(a[n],s[n]);if(!0===t)for(i=Math.acos(yt.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(l.makeRotationAxis(a[n],i*n)),c[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:c}}},Ko.create=function(e,t){return e.prototype=Object.create(Ko.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Zo.prototype=Object.create(Ko.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isLineCurve=!0,Zo.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},Zo.prototype.getPointAt=function(e){return this.getPoint(e)},Zo.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},Jo.prototype=Object.assign(Object.create(Ko.prototype),{constructor:Jo,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Zo(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e||(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),c=0;c<s.length;c++){var u=s[c];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Er,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Ot(i.x,i.y,i.z||0))}return t}}),$o.prototype=Object.create(Ko.prototype),$o.prototype.constructor=$o,$o.prototype.isEllipseCurve=!0,$o.prototype.getPoint=function(e){for(var t=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=t;for(;n>t;)n-=t;n<Number.EPSILON&&(n=r?0:t),!0!==this.aClockwise||r||(n===t?n=-t:n-=t);var i=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(i),a=this.aY+this.yRadius*Math.sin(i);if(0!==this.aRotation){var s=Math.cos(this.aRotation),c=Math.sin(this.aRotation),u=o-this.aX,l=a-this.aY;o=u*s-l*c+this.aX,a=u*c+l*s+this.aY}return new _t(o,a)};var Qo=function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},ea=function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},ta=function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i;return(2*t-2*n+o+a)*(i*s)+(-3*t+3*n-2*o-a)*s+o*i+t};function na(e){this.points=void 0===e?[]:e}function ra(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r}function ia(e,t,n){this.v0=e,this.v1=t,this.v2=n}na.prototype=Object.create(Ko.prototype),na.prototype.constructor=na,na.prototype.isSplineCurve=!0,na.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,o=t[0===r?r:r-1],a=t[r],s=t[r>t.length-2?t.length-1:r+1],c=t[r>t.length-3?t.length-1:r+2],u=ta;return new _t(u(o.x,a.x,s.x,c.x,i),u(o.y,a.y,s.y,c.y,i))},ra.prototype=Object.create(Ko.prototype),ra.prototype.constructor=ra,ra.prototype.getPoint=function(e){var t=Oi.b3;return new _t(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},ra.prototype.getTangent=function(e){var t=ea;return new _t(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},ia.prototype=Object.create(Ko.prototype),ia.prototype.constructor=ia,ia.prototype.getPoint=function(e){var t=Oi.b2;return new _t(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y))},ia.prototype.getTangent=function(e){var t=Qo;return new _t(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y)).normalize()};var oa,aa=Object.assign(Object.create(Jo.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Zo(this.currentPoint.clone(),new _t(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new ia(this.currentPoint.clone(),new _t(e,t),new _t(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new ra(this.currentPoint.clone(),new _t(e,t),new _t(n,r),new _t(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new na([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var c=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+c,t+u,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var c=new $o(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);var l=c.getPoint(1);this.currentPoint.copy(l)}});function sa(){ca.apply(this,arguments),this.holes=[]}function ca(e){Jo.call(this),this.currentPoint=new _t,e&&this.fromPoints(e)}function ua(){this.subPaths=[],this.currentPath=null}function la(e){this.data=e}sa.prototype=Object.assign(Object.create(aa),{constructor:sa,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),ca.prototype=aa,aa.constructor=ca,ua.prototype={moveTo:function(e,t){this.currentPath=new ca,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new sa;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],c=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],c=-c,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=u*(e.x-a.x)-c*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=Oi.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,c,u=[];if(1===o.length)return s=o[0],(c=new sa).curves=s.curves,u.push(c),u;var l=!i(o[0].getPoints());l=e?!l:l;var h,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!l&&f[v]&&v++,f[v]={s:new sa,p:h},f[v].s.curves=s.curves,l&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(o);if(f.length>1){for(var _=!1,x=[],b=0,w=f.length;b<w;b++)d[b]=[];for(b=0,w=f.length;b<w;b++)for(var E=m[b],M=0;M<E.length;M++){for(var T=E[M],S=!0,A=0;A<f.length;A++)r(T.p,f[A].p)&&(b!==A&&x.push({froms:b,tos:A,hole:M}),S?(S=!1,d[A].push(T)):_=!0);S&&d[b].push(T)}x.length>0&&(_||(m=d))}g=0;for(var R=f.length;g<R;g++){c=f[g].s,u.push(c);for(var L=0,C=(p=m[g]).length;L<C;L++)c.holes.push(p[L].h)}return u}},Object.assign(la.prototype,{isFont:!0,generateShapes:function(e,t,n){function r(e,t,r){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,c,u,l,h,p,d,f,m,v,g=new ua,y=[],_=Oi.b2,x=Oi.b3;if(o.o)for(var b=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),w=0,E=b.length;w<E;)switch(b[w++]){case"m":a=b[w++]*t+r,s=b[w++]*t,g.moveTo(a,s);break;case"l":a=b[w++]*t+r,s=b[w++]*t,g.lineTo(a,s);break;case"q":if(c=b[w++]*t+r,u=b[w++]*t,p=b[w++]*t+r,d=b[w++]*t,g.quadraticCurveTo(p,d,c,u),v=y[y.length-1]){l=v.x,h=v.y;for(var M=1;M<=n;M++)_(T=M/n,l,p,c),_(T,h,d,u)}break;case"b":if(c=b[w++]*t+r,u=b[w++]*t,p=b[w++]*t+r,d=b[w++]*t,f=b[w++]*t+r,m=b[w++]*t,g.bezierCurveTo(p,d,f,m,c,u),v=y[y.length-1])for(l=v.x,h=v.y,M=1;M<=n;M++){var T;x(T=M/n,l,p,f,c),x(T,h,d,m,u)}}return{offset:o.ha*t,path:g}}}void 0===t&&(t=100),void 0===n&&(n=4);for(var i=this.data,o=function(e){for(var n=String(e).split(""),o=t/i.resolution,a=0,s=[],c=0;c<n.length;c++){var u=r(n[c],o,a);a+=u.offset,s.push(u.path)}return s}(e),a=[],s=0,c=o.length;s<c;s++)Array.prototype.push.apply(a,o[s].toShapes());return a}}),Object.assign(function(e){this.manager=void 0!==e?e:po}.prototype,{load:function(e,t,n,r){var i=this;new fo(this.manager).load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new la(e)}});var ha,pa,da,fa,ma,va,ga,ya,_a,xa,ba,wa={getContext:function(){return void 0===oa&&(oa=new(window.AudioContext||window.webkitAudioContext)),oa},setContext:function(e){oa=e}};function Ea(e){this.manager=void 0!==e?e:po}function Ma(e,t,n,r){go.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Ta(e,t,n){sr.call(this),this.type="CubeCamera";var r=new Pr(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Ot(1,0,0)),this.add(r);var i=new Pr(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Ot(-1,0,0)),this.add(i);var o=new Pr(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Ot(0,1,0)),this.add(o);var a=new Pr(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Ot(0,-1,0)),this.add(a);var s=new Pr(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Ot(0,0,1)),this.add(s);var c=new Pr(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new Ot(0,0,-1)),this.add(c);var u={format:je,magFilter:Se,minFilter:Se};this.renderTarget=new Ct(n,n,u),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=u,n.activeCubeFace=5,e.render(t,c,n),e.setRenderTarget(null)}}function Sa(){sr.call(this),this.type="AudioListener",this.context=wa.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Aa(e){sr.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Ra(e){Aa.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function La(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Ca(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Pa(e,t,n){this.path=t,this.parsedPath=n||Pa.parseTrackName(t),this.node=Pa.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Oa(e){this.uuid=yt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Ia(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:ot,endingEnd:ot},s=0;s!==i;++s){var c=r[s].createInterpolant(null);o[s]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=it,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Na(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Da(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Ua(){Sr.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function ka(e,t,n,r){this.uuid=yt.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Ba(e,t){this.uuid=yt.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Fa(e,t,n){Ba.call(this,e,t),this.meshPerAttribute=n||1}function za(e,t,n){pr.call(this,e,t),this.meshPerAttribute=n||1}function Ha(e,t,n,r){this.ray=new Kn(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ga(e,t){return e.distance-t.distance}function ja(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)ja(i[o],t,n,!0)}function Va(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Wa(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function qa(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Xa(e,t){Ar.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r=n-1,i=n/1;this.createAnimation("__default",0,r,i),this.setAnimationWeight("__default",1)}function Ya(e){sr.call(this),this.material=e,this.render=function(e){}}function Ka(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var c=new Sr,u=new xr(2*a*3,3);c.addAttribute("position",u),oi.call(this,c,new ri({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Za(e){sr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Sr,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,i=1;r<32;r++,i++){var o=r/32*Math.PI*2,a=i/32*Math.PI*2;n.push(Math.cos(o),Math.sin(o),1,Math.cos(a),Math.sin(a),1)}t.addAttribute("position",new xr(n,3));var s=new ri({fog:!1});this.cone=new oi(t,s),this.add(this.cone),this.update()}function Ja(e){this.bones=this.getBoneList(e);for(var t=new Sr,n=[],r=[],i=new bn(0,0,1),o=new bn(0,1,0),a=0;a<this.bones.length;a++){var s=this.bones[a];s.parent&&s.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(i.r,i.g,i.b),r.push(o.r,o.g,o.b))}t.addAttribute("position",new xr(n,3)),t.addAttribute("color",new xr(r,3));var c=new ri({vertexColors:T,depthTest:!1,depthWrite:!1,transparent:!0});oi.call(this,t,c),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function $a(e,t){this.light=e,this.light.updateMatrixWorld();var n=new Di(t,4,2),r=new hr({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),Ar.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Qa(e){sr.call(this),this.light=e,this.light.updateMatrixWorld();var t=new hr({color:e.color,fog:!1}),n=new hr({color:e.color,fog:!1,wireframe:!0}),r=new Sr;r.addAttribute("position",new pr(new Float32Array(18),3)),this.add(new Ar(r,t)),this.add(new Ar(r,n)),this.update()}function es(e,t){sr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var n=new _i(t);n.rotateY(.5*Math.PI);var r=new hr({vertexColors:T,wireframe:!0}),i=n.getAttribute("position"),o=new Float32Array(3*i.count);n.addAttribute("color",new pr(o,3)),this.add(new Ar(n,r)),this.update()}function ts(e,t,n,r){e=e||10,t=t||10,n=new bn(void 0!==n?n:4473924),r=new bn(void 0!==r?r:8947848);for(var i=t/2,o=2*e/t,a=[],s=[],c=0,u=0,l=-e;c<=t;c++,l+=o){a.push(-e,0,l,e,0,l),a.push(l,0,-e,l,0,e);var h=c===i?n:r;h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3}var p=new Sr;p.addAttribute("position",new xr(a,3)),p.addAttribute("color",new xr(s,3));var d=new ri({vertexColors:T});oi.call(this,p,d)}function ns(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new bn(void 0!==i?i:4473924),o=new bn(void 0!==o?o:8947848);var a,s,c,u,l,h,p,d=[],f=[];for(u=0;u<=t;u++)c=u/t*(2*Math.PI),a=Math.sin(c)*e,s=Math.cos(c)*e,d.push(0,0,0),d.push(a,0,s),p=1&u?i:o,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(u=0;u<=n;u++)for(p=1&u?i:o,h=e-e/n*u,l=0;l<r;l++)c=l/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,d.push(a,0,s),f.push(p.r,p.g,p.b),c=(l+1)/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,d.push(a,0,s),f.push(p.r,p.g,p.b);var m=new Sr;m.addAttribute("position",new xr(d,3)),m.addAttribute("color",new xr(f,3));var v=new ri({vertexColors:T});oi.call(this,m,v)}function rs(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Sr,u=new xr(2*a*3,3);c.addAttribute("position",u),oi.call(this,c,new ri({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function is(e,t){sr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var n=new Sr;n.addAttribute("position",new xr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new ri({fog:!1});this.add(new ii(n,r)),(n=new Sr).addAttribute("position",new xr([0,0,0,0,0,1],3)),this.add(new ii(n,r)),this.update()}function os(e){var t=new Sr,n=new ri({color:16777215,vertexColors:M}),r=[],i=[],o={},a=new bn(16755200),s=new bn(16711680),c=new bn(43775),u=new bn(16777215),l=new bn(3355443);function h(e,t,n){p(e,n),p(t,n)}function p(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",u),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),t.addAttribute("position",new xr(r,3)),t.addAttribute("color",new xr(i,3)),oi.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function as(e,t){void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Sr;i.setIndex(new pr(n,1)),i.addAttribute("position",new pr(r,3)),oi.call(this,i,new ri({color:t})),void 0!==e&&this.update(e)}Object.assign(Ea.prototype,{load:function(e,t,n,r){var i=new fo(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){wa.getContext().decodeAudioData(e,function(e){t(e)})},n,r)}}),Ma.prototype=Object.assign(Object.create(go.prototype),{constructor:Ma,isRectAreaLight:!0,copy:function(e){return go.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this}}),Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Pr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Pr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}.prototype,{update:(ya=new It,_a=new It,function(e){if(ha!==this||pa!==e.focus||da!==e.fov||fa!==e.aspect*this.aspect||ma!==e.near||va!==e.far||ga!==e.zoom){ha=this,pa=e.focus,da=e.fov,fa=e.aspect*this.aspect,ma=e.near,va=e.far,ga=e.zoom;var t,n,r=e.projectionMatrix.clone(),i=this.eyeSep/2,o=i*ma/pa,a=ma*Math.tan(yt.DEG2RAD*da*.5)/ga;_a.elements[12]=-i,ya.elements[12]=i,t=-a*fa+o,n=a*fa+o,r.elements[0]=2*ma/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(r),t=-a*fa-o,n=a*fa-o,r.elements[0]=2*ma/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_a),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ya)})}),Ta.prototype=Object.create(sr.prototype),Ta.prototype.constructor=Ta,Sa.prototype=Object.assign(Object.create(sr.prototype),{constructor:Sa,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new Ot,t=new Pt,n=new Ot,r=new Ot;return function(i){sr.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),Aa.prototype=Object.assign(Object.create(sr.prototype),{constructor:Aa,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),Ra.prototype=Object.assign(Object.create(Aa.prototype),{constructor:Ra,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Ot;return function(t){sr.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(La.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Ca.prototype={constructor:Ca,accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r,i){Pt.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}},Pa.prototype={constructor:Pa,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Pa.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("  can not bind to objectName of node, undefined",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var c=this.Versioning.None;void 0!==e.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}else{var l=t.nodeName;console.error("  trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Pa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Pa.prototype.getValue,_setValue_unbound:Pa.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),Pa.Composite=function(e,t,n){var r=n||Pa.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)},Pa.Composite.prototype={constructor:Pa.Composite,getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Pa.create=function(e,t,n){return e&&e.isAnimationObjectGroup?new Pa.Composite(e,t,n):new Pa(e,t,n)},Pa.parseTrackName=function(e){var t=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(e);if(!t)throw new Error("cannot parse trackName at all: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return n},Pa.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(e){for(var n=0;n<e.bones.length;n++){var r=e.bones[n];if(r.name===t)return r}return null}(e.skeleton);if(n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null},Oa.prototype={constructor:Oa,isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._paths,a=this._parsedPaths,s=this._bindings,c=s.length,u=0,l=arguments.length;u!==l;++u){var h=arguments[u],p=h.uuid,d=i[p],f=void 0;if(void 0===d){d=n++,i[p]=d,t.push(h);for(var m=0,v=c;m!==v;++m)s[m].push(new Pa(h,o[m],a[m]))}else if(d<r){f=t[d];var g=--r,y=t[g];for(i[y.uuid]=d,t[d]=y,i[p]=g,t[g]=h,m=0,v=c;m!==v;++m){var _=s[m],x=_[g],b=_[d];_[d]=x,void 0===b&&(b=new Pa(h,o[m],a[m])),_[g]=b}}else t[d]!==f&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(e){for(var t=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a],u=c.uuid,l=r[u];if(void 0!==l&&l>=n){var h=n++,p=t[h];r[p.uuid]=l,t[l]=p,r[u]=h,t[h]=c;for(var d=0,f=o;d!==f;++d){var m=i[d],v=m[h],g=m[l];m[l]=v,m[h]=g}}}this.nCachedObjects_=n},uncache:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,c=arguments.length;s!==c;++s){var u=arguments[s].uuid,l=i[u];if(void 0!==l)if(delete i[u],l<r){var h=--r,p=t[h],d=t[y=--n];i[p.uuid]=l,t[l]=p,i[d.uuid]=h,t[h]=d,t.pop();for(var f=0,m=a;f!==m;++f){var v=(_=o[f])[h],g=_[y];_[l]=v,_[h]=g,_.pop()}}else{var y;for(i[(d=t[y=--n]).uuid]=l,t[l]=d,t.pop(),f=0,m=a;f!==m;++f){var _;(_=o[f])[l]=_[y],_.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,u=this.nCachedObjects_,l=new Array(c);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var h=u,p=s.length;h!==p;++h){var d=s[h];l[h]=new Pa(d,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}},Ia.prototype={constructor:Ia,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=i,s[1]=i+n,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,u=this._propertyBindings,l=0,h=c.length;l!==h;++l)c[l].evaluate(a),u[l].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=2202===r;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:ot:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:ot:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}},Object.assign(Na.prototype,r.prototype,{clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Vo.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var c=a.actionByRoot[r];if(void 0!==c)return c;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new Ia(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Vo.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){var s=t[a];s.enabled&&s._update(r,e,i,o)}var c=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)c[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var u=c._cacheIndex,l=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=u,t[u]=l,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Object.assign(Na.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,u=c[s];void 0===u&&(u={},c[s]=u);for(var l=0;l!==i;++l){var h=r[l],p=h.name,d=u[p];if(void 0!==d)o[l]=d;else{if(void 0!==(d=o[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=t&&t._propertyBindings[l].binding.parsedPath;++(d=new Ca(Pa.create(n,p,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),o[l]=d}a[l].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,s[u]=c,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[i];e:{for(var u in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Io(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),Da.prototype.clone=function(){return new Da(void 0===this.value.clone?this.value:this.value.clone())},Ua.prototype=Object.create(Sr.prototype),Ua.prototype.constructor=Ua,Ua.prototype.isInstancedBufferGeometry=!0,Ua.prototype.addGroup=function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},Ua.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=e.groups,a=0,s=o.length;a<s;a++){var c=o[a];this.addGroup(c.start,c.count,c.materialIndex)}return this},ka.prototype={constructor:ka,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},Ba.prototype={constructor:Ba,isInterleavedBuffer:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}},Fa.prototype=Object.create(Ba.prototype),Fa.prototype.constructor=Fa,Fa.prototype.isInstancedInterleavedBuffer=!0,Fa.prototype.copy=function(e){return Ba.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},za.prototype=Object.create(pr.prototype),za.prototype.constructor=za,za.prototype.isInstancedBufferAttribute=!0,za.prototype.copy=function(e){return pr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Ha.prototype={constructor:Ha,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return ja(e,this,n,t),n.sort(Ga),n},intersectObjects:function(e,t){var n=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=e.length;r<i;r++)ja(e[r],this,n,t);return n.sort(Ga),n}},Va.prototype={constructor:Va,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},Wa.prototype={constructor:Wa,set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(yt.clamp(e.y/this.radius,-1,1))),this}},qa.prototype={constructor:qa,set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}},Xa.prototype=Object.create(Ar.prototype),Xa.prototype.constructor=Xa,Xa.prototype.createAnimation=function(e,t,n,r){var i={start:t,end:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},Xa.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/i,r={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o].name.match(n);s&&s.length>1&&(r[c=s[1]]||(r[c]={start:1/0,end:-1/0}),o<(u=r[c]).start&&(u.start=o),o>u.end&&(u.end=o),t||(t=c))}for(var c in r){var u=r[c];this.createAnimation(c,u.start,u.end,e)}this.firstAnimation=t},Xa.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},Xa.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},Xa.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},Xa.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},Xa.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},Xa.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},Xa.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},Xa.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},Xa.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},Xa.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},Xa.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var o=r.start+yt.clamp(Math.floor(r.time/i),0,r.length-1),a=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o);var s=r.time%i/i;r.directionBackwards&&(s=1-s),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=s*a,this.morphTargetInfluences[r.lastFrame]=(1-s)*a):this.morphTargetInfluences[r.currentFrame]=a}}},Ya.prototype=Object.create(sr.prototype),Ya.prototype.constructor=Ya,Ya.prototype.isImmediateRenderObject=!0,Ka.prototype=Object.create(oi.prototype),Ka.prototype.constructor=Ka,Ka.prototype.update=function(){var e=new Ot,t=new Ot,n=new Wn;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,c=a.faces,u=0,l=0,h=c.length;l<h;l++)for(var p=c[l],d=0,f=p.vertexNormals.length;d<f;d++){var m=s[p[r[d]]],v=p.vertexNormals[d];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(u=0,d=0,f=g.count;d<f;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(i),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}return o.needsUpdate=!0,this}}(),Za.prototype=Object.create(sr.prototype),Za.prototype.constructor=Za,Za.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Za.prototype.update=(xa=new Ot,ba=new Ot,function(){var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),xa.setFromMatrixPosition(this.light.matrixWorld),ba.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ba.sub(xa)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}),Ja.prototype=Object.create(oi.prototype),Ja.prototype.constructor=Ja,Ja.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},Ja.prototype.update=function(){var e=new Ot,t=new It,n=new It;return function(){var r=this.geometry,i=r.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var o=0,a=0;o<this.bones.length;o++){var s=this.bones[o];s.parent&&s.parent.isBone&&(t.multiplyMatrices(n,s.matrixWorld),e.setFromMatrixPosition(t),i.setXYZ(a,e.x,e.y,e.z),t.multiplyMatrices(n,s.parent.matrixWorld),e.setFromMatrixPosition(t),i.setXYZ(a+1,e.x,e.y,e.z),a+=2)}r.getAttribute("position").needsUpdate=!0}}(),$a.prototype=Object.create(Ar.prototype),$a.prototype.constructor=$a,$a.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},$a.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},Qa.prototype=Object.create(sr.prototype),Qa.prototype.constructor=Qa,Qa.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},Qa.prototype.update=function(){var e=new Ot,t=new Ot;return function(){var n=this.children[0],r=this.children[1];if(this.light.target){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld);var i=t.clone().sub(e);n.lookAt(i),r.lookAt(i)}n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var o=.5*this.light.width,a=.5*this.light.height,s=n.geometry.getAttribute("position"),c=s.array;c[0]=o,c[1]=-a,c[2]=0,c[3]=o,c[4]=a,c[5]=0,c[6]=-o,c[7]=a,c[8]=0,c[9]=-o,c[10]=a,c[11]=0,c[12]=-o,c[13]=-a,c[14]=0,c[15]=o,c[16]=-a,c[17]=0,s.needsUpdate=!0}}(),es.prototype=Object.create(sr.prototype),es.prototype.constructor=es,es.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},es.prototype.update=function(){var e=new Ot,t=new bn,n=new bn;return function(){var r=this.children[0],i=r.geometry.getAttribute("color");t.copy(this.light.color).multiplyScalar(this.light.intensity),n.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),i.needsUpdate=!0}}(),ts.prototype=Object.create(oi.prototype),ts.prototype.constructor=ts,ns.prototype=Object.create(oi.prototype),ns.prototype.constructor=ns,rs.prototype=Object.create(oi.prototype),rs.prototype.constructor=rs,rs.prototype.update=function(){var e=new Ot,t=new Ot,n=new Wn;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,c=0,u=0,l=s.length;u<l;u++){var h=s[u],p=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(c,e.x,e.y,e.z),c+=1,i.setXYZ(c,t.x,t.y,t.z),c+=1}return i.needsUpdate=!0,this}}(),is.prototype=Object.create(sr.prototype),is.prototype.constructor=is,is.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},is.prototype.update=function(){var e=new Ot,t=new Ot,n=new Ot;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e);var r=this.children[0],i=this.children[1];r.lookAt(n),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(n),i.scale.z=n.length()}}(),os.prototype=Object.create(oi.prototype),os.prototype.constructor=os,os.prototype.update=function(){var e,t,n=new Ot,r=new Cr;function i(i,o,a,s){n.set(o,a,s).unproject(r);var c=t[i];if(void 0!==c)for(var u=e.getAttribute("position"),l=0,h=c.length;l<h;l++)u.setXYZ(c[l],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),as.prototype=Object.create(oi.prototype),as.prototype.constructor=as,as.prototype.update=function(){var e=new jn;return function(t){if(t&&t.isBox3?e.copy(t):e.setFromObject(t),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var ss=new Sr;ss.addAttribute("position",new xr([0,0,0,0,1,0],3));var cs,us,ls=new Wi(0,.5,1,5,1);function hs(e,t,n,r,i,o){sr.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),this.position.copy(t),this.line=new ii(ss,new ri({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ar(ls,new hr({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function ps(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Sr;n.addAttribute("position",new xr(t,3)),n.addAttribute("color",new xr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new ri({vertexColors:T});oi.call(this,n,r)}ls.translate(0,-.5,0),hs.prototype=Object.create(sr.prototype),hs.prototype.constructor=hs,hs.prototype.setDirection=(us=new Ot,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(us.set(e.z,0,-e.x).normalize(),cs=Math.acos(e.y),this.quaternion.setFromAxisAngle(us,cs))}),hs.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},hs.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},ps.prototype=Object.create(oi.prototype),ps.prototype.constructor=ps;var ds=function(){var e=new Ot,t=new i,n=new i,r=new i;function i(){}return i.prototype.init=function(e,t,n,r){this.c0=e,this.c1=n,this.c2=-3*e+3*t-2*n-r,this.c3=2*e-2*t+n+r},i.prototype.initNonuniformCatmullRom=function(e,t,n,r,i,o,a){var s=(t-e)/i-(n-e)/(i+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+a)+(r-n)/a;s*=o,c*=o,this.init(t,n,s,c)},i.prototype.initCatmullRom=function(e,t,n,r,i){this.init(t,n,i*(n-e),i*(r-t))},i.prototype.calc=function(e){var t=e*e,n=t*e;return this.c0+this.c1*e+this.c2*t+this.c3*n},Ko.create(function(e){this.points=e||[],this.closed=!1},function(i){var o,a,s,c,u,l,h,p,d=this.points;if((c=d.length)<2&&console.log("duh, you need at least 2 points"),s=(o=(c-(this.closed?0:1))*i)-(a=Math.floor(o)),this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/d.length)+1)*d.length:0===s&&a===c-1&&(a=c-2,s=1),this.closed||a>0?u=d[(a-1)%c]:(e.subVectors(d[0],d[1]).add(d[0]),u=e),l=d[a%c],h=d[(a+1)%c],this.closed||a+2<c?p=d[(a+2)%c]:(e.subVectors(d[c-1],d[c-2]).add(d[c-1]),p=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var f="chordal"===this.type?.5:.25,m=Math.pow(u.distanceToSquared(l),f),v=Math.pow(l.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(p),f);v<1e-4&&(v=1),m<1e-4&&(m=v),g<1e-4&&(g=v),t.initNonuniformCatmullRom(u.x,l.x,h.x,p.x,m,v,g),n.initNonuniformCatmullRom(u.y,l.y,h.y,p.y,m,v,g),r.initNonuniformCatmullRom(u.z,l.z,h.z,p.z,m,v,g)}else if("catmullrom"===this.type){var y=void 0!==this.tension?this.tension:.5;t.initCatmullRom(u.x,l.x,h.x,p.x,y),n.initCatmullRom(u.y,l.y,h.y,p.y,y),r.initCatmullRom(u.z,l.z,h.z,p.z,y)}return new Ot(t.calc(s),n.calc(s),r.calc(s))})}();function fs(e,t,n,r,i,o){$o.call(this,e,t,n,n,r,i,o)}Ko.create(function(e){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===e?[]:e},function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,o=t[0==r?r:r-1],a=t[r],s=t[r>t.length-2?t.length-1:r+1],c=t[r>t.length-3?t.length-1:r+2],u=ta;return new Ot(u(o.x,a.x,s.x,c.x,i),u(o.y,a.y,s.y,c.y,i),u(o.z,a.z,s.z,c.z,i))}),Ko.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t=Oi.b3;return new Ot(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),Ko.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t=Oi.b2;return new Ot(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y),t(e,this.v0.z,this.v1.z,this.v2.z))}),Ko.create(function(e,t){this.v1=e,this.v2=t},function(e){if(1===e)return this.v2.clone();var t=new Ot;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),fs.prototype=Object.create($o.prototype),fs.prototype.constructor=fs,Object.create(ds.prototype),ts.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(Sn.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(jn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),cr.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},yt.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(Wn.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)}}),Object.assign(It.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Ot),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)}}),qn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Pt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Kn.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(sa.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ii(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ji(this,e)}}),Object.assign(Ot.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)}}),Er.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(sr.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(sr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Qr.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Pr.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(go.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(pr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Sr.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Sr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Da.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(zn.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new bn}}}),Object.defineProperties(io.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Hn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),r.prototype=Object.assign(Object.create({constructor:r,apply:function(e){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(e,this)}}),r.prototype),Object.assign(qr.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(qr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(Yn.prototype,{cullFace:{get:function(){return this.renderReverseSided?f:d},set:function(e){var t=e!==d;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(Lt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Aa.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Ea).load(e,function(e){t.setBuffer(e)}),this},La.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},n.d(t,"default",function(){return ms});class ms extends r{constructor(e,t){var n,r,i,o,a;super(),this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new Ot,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:h.LEFT,ZOOM:h.MIDDLE,PAN:h.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),d=p.NONE},this.update=(n=new Ot,r=(new Pt).setFromUnitVectors(e.up,new Ot(0,1,0)),i=r.clone().inverse(),o=new Ot,a=new Pt,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(r),m.setFromVector3(n),s.autoRotate&&d===p.NONE&&C(2*Math.PI/60/60*s.autoRotateSpeed),m.theta+=v.theta,m.phi+=v.phi,m.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,m.theta)),m.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(s.minDistance,Math.min(s.maxDistance,m.radius)),s.target.add(y),n.setFromSpherical(m),n.applyQuaternion(i),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(v.theta*=1-s.dampingFactor,v.phi*=1-s.dampingFactor):v.set(0,0,0),g=1,y.set(0,0,0),!!(_||o.distanceToSquared(s.object.position)>f||8*(1-a.dot(s.object.quaternion))>f)&&(s.dispatchEvent(c),o.copy(s.object.position),a.copy(s.object.quaternion),_=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",q,!1),s.domElement.removeEventListener("mousedown",B,!1),s.domElement.removeEventListener("wheel",H,!1),s.domElement.removeEventListener("touchstart",j,!1),s.domElement.removeEventListener("touchend",W,!1),s.domElement.removeEventListener("touchmove",V,!1),document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",z,!1),window.removeEventListener("keydown",G,!1)};var s=this,c={type:"change"},u={type:"start"},l={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},d=p.NONE,f=1e-6,m=new Wa,v=new Wa,g=1,y=new Ot,_=!1,x=new _t,b=new _t,w=new _t,E=new _t,M=new _t,T=new _t,S=new _t,A=new _t,R=new _t;function L(){return Math.pow(.95,s.zoomSpeed)}function C(e){v.theta-=e}function P(e){v.phi-=e}var O,I=(O=new Ot,function(e,t){O.setFromMatrixColumn(t,0),O.multiplyScalar(-e),y.add(O)}),N=function(){var e=new Ot;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),y.add(e)}}(),D=function(){var e=new Ot;return function(t,n){var r=s.domElement===document?s.domElement.body:s.domElement;if(Object.getPrototypeOf(s.object).isPerspectiveCamera){var i=s.object.position;e.copy(i).sub(s.target);var o=e.length();o*=Math.tan(s.object.fov/2*Math.PI/180),I(2*t*o/r.clientHeight,s.object.matrix),N(2*n*o/r.clientHeight,s.object.matrix)}else Object.getPrototypeOf(s.object).isOrthographicCamera?(I(t*(s.object.right-s.object.left)/s.object.zoom/r.clientWidth,s.object.matrix),N(n*(s.object.top-s.object.bottom)/s.object.zoom/r.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function U(e){Object.getPrototypeOf(s.object).isPerspectiveCamera?g/=e:Object.getPrototypeOf(s.object).isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function k(e){Object.getPrototypeOf(s.object).isPerspectiveCamera?g*=e:Object.getPrototypeOf(s.object).isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function B(e){if(!1!==s.enabled){if(e.preventDefault(),e.button===s.mouseButtons.ORBIT){if(!1===s.enableRotate)return;!function(e){x.set(e.clientX,e.clientY)}(e),d=p.ROTATE}else if(e.button===s.mouseButtons.ZOOM){if(!1===s.enableZoom)return;!function(e){S.set(e.clientX,e.clientY)}(e),d=p.DOLLY}else if(e.button===s.mouseButtons.PAN){if(!1===s.enablePan)return;!function(e){E.set(e.clientX,e.clientY)}(e),d=p.PAN}d!==p.NONE&&(document.addEventListener("mousemove",F,!1),document.addEventListener("mouseup",z,!1),s.dispatchEvent(u))}}function F(e){if(!1!==s.enabled)if(e.preventDefault(),d===p.ROTATE){if(!1===s.enableRotate)return;!function(e){b.set(e.clientX,e.clientY),w.subVectors(b,x);var t=s.domElement===document?s.domElement.body:s.domElement;C(2*Math.PI*w.x/t.clientWidth*s.rotateSpeed),P(2*Math.PI*w.y/t.clientHeight*s.rotateSpeed),x.copy(b),s.update()}(e)}else if(d===p.DOLLY){if(!1===s.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),R.subVectors(A,S),R.y>0?U(L()):R.y<0&&k(L()),S.copy(A),s.update()}(e)}else if(d===p.PAN){if(!1===s.enablePan)return;!function(e){M.set(e.clientX,e.clientY),T.subVectors(M,E),D(T.x,T.y),E.copy(M),s.update()}(e)}}function z(e){!1!==s.enabled&&(document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",z,!1),s.dispatchEvent(l),d=p.NONE)}function H(e){!1===s.enabled||!1===s.enableZoom||d!==p.NONE&&d!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?k(L()):e.deltaY>0&&U(L()),s.update()}(e),s.dispatchEvent(u),s.dispatchEvent(l))}function G(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:D(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:D(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:D(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:D(-s.keyPanSpeed,0),s.update()}}(e)}function j(e){if(!1!==s.enabled){switch(e.touches.length){case 1:if(!1===s.enableRotate)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=p.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);S.set(0,r)}(e),d=p.TOUCH_DOLLY;break;case 3:if(!1===s.enablePan)return;!function(e){E.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=p.TOUCH_PAN;break;default:d=p.NONE}d!==p.NONE&&s.dispatchEvent(u)}}function V(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(d!==p.TOUCH_ROTATE)return;!function(e){b.set(e.touches[0].pageX,e.touches[0].pageY),w.subVectors(b,x);var t=s.domElement===document?s.domElement.body:s.domElement;C(2*Math.PI*w.x/t.clientWidth*s.rotateSpeed),P(2*Math.PI*w.y/t.clientHeight*s.rotateSpeed),x.copy(b),s.update()}(e);break;case 2:if(!1===s.enableZoom)return;if(d!==p.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);A.set(0,r),R.subVectors(A,S),R.y>0?k(L()):R.y<0&&U(L()),S.copy(A),s.update()}(e);break;case 3:if(!1===s.enablePan)return;if(d!==p.TOUCH_PAN)return;!function(e){M.set(e.touches[0].pageX,e.touches[0].pageY),T.subVectors(M,E),D(T.x,T.y),E.copy(M),s.update()}(e);break;default:d=p.NONE}}function W(e){!1!==s.enabled&&(s.dispatchEvent(l),d=p.NONE)}function q(e){e.preventDefault()}s.domElement.addEventListener("contextmenu",q,!1),s.domElement.addEventListener("mousedown",B,!1),s.domElement.addEventListener("wheel",H,!1),s.domElement.addEventListener("touchstart",j,!1),s.domElement.addEventListener("touchend",W,!1),s.domElement.addEventListener("touchmove",V,!1),window.addEventListener("keydown",G,!1),this.update()}get center(){return console.warn("OrbitControls: .center has been renamed to .target"),this.target}get noZoom(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom}set noZoom(e){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}get noRotate(){return console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate}set noRotate(e){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}get noPan(){return console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan}set noPan(e){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}get noKeys(){return console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys}set noKeys(e){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}get staticMoving(){return console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping}set staticMoving(e){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}get dynamicDampingFactor(){return console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor}set dynamicDampingFactor(e){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_Map=__webpack_require__(14),_Map2=_interopRequireDefault(_Map),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Playground=function(_THREE$Group){function Playground(e){_classCallCheck(this,Playground);var t=_possibleConstructorReturn(this,(Playground.__proto__||Object.getPrototypeOf(Playground)).call(this));return t.game=e,t.map=new _Map2.default(e,e.loader.assets["map-playground"]),t.add(t.map),t}return _inherits(Playground,_THREE$Group),_createClass(Playground,[{key:"update",value:function(e,t){this.map.update(e,t)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Playground}(THREE.Group),reactHotLoader,leaveModule;exports.default=Playground,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Playground,"Playground","/Users/andre/Projects/shooter/src/Level/Playground.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Keyboard=function(){function Keyboard(e){var t=this;_classCallCheck(this,Keyboard),this.onKeyDown=function(e){t.keys[e.keyCode]=!0},this.onKeyUp=function(e){t.keys[e.keyCode]=!1},this.game=e,this.keys={},document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyUp,!1)}return _createClass(Keyboard,[{key:"dispose",value:function(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}},{key:"isPressed",value:function(e){return!!this.keys[e]}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Keyboard}(),reactHotLoader,leaveModule;exports.default=Keyboard,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Keyboard,"Keyboard","/Users/andre/Projects/shooter/src/utils/Keyboard.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_helpers=__webpack_require__(5),enterModule;function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Wall=function(_THREE$Group){function Wall(e,t,n){_classCallCheck(this,Wall);var r=_possibleConstructorReturn(this,(Wall.__proto__||Object.getPrototypeOf(Wall)).call(this));r.game=e,r.map=t,r.definition=n,r.size=n.width,r.position.set(n.x+r.size/2,0,n.y+r.size/2);var i=n.data,o=r.map.tileset,a=r.map.lights,s=r.size,c=s*s;return i.forEach(function(e,t){if(0!==e){var u=new THREE.Geometry,l=n.x+t%r.size,h=n.y+Math.floor(t/r.size);if(t<=s-1||t-s>=0&&0===i[t-s]){var p=o.createTile(e),d=a.getColor(l,h-1);p.geometry.faces.forEach(function(e){return e.color=d}),p.geometry.rotateY(Math.PI),p.geometry.translate(0,0,-.5),u.merge(p.geometry)}if(t%s==0||t-1>=0&&0===i[t-1]){var f=o.createTile(e),m=a.getColor(l-1,h);f.geometry.faces.forEach(function(e){return e.color=m}),f.geometry.rotateY(Math.PI/-2),f.geometry.translate(-.5,0,0),u.merge(f.geometry)}if(t>=c-s||t+s<=c-1&&0===i[t+s]){var v=o.createTile(e),g=a.getColor(l,h+1);v.geometry.faces.forEach(function(e){return e.color=g}),v.geometry.translate(0,0,.5),u.merge(v.geometry)}if(t%s==s-1||t+1<=c-1&&0===i[t+1]){var y=o.createTile(e),_=a.getColor(l+1,h);y.geometry.faces.forEach(function(e){return e.color=_}),y.geometry.rotateY(Math.PI/2),y.geometry.translate(.5,0,0),u.merge(y.geometry)}var x=s/2-.5,b=new THREE.Mesh(u,o.getTile(e).material);b.position.set(t%s-x,.5,Math.floor(t/s)-x),r.add(b)}}),r}return _inherits(Wall,_THREE$Group),_createClass(Wall,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Wall}(THREE.Group),reactHotLoader,leaveModule;exports.default=Wall,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Wall,"Wall","/Users/andre/Projects/shooter/src/Map/Wall.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_helpers=__webpack_require__(5),enterModule;function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Floor=function(_THREE$Group){function Floor(e,t,n){_classCallCheck(this,Floor);var r=_possibleConstructorReturn(this,(Floor.__proto__||Object.getPrototypeOf(Floor)).call(this));return r.game=e,r.map=t,r.definition=n,r.size=n.width,r.position.set(n.x+r.size/2,0,n.y+r.size/2),n.data.forEach(function(e,t){if(0!==e){var i=n.x+t%r.size,o=n.y+Math.floor(t/r.size),a=r.map.lights.getColor(i,o),s=r.map.tileset.createTile(e),c=r.size/2-.5;s.geometry.faces.forEach(function(e){return e.color=a}),s.geometry.rotateX(Math.PI/-2),s.position.set(t%r.size-c,0,Math.floor(t/r.size)-c),r.add(s)}}),r}return _inherits(Floor,_THREE$Group),_createClass(Floor,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Floor}(THREE.Group),reactHotLoader,leaveModule;exports.default=Floor,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Floor,"Floor","/Users/andre/Projects/shooter/src/Map/Floor.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_helpers=__webpack_require__(5),enterModule;function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Ceiling=function(_THREE$Group){function Ceiling(e,t,n){_classCallCheck(this,Ceiling);var r=_possibleConstructorReturn(this,(Ceiling.__proto__||Object.getPrototypeOf(Ceiling)).call(this));return r.game=e,r.map=t,r.definition=n,r.size=n.width,r.position.set(n.x+r.size/2,0,n.y+r.size/2),n.data.forEach(function(e,t){if(0!==e){var i=n.x+t%r.size,o=n.y+Math.floor(t/r.size),a=r.map.lights.getColor(i,o),s=r.map.tileset.createTile(e),c=r.size/2-.5;s.geometry.faces.forEach(function(e){return e.color=a}),s.geometry.rotateX(Math.PI/-2),s.position.set(t%r.size-c,1,Math.floor(t/r.size)-c),s.rotation.x=Math.PI,s.scale.set(1,1,-1),r.add(s)}}),r}return _inherits(Ceiling,_THREE$Group),_createClass(Ceiling,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Ceiling}(THREE.Group),reactHotLoader,leaveModule;exports.default=Ceiling,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Ceiling,"Ceiling","/Users/andre/Projects/shooter/src/Map/Ceiling.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_helpers=__webpack_require__(5),_Box=__webpack_require__(6),_Box2=_interopRequireDefault(_Box),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Collision=function(_THREE$Group){function Collision(e,t,n){_classCallCheck(this,Collision);var r=_possibleConstructorReturn(this,(Collision.__proto__||Object.getPrototypeOf(Collision)).call(this));return r.game=e,r.map=t,r.definition=n,r.size=n.width,r.bodies=r.createBodies(),r}return _inherits(Collision,_THREE$Group),_createClass(Collision,[{key:"createBodies",value:function(){var e=this,t=[];return this.definition.chunks.forEach(function(n){n.data.forEach(function(r,i){if(0!==r){var o=n.x+i%n.width+.5,a=n.y+Math.floor(i/n.width)+.5,s=new _Box2.default(new THREE.Vector3(o,.5,a),new THREE.Vector3(1,1,1));t.push(s),e.game.scene.add(s.createHelper())}})}),t}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Collision}(THREE.Group),reactHotLoader,leaveModule;exports.default=Collision,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Collision,"Collision","/Users/andre/Projects/shooter/src/Map/Collision.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_lights=__webpack_require__(15),_lights2=_interopRequireDefault(_lights),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var COLUMNS=16,ROWS=20,SIZE=16,Lights=function(){function Lights(e,t,n){_classCallCheck(this,Lights),this.game=e,this.map=t,this.definition=n,this.tileset=t.definition.tilesets.filter(function(e){return"lights"===e.name})[0],this.default=new THREE.Color(16777215),this.colors=this.calculateColors(),this.tiles=this.calculateTiles()}return _createClass(Lights,[{key:"calculateColors",value:function(){var e=this.game.loader.assets["tileset-lights"].image,t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0);for(var r=[],i=0;i<ROWS*SIZE;i+=SIZE)for(var o=0;o<COLUMNS*SIZE;o+=SIZE){var a=_slicedToArray(n.getImageData(o,i,1,1).data,3),s=a[0],c=a[1],u=a[2];r.push(new THREE.Color(65536*s+256*c+u))}return r}},{key:"calculateTiles",value:function(){var e=this,t={};return this.definition.chunks.forEach(function(n){n.data.forEach(function(r,i){if(0!==r){var o=n.x+i%n.width,a=n.y+Math.floor(i/n.width),s=e.colors[r-e.tileset.firstgid];t[o+"_"+a]=s}})}),t}},{key:"getColor",value:function(e,t){return this.tiles[e+"_"+t]||this.default}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Lights}(),reactHotLoader,leaveModule;exports.default=Lights,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(COLUMNS,"COLUMNS","/Users/andre/Projects/shooter/src/Map/Lights.js"),reactHotLoader.register(ROWS,"ROWS","/Users/andre/Projects/shooter/src/Map/Lights.js"),reactHotLoader.register(SIZE,"SIZE","/Users/andre/Projects/shooter/src/Map/Lights.js"),reactHotLoader.register(Lights,"Lights","/Users/andre/Projects/shooter/src/Map/Lights.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_Entity2=__webpack_require__(7),_Entity3=_interopRequireDefault(_Entity2),_Animation=__webpack_require__(9),_Animation2=_interopRequireDefault(_Animation),_Box=__webpack_require__(6),_Box2=_interopRequireDefault(_Box),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Slime=(_temp=_class=function(_Entity){function Slime(e,t,n){_classCallCheck(this,Slime);var r=_possibleConstructorReturn(this,(Slime.__proto__||Object.getPrototypeOf(Slime)).call(this,e,t,n,Slime.config));return r.body=new _Box2.default(r.position,new THREE.Vector3(.5,1,.5)),r.game.scene.add(r.body.createHelper()),r.velocity=new THREE.Vector3,r.speed=Math.random()/2,Math.random()>.5?r.animation=r.config.animations.purpleIdle.clone():r.animation=r.config.animations.blueIdle.clone(),r.animation.start(),r.animation.time+=1e4*Math.random(),r}return _inherits(Slime,_Entity),_createClass(Slime,[{key:"update",value:function(e,t){_get(Slime.prototype.__proto__||Object.getPrototypeOf(Slime.prototype),"update",this).call(this,e,t),this.velocity.x=Math.sin(this.animation.time)*this.speed*e,this.velocity.z=Math.sin(-this.animation.time)*this.speed*e,this.body.updateHelper()}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Slime}(_Entity3.default),_class.config={animations:{purpleIdle:new _Animation2.default([558,558,558,558,558,558,542,542],!0),blueIdle:new _Animation2.default([554,554,554,554,554,554,554,554,538,538],!0)}},_temp),reactHotLoader,leaveModule;exports.default=Slime,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Slime,"Slime","/Users/andre/Projects/shooter/src/entities/Slime.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t){t.KEY_CANCEL=3,t.KEY_HELP=6,t.KEY_BACK_SPACE=8,t.KEY_TAB=9,t.KEY_CLEAR=12,t.KEY_RETURN=13,t.KEY_ENTER=14,t.KEY_SHIFT=16,t.KEY_CONTROL=17,t.KEY_ALT=18,t.KEY_PAUSE=19,t.KEY_CAPS_LOCK=20,t.KEY_ESCAPE=27,t.KEY_SPACE=32,t.KEY_PAGE_UP=33,t.KEY_PAGE_DOWN=34,t.KEY_END=35,t.KEY_HOME=36,t.KEY_LEFT=37,t.KEY_UP=38,t.KEY_RIGHT=39,t.KEY_DOWN=40,t.KEY_PRINTSCREEN=44,t.KEY_INSERT=45,t.KEY_DELETE=46,t.KEY_0=48,t.KEY_1=49,t.KEY_2=50,t.KEY_3=51,t.KEY_4=52,t.KEY_5=53,t.KEY_6=54,t.KEY_7=55,t.KEY_8=56,t.KEY_9=57,t.KEY_SEMICOLON=59,t.KEY_EQUALS=61,t.KEY_A=65,t.KEY_B=66,t.KEY_C=67,t.KEY_D=68,t.KEY_E=69,t.KEY_F=70,t.KEY_G=71,t.KEY_H=72,t.KEY_I=73,t.KEY_J=74,t.KEY_K=75,t.KEY_L=76,t.KEY_M=77,t.KEY_N=78,t.KEY_O=79,t.KEY_P=80,t.KEY_Q=81,t.KEY_R=82,t.KEY_S=83,t.KEY_T=84,t.KEY_U=85,t.KEY_V=86,t.KEY_W=87,t.KEY_X=88,t.KEY_Y=89,t.KEY_Z=90,t.KEY_CONTEXT_MENU=93,t.KEY_NUMPAD0=96,t.KEY_NUMPAD1=97,t.KEY_NUMPAD2=98,t.KEY_NUMPAD3=99,t.KEY_NUMPAD4=100,t.KEY_NUMPAD5=101,t.KEY_NUMPAD6=102,t.KEY_NUMPAD7=103,t.KEY_NUMPAD8=104,t.KEY_NUMPAD9=105,t.KEY_MULTIPLY=106,t.KEY_ADD=107,t.KEY_SEPARATOR=108,t.KEY_SUBTRACT=109,t.KEY_DECIMAL=110,t.KEY_DIVIDE=111,t.KEY_F1=112,t.KEY_F2=113,t.KEY_F3=114,t.KEY_F4=115,t.KEY_F5=116,t.KEY_F6=117,t.KEY_F7=118,t.KEY_F8=119,t.KEY_F9=120,t.KEY_F10=121,t.KEY_F11=122,t.KEY_F12=123,t.KEY_F13=124,t.KEY_F14=125,t.KEY_F15=126,t.KEY_F16=127,t.KEY_F17=128,t.KEY_F18=129,t.KEY_F19=130,t.KEY_F20=131,t.KEY_F21=132,t.KEY_F22=133,t.KEY_F23=134,t.KEY_F24=135,t.KEY_NUM_LOCK=144,t.KEY_SCROLL_LOCK=145,t.KEY_COMMA=188,t.KEY_PERIOD=190,t.KEY_SLASH=191,t.KEY_BACK_QUOTE=192,t.KEY_OPEN_BRACKET=219,t.KEY_BACK_SLASH=220,t.KEY_CLOSE_BRACKET=221,t.KEY_QUOTE=222,t.KEY_META=224},function(e,t,n){e.exports=n(31)},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_keycodeJs=__webpack_require__(32),_Entity2=__webpack_require__(7),_Entity3=_interopRequireDefault(_Entity2),_Box=__webpack_require__(6),_Box2=_interopRequireDefault(_Box),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Player=(_temp=_class=function(_Entity){function Player(e,t,n){_classCallCheck(this,Player);var r=_possibleConstructorReturn(this,(Player.__proto__||Object.getPrototypeOf(Player)).call(this,e,t,n,Player.config));return r.body=new _Box2.default(r.position,new THREE.Vector3(.5,1,.5)),r.game.scene.add(r.body.createHelper()),r.tile.rotation.y+=Math.PI,r.velocity=new THREE.Vector3,e.player=r,r}return _inherits(Player,_Entity),_createClass(Player,[{key:"update",value:function(e,t){var n=new THREE.Vector3;this.velocity.set(0,0,0),n.z=Number(this.game.keyboard.isPressed(_keycodeJs.KEY_S))-Number(this.game.keyboard.isPressed(_keycodeJs.KEY_W)),n.x=Number(this.game.keyboard.isPressed(_keycodeJs.KEY_D))-Number(this.game.keyboard.isPressed(_keycodeJs.KEY_A)),this.rotation.y-=(Number(this.game.keyboard.isPressed(_keycodeJs.KEY_RIGHT))-Number(this.game.keyboard.isPressed(_keycodeJs.KEY_LEFT)))*e*Player.TURN,n.length()>0&&(n.normalize().multiplyScalar(Player.SPEED).multiplyScalar(e).applyAxisAngle(new THREE.Vector3(0,1,0),this.rotation.y),this.velocity.add(n)),this.body.updateHelper(),this.game.camera.position.copy(this.position),this.game.camera.rotation.copy(this.rotation)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Player}(_Entity3.default),_class.SPEED=3,_class.TURN=3,_class.config={},_temp),reactHotLoader,leaveModule;exports.default=Player,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Player,"Player","/Users/andre/Projects/shooter/src/entities/Player.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_Entity2=__webpack_require__(7),_Entity3=_interopRequireDefault(_Entity2),_Animation=__webpack_require__(9),_Animation2=_interopRequireDefault(_Animation),_Box=__webpack_require__(6),_Box2=_interopRequireDefault(_Box),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Pillar=(_temp=_class=function(_Entity){function Pillar(e,t,n){_classCallCheck(this,Pillar);var r=_possibleConstructorReturn(this,(Pillar.__proto__||Object.getPrototypeOf(Pillar)).call(this,e,t,n,Pillar.config));return r.body=new _Box2.default(r.position,new THREE.Vector3(.4,1,.4)),r.game.scene.add(r.body.createHelper()),r.animation=r.config.animations.flame.clone(),r.animation.start(),r}return _inherits(Pillar,_Entity),_createClass(Pillar,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Pillar}(_Entity3.default),_class.config={animations:{flame:new _Animation2.default([513,514,515,516,517,518,519,520],!0)}},_temp),reactHotLoader,leaveModule;exports.default=Pillar,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Pillar,"Pillar","/Users/andre/Projects/shooter/src/entities/Pillar.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_Entity2=__webpack_require__(7),_Entity3=_interopRequireDefault(_Entity2),_Animation=__webpack_require__(9),_Animation2=_interopRequireDefault(_Animation),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Door=(_temp=_class=function(_Entity){function Door(e,t,n){_classCallCheck(this,Door);var r=_possibleConstructorReturn(this,(Door.__proto__||Object.getPrototypeOf(Door)).call(this,e,t,n,Door.config));return r.animation=r.config.animations.loop.clone(),r.animation.start(),r}return _inherits(Door,_Entity),_createClass(Door,[{key:"update",value:function(e,t){_get(Door.prototype.__proto__||Object.getPrototypeOf(Door.prototype),"update",this).call(this,e,t)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Door}(_Entity3.default),_class.config={animations:{open:new _Animation2.default([353,354,355,356],!1),close:new _Animation2.default([356,355,354,353],!1),loop:new _Animation2.default([353,354,355,356,356,355,354,353],!0)}},_temp),reactHotLoader,leaveModule;exports.default=Door,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Door,"Door","/Users/andre/Projects/shooter/src/entities/Door.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e){e.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_Entity=__webpack_require__(7),_Entity2=_interopRequireDefault(_Entity),_Door=__webpack_require__(35),_Door2=_interopRequireDefault(_Door),_Pillar=__webpack_require__(34),_Pillar2=_interopRequireDefault(_Pillar),_Player=__webpack_require__(33),_Player2=_interopRequireDefault(_Player),_Slime=__webpack_require__(30),_Slime2=_interopRequireDefault(_Slime),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Entities=function(_THREE$Group){function Entities(e,t,n){_classCallCheck(this,Entities);var r=_possibleConstructorReturn(this,(Entities.__proto__||Object.getPrototypeOf(Entities)).call(this));return r.game=e,r.map=t,r.definition=n,n.objects.forEach(function(n){switch(n.type){case"player":r.add(new _Player2.default(e,t,n));break;case"door":r.add(new _Door2.default(e,t,n));break;case"pillar":r.add(new _Pillar2.default(e,t,n));break;case"slime":r.add(new _Slime2.default(e,t,n));break;default:r.add(new _Entity2.default(e,t,n))}}),r}return _inherits(Entities,_THREE$Group),_createClass(Entities,[{key:"update",value:function(e,t){this.children.forEach(function(n){n.update&&n.update(e,t)});var n=this.children.filter(function(e){return!!e.body}).map(function(e){return e.body});n.push.apply(n,_toConsumableArray(this.map.collision.bodies));for(var r=0;r<this.children.length;r++){var i=this.children[r];if(i.body&&i.velocity){var o=i.body.sweepInto(n,i.velocity);o.hit&&(0!==o.hit.normal.x&&(i.velocity.x=0),0!==o.hit.normal.z&&(i.velocity.z=0))}}this.children.forEach(function(e){e.velocity&&e.position.add(e.velocity)})}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Entities}(THREE.Group),reactHotLoader,leaveModule;exports.default=Entities,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Entities,"Entities","/Users/andre/Projects/shooter/src/Map/Entities.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),enterModule;function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Tileset=(_temp=_class=function(){function Tileset(e,t){var n=this;_classCallCheck(this,Tileset),this.game=e,this.tilesets=t,this.tiles=[],t.forEach(function(t){for(var r=e.loader.assets["tileset-"+t.name],i=t.columns,o=t.tilecount/t.columns,a=new THREE.Vector2(1/i-2*Tileset.PADDING,-1/o+2*Tileset.PADDING),s=new THREE.MeshBasicMaterial({map:r,vertexColors:THREE.FaceColors,alphaTest:.5}),c=0;c<t.tilecount;c++){var u=c%i,l=Math.floor(c/i),h=new THREE.Vector2(u%i/i+Tileset.PADDING,1-(l+1)/o+Tileset.PADDING);n.tiles[t.firstgid+c]={material:s,uv:h,size:a}}})}return _createClass(Tileset,[{key:"getTile",value:function(e){var t=e&~(Tileset.FLAG_FLIPPED_HORIZONTAL|Tileset.FLAG_FLIPPED_VERTICAL|Tileset.FLAG_FLIPPED_DIAGONAL);return this.tiles[t]}},{key:"createTile",value:function(e){Tileset.FLAG_FLIPPED_HORIZONTAL,Tileset.FLAG_FLIPPED_VERTICAL,Tileset.FLAG_FLIPPED_DIAGONAL;var t=e&~(Tileset.FLAG_FLIPPED_HORIZONTAL|Tileset.FLAG_FLIPPED_VERTICAL|Tileset.FLAG_FLIPPED_DIAGONAL),n=this.getTile(t),r=new THREE.PlaneGeometry(1,1),i=new THREE.Mesh(r,n.material);return this.updateTile(i,e)}},{key:"updateTile",value:function(e,t){var n=!!(t&Tileset.FLAG_FLIPPED_HORIZONTAL),r=!!(t&Tileset.FLAG_FLIPPED_VERTICAL),i=!!(t&Tileset.FLAG_FLIPPED_DIAGONAL),o=t&~(Tileset.FLAG_FLIPPED_HORIZONTAL|Tileset.FLAG_FLIPPED_VERTICAL|Tileset.FLAG_FLIPPED_DIAGONAL),a=this.getTile(o);return e.geometry.faceVertexUvs[0].forEach(function(e,t){e.forEach(function(e,o){var s=void 0,c=void 0;i?n===r?(s=n?Tileset.CORNERS[t][o].y:1-Tileset.CORNERS[t][o].y,c=r?Tileset.CORNERS[t][o].x:1-Tileset.CORNERS[t][o].x):(s=n?1-Tileset.CORNERS[t][o].y:Tileset.CORNERS[t][o].y,c=r?1-Tileset.CORNERS[t][o].x:Tileset.CORNERS[t][o].x):(s=n?1-Tileset.CORNERS[t][o].x:Tileset.CORNERS[t][o].x,c=r?1-Tileset.CORNERS[t][o].y:Tileset.CORNERS[t][o].y),e.x=a.uv.x+a.size.x*s,e.y=a.uv.y-a.size.y*c})}),e.geometry.uvsNeedUpdate=!0,e}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Tileset}(),_class.PADDING=.001,_class.FLAG_FLIPPED_HORIZONTAL=2147483648,_class.FLAG_FLIPPED_VERTICAL=1073741824,_class.FLAG_FLIPPED_DIAGONAL=536870912,_class.CORNERS=[[{x:0,y:1},{x:0,y:0},{x:1,y:1}],[{x:0,y:0},{x:1,y:0},{x:1,y:1}]],_temp),reactHotLoader,leaveModule;exports.default=Tileset,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Tileset,"Tileset","/Users/andre/Projects/shooter/src/Map/Tileset.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t,n){e.exports=n.p+"eafb9c4cc812b9d8999979d98fa0bb92.png"},function(e,t,n){e.exports=n.p+"aaee38e2ac2356e98a369c10725b8d73.png"},function(e,t,n){e.exports=n.p+"44e7784d82fec285075277107a37b2cb.png"},function(e,t,n){e.exports=n.p+"5449c896e42d4d39dc6fc17d00f08368.json"},function(e,t,n){"use strict";(function(e){var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=n(0).enterModule)&&r(e);var i,o,a={maps:{playground:n(42)},images:{dev:n(41),dungeon:n(40),collision:n(39),lights:n(15)}};t.default=a,i=n(0).default,o=n(0).leaveModule,i&&(i.register(a,"default","/Users/andre/Projects/shooter/src/assets/index.js"),o(e))}).call(this,n(1)(e))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_lodash=__webpack_require__(10),_assets=__webpack_require__(43),_assets2=_interopRequireDefault(_assets),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Loader=function(_THREE$LoadingManager){function Loader(e,t){_classCallCheck(this,Loader);var n=_possibleConstructorReturn(this,(Loader.__proto__||Object.getPrototypeOf(Loader)).call(this));return n.load=function(e){n.loadJson("map-playground",e.maps.playground),n.loadTexture("tileset-dev",e.images.dev),n.loadTexture("tileset-dungeon",e.images.dungeon),n.loadTexture("tileset-collision",e.images.collision),n.loadTexture("tileset-lights",e.images.lights)},n.onStart=function(e,t,n){console.log("Start loading "+n+" items")},n.onLoad=function(){console.log("Finished loading!"),console.log(n.assets["tileset-dev"]),n.onFinish()},n.game=e,n.onFinish=t||_lodash.noop,n.textureLoader=new THREE.TextureLoader(n),n.imageLoader=new THREE.ImageLoader(n),n.fileLoader=new THREE.FileLoader(n),n.assets={},n.cache=!1,n.load(_assets2.default),n}return _inherits(Loader,_THREE$LoadingManager),_createClass(Loader,[{key:"loadTexture",value:function(e,t){var n=this;console.log("load texture "+e+" from "+t);var r=this.cache||Date.now();this.textureLoader.load(t+"?n="+r,function(t){t.magFilter=THREE.NearestFilter,t.minFilter=THREE.NearestFilter,n.assets[e]=t})}},{key:"loadImage",value:function(e,t){var n=this;console.log("load image "+e+" from "+t);var r=this.cache||Date.now();this.imageLoader.load(t+"?n="+r,function(t){n.assets[e]=t})}},{key:"loadJson",value:function(e,t){var n=this;console.log("load json "+e+" from "+t);var r=this.cache||Date.now();this.fileLoader.load(t+"?n="+r,function(t){n.assets[e]=JSON.parse(t)})}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Loader}(THREE.LoadingManager),reactHotLoader,leaveModule;exports.default=Loader,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Loader,"Loader","/Users/andre/Projects/shooter/src/Loader/index.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";var r=n(45);e.exports=function(e){return r(e)&&3==e.nodeType}},function(e,t,n){"use strict";var r=n(46);e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";
/** @license React v16.3.2
 * react-dom.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(13),i=n(4),o=n(50),a=n(20),s=n(12),c=n(49),u=n(48),l=n(47),h=n(19);function p(e){for(var t=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}i||p("227");var d={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,i,o,a,s,c){(function(e,t,n,r,i,o,a,s,c){this._hasCaughtError=!1,this._caughtError=null;var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}).apply(d,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,o,a,s,c){if(d.invokeGuardedCallback.apply(this,arguments),d.hasCaughtError()){var u=d.clearCaughtError();d._hasRethrowError||(d._hasRethrowError=!0,d._rethrowError=u)}},rethrowCaughtError:function(){return function(){if(d._hasRethrowError){var e=d._rethrowError;throw d._rethrowError=null,d._hasRethrowError=!1,e}}.apply(d,arguments)},hasCaughtError:function(){return d._hasCaughtError},clearCaughtError:function(){if(d._hasCaughtError){var e=d._caughtError;return d._caughtError=null,d._hasCaughtError=!1,e}p("198")}},f=null,m={};function v(){if(f)for(var e in m){var t=m[e],n=f.indexOf(e);if(-1<n||p("96",e),!y[n])for(var r in t.extractEvents||p("97",e),y[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,s=r;_.hasOwnProperty(s)&&p("99",s),_[s]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&g(c[i],a,s);i=!0}else o.registrationName?(g(o.registrationName,a,s),i=!0):i=!1;i||p("98",r,e)}}}function g(e,t,n){x[e]&&p("100",e),x[e]=t,b[e]=t.eventTypes[n].dependencies}var y=[],_={},x={},b={};function w(e){f&&p("101"),f=Array.prototype.slice.call(e),v()}function E(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];m.hasOwnProperty(t)&&m[t]===r||(m[t]&&p("102",t),m[t]=r,n=!0)}n&&v()}var M=Object.freeze({plugins:y,eventNameDispatchConfigs:_,registrationNameModules:x,registrationNameDependencies:b,possibleRegistrationNames:null,injectEventPluginOrder:w,injectEventPluginsByName:E}),T=null,S=null,A=null;function R(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=A(r),d.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function L(e,t){return null==t&&p("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function C(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var P=null;function O(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)R(e,t,n[i],r[i]);else n&&R(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function I(e){return O(e,!0)}function N(e){return O(e,!1)}var D={injectEventPluginOrder:w,injectEventPluginsByName:E};function U(e,t){var n=e.stateNode;if(!n)return null;var r=T(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&p("231",t,typeof n),n)}function k(e,t){null!==e&&(P=L(P,e)),e=P,P=null,e&&(C(e,t?I:N),P&&p("95"),d.rethrowCaughtError())}function B(e,t,n,r){for(var i=null,o=0;o<y.length;o++){var a=y[o];a&&(a=a.extractEvents(e,t,n,r))&&(i=L(i,a))}k(i,!1)}var F=Object.freeze({injection:D,getListener:U,runEventsInBatch:k,runExtractedEventsInBatch:B}),z=Math.random().toString(36).slice(2),H="__reactInternalInstance$"+z,G="__reactEventHandlers$"+z;function j(e){if(e[H])return e[H];for(;!e[H];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[H]).tag||6===e.tag?e:null}function V(e){if(5===e.tag||6===e.tag)return e.stateNode;p("33")}function W(e){return e[G]||null}var q=Object.freeze({precacheFiberNode:function(e,t){t[H]=e},getClosestInstanceFromNode:j,getInstanceFromNode:function(e){return!(e=e[H])||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:V,getFiberCurrentPropsFromNode:W,updateFiberProps:function(e,t){e[G]=t}});function X(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Y(e,t,n){for(var r=[];e;)r.push(e),e=X(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function K(e,t,n){(t=U(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=L(n._dispatchListeners,t),n._dispatchInstances=L(n._dispatchInstances,e))}function Z(e){e&&e.dispatchConfig.phasedRegistrationNames&&Y(e._targetInst,K,e)}function J(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;Y(t=t?X(t):null,K,e)}}function $(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=U(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=L(n._dispatchListeners,t),n._dispatchInstances=L(n._dispatchInstances,e))}function Q(e){e&&e.dispatchConfig.registrationName&&$(e._targetInst,null,e)}function ee(e){C(e,Z)}function te(e,t,n,r){if(n&&r)e:{for(var i=n,o=r,a=0,s=i;s;s=X(s))a++;s=0;for(var c=o;c;c=X(c))s++;for(;0<a-s;)i=X(i),a--;for(;0<s-a;)o=X(o),s--;for(;a--;){if(i===o||i===o.alternate)break e;i=X(i),o=X(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=X(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=X(r);for(r=0;r<i.length;r++)$(i[r],"bubbled",e);for(e=n.length;0<e--;)$(n[e],"captured",t)}var ne=Object.freeze({accumulateTwoPhaseDispatches:ee,accumulateTwoPhaseDispatchesSkipTarget:function(e){C(e,J)},accumulateEnterLeaveDispatches:te,accumulateDirectDispatches:function(e){C(e,Q)}}),re=null;function ie(){return!re&&o.canUseDOM&&(re="textContent"in document.documentElement?"textContent":"innerText"),re}var oe={_root:null,_startText:null,_fallbackText:null};function ae(){if(oe._fallbackText)return oe._fallbackText;var e,t,n=oe._startText,r=n.length,i=se(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return oe._fallbackText=i.slice(e,1<t?1-t:void 0),oe._fallbackText}function se(){return"value"in oe._root?oe._root.value:oe._root[ie()]}var ce="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),ue={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function le(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?s.thatReturnsTrue:s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}function he(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function pe(e){e instanceof this||p("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function de(e){e.eventPool=[],e.getPooled=he,e.release=pe}a(le.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<ce.length;t++)this[ce[t]]=null}}),le.Interface=ue,le.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return a(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=a({},r.Interface,e),n.extend=r.extend,de(n),n},de(le);var fe=le.extend({data:null}),me=le.extend({data:null}),ve=[9,13,27,32],ge=o.canUseDOM&&"CompositionEvent"in window,ye=null;o.canUseDOM&&"documentMode"in document&&(ye=document.documentMode);var _e=o.canUseDOM&&"TextEvent"in window&&!ye,xe=o.canUseDOM&&(!ge||ye&&8<ye&&11>=ye),be=String.fromCharCode(32),we={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Ee=!1;function Me(e,t){switch(e){case"topKeyUp":return-1!==ve.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function Te(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Se=!1,Ae={eventTypes:we,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(ge)e:{switch(e){case"topCompositionStart":i=we.compositionStart;break e;case"topCompositionEnd":i=we.compositionEnd;break e;case"topCompositionUpdate":i=we.compositionUpdate;break e}i=void 0}else Se?Me(e,n)&&(i=we.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(i=we.compositionStart);return i?(xe&&(Se||i!==we.compositionStart?i===we.compositionEnd&&Se&&(o=ae()):(oe._root=r,oe._startText=se(),Se=!0)),i=fe.getPooled(i,t,n,r),o?i.data=o:null!==(o=Te(n))&&(i.data=o),ee(i),o=i):o=null,(e=_e?function(e,t){switch(e){case"topCompositionEnd":return Te(t);case"topKeyPress":return 32!==t.which?null:(Ee=!0,be);case"topTextInput":return(e=t.data)===be&&Ee?null:e;default:return null}}(e,n):function(e,t){if(Se)return"topCompositionEnd"===e||!ge&&Me(e,t)?(e=ae(),oe._root=null,oe._startText=null,oe._fallbackText=null,Se=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return xe?null:t.data;default:return null}}(e,n))?((t=me.getPooled(we.beforeInput,t,n,r)).data=e,ee(t)):t=null,null===o?t:null===t?o:[o,t]}},Re=null,Le={injectFiberControlledHostComponent:function(e){Re=e}},Ce=null,Pe=null;function Oe(e){if(e=S(e)){Re&&"function"==typeof Re.restoreControlledState||p("194");var t=T(e.stateNode);Re.restoreControlledState(e.stateNode,e.type,t)}}function Ie(e){Ce?Pe?Pe.push(e):Pe=[e]:Ce=e}function Ne(){return null!==Ce||null!==Pe}function De(){if(Ce){var e=Ce,t=Pe;if(Pe=Ce=null,Oe(e),t)for(e=0;e<t.length;e++)Oe(t[e])}}var Ue=Object.freeze({injection:Le,enqueueStateRestore:Ie,needsStateRestore:Ne,restoreStateIfNeeded:De});function ke(e,t){return e(t)}function Be(e,t,n){return e(t,n)}function Fe(){}var ze=!1;function He(e,t){if(ze)return e(t);ze=!0;try{return ke(e,t)}finally{ze=!1,Ne()&&(Fe(),De())}}var Ge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function je(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ge[e.type]:"textarea"===t}function Ve(e){return(e=e.target||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function We(e,t){return!(!o.canUseDOM||t&&!("addEventListener"in document))&&((t=(e="on"+e)in document)||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t)}function qe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Xe(e){e._valueTracker||(e._valueTracker=function(e){var t=qe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}(e))}function Ye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Ke=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ze="function"==typeof Symbol&&Symbol.for,Je=Ze?Symbol.for("react.element"):60103,$e=Ze?Symbol.for("react.call"):60104,Qe=Ze?Symbol.for("react.return"):60105,et=Ze?Symbol.for("react.portal"):60106,tt=Ze?Symbol.for("react.fragment"):60107,nt=Ze?Symbol.for("react.strict_mode"):60108,rt=Ze?Symbol.for("react.provider"):60109,it=Ze?Symbol.for("react.context"):60110,ot=Ze?Symbol.for("react.async_mode"):60111,at=Ze?Symbol.for("react.forward_ref"):60112,st="function"==typeof Symbol&&Symbol.iterator;function ct(e){return null===e||void 0===e?null:"function"==typeof(e=st&&e[st]||e["@@iterator"])?e:null}function ut(e){if("function"==typeof(e=e.type))return e.displayName||e.name;if("string"==typeof e)return e;switch(e){case tt:return"ReactFragment";case et:return"ReactPortal";case $e:return"ReactCall";case Qe:return"ReactReturn"}if("object"==typeof e&&null!==e)switch(e.$$typeof){case at:return""!==(e=e.render.displayName||e.render.name||"")?"ForwardRef("+e+")":"ForwardRef"}return null}function lt(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,r=e._debugSource,i=ut(e),o=null;n&&(o=ut(n)),n=r,i="\n    in "+(i||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break e;default:i=""}t+=i,e=e.return}while(e);return t}var ht=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pt={},dt={};function ft(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mt[e]=new ft(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mt[t]=new ft(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){mt[e]=new ft(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){mt[e]=new ft(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mt[e]=new ft(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){mt[e]=new ft(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){mt[e]=new ft(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){mt[e]=new ft(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){mt[e]=new ft(e,5,!1,e.toLowerCase(),null)});var vt=/[\-:]([a-z])/g;function gt(e){return e[1].toUpperCase()}function yt(e,t,n,r){var i=mt.hasOwnProperty(t)?mt[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null===t||void 0===t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!dt.hasOwnProperty(e)||!pt.hasOwnProperty(e)&&(ht.test(e)?dt[e]=!0:(pt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function _t(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function xt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Tt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function bt(e,t){null!=(t=t.checked)&&yt(e,"checked",t,!1)}function wt(e,t){bt(e,t);var n=Tt(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?Mt(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mt(e,t.type,Tt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Et(e,t){(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue"))&&(""===e.value&&(e.value=""+e._wrapperState.initialValue),e.defaultValue=""+e._wrapperState.initialValue),""!==(t=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function Mt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Tt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vt,gt);mt[t]=new ft(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vt,gt);mt[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vt,gt);mt[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),mt.tabIndex=new ft("tabIndex",1,!1,"tabindex",null);var St={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}};function At(e,t,n){return(e=le.getPooled(St.change,e,t,n)).type="change",Ie(n),ee(e),e}var Rt=null,Lt=null;function Ct(e){k(e,!1)}function Pt(e){if(Ye(V(e)))return e}function Ot(e,t){if("topChange"===e)return t}var It=!1;function Nt(){Rt&&(Rt.detachEvent("onpropertychange",Dt),Lt=Rt=null)}function Dt(e){"value"===e.propertyName&&Pt(Lt)&&He(Ct,e=At(Lt,e,Ve(e)))}function Ut(e,t,n){"topFocus"===e?(Nt(),Lt=n,(Rt=t).attachEvent("onpropertychange",Dt)):"topBlur"===e&&Nt()}function kt(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return Pt(Lt)}function Bt(e,t){if("topClick"===e)return Pt(t)}function Ft(e,t){if("topInput"===e||"topChange"===e)return Pt(t)}o.canUseDOM&&(It=We("input")&&(!document.documentMode||9<document.documentMode));var zt={eventTypes:St,_isInputEventSupported:It,extractEvents:function(e,t,n,r){var i=t?V(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Ot:je(i)?It?o=Ft:(o=kt,a=Ut):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Bt),o&&(o=o(e,t)))return At(o,n,r);a&&a(e,i,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||i._wrapperState)&&e.controlled&&"number"===i.type&&Mt(i,"number",i.value)}},Ht=le.extend({view:null,detail:null}),Gt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Gt[e])&&!!t[e]}function Vt(){return jt}var Wt=Ht.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Vt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),qt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Xt={eventTypes:qt,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?j(t):null):e=null,e===t)return null;var o=null==e?i:V(e);i=null==t?i:V(t);var a=Wt.getPooled(qt.mouseLeave,e,n,r);return a.type="mouseleave",a.target=o,a.relatedTarget=i,(n=Wt.getPooled(qt.mouseEnter,t,n,r)).type="mouseenter",n.target=i,n.relatedTarget=o,te(a,n,e,t),[a,n]}};function Yt(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function Kt(e){return!!(e=e._reactInternalFiber)&&2===Yt(e)}function Zt(e){2!==Yt(e)&&p("188")}function Jt(e){var t=e.alternate;if(!t)return 3===(t=Yt(e))&&p("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var a=i.child;a;){if(a===n)return Zt(i),e;if(a===r)return Zt(i),t;a=a.sibling}p("188")}if(n.return!==r.return)n=i,r=o;else{a=!1;for(var s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}a||p("189")}}n.alternate!==r&&p("190")}return 3!==n.tag&&p("188"),n.stateNode.current===n?e:t}function $t(e){if(!(e=Jt(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var Qt=le.extend({animationName:null,elapsedTime:null,pseudoElement:null}),en=le.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tn=Ht.extend({relatedTarget:null});function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var rn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},on={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},an=Ht.extend({key:function(e){if(e.key){var t=rn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?on[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Vt,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),sn=Wt.extend({dataTransfer:null}),cn=Ht.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Vt}),un=le.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ln=Wt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hn={},pn={};function dn(e,t){var n=e[0].toUpperCase()+e.slice(1),r="on"+n;t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n="top"+n],isInteractive:t},hn[e]=t,pn[n]=t}"blur cancel click close contextMenu copy cut doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play rateChange reset seeked submit touchCancel touchEnd touchStart volumeChange".split(" ").forEach(function(e){dn(e,!0)}),"abort animationEnd animationIteration animationStart canPlay canPlayThrough drag dragEnter dragExit dragLeave dragOver durationChange emptied encrypted ended error load loadedData loadedMetadata loadStart mouseMove mouseOut mouseOver playing progress scroll seeking stalled suspend timeUpdate toggle touchMove transitionEnd waiting wheel".split(" ").forEach(function(e){dn(e,!1)});var fn={eventTypes:hn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=pn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=pn[e];if(!i)return null;switch(e){case"topKeyPress":if(0===nn(n))return null;case"topKeyDown":case"topKeyUp":e=an;break;case"topBlur":case"topFocus":e=tn;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=Wt;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=sn;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=cn;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=Qt;break;case"topTransitionEnd":e=un;break;case"topScroll":e=Ht;break;case"topWheel":e=ln;break;case"topCopy":case"topCut":case"topPaste":e=en;break;default:e=le}return ee(t=e.getPooled(i,t,n,r)),t}},mn=fn.isInteractiveTopLevelEventType,vn=[];function gn(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=j(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],B(e.topLevelType,t,e.nativeEvent,Ve(e.nativeEvent))}var yn=!0;function _n(e){yn=!!e}function xn(e,t,n){if(!n)return null;e=(mn(e)?wn:En).bind(null,e),n.addEventListener(t,e,!1)}function bn(e,t,n){if(!n)return null;e=(mn(e)?wn:En).bind(null,e),n.addEventListener(t,e,!0)}function wn(e,t){Be(En,e,t)}function En(e,t){if(yn){var n=Ve(t);if(null!==(n=j(n))&&"number"==typeof n.tag&&2!==Yt(n)&&(n=null),vn.length){var r=vn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{He(gn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>vn.length&&vn.push(e)}}}var Mn=Object.freeze({get _enabled(){return yn},setEnabled:_n,isEnabled:function(){return yn},trapBubbledEvent:xn,trapCapturedEvent:bn,dispatchEvent:En});function Tn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var Sn={animationend:Tn("Animation","AnimationEnd"),animationiteration:Tn("Animation","AnimationIteration"),animationstart:Tn("Animation","AnimationStart"),transitionend:Tn("Transition","TransitionEnd")},An={},Rn={};function Ln(e){if(An[e])return An[e];if(!Sn[e])return e;var t,n=Sn[e];for(t in n)if(n.hasOwnProperty(t)&&t in Rn)return An[e]=n[t];return e}o.canUseDOM&&(Rn=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);var Cn={topAnimationEnd:Ln("animationend"),topAnimationIteration:Ln("animationiteration"),topAnimationStart:Ln("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Ln("transitionend"),topWheel:"wheel"},Pn={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},On={},In=0,Nn="_reactListenersID"+(""+Math.random()).slice(2);function Dn(e){return Object.prototype.hasOwnProperty.call(e,Nn)||(e[Nn]=In++,On[e[Nn]]={}),On[e[Nn]]}function Un(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kn(e,t){var n,r=Un(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Un(r)}}function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}var Fn=o.canUseDOM&&"documentMode"in document&&11>=document.documentMode,zn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},Hn=null,Gn=null,jn=null,Vn=!1;function Wn(e,t){if(Vn||null==Hn||Hn!==c())return null;var n=Hn;return n="selectionStart"in n&&Bn(n)?{start:n.selectionStart,end:n.selectionEnd}:window.getSelection?{anchorNode:(n=window.getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}:void 0,jn&&u(jn,n)?null:(jn=n,(e=le.getPooled(zn.select,Gn,e,t)).type="select",e.target=Hn,ee(e),e)}var qn={eventTypes:zn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Dn(o),i=b.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?V(t):window,e){case"topFocus":(je(o)||"true"===o.contentEditable)&&(Hn=o,Gn=t,jn=null);break;case"topBlur":jn=Gn=Hn=null;break;case"topMouseDown":Vn=!0;break;case"topContextMenu":case"topMouseUp":return Vn=!1,Wn(n,r);case"topSelectionChange":if(Fn)break;case"topKeyDown":case"topKeyUp":return Wn(n,r)}return null}};function Xn(e,t,n,r){this.tag=e,this.key=n,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Yn(e,t,n){var r=e.alternate;return null===r?((r=new Xn(e.tag,t,e.key,e.mode)).type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Kn(e,t,n){var r=e.type,i=e.key;e=e.props;var o=void 0;if("function"==typeof r)o=r.prototype&&r.prototype.isReactComponent?2:0;else if("string"==typeof r)o=5;else switch(r){case tt:return Zn(e.children,t,n,i);case ot:o=11,t|=3;break;case nt:o=11,t|=2;break;case $e:o=7;break;case Qe:o=9;break;default:if("object"==typeof r&&null!==r)switch(r.$$typeof){case rt:o=13;break;case it:o=12;break;case at:o=14;break;default:if("number"==typeof r.tag)return(t=r).pendingProps=e,t.expirationTime=n,t;p("130",null==r?r:typeof r,"")}else p("130",null==r?r:typeof r,"")}return(t=new Xn(o,e,i,t)).type=r,t.expirationTime=n,t}function Zn(e,t,n,r){return(e=new Xn(10,e,r,t)).expirationTime=n,e}function Jn(e,t,n){return(e=new Xn(6,e,null,t)).expirationTime=n,e}function $n(e,t,n){return(t=new Xn(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}D.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),T=q.getFiberCurrentPropsFromNode,S=q.getInstanceFromNode,A=q.getNodeFromInstance,D.injectEventPluginsByName({SimpleEventPlugin:fn,EnterLeaveEventPlugin:Xt,ChangeEventPlugin:zt,SelectEventPlugin:qn,BeforeInputEventPlugin:Ae});var Qn=null,er=null;function tr(e){return function(t){try{return e(t)}catch(e){}}}function nr(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null}}function rr(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}new Set;var ir=void 0,or=void 0;function ar(e){ir=or=null;var t=e.alternate,n=e.updateQueue;null===n&&(n=e.updateQueue=nr(null)),null!==t?null===(e=t.updateQueue)&&(e=t.updateQueue=nr(null)):e=null,ir=n,or=e!==n?e:null}function sr(e,t){ar(e),e=ir;var n=or;null===n?rr(e,t):null===e.last||null===n.last?(rr(e,t),rr(n,t)):(rr(e,t),n.last=t)}function cr(e,t,n,r){return"function"==typeof(e=e.partialState)?e.call(t,n,r):e}function ur(e,t,n,r,i,o){null!==e&&e.updateQueue===n&&(n=t.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,capturedValues:n.capturedValues,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?e=n.baseState:(e=n.baseState=t.memoizedState,n.isInitialized=!0);for(var s=!0,c=n.first,u=!1;null!==c;){var l=c.expirationTime;if(l>o){var h=n.expirationTime;(0===h||h>l)&&(n.expirationTime=l),u||(u=!0,n.baseState=e)}else u||(n.first=c.next,null===n.first&&(n.last=null)),c.isReplace?(e=cr(c,r,e,i),s=!0):(l=cr(c,r,e,i))&&(e=s?a({},e,l):a(e,l),s=!1),c.isForced&&(n.hasForceUpdate=!0),null!==c.callback&&(null===(l=n.callbackList)&&(l=n.callbackList=[]),l.push(c)),null!==c.capturedValue&&(null===(l=n.capturedValues)?n.capturedValues=[c.capturedValue]:l.push(c.capturedValue));c=c.next}return null!==n.callbackList?t.effectTag|=32:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(t.updateQueue=null),u||(n.baseState=e),e}function lr(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var r=n[e],i=r.callback;r.callback=null,"function"!=typeof i&&p("191",i),i.call(t)}}var hr=Array.isArray;function pr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){var r=void 0;(n=n._owner)&&(2!==n.tag&&p("110"),r=n.stateNode),r||p("147",e);var i=""+e;return null!==t&&null!==t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs===h?r.refs={}:r.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&p("148"),n._owner||p("254",e)}return e}function dr(e,t){"textarea"!==e.type&&p("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function fr(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Yn(e,t,n)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Jn(n,e.mode,r)).return=e,t):((t=i(t,n,r)).return=e,t)}function c(e,t,n,r){return null!==t&&t.type===n.type?((r=i(t,n.props,r)).ref=pr(e,t,n),r.return=e,r):((r=Kn(n,e.mode,r)).ref=pr(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$n(n,e.mode,r)).return=e,t):((t=i(t,n.children||[],r)).return=e,t)}function l(e,t,n,r,o){return null===t||10!==t.tag?((t=Zn(n,e.mode,r,o)).return=e,t):((t=i(t,n,r)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Jn(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Je:return(n=Kn(t,e.mode,n)).ref=pr(e,null,t),n.return=e,n;case et:return(t=$n(t,e.mode,n)).return=e,t}if(hr(t)||ct(t))return(t=Zn(t,e.mode,n,null)).return=e,t;dr(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Je:return n.key===i?n.type===tt?l(e,t,n.props.children,r,i):c(e,t,n,r):null;case et:return n.key===i?u(e,t,n,r):null}if(hr(n)||ct(n))return null!==i?null:l(e,t,n,r,null);dr(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Je:return e=e.get(null===r.key?n:r.key)||null,r.type===tt?l(t,e,r.props.children,i,r.key):c(t,e,r,i);case et:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(hr(r)||ct(r))return l(t,e=e.get(n)||null,r,i,null);dr(t,r)}return null}function m(i,a,s,c){for(var u=null,l=null,p=a,m=a=0,v=null;null!==p&&m<s.length;m++){p.index>m?(v=p,p=null):v=p.sibling;var g=d(i,p,s[m],c);if(null===g){null===p&&(p=v);break}e&&p&&null===g.alternate&&t(i,p),a=o(g,a,m),null===l?u=g:l.sibling=g,l=g,p=v}if(m===s.length)return n(i,p),u;if(null===p){for(;m<s.length;m++)(p=h(i,s[m],c))&&(a=o(p,a,m),null===l?u=p:l.sibling=p,l=p);return u}for(p=r(i,p);m<s.length;m++)(v=f(p,i,m,s[m],c))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),a=o(v,a,m),null===l?u=v:l.sibling=v,l=v);return e&&p.forEach(function(e){return t(i,e)}),u}function v(i,a,s,c){var u=ct(s);"function"!=typeof u&&p("150"),null==(s=u.call(s))&&p("151");for(var l=u=null,m=a,v=a=0,g=null,y=s.next();null!==m&&!y.done;v++,y=s.next()){m.index>v?(g=m,m=null):g=m.sibling;var _=d(i,m,y.value,c);if(null===_){m||(m=g);break}e&&m&&null===_.alternate&&t(i,m),a=o(_,a,v),null===l?u=_:l.sibling=_,l=_,m=g}if(y.done)return n(i,m),u;if(null===m){for(;!y.done;v++,y=s.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,v),null===l?u=y:l.sibling=y,l=y);return u}for(m=r(i,m);!y.done;v++,y=s.next())null!==(y=f(m,i,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?u=y:l.sibling=y,l=y);return e&&m.forEach(function(e){return t(i,e)}),u}return function(e,r,o,s){"object"==typeof o&&null!==o&&o.type===tt&&null===o.key&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case Je:e:{var u=o.key;for(c=r;null!==c;){if(c.key===u){if(10===c.tag?o.type===tt:c.type===o.type){n(e,c.sibling),(r=i(c,o.type===tt?o.props.children:o.props,s)).ref=pr(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===tt?((r=Zn(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=Kn(o,e.mode,s)).ref=pr(e,r,o),s.return=e,e=s)}return a(e);case et:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[],s)).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$n(o,e.mode,s)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o,s)).return=e,e=r):(n(e,r),(r=Jn(o,e.mode,s)).return=e,e=r),a(e);if(hr(o))return m(e,r,o,s);if(ct(o))return v(e,r,o,s);if(c&&dr(e,o),void 0===o)switch(e.tag){case 2:case 1:p("152",(s=e.type).displayName||s.name||"Component")}return n(e,r)}}var mr=fr(!0),vr=fr(!1);function gr(e,t,n,r,i,o,s){function c(e,t,n){l(e,t,n,t.expirationTime)}function l(e,t,n,r){t.child=null===e?vr(t,null,n,r):mr(t,e.child,n,r)}function d(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function f(e,t,n,r,i,o){if(d(e,t),!n&&!i)return r&&R(t,!1),g(e,t);n=t.stateNode,Ke.current=t;var a=i?null:n.render();return t.effectTag|=1,i&&(l(e,t,null,o),t.child=null),l(e,t,a,o),t.memoizedState=n.state,t.memoizedProps=n.props,r&&R(t,!0),t.child}function m(e){var t=e.stateNode;t.pendingContext?A(e,t.pendingContext,t.pendingContext!==t.context):t.context&&A(e,t.context,!1),b(e,t.containerInfo)}function v(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){switch(i.tag){case 12:var o=0|i.stateNode;if(i.type===t&&0!=(o&n)){for(o=i;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>r)o.expirationTime=r,null!==a&&(0===a.expirationTime||a.expirationTime>r)&&(a.expirationTime=r);else{if(null===a||!(0===a.expirationTime||a.expirationTime>r))break;a.expirationTime=r}o=o.return}o=null}else o=i.child;break;case 13:o=i.type===e.type?null:i.child;break;default:o=i.child}if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){o=i;break}o=o.return}i=o}}function g(e,t){if(null!==e&&t.child!==e.child&&p("153"),null!==t.child){var n=Yn(e=t.child,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Yn(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}var y=e.shouldSetTextContent,_=e.shouldDeprioritizeSubtree,x=t.pushHostContext,b=t.pushHostContainer,w=r.pushProvider,E=n.getMaskedContext,M=n.getUnmaskedContext,T=n.hasContextChanged,S=n.pushContextProvider,A=n.pushTopLevelContextObject,R=n.invalidateContextProvider,L=i.enterHydrationState,C=i.resetHydrationState,P=i.tryToClaimNextHydratableInstance,O=(e=function(e,t,n,r,i){function o(e,t,n,r,i,o){if(null===t||null!==e.updateQueue&&e.updateQueue.hasForceUpdate)return!0;var a=e.stateNode;return e=e.type,"function"==typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,i,o):!(e.prototype&&e.prototype.isPureReactComponent&&u(t,n)&&u(r,i))}function s(e,t){t.updater=g,e.stateNode=t,t._reactInternalFiber=e}function c(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&g.enqueueReplaceState(t,t.state,null)}function l(e,t,n,r){if("function"==typeof(e=e.type).getDerivedStateFromProps)return e.getDerivedStateFromProps.call(null,n,r)}var p=e.cacheContext,d=e.getMaskedContext,f=e.getUnmaskedContext,m=e.isContextConsumer,v=e.hasContextChanged,g={isMounted:Kt,enqueueSetState:function(e,r,i){e=e._reactInternalFiber,i=void 0===i?null:i;var o=n(e);sr(e,{expirationTime:o,partialState:r,callback:i,isReplace:!1,isForced:!1,capturedValue:null,next:null}),t(e,o)},enqueueReplaceState:function(e,r,i){e=e._reactInternalFiber,i=void 0===i?null:i;var o=n(e);sr(e,{expirationTime:o,partialState:r,callback:i,isReplace:!0,isForced:!1,capturedValue:null,next:null}),t(e,o)},enqueueForceUpdate:function(e,r){e=e._reactInternalFiber,r=void 0===r?null:r;var i=n(e);sr(e,{expirationTime:i,partialState:null,callback:r,isReplace:!1,isForced:!0,capturedValue:null,next:null}),t(e,i)}};return{adoptClassInstance:s,callGetDerivedStateFromProps:l,constructClassInstance:function(e,t){var n=e.type,r=f(e),i=m(e),o=i?d(e,r):h,c=null!==(n=new n(t,o)).state&&void 0!==n.state?n.state:null;return s(e,n),e.memoizedState=c,null!==(t=l(e,0,t,c))&&void 0!==t&&(e.memoizedState=a({},e.memoizedState,t)),i&&p(e,r,o),n},mountClassInstance:function(e,t){var n=e.type,r=e.alternate,i=e.stateNode,o=e.pendingProps,a=f(e);i.props=o,i.state=e.memoizedState,i.refs=h,i.context=d(e,a),"function"==typeof n.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(n=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),n!==i.state&&g.enqueueReplaceState(i,i.state,null),null!==(n=e.updateQueue)&&(i.state=ur(r,e,n,i,o,t))),"function"==typeof i.componentDidMount&&(e.effectTag|=4)},resumeMountClassInstance:function(e,t){var n=e.type,s=e.stateNode;s.props=e.memoizedProps,s.state=e.memoizedState;var u=e.memoizedProps,h=e.pendingProps,p=s.context,m=f(e);m=d(e,m),(n="function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(u!==h||p!==m)&&c(e,s,h,m),p=e.memoizedState,t=null!==e.updateQueue?ur(null,e,e.updateQueue,s,h,t):p;var g=void 0;if(u!==h&&(g=l(e,0,h,t)),null!==g&&void 0!==g){t=null===t||void 0===t?g:a({},t,g);var y=e.updateQueue;null!==y&&(y.baseState=a({},y.baseState,g))}return u!==h||p!==t||v()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate?((u=o(e,u,h,p,t,m))?(n||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.effectTag|=4)):("function"==typeof s.componentDidMount&&(e.effectTag|=4),r(e,h),i(e,t)),s.props=h,s.state=t,s.context=m,u):("function"==typeof s.componentDidMount&&(e.effectTag|=4),!1)},updateClassInstance:function(e,t,n){var s=t.type,u=t.stateNode;u.props=t.memoizedProps,u.state=t.memoizedState;var h=t.memoizedProps,p=t.pendingProps,m=u.context,g=f(t);g=d(t,g),(s="function"==typeof s.getDerivedStateFromProps||"function"==typeof u.getSnapshotBeforeUpdate)||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(h!==p||m!==g)&&c(t,u,p,g),m=t.memoizedState,n=null!==t.updateQueue?ur(e,t,t.updateQueue,u,p,n):m;var y=void 0;if(h!==p&&(y=l(t,0,p,n)),null!==y&&void 0!==y){n=null===n||void 0===n?y:a({},n,y);var _=t.updateQueue;null!==_&&(_.baseState=a({},_.baseState,y))}return h!==p||m!==n||v()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate?((y=o(t,h,p,m,n,g))?(s||"function"!=typeof u.UNSAFE_componentWillUpdate&&"function"!=typeof u.componentWillUpdate||("function"==typeof u.componentWillUpdate&&u.componentWillUpdate(p,n,g),"function"==typeof u.UNSAFE_componentWillUpdate&&u.UNSAFE_componentWillUpdate(p,n,g)),"function"==typeof u.componentDidUpdate&&(t.effectTag|=4),"function"==typeof u.getSnapshotBeforeUpdate&&(t.effectTag|=2048)):("function"!=typeof u.componentDidUpdate||h===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=4),"function"!=typeof u.getSnapshotBeforeUpdate||h===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=2048),r(t,p),i(t,n)),u.props=p,u.state=n,u.context=g,y):("function"!=typeof u.componentDidUpdate||h===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=4),"function"!=typeof u.getSnapshotBeforeUpdate||h===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=2048),!1)}}}(n,o,s,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t})).adoptClassInstance,I=e.callGetDerivedStateFromProps,N=e.constructClassInstance,D=e.mountClassInstance,U=e.resumeMountClassInstance,k=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:m(t);break;case 2:S(t);break;case 4:b(t,t.stateNode.containerInfo);break;case 13:w(t)}return null}switch(t.tag){case 0:null!==e&&p("155");var r=t.type,i=t.pendingProps,o=M(t);return r=r(i,o=E(t,o)),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(o=t.type,t.tag=2,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,"function"==typeof o.getDerivedStateFromProps&&null!==(i=I(t,r,i,t.memoizedState))&&void 0!==i&&(t.memoizedState=a({},t.memoizedState,i)),i=S(t),O(t,r),D(t,n),e=f(e,t,!0,i,!1,n)):(t.tag=1,c(e,t,r),t.memoizedProps=i,e=t.child),e;case 1:return i=t.type,n=t.pendingProps,T()||t.memoizedProps!==n?(r=M(t),i=i(n,r=E(t,r)),t.effectTag|=1,c(e,t,i),t.memoizedProps=n,e=t.child):e=g(e,t),e;case 2:i=S(t),null===e?null===t.stateNode?(N(t,t.pendingProps),D(t,n),r=!0):r=U(t,n):r=k(e,t,n),o=!1;var s=t.updateQueue;return null!==s&&null!==s.capturedValues&&(o=r=!0),f(e,t,r,i,o,n);case 3:e:if(m(t),r=t.updateQueue,null!==r){if(o=t.memoizedState,i=ur(e,t,r,null,null,n),t.memoizedState=i,null!==(r=t.updateQueue)&&null!==r.capturedValues)r=null;else{if(o===i){C(),e=g(e,t);break e}r=i.element}o=t.stateNode,(null===e||null===e.child)&&o.hydrate&&L(t)?(t.effectTag|=2,t.child=vr(t,null,r,n)):(C(),c(e,t,r)),t.memoizedState=i,e=t.child}else C(),e=g(e,t);return e;case 5:return x(t),null===e&&P(t),i=t.type,s=t.memoizedProps,r=t.pendingProps,o=null!==e?e.memoizedProps:null,T()||s!==r||((s=1&t.mode&&_(i,r))&&(t.expirationTime=1073741823),s&&1073741823===n)?(s=r.children,y(i,r)?s=null:o&&y(i,o)&&(t.effectTag|=16),d(e,t),1073741823!==n&&1&t.mode&&_(i,r)?(t.expirationTime=1073741823,t.memoizedProps=r,e=null):(c(e,t,s),t.memoizedProps=r,e=t.child)):e=g(e,t),e;case 6:return null===e&&P(t),t.memoizedProps=t.pendingProps,null;case 8:t.tag=7;case 7:return i=t.pendingProps,T()||t.memoizedProps!==i||(i=t.memoizedProps),r=i.children,t.stateNode=null===e?vr(t,t.stateNode,r,n):mr(t,e.stateNode,r,n),t.memoizedProps=i,t.stateNode;case 9:return null;case 4:return b(t,t.stateNode.containerInfo),i=t.pendingProps,T()||t.memoizedProps!==i?(null===e?t.child=mr(t,null,i,n):c(e,t,i),t.memoizedProps=i,e=t.child):e=g(e,t),e;case 14:return c(e,t,n=(n=t.type.render)(t.pendingProps,t.ref)),t.memoizedProps=n,t.child;case 10:return n=t.pendingProps,T()||t.memoizedProps!==n?(c(e,t,n),t.memoizedProps=n,e=t.child):e=g(e,t),e;case 11:return n=t.pendingProps.children,T()||null!==n&&t.memoizedProps!==n?(c(e,t,n),t.memoizedProps=n,e=t.child):e=g(e,t),e;case 13:return function(e,t,n){var r=t.type._context,i=t.pendingProps,o=t.memoizedProps;if(!T()&&o===i)return t.stateNode=0,w(t),g(e,t);var a=i.value;if(t.memoizedProps=i,null===o)a=1073741823;else if(o.value===i.value){if(o.children===i.children)return t.stateNode=0,w(t),g(e,t);a=0}else{var s=o.value;if(s===a&&(0!==s||1/s==1/a)||s!=s&&a!=a){if(o.children===i.children)return t.stateNode=0,w(t),g(e,t);a=0}else if(a="function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823,0==(a|=0)){if(o.children===i.children)return t.stateNode=0,w(t),g(e,t)}else v(t,r,a,n)}return t.stateNode=a,w(t),c(e,t,i.children),t.child}(e,t,n);case 12:e:{r=t.type,o=t.pendingProps,s=t.memoizedProps,i=r._currentValue;var u=r._changedBits;if(T()||0!==u||s!==o){t.memoizedProps=o;var l=o.unstable_observedBits;if(void 0!==l&&null!==l||(l=1073741823),t.stateNode=l,0!=(u&l))v(t,r,u,n);else if(s===o){e=g(e,t);break e}c(e,t,n=(n=o.children)(i)),e=t.child}else e=g(e,t)}return e;default:p("156")}}}}function yr(e,t){var n=t.source;null===t.stack&&lt(n),null!==n&&ut(n),t=t.value,null!==e&&2===e.tag&&ut(e);try{t&&t.suppressReactErrorLogging||console.error(t)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}var _r={};function xr(e){function t(){if(null!==Q)for(var e=Q.return;null!==e;)N(e),e=e.return;ee=null,te=0,Q=null,ie=!1}function n(e){return null!==oe&&oe.has(e)}function r(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(512&e.effectTag)){t=P(t,e,te);var i=e;if(1073741823===te||1073741823!==i.expirationTime){e:switch(i.tag){case 3:case 2:var o=i.updateQueue;o=null===o?0:o.expirationTime;break e;default:o=0}for(var a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==t)return t;if(null!==n&&0==(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){ie=!0;break}e=n}else{if(null!==(e=I(e)))return e.effectTag&=2559,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;e=n}}return null}function i(e){var t=C(e.alternate,e,te);return null===t&&(t=r(e)),Ke.current=null,t}function o(e,n,o){$&&p("243"),$=!0,n===te&&e===ee&&null!==Q||(t(),te=n,Q=Yn((ee=e).current,null,te),e.pendingCommitExpirationTime=0);for(var a=!1;;){try{if(o)for(;null!==Q&&!M();)Q=i(Q);else for(;null!==Q;)Q=i(Q)}catch(e){if(null===Q){a=!0,T(e);break}var s=(o=Q).return;if(null===s){a=!0,T(e);break}O(s,o,e),Q=r(o)}break}return $=!1,a||null!==Q?null:ie?(e.pendingCommitExpirationTime=n,e.current.alternate):void p("262")}function s(e,t,n,r){sr(t,{expirationTime:r,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:e={value:n,source:e,stack:lt(e)},next:null}),l(t,r)}function c(e,t){e:{$&&!re&&p("263");for(var r=e.return;null!==r;){switch(r.tag){case 2:var i=r.stateNode;if("function"==typeof r.type.getDerivedStateFromCatch||"function"==typeof i.componentDidCatch&&!n(i)){s(e,r,t,1),e=void 0;break e}break;case 3:s(e,r,t,1),e=void 0;break e}r=r.return}3===e.tag&&s(e,e,t,1),e=void 0}return e}function u(e){return e=0!==J?J:$?re?1:te:1&e.mode?xe?10*(1+((d()+15)/10|0)):25*(1+((d()+500)/25|0)):1,xe&&(0===de||e>de)&&(de=e),e}function l(e,n){e:{for(;null!==e;){if((0===e.expirationTime||e.expirationTime>n)&&(e.expirationTime=n),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>n)&&(e.alternate.expirationTime=n),null===e.return){if(3!==e.tag){n=void 0;break e}var r=e.stateNode;!$&&0!==te&&n<te&&t(),$&&!re&&ee===r||v(r,n),Ee>we&&p("185")}e=e.return}n=void 0}return n}function d(){return 2+((V()-K)/10|0)}function f(e,t,n,r,i){var o=J;J=1;try{return e(t,n,r,i)}finally{J=o}}function m(e){if(0!==ce){if(e>ce)return;q(ue)}var t=V()-K;ce=e,ue=W(y,{timeout:10*(e-2)-t})}function v(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===se?(ae=se=e,e.nextScheduledRoot=e):(se=se.nextScheduledRoot=e).nextScheduledRoot=ae;else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}le||(ye?_e&&(he=e,pe=1,w(e,1,!1)):1===t?_():m(t))}function g(){var e=0,t=null;if(null!==se)for(var n=se,r=ae;null!==r;){var i=r.remainingExpirationTime;if(0===i){if((null===n||null===se)&&p("244"),r===r.nextScheduledRoot){ae=se=r.nextScheduledRoot=null;break}if(r===ae)ae=i=r.nextScheduledRoot,se.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===se){(se=n).nextScheduledRoot=ae,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||i<e)&&(e=i,t=r),r===se)break;n=r,r=r.nextScheduledRoot}}null!==(n=he)&&n===t&&1===e?Ee++:Ee=0,he=t,pe=e}function y(e){x(0,!0,e)}function _(){x(1,!1,null)}function x(e,t,n){if(ge=n,g(),t)for(;null!==he&&0!==pe&&(0===e||e>=pe)&&(!fe||d()>=pe);)w(he,pe,!fe),g();else for(;null!==he&&0!==pe&&(0===e||e>=pe);)w(he,pe,!1),g();null!==ge&&(ce=0,ue=-1),0!==pe&&m(pe),ge=null,fe=!1,b()}function b(){if(Ee=0,null!==be){var e=be;be=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){me||(me=!0,ve=e)}}}if(me)throw e=ve,ve=null,me=!1,e}function w(e,t,n){le&&p("245"),le=!0,n?null!==(n=e.finishedWork)?E(e,n,t):(e.finishedWork=null,null!==(n=o(e,t,!0))&&(M()?e.finishedWork=n:E(e,n,t))):null!==(n=e.finishedWork)?E(e,n,t):(e.finishedWork=null,null!==(n=o(e,t,!1))&&E(e,n,t)),le=!1}function E(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===be?be=[r]:be.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);e.finishedWork=null,re=$=!0,(n=t.stateNode).current===t&&p("177"),0===(r=n.pendingCommitExpirationTime)&&p("261"),n.pendingCommitExpirationTime=0;var i=d();if(Ke.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var o=t.firstEffect}else o=t;else o=t.firstEffect;for(X(n.containerInfo),ne=o;null!==ne;){var a=!1,s=void 0;try{for(;null!==ne;)2048&ne.effectTag&&D(ne.alternate,ne),ne=ne.nextEffect}catch(e){a=!0,s=e}a&&(null===ne&&p("178"),c(ne,s),null!==ne&&(ne=ne.nextEffect))}for(ne=o;null!==ne;){a=!1,s=void 0;try{for(;null!==ne;){var u=ne.effectTag;if(16&u&&U(ne),128&u){var l=ne.alternate;null!==l&&j(l)}switch(14&u){case 2:k(ne),ne.effectTag&=-3;break;case 6:k(ne),ne.effectTag&=-3,F(ne.alternate,ne);break;case 4:F(ne.alternate,ne);break;case 8:B(ne)}ne=ne.nextEffect}}catch(e){a=!0,s=e}a&&(null===ne&&p("178"),c(ne,s),null!==ne&&(ne=ne.nextEffect))}for(Y(n.containerInfo),n.current=t,ne=o;null!==ne;){u=!1,l=void 0;try{for(o=n,a=i,s=r;null!==ne;){var h=ne.effectTag;36&h&&z(o,ne.alternate,ne,a,s),256&h&&H(ne,T),128&h&&G(ne);var f=ne.nextEffect;ne.nextEffect=null,ne=f}}catch(e){u=!0,l=e}u&&(null===ne&&p("178"),c(ne,l),null!==ne&&(ne=ne.nextEffect))}$=re=!1,function(e){"function"==typeof Qn&&Qn(e)}(t.stateNode),0===(t=n.current.expirationTime)&&(oe=null),e.remainingExpirationTime=t}function M(){return!(null===ge||ge.timeRemaining()>Me)&&(fe=!0)}function T(e){null===he&&p("246"),he.remainingExpirationTime=0,me||(me=!0,ve=e)}var S=function(){var e=[],t=-1;return{createCursor:function(e){return{current:e}},isEmpty:function(){return-1===t},pop:function(n){0>t||(n.current=e[t],e[t]=null,t--)},push:function(n,r){e[++t]=n.current,n.current=r},checkThatStackIsEmpty:function(){},resetStackAfterFatalErrorInDev:function(){}}}(),A=function(e,t){function n(e){return e===_r&&p("174"),e}var r=e.getChildHostContext,i=e.getRootHostContext;e=t.createCursor;var o=t.push,a=t.pop,s=e(_r),c=e(_r),u=e(_r);return{getHostContext:function(){return n(s.current)},getRootHostContainer:function(){return n(u.current)},popHostContainer:function(e){a(s,e),a(c,e),a(u,e)},popHostContext:function(e){c.current===e&&(a(s,e),a(c,e))},pushHostContainer:function(e,t){o(u,t,e),o(c,e,e),o(s,_r,e),t=i(t),a(s,e),o(s,t,e)},pushHostContext:function(e){var t=n(u.current),i=n(s.current);i!==(t=r(i,e.type,t))&&(o(c,e,e),o(s,t,e))}}}(e,S),R=function(e){function t(e,t,n){(e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n}function n(e){return 2===e.tag&&null!=e.type.childContextTypes}function r(e,t){var n=e.stateNode,r=e.type.childContextTypes;if("function"!=typeof n.getChildContext)return t;for(var i in n=n.getChildContext())i in r||p("108",ut(e)||"Unknown",i);return a({},t,n)}var i=e.createCursor,o=e.push,s=e.pop,c=i(h),u=i(!1),l=h;return{getUnmaskedContext:function(e){return n(e)?l:c.current},cacheContext:t,getMaskedContext:function(e,n){var r=e.type.contextTypes;if(!r)return h;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in r)a[o]=n[o];return i&&t(e,n,a),a},hasContextChanged:function(){return u.current},isContextConsumer:function(e){return 2===e.tag&&null!=e.type.contextTypes},isContextProvider:n,popContextProvider:function(e){n(e)&&(s(u,e),s(c,e))},popTopLevelContextObject:function(e){s(u,e),s(c,e)},pushTopLevelContextObject:function(e,t,n){null!=c.cursor&&p("168"),o(c,t,e),o(u,n,e)},processChildContext:r,pushContextProvider:function(e){if(!n(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||h,l=c.current,o(c,t,e),o(u,u.current,e),!0},invalidateContextProvider:function(e,t){var n=e.stateNode;if(n||p("169"),t){var i=r(e,l);n.__reactInternalMemoizedMergedChildContext=i,s(u,e),s(c,e),o(c,i,e)}else s(u,e);o(u,t,e)},findCurrentUnmaskedContext:function(e){for((2!==Yt(e)||2!==e.tag)&&p("170");3!==e.tag;){if(n(e))return e.stateNode.__reactInternalMemoizedMergedChildContext;(e=e.return)||p("171")}return e.stateNode.context}}}(S);S=function(e){var t=e.createCursor,n=e.push,r=e.pop,i=t(null),o=t(null),a=t(0);return{pushProvider:function(e){var t=e.type._context;n(a,t._changedBits,e),n(o,t._currentValue,e),n(i,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode},popProvider:function(e){var t=a.current,n=o.current;r(i,e),r(o,e),r(a,e),(e=e.type._context)._currentValue=n,e._changedBits=t}}}(S);var L=function(e){function t(e,t){var n=new Xn(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case 5:return null!==(t=o(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=a(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function r(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;h=e}var i=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){p("175")},prepareToHydrateHostTextInstance:function(){p("176")},popHydrationState:function(){return!1}};var o=e.canHydrateInstance,a=e.canHydrateTextInstance,s=e.getNextHydratableSibling,c=e.getFirstHydratableChild,u=e.hydrateInstance,l=e.hydrateTextInstance,h=null,d=null,f=!1;return{enterHydrationState:function(e){return d=c(e.stateNode.containerInfo),h=e,f=!0},resetHydrationState:function(){d=h=null,f=!1},tryToClaimNextHydratableInstance:function(e){if(f){var r=d;if(r){if(!n(e,r)){if(!(r=s(r))||!n(e,r))return e.effectTag|=2,f=!1,void(h=e);t(h,d)}h=e,d=c(r)}else e.effectTag|=2,f=!1,h=e}},prepareToHydrateHostInstance:function(e,t,n){return t=u(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return l(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==h)return!1;if(!f)return r(e),f=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!i(n,e.memoizedProps))for(n=d;n;)t(e,n),n=s(n);return r(e),d=h?s(e.stateNode):null,!0}}}(e),C=gr(e,A,R,S,L,l,u).beginWork,P=function(e,t,n,r,i){function o(e){e.effectTag|=4}var a=e.createInstance,s=e.createTextInstance,c=e.appendInitialChild,u=e.finalizeInitialChildren,l=e.prepareUpdate,h=e.persistence,d=t.getRootHostContainer,f=t.popHostContext,m=t.getHostContext,v=t.popHostContainer,g=n.popContextProvider,y=n.popTopLevelContextObject,_=r.popProvider,x=i.prepareToHydrateHostInstance,b=i.prepareToHydrateHostTextInstance,w=i.popHydrationState,E=void 0,M=void 0,T=void 0;return e.mutation?(E=function(){},M=function(e,t,n){(t.updateQueue=n)&&o(t)},T=function(e,t,n,r){n!==r&&o(t)}):p(h?"235":"236"),{completeWork:function(e,t,n){var r=t.pendingProps;switch(t.tag){case 1:return null;case 2:return g(t),e=t.stateNode,null!==(r=t.updateQueue)&&null!==r.capturedValues&&(t.effectTag&=-65,"function"==typeof e.componentDidCatch?t.effectTag|=256:r.capturedValues=null),null;case 3:return v(t),y(t),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(w(t),t.effectTag&=-3),E(t),null!==(e=t.updateQueue)&&null!==e.capturedValues&&(t.effectTag|=256),null;case 5:f(t),n=d();var i=t.type;if(null!==e&&null!=t.stateNode){var h=e.memoizedProps,S=t.stateNode,A=m();S=l(S,i,h,r,n,A),M(e,t,S,i,h,r,n,A),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!r)return null===t.stateNode&&p("166"),null;if(e=m(),w(t))x(t,n,e)&&o(t);else{h=a(i,r,n,e,t);e:for(A=t.child;null!==A;){if(5===A.tag||6===A.tag)c(h,A.stateNode);else if(4!==A.tag&&null!==A.child){A.child.return=A,A=A.child;continue}if(A===t)break;for(;null===A.sibling;){if(null===A.return||A.return===t)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}u(h,i,r,n,e)&&o(t),t.stateNode=h}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)T(e,t,e.memoizedProps,r);else{if("string"!=typeof r)return null===t.stateNode&&p("166"),null;e=d(),n=m(),w(t)?b(t)&&o(t):t.stateNode=s(r,e,n,t)}return null;case 7:(r=t.memoizedProps)||p("165"),t.tag=8,i=[];e:for((h=t.stateNode)&&(h.return=t);null!==h;){if(5===h.tag||6===h.tag||4===h.tag)p("247");else if(9===h.tag)i.push(h.pendingProps.value);else if(null!==h.child){h.child.return=h,h=h.child;continue}for(;null===h.sibling;){if(null===h.return||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}return r=(h=r.handler)(r.props,i),t.child=mr(t,null!==e?e.child:null,r,n),t.child;case 8:return t.tag=7,null;case 9:case 14:case 10:case 11:return null;case 4:return v(t),E(t),null;case 13:return _(t),null;case 12:return null;case 0:p("167");default:p("156")}}}}(e,A,R,S,L).completeWork,O=(A=function(e,t,n,r,i){var o=e.popHostContainer,a=e.popHostContext,s=t.popContextProvider,c=t.popTopLevelContextObject,u=n.popProvider;return{throwException:function(e,t,n){t.effectTag|=512,t.firstEffect=t.lastEffect=null,t={value:n,source:t,stack:lt(t)};do{switch(e.tag){case 3:return ar(e),e.updateQueue.capturedValues=[t],void(e.effectTag|=1024);case 2:if(n=e.stateNode,0==(64&e.effectTag)&&null!==n&&"function"==typeof n.componentDidCatch&&!i(n)){ar(e);var r=(n=e.updateQueue).capturedValues;return null===r?n.capturedValues=[t]:r.push(t),void(e.effectTag|=1024)}}e=e.return}while(null!==e)},unwindWork:function(e){switch(e.tag){case 2:s(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return o(e),c(e),1024&(t=e.effectTag)?(e.effectTag=-1025&t|64,e):null;case 5:return a(e),null;case 4:return o(e),null;case 13:return u(e),null;default:return null}},unwindInterruptedWork:function(e){switch(e.tag){case 2:s(e);break;case 3:o(e),c(e);break;case 5:a(e);break;case 4:o(e);break;case 13:u(e)}}}}(A,R,S,0,n)).throwException,I=A.unwindWork,N=A.unwindInterruptedWork,D=(A=function(e,t,n,r,i){function o(e){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){t(e,n)}else n.current=null}function a(e){switch(function(e){"function"==typeof er&&er(e)}(e),e.tag){case 2:o(e);var n=e.stateNode;if("function"==typeof n.componentWillUnmount)try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(n){t(e,n)}break;case 5:o(e);break;case 7:s(e.stateNode);break;case 4:h&&u(e)}}function s(e){for(var t=e;;)if(a(t),null===t.child||h&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function c(e){return 5===e.tag||3===e.tag||4===e.tag}function u(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&p("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)s(t),i?w(r,t.stateNode):b(r,t.stateNode);else if(4===t.tag?r=t.stateNode.containerInfo:a(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var l=e.getPublicInstance,h=e.mutation;e=e.persistence,h||p(e?"235":"236");var d=h.commitMount,f=h.commitUpdate,m=h.resetTextContent,v=h.commitTextUpdate,g=h.appendChild,y=h.appendChildToContainer,_=h.insertBefore,x=h.insertInContainerBefore,b=h.removeChild,w=h.removeChildFromContainer;return{commitBeforeMutationLifeCycles:function(e,t){switch(t.tag){case 2:if(2048&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;(e=t.stateNode).props=t.memoizedProps,e.state=t.memoizedState,t=e.getSnapshotBeforeUpdate(n,r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:break;default:p("163")}},commitResetTextContent:function(e){m(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(c(t)){var n=t;break e}t=t.return}p("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:p("161")}16&n.effectTag&&(m(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||c(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)n?r?x(t,i.stateNode,n):_(t,i.stateNode,n):r?y(t,i.stateNode):g(t,i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},commitDeletion:function(e){u(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&f(n,o,i,e,r,t)}break;case 6:null===t.stateNode&&p("162"),n=t.memoizedProps,v(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:p("163")}},commitLifeCycles:function(e,t,n){switch(n.tag){case 2:if(e=n.stateNode,4&n.effectTag)if(null===t)e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidMount();else{var r=t.memoizedProps;t=t.memoizedState,e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}null!==(n=n.updateQueue)&&lr(n,e);break;case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=l(n.child.stateNode);break;case 2:e=n.child.stateNode}lr(t,e)}break;case 5:e=n.stateNode,null===t&&4&n.effectTag&&d(e,n.type,n.memoizedProps,n);break;case 6:case 4:break;default:p("163")}},commitErrorLogging:function(e,t){switch(e.tag){case 2:var n=e.type;t=e.stateNode;var r=e.updateQueue;(null===r||null===r.capturedValues)&&p("264");var i=r.capturedValues;for(r.capturedValues=null,"function"!=typeof n.getDerivedStateFromCatch&&function(e){null===oe?oe=new Set([e]):oe.add(e)}(t),t.props=e.memoizedProps,t.state=e.memoizedState,n=0;n<i.length;n++){var o=(r=i[n]).value,a=r.stack;yr(e,r),t.componentDidCatch(o,{componentStack:null!==a?a:""})}break;case 3:for((null===(n=e.updateQueue)||null===n.capturedValues)&&p("264"),i=n.capturedValues,n.capturedValues=null,n=0;n<i.length;n++)yr(e,r=i[n]),t(r.value);break;default:p("265")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:e=l(n);break;default:e=n}"function"==typeof t?t(e):t.current=e}},commitDetachRef:function(e){null!==(e=e.ref)&&("function"==typeof e?e(null):e.current=null)}}}(e,c)).commitBeforeMutationLifeCycles,U=A.commitResetTextContent,k=A.commitPlacement,B=A.commitDeletion,F=A.commitWork,z=A.commitLifeCycles,H=A.commitErrorLogging,G=A.commitAttachRef,j=A.commitDetachRef,V=e.now,W=e.scheduleDeferredCallback,q=e.cancelDeferredCallback,X=e.prepareForCommit,Y=e.resetAfterCommit,K=V(),Z=0,J=0,$=!1,Q=null,ee=null,te=0,ne=null,re=!1,ie=!1,oe=null,ae=null,se=null,ce=0,ue=-1,le=!1,he=null,pe=0,de=0,fe=!1,me=!1,ve=null,ge=null,ye=!1,_e=!1,xe=!1,be=null,we=1e3,Ee=0,Me=1;return{recalculateCurrentTime:d,computeExpirationForFiber:u,scheduleWork:l,requestWork:v,flushRoot:function(e,t){le&&p("253"),he=e,pe=t,w(e,t,!1),_(),b()},batchedUpdates:function(e,t){var n=ye;ye=!0;try{return e(t)}finally{(ye=n)||le||_()}},unbatchedUpdates:function(e,t){if(ye&&!_e){_e=!0;try{return e(t)}finally{_e=!1}}return e(t)},flushSync:function(e,t){le&&p("187");var n=ye;ye=!0;try{return f(e,t)}finally{ye=n,_()}},flushControlled:function(e){var t=ye;ye=!0;try{f(e)}finally{(ye=t)||le||x(1,!1,null)}},deferredUpdates:function(e){var t=J;J=25*(1+((d()+500)/25|0));try{return e()}finally{J=t}},syncUpdates:f,interactiveUpdates:function(e,t,n){if(xe)return e(t,n);ye||le||0===de||(x(de,!1,null),de=0);var r=xe,i=ye;ye=xe=!0;try{return e(t,n)}finally{xe=r,(ye=i)||le||_()}},flushInteractiveUpdates:function(){le||0===de||(x(de,!1,null),de=0)},computeUniqueAsyncExpiration:function(){var e=25*(1+((d()+500)/25|0));return e<=Z&&(e=Z+1),Z=e},legacyContext:R}}function br(e){function t(e,t,n,r,i,a){if(r=t.current,n){n=n._reactInternalFiber;var s=c(n);n=u(n)?l(n,s):s}else n=h;return null===t.context?t.context=n:t.pendingContext=n,sr(r,{expirationTime:i,partialState:{element:e},callback:void 0===(t=a)?null:t,isReplace:!1,isForced:!1,capturedValue:null,next:null}),o(r,i),i}var n=e.getPublicInstance,r=(e=xr(e)).recalculateCurrentTime,i=e.computeExpirationForFiber,o=e.scheduleWork,s=e.legacyContext,c=s.findCurrentUnmaskedContext,u=s.isContextProvider,l=s.processChildContext;return{createContainer:function(e,t,n){return e={current:t=new Xn(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e},updateContainer:function(e,n,o,a){var s=n.current;return t(e,n,o,r(),s=i(s),a)},updateContainerAtExpirationTime:function(e,n,i,o,a){return t(e,n,i,r(),o,a)},flushRoot:e.flushRoot,requestWork:e.requestWork,computeUniqueAsyncExpiration:e.computeUniqueAsyncExpiration,batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,syncUpdates:e.syncUpdates,interactiveUpdates:e.interactiveUpdates,flushInteractiveUpdates:e.flushInteractiveUpdates,flushControlled:e.flushControlled,flushSync:e.flushSync,getPublicRootInstance:function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:return n(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:function(e){var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?p("188"):p("268",Object.keys(e))),null===(e=$t(t))?null:e.stateNode},findHostInstanceWithNoPortals:function(e){return null===(e=function(e){if(!(e=Jt(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:e.stateNode},injectIntoDevTools:function(e){var t=e.findFiberByHostInstance;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Qn=tr(function(e){return t.onCommitFiberRoot(n,e)}),er=tr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}(a({},e,{findHostInstanceByFiber:function(e){return null===(e=$t(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}}}var wr=Object.freeze({default:br}),Er=wr&&br||wr,Mr=Er.default?Er.default:Er,Tr="object"==typeof performance&&"function"==typeof performance.now,Sr=void 0;Sr=Tr?function(){return performance.now()}:function(){return Date.now()};var Ar=void 0,Rr=void 0;if(o.canUseDOM)if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){var Lr=null,Cr=!1,Pr=-1,Or=!1,Ir=0,Nr=33,Dr=33,Ur=void 0;Ur=Tr?{didTimeout:!1,timeRemaining:function(){var e=Ir-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=Ir-Date.now();return 0<e?e:0}};var kr="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===kr){if(Cr=!1,e=Sr(),0>=Ir-e){if(!(-1!==Pr&&Pr<=e))return void(Or||(Or=!0,requestAnimationFrame(Br)));Ur.didTimeout=!0}else Ur.didTimeout=!1;Pr=-1,e=Lr,Lr=null,null!==e&&e(Ur)}},!1);var Br=function(e){Or=!1;var t=e-Ir+Dr;t<Dr&&Nr<Dr?(8>t&&(t=8),Dr=t<Nr?Nr:t):Nr=t,Ir=e+Dr,Cr||(Cr=!0,window.postMessage(kr,"*"))};Ar=function(e,t){return Lr=e,null!=t&&"number"==typeof t.timeout&&(Pr=Sr()+t.timeout),Or||(Or=!0,requestAnimationFrame(Br)),0},Rr=function(){Lr=null,Cr=!1,Pr=-1}}else Ar=window.requestIdleCallback,Rr=window.cancelIdleCallback;else Ar=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})})},Rr=function(e){clearTimeout(e)};function Fr(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(t.children))&&(e.children=t),e}function zr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Hr(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function Gr(e,t){return null!=t.dangerouslySetInnerHTML&&p("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jr(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&p("92"),Array.isArray(t)&&(1>=t.length||p("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function Vr(e,t){var n=t.value;null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function Wr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}var qr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Xr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Xr(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Kr,Zr=void 0,Jr=(Kr=function(e,t){if(e.namespaceURI!==qr.svg||"innerHTML"in e)e.innerHTML=t;else{for((Zr=Zr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=Zr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return Kr(e,t)})}:Kr);function $r(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Qr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ei=["Webkit","ms","Moz","O"];function ti(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=t[n];i=null==o||"boolean"==typeof o||""===o?"":r||"number"!=typeof o||0===o||Qr.hasOwnProperty(i)&&Qr[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Qr).forEach(function(e){ei.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qr[t]=Qr[e]})});var ni=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ri(e,t,n){t&&(ni[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&p("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&p("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||p("61")),null!=t.style&&"object"!=typeof t.style&&p("62",n()))}function ii(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oi=s.thatReturns("");function ai(e,t){var n=Dn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=b[t];for(var r=0;r<t.length;r++){var i=t[r];n.hasOwnProperty(i)&&n[i]||("topScroll"===i?bn("topScroll","scroll",e):"topFocus"===i||"topBlur"===i?(bn("topFocus","focus",e),bn("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===i?(We("cancel",!0)&&bn("topCancel","cancel",e),n.topCancel=!0):"topClose"===i?(We("close",!0)&&bn("topClose","close",e),n.topClose=!0):Cn.hasOwnProperty(i)&&xn(i,Cn[i],e),n[i]=!0)}}function si(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===qr.html&&(r=Xr(e)),r===qr.html?"script"===e?((e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"==typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function ci(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function ui(e,t,n,r){var i=ii(t,n);switch(t){case"iframe":case"object":xn("topLoad","load",e);var o=n;break;case"video":case"audio":for(o in Pn)Pn.hasOwnProperty(o)&&xn(o,Pn[o],e);o=n;break;case"source":xn("topError","error",e),o=n;break;case"img":case"image":case"link":xn("topError","error",e),xn("topLoad","load",e),o=n;break;case"form":xn("topReset","reset",e),xn("topSubmit","submit",e),o=n;break;case"details":xn("topToggle","toggle",e),o=n;break;case"input":xt(e,n),o=_t(e,n),xn("topInvalid","invalid",e),ai(r,"onChange");break;case"option":o=Fr(e,n);break;case"select":Hr(e,n),o=a({},n,{value:void 0}),xn("topInvalid","invalid",e),ai(r,"onChange");break;case"textarea":jr(e,n),o=Gr(e,n),xn("topInvalid","invalid",e),ai(r,"onChange");break;default:o=n}ri(t,o,oi);var c,u=o;for(c in u)if(u.hasOwnProperty(c)){var l=u[c];"style"===c?ti(e,l):"dangerouslySetInnerHTML"===c?null!=(l=l?l.__html:void 0)&&Jr(e,l):"children"===c?"string"==typeof l?("textarea"!==t||""!==l)&&$r(e,l):"number"==typeof l&&$r(e,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(x.hasOwnProperty(c)?null!=l&&ai(r,c):null!=l&&yt(e,c,l,i))}switch(t){case"input":Xe(e),Et(e,n);break;case"textarea":Xe(e),Wr(e);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,null!=(t=n.value)?zr(e,!!n.multiple,t,!1):null!=n.defaultValue&&zr(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=s)}}function li(e,t,n,r,i){var o=null;switch(t){case"input":n=_t(e,n),r=_t(e,r),o=[];break;case"option":n=Fr(e,n),r=Fr(e,r),o=[];break;case"select":n=a({},n,{value:void 0}),r=a({},r,{value:void 0}),o=[];break;case"textarea":n=Gr(e,n),r=Gr(e,r),o=[];break;default:"function"!=typeof n.onClick&&"function"==typeof r.onClick&&(e.onclick=s)}ri(t,r,oi),t=e=void 0;var c=null;for(e in n)if(!r.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var u=n[e];for(t in u)u.hasOwnProperty(t)&&(c||(c={}),c[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(x.hasOwnProperty(e)?o||(o=[]):(o=o||[]).push(e,null));for(e in r){var l=r[e];if(u=null!=n?n[e]:void 0,r.hasOwnProperty(e)&&l!==u&&(null!=l||null!=u))if("style"===e)if(u){for(t in u)!u.hasOwnProperty(t)||l&&l.hasOwnProperty(t)||(c||(c={}),c[t]="");for(t in l)l.hasOwnProperty(t)&&u[t]!==l[t]&&(c||(c={}),c[t]=l[t])}else c||(o||(o=[]),o.push(e,c)),c=l;else"dangerouslySetInnerHTML"===e?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(e,""+l)):"children"===e?u===l||"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(e,""+l):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(x.hasOwnProperty(e)?(null!=l&&ai(i,e),o||u===l||(o=[])):(o=o||[]).push(e,l))}return c&&(o=o||[]).push("style",c),o}function hi(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&bt(e,i),ii(n,r),r=ii(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?ti(e,s):"dangerouslySetInnerHTML"===a?Jr(e,s):"children"===a?$r(e,s):yt(e,a,s,r)}switch(n){case"input":wt(e,i);break;case"textarea":Vr(e,i);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?zr(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?zr(e,!!i.multiple,i.defaultValue,!0):zr(e,!!i.multiple,i.multiple?[]:"",!1))}}function pi(e,t,n,r,i){switch(t){case"iframe":case"object":xn("topLoad","load",e);break;case"video":case"audio":for(var o in Pn)Pn.hasOwnProperty(o)&&xn(o,Pn[o],e);break;case"source":xn("topError","error",e);break;case"img":case"image":case"link":xn("topError","error",e),xn("topLoad","load",e);break;case"form":xn("topReset","reset",e),xn("topSubmit","submit",e);break;case"details":xn("topToggle","toggle",e);break;case"input":xt(e,n),xn("topInvalid","invalid",e),ai(i,"onChange");break;case"select":Hr(e,n),xn("topInvalid","invalid",e),ai(i,"onChange");break;case"textarea":jr(e,n),xn("topInvalid","invalid",e),ai(i,"onChange")}for(var a in ri(t,n,oi),r=null,n)n.hasOwnProperty(a)&&(o=n[a],"children"===a?"string"==typeof o?e.textContent!==o&&(r=["children",o]):"number"==typeof o&&e.textContent!==""+o&&(r=["children",""+o]):x.hasOwnProperty(a)&&null!=o&&ai(i,a));switch(t){case"input":Xe(e),Et(e,n);break;case"textarea":Xe(e),Wr(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(e.onclick=s)}return r}function di(e,t){return e.nodeValue!==t}var fi=Object.freeze({createElement:si,createTextNode:ci,setInitialProperties:ui,diffProperties:li,updateProperties:hi,diffHydratedProperties:pi,diffHydratedText:di,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(wt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=W(r);i||p("90"),Ye(r),wt(r,i)}}}break;case"textarea":Vr(e,n);break;case"select":null!=(t=n.value)&&zr(e,!!n.multiple,t,!1)}}});Le.injectFiberControlledHostComponent(fi);var mi=null,vi=null;function gi(e){this._expirationTime=wi.computeUniqueAsyncExpiration(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function yi(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function _i(e,t,n){this._internalRoot=wi.createContainer(e,t,n)}function xi(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function bi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}gi.prototype.render=function(e){this._defer||p("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new yi;return wi.updateContainerAtExpirationTime(e,t,null,n,r._onCommit),r},gi.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},gi.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||p("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&p("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,wi.flushRoot(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},gi.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},yi.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},yi.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&p("191",n),n()}}},_i.prototype.render=function(e,t){var n=this._internalRoot,r=new yi;return null!==(t=void 0===t?null:t)&&r.then(t),wi.updateContainer(e,n,null,r._onCommit),r},_i.prototype.unmount=function(e){var t=this._internalRoot,n=new yi;return null!==(e=void 0===e?null:e)&&n.then(e),wi.updateContainer(null,t,null,n._onCommit),n},_i.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new yi;return null!==(n=void 0===n?null:n)&&i.then(n),wi.updateContainer(t,r,e,i._onCommit),i},_i.prototype.createBatch=function(){var e=new gi(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime<=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e};var wi=Mr({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yr(null,"");break;default:e=Yr(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}return e},getChildHostContext:function(e,t){return Yr(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){mi=yn;var e=c();if(Bn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,a=-1,s=-1,u=0,l=0,h=e,p=null;t:for(;;){for(var d;h!==t||0!==r&&3!==h.nodeType||(a=o+r),h!==i||0!==n&&3!==h.nodeType||(s=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(d=h.firstChild);)p=h,h=d;for(;;){if(h===e)break t;if(p===t&&++u===r&&(a=o),p===i&&++l===n&&(s=o),null!==(d=h.nextSibling))break;p=(h=p).parentNode}h=d}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;vi={focusedElem:e,selectionRange:t},_n(!1)},resetAfterCommit:function(){var e=vi,t=c(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&l(document.documentElement,n)){if(Bn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var i=n[ie()].length;e=Math.min(r.start,i),r=void 0===r.end?e:Math.min(r.end,i),!t.extend&&e>r&&(i=r,r=e,e=i),i=kn(n,e);var o=kn(n,r);if(i&&o&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)){var a=document.createRange();a.setStart(i.node,i.offset),t.removeAllRanges(),e>r?(t.addRange(a),t.extend(o.node,o.offset)):(a.setEnd(o.node,o.offset),t.addRange(a))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}vi=null,_n(mi),mi=null},createInstance:function(e,t,n,r,i){return(e=si(e,t,n,r))[H]=i,e[G]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){return ui(e,t,n,r),bi(t,n)},prepareUpdate:function(e,t,n,r,i){return li(e,t,n,r,i)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return(e=ci(e,t))[H]=r,e},now:Sr,mutation:{commitMount:function(e,t,n){bi(t,n)&&e.focus()},commitUpdate:function(e,t,n,r,i){e[G]=i,hi(e,t,n,r,i)},resetTextContent:function(e){$r(e,"")},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,i,o){return e[H]=o,e[G]=n,pi(e,t,n,i,r)},hydrateTextInstance:function(e,t,n){return e[H]=n,di(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Ar,cancelDeferredCallback:Rr}),Ei=wi;function Mi(e,t,n,r,i){xi(n)||p("200");var o=n._reactRootContainer;if(o){if("function"==typeof i){var a=i;i=function(){var e=wi.getPublicRootInstance(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new _i(e,!1,t)}(n,r),"function"==typeof i){var s=i;i=function(){var e=wi.getPublicRootInstance(o._internalRoot);s.call(e)}}wi.unbatchedUpdates(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return wi.getPublicRootInstance(o._internalRoot)}function Ti(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return xi(t)||p("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ke=Ei.batchedUpdates,Be=Ei.interactiveUpdates,Fe=Ei.flushInteractiveUpdates;var Si={createPortal:Ti,findDOMNode:function(e){return null==e?null:1===e.nodeType?e:wi.findHostInstance(e)},hydrate:function(e,t,n){return Mi(null,e,t,!0,n)},render:function(e,t,n){return Mi(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&p("38"),Mi(e,t,n,!1,r)},unmountComponentAtNode:function(e){return xi(e)||p("40"),!!e._reactRootContainer&&(wi.unbatchedUpdates(function(){Mi(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ti.apply(void 0,arguments)},unstable_batchedUpdates:wi.batchedUpdates,unstable_deferredUpdates:wi.deferredUpdates,flushSync:wi.flushSync,unstable_flushControlled:wi.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:F,EventPluginRegistry:M,EventPropagators:ne,ReactControlledComponent:Ue,ReactDOMComponentTree:q,ReactDOMEventListener:Mn},unstable_createRoot:function(e,t){return new _i(e,!0,null!=t&&!0===t.hydrate)}};wi.injectIntoDevTools({findFiberByHostInstance:j,bundleType:0,version:"16.3.2",rendererPackageName:"react-dom"});var Ai=Object.freeze({default:Si}),Ri=Ai&&Si||Ai;e.exports=Ri.default?Ri.default:Ri},function(e,t,n){"use strict";n.r(t),n.d(t,"propTypes",function(){return I}),n.d(t,"PropTypes",function(){return I}),n.d(t,"onError",function(){return oe}),n.d(t,"observer",function(){return $}),n.d(t,"Observer",function(){return Q}),n.d(t,"renderReporter",function(){return G}),n.d(t,"componentByNodeRegistery",function(){return H}),n.d(t,"trackComponents",function(){return W}),n.d(t,"useStaticRendering",function(){return q}),n.d(t,"Provider",function(){return ie}),n.d(t,"inject",function(){return k});var r=n(3),i=n(4),o=n.n(i),a=n(8),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=(function(){function e(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value;a instanceof function(e){this.value=e}?Promise.resolve(a.value).then(function(e){r("next",e)},function(e){r("throw",e)}):i(o.done?"return":"normal",o.value)}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise(function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},p=function(){function e(){c(this,e),this.listeners=[]}return u(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(t){return t(e)})}}]),e}(),d={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},f={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},m=Object.defineProperty,v=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,y=Object.getOwnPropertyDescriptor,_=Object.getPrototypeOf,x=_&&_(Object),b=function e(t,n,r){if("string"!=typeof n){if(x){var i=_(n);i&&i!==x&&e(t,i,r)}var o=v(n);g&&(o=o.concat(g(n)));for(var a=0;a<o.length;++a){var s=o[a];if(!(d[s]||f[s]||r&&r[s])){var c=y(n,s);try{m(t,s,c)}catch(e){}}}return t}return t};function w(e){function t(t,n,i,o,a,s){for(var c=arguments.length,u=Array(c>6?c-6:0),l=6;l<c;l++)u[l-6]=arguments[l];return Object(r.untracked)(function(){if(o=o||"<<anonymous>>",s=s||i,null==n[i]){if(t){var r=null===n[i]?"null":"undefined";return new Error("The "+a+" `"+s+"` is marked as required in `"+o+"`, but its value is `"+r+"`.")}return null}return e.apply(void 0,[n,i,o,a,s].concat(u))})}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function E(e){var t=void 0===e?"undefined":s(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function M(e,t){return w(function(n,i,o,a,s){return Object(r.untracked)(function(){if(e&&E(n[i])===t.toLowerCase())return null;var a=void 0;switch(t){case"Array":a=r.isObservableArray;break;case"Object":a=r.isObservableObject;break;case"Map":a=r.isObservableMap;break;default:throw new Error("Unexpected mobxType: "+t)}var c=n[i];if(!a(c)){var u=function(e){var t=E(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}(c),l=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+s+"` of type `"+u+"` supplied to `"+o+"`, expected `mobx.Observable"+t+"`"+l+".")}return null})})}function T(e,t){return w(function(n,i,o,a,s){for(var c=arguments.length,u=Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];return Object(r.untracked)(function(){if("function"!=typeof t)return new Error("Property `"+s+"` of component `"+o+"` has invalid PropType notation.");var r=M(e,"Array")(n,i,o);if(r instanceof Error)return r;for(var c=n[i],l=0;l<c.length;l++)if((r=t.apply(void 0,[c,l,o,a,s+"["+l+"]"].concat(u)))instanceof Error)return r;return null})})}var S=M(!1,"Array"),A=T.bind(null,!1),R=M(!1,"Map"),L=M(!1,"Object"),C=M(!0,"Array"),P=T.bind(null,!0),O=M(!0,"Object"),I=Object.freeze({observableArray:S,observableArrayOf:A,observableMap:R,observableObject:L,arrayOrObservableArray:C,arrayOrObservableArrayOf:P,objectOrObservableObject:O}),N={mobxStores:O};Object.seal(N);var D={contextTypes:{get:function(){return N},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function U(e,t,n){var r,o,a="inject-"+(t.displayName||t.name||t.constructor&&t.constructor.name||"Unknown");n&&(a+="-with-"+n);var s=(o=r=function(n){function r(){var e,t,n;c(this,r);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n=h(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),n.storeRef=function(e){n.wrappedInstance=e},h(n,t)}return l(r,n),u(r,[{key:"render",value:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var o=e(this.context.mobxStores||{},n,this.context)||{};for(var a in o)n[a]=o[a];return function(e){return!(e.prototype&&e.prototype.render)}(t)||(n.ref=this.storeRef),Object(i.createElement)(t,n)}}]),r}(i.Component),r.displayName=a,o);return b(s,t),s.wrappedComponent=t,Object.defineProperties(s,D),s}function k(){var e=void 0;if("function"==typeof arguments[0])return e=arguments[0],function(t){var n=U(e,t);return n.isMobxInjector=!1,(n=$(n)).isMobxInjector=!0,n};for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=function(e){return function(t,n){return e.forEach(function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}}),n}}(t),function(n){return U(e,n,t.join("-"))}}var B=!1,F=!1,z=!1,H="undefined"!=typeof WeakMap?new WeakMap:void 0,G=new p;function j(e){if(a.findDOMNode)try{return Object(a.findDOMNode)(e)}catch(e){return null}return null}function V(e){var t=j(e);t&&H&&H.set(t,e),G.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}function W(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");B||(B=!0)}function q(e){F=e}var X=new p;function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e[t],i=J[t],o=r?!0===n?function(){i.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),i.apply(this,arguments)}:i;e[t]=o}function K(e,t){if(Z(e,t))return!0;if("object"!==(void 0===e?"undefined":s(e))||null===e||"object"!==(void 0===t?"undefined":s(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!hasOwnProperty.call(t,n[i])||!Z(e[n[i]],t[n[i]]))return!1;return!0}function Z(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var J={componentWillMount:function(){var e=this;if(!0!==F){var t=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",n=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalFiber&&this._reactInternalFiber._debugID,o=!1,a=!1;h.call(this,"props"),h.call(this,"state");var s=this.render.bind(this),c=null,u=!1,l=function(){u=!1;var t=void 0,n=void 0;if(c.track(function(){B&&(e.__$mobRenderStart=Date.now());try{n=Object(r._allowStateChanges)(!1,s)}catch(e){t=e}B&&(e.__$mobRenderEnd=Date.now())}),t)throw X.emit(t),t;return n};this.render=function(){return(c=new r.Reaction(t+"#"+n+".render()",function(){if(!u&&(u=!0,"function"==typeof e.componentWillReact&&e.componentWillReact(),!0!==e.__$mobxIsUnmounted)){var t=!0;try{a=!0,o||i.Component.prototype.forceUpdate.call(e),t=!1}finally{a=!1,t&&c.dispose()}}})).reactComponent=e,l.$mobx=c,e.render=l,l()}}function h(e){var t=this[e],n=Object(r.createAtom)("reactive "+e);Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:function(){return n.reportObserved(),t},set:function(e){a||K(t,e)?t=e:(t=e,o=!0,n.reportChanged(),o=!1)}})}},componentWillUnmount:function(){if(!0!==F&&(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0,B)){var e=j(this);e&&H&&H.delete(e),G.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){B&&V(this)},componentDidUpdate:function(){B&&V(this)},shouldComponentUpdate:function(e,t){return F&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||!K(this.props,e)}};function $(e,t){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return z||(z=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),t?k.apply(null,e)($(t)):function(t){return $(e,t)};var n,r,o=e;if(!0===o.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),!("function"!=typeof o||o.prototype&&o.prototype.render||o.isReactClass||i.Component.isPrototypeOf(o)))return $((r=n=function(e){function t(){return c(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){return o.call(this,this.props,this.context)}}]),t}(i.Component),n.displayName=o.displayName||o.name,n.contextTypes=o.contextTypes,n.propTypes=o.propTypes,n.defaultProps=o.defaultProps,r));if(!o)throw new Error("Please pass a valid component to 'observer'");return function(e){Y(e,"componentWillMount",!0),["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(t){Y(e,t)}),e.shouldComponentUpdate||(e.shouldComponentUpdate=J.shouldComponentUpdate)}(o.prototype||o),o.isMobXReactObserver=!0,o}var Q=$(function(e){var t=e.children,n=e.inject,r=e.render,i=t||r;if(void 0===i)return null;if(!n)return i();var a=k(n)(i);return o.a.createElement(a,null)});Q.displayName="Observer";var ee,te,ne=function(e,t,n,r,i){var o="children"===t?"render":"children";return"function"==typeof e[t]&&"function"==typeof e[o]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!=typeof e[t]&&"function"!=typeof e[o]?new Error("Invalid prop `"+i+"` of type `"+s(e[t])+"` supplied to `"+n+"`, expected `function`."):void 0};Q.propTypes={render:ne,children:ne};var re={children:!0,key:!0,ref:!0},ie=(te=ee=function(e){function t(){return c(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){return i.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={},t=this.context.mobxStores;if(t)for(var n in t)e[n]=t[n];for(var r in this.props)re[r]||"suppressChangedStoreWarning"===r||(e[r]=this.props[r]);return{mobxStores:e}}},{key:"componentWillReceiveProps",value:function(e){if(Object.keys(e).length!==Object.keys(this.props).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var t in e)re[t]||this.props[t]===e[t]||console.warn("MobX Provider: Provided store '"+t+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),t}(i.Component),ee.contextTypes={mobxStores:O},ee.childContextTypes={mobxStores:O.isRequired},te);if(!i.Component)throw new Error("mobx-react requires React to be available");if(!r.spy)throw new Error("mobx-react requires mobx to be available");"function"==typeof a.unstable_batchedUpdates&&Object(r.configure)({reactionScheduler:a.unstable_batchedUpdates});var oe=function(e){return X.on(e)};if("object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":s(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var ae={spy:r.spy,extras:{getDebugName:r.getDebugName}},se={renderReporter:G,componentByNodeRegistery:H,trackComponents:W};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(se,ae)}},function(e,t,n){var r;
/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(i.apply(null,r));else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}void 0!==e&&e.exports?e.exports=i:void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(12),i=n(13),o=n(54);e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){e.exports=n(55)()},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_dec,_class,_react=__webpack_require__(4),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(56),_propTypes2=_interopRequireDefault(_propTypes),_classnames=__webpack_require__(53),_classnames2=_interopRequireDefault(_classnames),_mobxReact=__webpack_require__(52),_reactHotLoader=__webpack_require__(0),_Game=__webpack_require__(21),_Game2=_interopRequireDefault(_Game),_State=__webpack_require__(17),_State2=_interopRequireDefault(_State),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Debug=(_dec=(0,_reactHotLoader.hot)(module),_dec(_class=(0,_mobxReact.observer)(_class=function(_Component){function Debug(){return _classCallCheck(this,Debug),_possibleConstructorReturn(this,(Debug.__proto__||Object.getPrototypeOf(Debug)).apply(this,arguments))}return _inherits(Debug,_Component),_createClass(Debug,[{key:"render",value:function(){var e=_State2.default.isPlaying,t=_State2.default.frame,n=_State2.default.delta,r=_State2.default.elapsed,i=this.props.game;return i?_react2.default.createElement("div",null,_react2.default.createElement("div",null,_react2.default.createElement("pre",{className:"code"},_react2.default.createElement("code",null,"frame:   ",t,"\n","delta:   ",n.toFixed(4),"\n","elapsed: ",r.toFixed(2),"\n"))),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",{className:"form-label"},"Controls"),_react2.default.createElement("div",{className:"btn-group btn-group-block"},_react2.default.createElement("button",{className:(0,_classnames2.default)("btn",{"btn-primary":e,"btn-secondary":!e}),onClick:_State2.default.start},_react2.default.createElement("i",{className:"icon icon-play"})),_react2.default.createElement("button",{className:(0,_classnames2.default)("btn",{"btn-primary":!e,"btn-secondary":e}),onClick:_State2.default.stop},_react2.default.createElement("i",{className:"icon icon-pause"})),_react2.default.createElement("button",{className:"btn btn-secondary",onClick:_State2.default.step,disabled:e},_react2.default.createElement("i",{className:"icon icon-step-forward"})))),_react2.default.createElement("div",{className:"form-group horizontal"},_react2.default.createElement("label",{className:"form-label"},"Pixel scale"),_react2.default.createElement("input",{className:"form-input",placeholder:"1",min:1,max:10,value:i.pixelScale,type:"number",onChange:function(e){return i.pixelScale=e.target.value}})),_react2.default.createElement("div",{className:"form-group horizontal"},_react2.default.createElement("label",{className:"form-label"},"Level"),_react2.default.createElement("select",{className:"form-select",selected:i.level,onChange:function(e){return i.level=e.target.value}},_react2.default.createElement("option",{value:"Playground"},"Playground"),_react2.default.createElement("optgroup",{label:"Debug"},_react2.default.createElement("option",{value:"BoxBox"},"BoxBox"),_react2.default.createElement("option",{value:"BoxPoint"},"BoxPoint"),_react2.default.createElement("option",{value:"BoxSegment"},"BoxSegment"),_react2.default.createElement("option",{value:"SweptBox"},"SweptBox")))),_react2.default.createElement("div",null,_react2.default.createElement("pre",{className:"code"},_react2.default.createElement("code",null,_State2.default.messages.reverse().join("\n"))))):null}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Debug}(_react.Component))||_class)||_class),reactHotLoader,leaveModule;exports.default=Debug,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Debug,"Debug","/Users/andre/Projects/shooter/src/Debug.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_Box=__webpack_require__(6),_Box2=_interopRequireDefault(_Box),_Point=__webpack_require__(11),_Point2=_interopRequireDefault(_Point),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var SweptBoxLevel=(_temp=_class=function(_THREE$Group){function SweptBoxLevel(e){_classCallCheck(this,SweptBoxLevel);var t=_possibleConstructorReturn(this,(SweptBoxLevel.__proto__||Object.getPrototypeOf(SweptBoxLevel)).call(this));return t.game=e,t.add(new THREE.GridHelper(10,10)),t.angle=0,t.delta=new THREE.Vector3,t.velocity=new THREE.Vector3(3,0,2.4),t.box=new _Box2.default(new THREE.Vector3(.5,.01,.5)),t.walls=[new _Box2.default(new THREE.Vector3(.5,.01,3)),new _Box2.default(new THREE.Vector3(.5,.01,3)),new _Box2.default(new THREE.Vector3(5.5,.01,.5)),new _Box2.default(new THREE.Vector3(5.5,.01,.5))],t.walls[0].position.copy(new THREE.Vector3(-3,0,0)),t.walls[1].position.copy(new THREE.Vector3(3,0,0)),t.walls[2].position.copy(new THREE.Vector3(0,0,-1.75)),t.walls[3].position.copy(new THREE.Vector3(0,0,1.75)),t.box.createHelper(),t.walls[0].createHelper(),t.walls[1].createHelper(),t.walls[2].createHelper(),t.walls[3].createHelper(),t.add(t.box.helper),t.add(t.walls[0].helper),t.add(t.walls[1].helper),t.add(t.walls[2].helper),t.add(t.walls[3].helper),t.frames=0,t}return _inherits(SweptBoxLevel,_THREE$Group),_createClass(SweptBoxLevel,[{key:"update",value:function(e,t){this.hit&&(this.remove(this.hit.helper),this.hit=null),this.delta.copy(this.velocity.clone().multiplyScalar(e));var n=this.box.sweepInto(this.walls,this.delta);n.hit&&(this.game.state.messages.push(n.hit.position.toArray()),this.velocity.reflect(n.hit.normal)),this.box.position.copy(n.position),this.box.updateHelper(),this.frames+=1}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),SweptBoxLevel}(THREE.Group),_class.id="SweptBox",_temp),reactHotLoader,leaveModule;exports.default=SweptBoxLevel,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(SweptBoxLevel,"SweptBoxLevel","/Users/andre/Projects/shooter/src/Level/debug/SweptBox.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_Box=__webpack_require__(6),_Box2=_interopRequireDefault(_Box),_Segment=__webpack_require__(16),_Segment2=_interopRequireDefault(_Segment),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var BoxSegmentLevel=(_temp=_class=function(_THREE$Group){function BoxSegmentLevel(e){_classCallCheck(this,BoxSegmentLevel);var t=_possibleConstructorReturn(this,(BoxSegmentLevel.__proto__||Object.getPrototypeOf(BoxSegmentLevel)).call(this));return t.game=e,t.angle=0,t.segment=new _Segment2.default,t.box=new _Box2.default(new THREE.Vector3(1,.001,1)),t.segment.createHelper(),t.box.createHelper(),t.add(t.segment.helper),t.add(t.box.helper),t}return _inherits(BoxSegmentLevel,_THREE$Group),_createClass(BoxSegmentLevel,[{key:"update",value:function(e,t){this.hit&&(this.remove(this.hit.helper),this.hit=null),this.angle+=.25*Math.PI*e;var n=new THREE.Vector3(4*Math.cos(.6*this.angle),0,4*Math.sin(this.angle)),r=new THREE.Vector3(2*Math.sin(this.angle),0,2*Math.cos(this.angle)).clone().sub(n);this.segment.position.copy(n),this.segment.delta.copy(r),this.segment.updateHelper(),this.hit=this.box.intersectSegment(this.segment),this.hit&&this.add(this.hit.createHelper())}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),BoxSegmentLevel}(THREE.Group),_class.id="BoxSegment",_temp),reactHotLoader,leaveModule;exports.default=BoxSegmentLevel,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(BoxSegmentLevel,"BoxSegmentLevel","/Users/andre/Projects/shooter/src/Level/debug/BoxSegment.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_Box=__webpack_require__(6),_Box2=_interopRequireDefault(_Box),_Point=__webpack_require__(11),_Point2=_interopRequireDefault(_Point),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var BoxPointLevel=(_temp=_class=function(_THREE$Group){function BoxPointLevel(e){_classCallCheck(this,BoxPointLevel);var t=_possibleConstructorReturn(this,(BoxPointLevel.__proto__||Object.getPrototypeOf(BoxPointLevel)).call(this));return t.game=e,t.angle=0,t.point=new _Point2.default(new THREE.Vector3(-.25,0,.2)),t.box=new _Box2.default(new THREE.Vector3(2,.01,2)),t.point.createHelper(),t.box.createHelper(),t.add(t.point.helper),t.add(t.box.helper),t}return _inherits(BoxPointLevel,_THREE$Group),_createClass(BoxPointLevel,[{key:"update",value:function(e,t){this.hit&&(this.remove(this.hit.helper),this.hit=null),this.angle+=.25*Math.PI*e,this.point.position.x=1.5*Math.cos(2.2*this.angle),this.point.position.z=1.75*Math.sin(this.angle),this.point.updateHelper(),this.hit=this.box.intersectPoint(this.point),this.hit&&this.add(this.hit.createHelper())}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),BoxPointLevel}(THREE.Group),_class.id="BoxPoint",_temp),reactHotLoader,leaveModule;exports.default=BoxPointLevel,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(BoxPointLevel,"BoxPointLevel","/Users/andre/Projects/shooter/src/Level/debug/BoxPoint.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),enterModule;function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Sweep=function(){function Sweep(){_classCallCheck(this,Sweep),this.hit=null,this.position=new THREE.Vector3,this.time=1}return _createClass(Sweep,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Sweep}(),reactHotLoader,leaveModule;exports.default=Sweep,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Sweep,"Sweep","/Users/andre/Projects/shooter/src/Intersect/Sweep.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(4))&&"object"==typeof r&&"default"in r?r.default:r,o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},s=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return i.Children.only(this.props.children)},t}(i.Component);t.AppContainer=s,t.hot=function(){return function(e){return e}},t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){}},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_helpers=__webpack_require__(5),enterModule;function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var Hit=function(){function Hit(e){_classCallCheck(this,Hit),this.collider=e,this.position=new THREE.Vector3,this.delta=new THREE.Vector3,this.normal=new THREE.Vector3,this.time=0}return _createClass(Hit,[{key:"createHelper",value:function(){return this.helper=new THREE.ArrowHelper(this.delta.clone().multiplyScalar(-1),this.position,this.delta.clone().length(),(0,_helpers.randomColor)()),this.helper}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Hit}(),reactHotLoader,leaveModule;exports.default=Hit,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(Hit,"Hit","/Users/andre/Projects/shooter/src/Intersect/Hit.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_class,_temp,_three=__webpack_require__(2),THREE=_interopRequireWildcard(_three),_Box=__webpack_require__(6),_Box2=_interopRequireDefault(_Box),_Point=__webpack_require__(11),_Point2=_interopRequireDefault(_Point),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(0).enterModule,enterModule&&enterModule(module);var BoxBoxLevel=(_temp=_class=function(_THREE$Group){function BoxBoxLevel(e){_classCallCheck(this,BoxBoxLevel);var t=_possibleConstructorReturn(this,(BoxBoxLevel.__proto__||Object.getPrototypeOf(BoxBoxLevel)).call(this));return t.game=e,t.angle=0,t.box1=new _Box2.default(new THREE.Vector3(4,.01,1)),t.box2=new _Box2.default(new THREE.Vector3(1,.01,1)),t.box2.position.copy(new THREE.Vector3(1,0,.7)),t.box1.createHelper(),t.box2.createHelper(),t.add(t.box1.helper),t.add(t.box2.helper),t}return _inherits(BoxBoxLevel,_THREE$Group),_createClass(BoxBoxLevel,[{key:"update",value:function(e,t){this.hit&&(this.remove(this.hit.helper),this.hit=null),this.angle+=.125*Math.PI*e,this.box2.position.x=3*Math.cos(this.angle+20),this.box2.position.z=1.5*Math.sin(1.7*this.angle),this.box2.updateHelper(),this.hit=this.box1.intersectBox(this.box2),this.hit&&this.add(this.hit.createHelper())}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),BoxBoxLevel}(THREE.Group),_class.id="BoxBox",_temp),reactHotLoader,leaveModule;exports.default=BoxBoxLevel,reactHotLoader=__webpack_require__(0).default,leaveModule=__webpack_require__(0).leaveModule,reactHotLoader&&(reactHotLoader.register(BoxBoxLevel,"BoxBoxLevel","/Users/andre/Projects/shooter/src/Level/debug/BoxBox.js"),leaveModule(module))}).call(this,__webpack_require__(1)(module))},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,u=0,l=[],h=n(65);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(y(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(y(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function d(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function f(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),g(t,e.attrs),f(e,t),t}function g(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function y(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=u++;n=c||(c=v(t)),r=b.bind(null,n,a,!1),i=b.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),f(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=h(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){m(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=d(e,t);return p(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}for(e&&p(d(e,t),t),i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var _,x=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function b(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){(e.exports=n(67)(!1)).push([e.i,"body, html {\n  padding: 0;\n  margin: 0; }\n\nbody {\n  height: 100vh; }\n\n.container {\n  background-color: #191119;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center; }\n",""])},function(e,t,n){var r=n(68);"string"==typeof r&&(r=[[e.i,r,""]]);n(66)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,t){"object"==typeof e&&(e.exports=function(){var e=Date.now(),t=e,n=0,r=1/0,i=0,o=0,a=1/0,s=0,c=0,u=0,l=document.createElement("div");l.id="stats",l.addEventListener("mousedown",function(e){e.preventDefault(),y(++u%2)},!1),l.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",l.appendChild(h);var p=document.createElement("div");p.id="fpsText",p.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",p.innerHTML="FPS",h.appendChild(p);var d=document.createElement("div");for(d.id="fpsGraph",d.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(d);74>d.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",d.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",l.appendChild(m);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",m.appendChild(v);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(g);74>g.children.length;)(f=document.createElement("span")).style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(f);var y=function(e){switch(u=e){case 0:h.style.display="block",m.style.display="none";break;case 1:h.style.display="none",m.style.display="block"}};return{REVISION:12,domElement:l,setMode:y,begin:function(){e=Date.now()},end:function(){var u=Date.now();n=u-e,r=Math.min(r,n),i=Math.max(i,n),v.textContent=n+" MS ("+r+"-"+i+")";var l=Math.min(30,30-n/200*30);return g.appendChild(g.firstChild).style.height=l+"px",c++,u>t+1e3&&(o=Math.round(1e3*c/(u-t)),a=Math.min(a,o),s=Math.max(s,o),p.textContent=o+" FPS ("+a+"-"+s+")",l=Math.min(30,30-o/100*30),d.appendChild(d.firstChild).style.height=l+"px",t=u,c=0),u},update:function(){e=this.end()}}})},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,h=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&d())}function d(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||l||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";
/** @license React v16.3.2
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(20),i=n(13),o=n(19),a=n(12),s="function"==typeof Symbol&&Symbol.for,c=s?Symbol.for("react.element"):60103,u=s?Symbol.for("react.portal"):60106,l=s?Symbol.for("react.fragment"):60107,h=s?Symbol.for("react.strict_mode"):60108,p=s?Symbol.for("react.provider"):60109,d=s?Symbol.for("react.context"):60110,f=s?Symbol.for("react.async_mode"):60111,m=s?Symbol.for("react.forward_ref"):60112,v="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);i(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function _(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||y}function x(){}function b(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||y}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&g("85"),this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=_.prototype;var w=b.prototype=new x;w.constructor=b,r(w,_.prototype),w.isPureReactComponent=!0;var E={current:null},M=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r=void 0,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)M.call(t,r)&&!T.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:c,type:e,key:o,ref:a,props:i,_owner:E.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===c}var R=/\/+/g,L=[];function C(e,t,n,r){if(L.length){var i=L.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>L.length&&L.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case c:case u:o=!0}}if(o)return n(r,e,""===t?"."+I(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){var s=t+I(i=e[a],a);o+=O(i,s,n,r)}else if("function"==typeof(s=null===e||void 0===e?null:"function"==typeof(s=v&&e[v]||e["@@iterator"])?s:null))for(e=s.call(e),a=0;!(i=e.next()).done;)o+=O(i=i.value,s=t+I(i,a++),n,r);else"object"===i&&g("31","[object Object]"==(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return o}function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function N(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,a.thatReturnsArgument):null!=e&&(A(e)&&(t=i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(R,"$&/")+"/")+n,e={$$typeof:c,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function U(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(R,"$&/")+"/"),t=C(t,o,r,i),null==e||O(e,"",D,t),P(t)}var k={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=C(null,null,t,n),null==e||O(e,"",N,t),P(t)},count:function(e){return null==e?0:O(e,"",a.thatReturnsNull,null)},toArray:function(e){var t=[];return U(e,t,null,a.thatReturnsArgument),t},only:function(e){return A(e)||g("143"),e}},createRef:function(){return{current:null}},Component:_,PureComponent:b,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:m,render:e}},Fragment:l,StrictMode:h,unstable_AsyncMode:f,createElement:S,cloneElement:function(e,t,n){(null===e||void 0===e)&&g("267",e);var i=void 0,o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,u=E.current),void 0!==t.key&&(a=""+t.key);var l=void 0;for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)M.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==l?l[i]:t[i])}if(1==(i=arguments.length-2))o.children=n;else if(1<i){l=Array(i);for(var h=0;h<i;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:c,type:e.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(e){var t=S.bind(null,e);return t.type=e,t},isValidElement:A,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:E,assign:r}},B=Object.freeze({default:k}),F=B&&k||B;e.exports=F.default?F.default:F},function(e,t,n){"use strict";var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),o=(r=n(21))&&r.__esModule?r:{default:r};window.THREE=i,window.game=new o.default(document.querySelector(".container"))}]);